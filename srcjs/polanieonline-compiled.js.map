{
"version":3,
"file":"srcjs/polanieonline-compiled.js",
"lineCount":9574,
"mappings":"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",
"sources":["srcjs/stendhal/license.js"," [synthetic:es6/util/arrayiterator] "," [synthetic:es6/util/makeiterator] "," [synthetic:es6/util/arrayfromiterable] "," [synthetic:es6/util/arrayfromiterator] "," [synthetic:util/objectcreate] "," [synthetic:util/defineproperty] "," [synthetic:util/global] "," [synthetic:util/polyfill] "," [synthetic:es6/util/construct] "," [synthetic:es6/util/setprototypeof] "," [synthetic:es6/util/inherits] "," [synthetic:es6/util/restarguments] "," [synthetic:es6/reflect/reflect] "," [synthetic:es6/reflect/construct] "," [synthetic:es6/reflect/setprototypeof] "," [synthetic:es6/symbol] "," [synthetic:util/owns] "," [synthetic:es6/weakmap] "," [synthetic:es6/map] "," [synthetic:es6/util/iteratorfromarray] "," [synthetic:es6/array/entries] "," [synthetic:es6/object/is] "," [synthetic:es6/array/includes] "," [synthetic:util/checkstringargs] "," [synthetic:es6/string/includes] "," [synthetic:es6/string/startswith] "," [synthetic:es6/array/keys] "," [synthetic:es6/number/isnan] "," [synthetic:es6/array/from] "," [synthetic:es6/math/trunc] "," [synthetic:es6/string/endswith] "," [synthetic:es6/set] "," [synthetic:es6/promise/promise] "," [synthetic:es6/array/fill] "," [synthetic:es6/typedarray/fill] "," [synthetic:es6/number/parseint] "," [synthetic:es6/number/parsefloat] ","build/js/marauroa.js","build/js/client-framework.js","build/js/message-factory.js","build/js/perception.js","build/js/rpfactory.js","build/js/inflate.js","build/js/deserializer.js","build/js/build.js","srcjs/jsxgraph-util.js","srcjs/stendhal/data/sha3.js","build/ts/PerceptionListener.js","srcjs/stendhal/PerceptionListener.ts","srcjs/stendhal/util/SessionManager.ts","./build/ts/ui/toolkit/Component.js","srcjs/stendhal/ui/toolkit/Component.ts","./build/ts/ui/SoundManager.js","srcjs/stendhal/ui/SoundManager.ts","./build/ts/ui/toolkit/FloatingWindow.js","srcjs/stendhal/ui/toolkit/FloatingWindow.ts","srcjs/stendhal/util/ConfigManager.ts","./build/ts/ui/toolkit/SingletonFloatingWindow.js","srcjs/stendhal/ui/toolkit/SingletonFloatingWindow.ts","./build/ts/ui/UI.js","srcjs/stendhal/ui/UI.ts","srcjs/stendhal/ui/dialog/TravelLogDialog.ts","./build/ts/ui/UIComponentEnum.js","srcjs/stendhal/ui/UIComponentEnum.ts","./build/ts/util/Chat.js","srcjs/stendhal/util/Chat.ts","srcjs/stendhal/ui/component/ChatLogComponent.ts","srcjs/stendhal/ui/ViewPort.ts","./build/ts/event/RPEvent.js","srcjs/stendhal/event/RPEvent.ts","./build/ts/event/ChatOptionsEvent.js","srcjs/stendhal/event/ChatOptionsEvent.ts","./build/ts/ui/dialog/ImageViewerDialog.js","srcjs/stendhal/ui/dialog/ImageViewerDialog.ts","./build/ts/event/ExamineEvent.js","srcjs/stendhal/event/ExamineEvent.ts","./build/ts/event/GroupChangeEvent.js","srcjs/stendhal/event/GroupChangeEvent.ts","./build/ts/event/GroupInviteEvent.js","srcjs/stendhal/event/GroupInviteEvent.ts","srcjs/stendhal/ui/component/GroupPanelComponent.ts","./build/ts/ui/toolkit/DialogContentComponent.js","srcjs/stendhal/ui/toolkit/DialogContentComponent.ts","./build/ts/ui/dialog/TravelLogDialog.js","./build/ts/event/ProgressStatusEvent.js","srcjs/stendhal/event/ProgressStatusEvent.ts","srcjs/stendhal/ui/HTMLManager.ts","./build/ts/ui/dialog/ActionContextMenu.js","srcjs/stendhal/ui/dialog/ActionContextMenu.ts","srcjs/stendhal/entity/RPObject.ts","./build/ts/ui/dialog/DropQuantitySelectorDialog.js","srcjs/stendhal/ui/dialog/DropQuantitySelectorDialog.ts","./build/ts/ui/component/ItemContainerImplementation.js","srcjs/stendhal/ui/component/ItemContainerImplementation.ts","srcjs/stendhal/entity/Item.ts","srcjs/stendhal/data/SpriteStore.ts","srcjs/stendhal/ui/TouchHandler.ts","./build/ts/ui/component/ItemInventoryComponent.js","srcjs/stendhal/ui/component/ItemInventoryComponent.ts","srcjs/stendhal/ui/Inventory.ts","./build/ts/ui/dialog/TradeDialog.js","srcjs/stendhal/ui/dialog/TradeDialog.ts","./build/ts/event/TradeEvent.js","srcjs/stendhal/event/TradeEvent.ts","./build/ts/util/SoundId.js","srcjs/stendhal/util/SoundId.ts","build/ts/EventRegistry.js","srcjs/stendhal/EventRegistry.ts","srcjs/stendhal/entity/RPEntity.ts","srcjs/stendhal/util/Nature.ts","./build/ts/action/SlashAction.js","srcjs/stendhal/action/SlashAction.ts","./build/ts/ui/component/ShowFloatingWindowComponent.js","srcjs/stendhal/ui/component/ShowFloatingWindowComponent.ts","./build/ts/action/DebugAction.js","srcjs/stendhal/action/DebugAction.ts","./build/ts/action/OpenWebsiteAction.js","srcjs/stendhal/action/OpenWebsiteAction.ts","./build/ts/ui/dialog/SettingsDialog.js","srcjs/stendhal/ui/dialog/SettingsDialog.ts","./build/ts/action/SettingsAction.js","srcjs/stendhal/action/SettingsAction.ts","build/ts/SlashActionRepo.js","srcjs/stendhal/SlashActionRepo.ts","srcjs/stendhal/data/EmojiStore.ts","./build/ts/util/ConfigManager.js","srcjs/stendhal/ui/component/ChatInputComponent.ts","./build/ts/util/SessionManager.js","./build/ts/data/Paths.js","srcjs/stendhal/data/Paths.ts","./build/ts/util/JSONLoader.js","srcjs/stendhal/util/JSONLoader.ts","./build/ts/data/TileStore.js","srcjs/stendhal/data/TileStore.ts","./build/ts/util/WeatherRenderer.js","srcjs/stendhal/util/WeatherRenderer.ts","./build/ts/data/CStatus.js","srcjs/stendhal/data/CStatus.ts","./build/ts/data/CacheManager.js","srcjs/stendhal/data/CacheManager.ts","./build/ts/data/EmojiStore.js","./build/ts/data/GroupManager.js","srcjs/stendhal/data/GroupManager.ts","./build/ts/landscape/CombinedTileset.js","srcjs/stendhal/landscape/CombinedTileset.ts","./build/ts/util/MapOfSets.js","srcjs/stendhal/util/MapOfSets.ts","./build/ts/landscape/CombinedTilesetImageLoader.js","srcjs/stendhal/landscape/CombinedTilesetImageLoader.ts","./build/ts/landscape/CombinedTilesetFactory.js","srcjs/stendhal/landscape/CombinedTilesetFactory.ts","./build/ts/landscape/LandscapeRenderer.js","srcjs/stendhal/landscape/LandscapeRenderer.ts","srcjs/stendhal/landscape/LandscapeRenderingStrategy.ts","./build/ts/landscape/LandscapeRenderingStrategy.js","./build/ts/data/ImagePreloader.js","srcjs/stendhal/data/ImagePreloader.ts","./build/ts/landscape/IndividualTilesetRenderingStrategy.js","srcjs/stendhal/landscape/IndividualTilesetRenderingStrategy.ts","./build/ts/data/Map.js","srcjs/stendhal/data/Map.ts","srcjs/stendhal/entity/Ground.ts","./build/ts/data/OutfitStore.js","srcjs/stendhal/data/OutfitStore.ts","./build/ts/data/SpriteStore.js","srcjs/stendhal/ui/dialog/outfit/OutfitPartSelector.ts","./build/ts/ui/HTMLManager.js","./build/ts/ui/Inventory.js","./build/ts/ui/KeyHandler.js","srcjs/stendhal/ui/KeyHandler.ts","srcjs/stendhal/entity/User.ts","./build/ts/entity/RPObject.js","./build/ts/entity/Entity.js","srcjs/stendhal/entity/Entity.ts","./build/ts/entity/InvisibleEntity.js","srcjs/stendhal/entity/InvisibleEntity.ts","./build/ts/entity/LoopedSoundSource.js","srcjs/stendhal/entity/LoopedSoundSource.ts","srcjs/stendhal/ui/LoopedSoundSourceManager.ts","./build/ts/ui/LoopedSoundSourceManager.js","./build/ts/ui/TouchHandler.js","./build/ts/ui/joystick/JoystickBase.js","srcjs/stendhal/ui/joystick/JoystickBase.ts","./build/ts/ui/joystick/DirectionPad.js","srcjs/stendhal/ui/joystick/DirectionPad.ts","./build/ts/ui/joystick/Joystick.js","srcjs/stendhal/ui/joystick/Joystick.ts","./build/ts/sprite/TextBubble.js","srcjs/stendhal/sprite/TextBubble.ts","./build/ts/util/BackgroundPainter.js","srcjs/stendhal/util/BackgroundPainter.ts","./build/ts/sprite/AchievementBanner.js","srcjs/stendhal/sprite/AchievementBanner.ts","./build/ts/util/Color.js","srcjs/stendhal/util/Color.ts","./build/ts/util/NotificationType.js","srcjs/stendhal/util/NotificationType.ts","./build/ts/util/Speech.js","srcjs/stendhal/util/Speech.ts","./build/ts/sprite/NotificationBubble.js","srcjs/stendhal/sprite/NotificationBubble.ts","./build/ts/sprite/SpeechBubble.js","srcjs/stendhal/sprite/SpeechBubble.ts","./build/ts/ui/ViewPort.js","build/ts/SingletonRepo.js","srcjs/stendhal/SingletonRepo.ts","./build/ts/entity/Ground.js","./build/ts/entity/Zone.js","srcjs/stendhal/entity/Zone.ts","srcjs/stendhal/Client.ts","./build/ts/ui/dialog/ApplicationMenuDialog.js","srcjs/stendhal/ui/dialog/ApplicationMenuDialog.ts","./build/ts/ui/dialog/ChooseCharacterDialog.js","srcjs/stendhal/ui/dialog/ChooseCharacterDialog.ts","./build/ts/ui/dialog/CreateAccountDialog.js","srcjs/stendhal/ui/dialog/CreateAccountDialog.ts","./build/ts/ui/dialog/LoginDialog.js","srcjs/stendhal/ui/dialog/LoginDialog.ts","./build/ts/ui/toolkit/Panel.js","srcjs/stendhal/ui/toolkit/Panel.ts","./build/ts/ui/toolkit/TabPanelComponent.js","srcjs/stendhal/ui/toolkit/TabPanelComponent.ts","./build/ts/ui/component/BagComponent.js","srcjs/stendhal/ui/component/BagComponent.ts","./build/ts/ui/component/BuddyListComponent.js","srcjs/stendhal/ui/component/BuddyListComponent.ts","./build/ts/ui/dialog/ChatOptionsDialog.js","srcjs/stendhal/ui/dialog/ChatOptionsDialog.ts","./build/ts/ui/dialog/EmojiMapDialog.js","srcjs/stendhal/ui/dialog/EmojiMapDialog.ts","./build/ts/ui/component/ChatInputComponent.js","./build/ts/ui/component/ChatLogComponent.js","./build/ts/ui/component/GroupMemberComponent.js","srcjs/stendhal/ui/component/GroupMemberComponent.ts","./build/ts/ui/component/GroupPanelComponent.js","./build/ts/ui/component/KeyringComponent.js","srcjs/stendhal/ui/component/KeyringComponent.ts","./build/ts/util/Direction.js","srcjs/stendhal/util/Direction.ts","./build/ts/util/MathUtil.js","srcjs/stendhal/util/MathUtil.ts","srcjs/stendhal/entity/ActiveEntity.ts","./build/ts/entity/ActiveEntity.js","./build/ts/util/Nature.js","./build/ts/sprite/TextSprite.js","srcjs/stendhal/sprite/TextSprite.ts","./build/ts/sprite/Floater.js","srcjs/stendhal/sprite/Floater.ts","./build/ts/sprite/EmojiSprite.js","srcjs/stendhal/sprite/EmojiSprite.ts","./build/ts/sprite/action/ActionSprite.js","srcjs/stendhal/sprite/action/ActionSprite.ts","./build/ts/sprite/action/BarehandAttackSprite.js","srcjs/stendhal/sprite/action/BarehandAttackSprite.ts","./build/ts/sprite/action/MeleeAttackSprite.js","srcjs/stendhal/sprite/action/MeleeAttackSprite.ts","./build/ts/sprite/action/RangedAttackSprite.js","srcjs/stendhal/sprite/action/RangedAttackSprite.ts","./build/ts/entity/RPEntity.js","./build/ts/entity/Player.js","srcjs/stendhal/entity/Player.ts","./build/ts/ui/component/MiniMapComponent.js","srcjs/stendhal/ui/component/MiniMapComponent.ts","./build/ts/ui/component/ZoneInfoComponent.js","srcjs/stendhal/ui/component/ZoneInfoComponent.ts","./build/ts/ui/component/PlayerEquipmentComponent.js","srcjs/stendhal/ui/component/PlayerEquipmentComponent.ts","./build/ts/ui/component/StatusesListComponent.js","srcjs/stendhal/ui/component/StatusesListComponent.ts","./build/ts/ui/component/StatBarComponent.js","srcjs/stendhal/ui/component/StatBarComponent.ts","./build/ts/ui/component/KarmaBarComponent.js","srcjs/stendhal/ui/component/KarmaBarComponent.ts","./build/ts/entity/ItemMap.js","srcjs/stendhal/entity/ItemMap.ts","./build/ts/entity/Item.js","./build/ts/ui/component/PlayerStatsComponent.js","srcjs/stendhal/ui/component/PlayerStatsComponent.ts","./build/ts/ui/factory/DesktopUserInterfaceFactory.js","srcjs/stendhal/ui/factory/DesktopUserInterfaceFactory.ts","./build/ts/util/DialogHandler.js","srcjs/stendhal/util/DialogHandler.ts","build/ts/Client.js","srcjs/stendhal/main.js","./build/ts/action/MenuItem.js","srcjs/stendhal/action/MenuItem.ts","./build/ts/data/ImageWithDimensions.js","./build/ts/entity/Blood.js","srcjs/stendhal/entity/Blood.ts","./build/ts/entity/PopupInventory.js","srcjs/stendhal/entity/PopupInventory.ts","./build/ts/entity/Chest.js","srcjs/stendhal/entity/Chest.ts","./build/ts/entity/Corpse.js","srcjs/stendhal/entity/Corpse.ts","./build/ts/entity/Creature.js","srcjs/stendhal/entity/Creature.ts","./build/ts/entity/DomesticAnimal.js","srcjs/stendhal/entity/DomesticAnimal.ts","./build/ts/entity/Portal.js","srcjs/stendhal/entity/Portal.ts","./build/ts/entity/Door.js","srcjs/stendhal/entity/Door.ts","./build/ts/entity/Food.js","srcjs/stendhal/entity/Food.ts","./build/ts/entity/GameBoard.js","srcjs/stendhal/entity/GameBoard.ts","./build/ts/entity/Gate.js","srcjs/stendhal/entity/Gate.ts","./build/ts/entity/GrowingEntitySpawner.js","srcjs/stendhal/entity/GrowingEntitySpawner.ts","./build/ts/entity/NPC.js","srcjs/stendhal/entity/NPC.ts","./build/ts/entity/Sign.js","srcjs/stendhal/entity/Sign.ts","./build/ts/entity/TrainingDummy.js","srcjs/stendhal/entity/TrainingDummy.ts","./build/ts/entity/UnknownEntity.js","srcjs/stendhal/entity/UnknownEntity.ts","./build/ts/entity/UseableEntity.js","srcjs/stendhal/entity/UseableEntity.ts","./build/ts/ui/dialog/outfit/OutfitPartSelector.js","./build/ts/ui/dialog/outfit/OutfitColorSelector.js","srcjs/stendhal/ui/dialog/outfit/OutfitColorSelector.ts","./build/ts/ui/dialog/outfit/OutfitPaletteColorSelector.js","srcjs/stendhal/ui/dialog/outfit/OutfitPaletteColorSelector.ts","./build/ts/ui/dialog/outfit/OutfitDialog.js","srcjs/stendhal/ui/dialog/outfit/OutfitDialog.ts","./build/ts/entity/User.js","./build/ts/entity/VisibleEntity.js","srcjs/stendhal/entity/VisibleEntity.ts","./build/ts/entity/WalkBlocker.js","srcjs/stendhal/entity/WalkBlocker.ts","srcjs/stendhal/entity/EntityRegistry.ts","./build/ts/entity/EntityRegistry.js","./build/ts/sprite/EmptySprite.js","srcjs/stendhal/sprite/EmptySprite.ts","./build/ts/sprite/Sprite.js","srcjs/stendhal/sprite/Sprite.ts","./build/ts/sprite/ImageSprite.js","srcjs/stendhal/sprite/ImageSprite.ts","./build/ts/sprite/Tileset.js"],
"sourcesContent":["/**\r\n * @license\r\n ***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************\r\n\r\n\r\n\r\n\r\n\r\n Have a look at https://stendhalgame.org/development/introduction.html to get the source code.\r\n And perhaps, contribute a feature or bugfix.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n Compiled and optimized JavaScript follows. Don't let that scare you off, have a look at the source instead.\r\n */\r\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Utility method for creating an iterator for Arrays.\n */\n'require base';\n\n/**\n * Returns an internal iterator from the given array.\n * @param {!IArrayLike<T>} array\n * @return {function():!IIterableResult<T>}\n * @template T\n */\n$jscomp.arrayIteratorImpl = function(array) {\n  var index = 0;\n  return function() {\n    if (index < array.length) {\n      return {\n        done: false,\n        value: array[index++],\n      };\n    } else {\n      return {done: true};\n    }\n  };\n};\n\n/**\n * Returns an internal iterator from the given array.\n * @param {!Array<T>} array\n * @return {!Iterator<T>}\n * @template T\n */\n$jscomp.arrayIterator = function(array) {\n  return /** @type {!Iterator<T>} */ ({next: $jscomp.arrayIteratorImpl(array)});\n};\n\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Polyfill for for-of loops.\n */\n'require es6/util/arrayiterator';\n\n/**\n * Creates an iterator for the given iterable.  This iterator should never\n * be exposed to user code.\n *\n * @param {string|!Iterable<T>|!Iterator<T>|!Arguments} iterable\n * @return {!Iterator<T>}\n * @template T\n * @suppress {reportUnknownTypes}\n */\n$jscomp.makeIterator = function(iterable) {\n  // NOTE: Disabling typechecking because [] not allowed on @struct.\n  var iteratorFunction = typeof Symbol != 'undefined' && Symbol.iterator &&\n      (/** @type {?} */ (iterable)[Symbol.iterator]);\n  return iteratorFunction ? iteratorFunction.call(iterable) :\n      $jscomp.arrayIterator(/** @type {!Array} */ (iterable));\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Polyfill for array destructuring.\n */\n'require es6/util/makeiterator';\n'require es6/util/arrayfromiterator';\n\n\n/**\n * Copies the values from an Iterable into an Array.\n * @param {string|!Array<T>|!Iterable<T>|!Arguments} iterable\n * @return {!Array<T>}\n * @template T\n */\n$jscomp.arrayFromIterable = function(iterable) {\n  if (iterable instanceof Array) {\n    return iterable;\n  } else {\n    return $jscomp.arrayFromIterator($jscomp.makeIterator(iterable));\n  }\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Polyfill for array destructuring.\n */\n'require base';\n\n\n/**\n * Copies the values from an Iterator into an Array. The important difference\n * between this and $jscomp.arrayFromIterable is that if the iterator's\n * next() method has already been called one or more times, this method returns\n * only the values that haven't been yielded yet.\n * @param {!Iterator<T>} iterator\n * @return {!Array<T>}\n * @template T\n * @suppress {reportUnknownTypes}\n */\n$jscomp.arrayFromIterator = function(iterator) {\n  var i;\n  var arr = [];\n  while (!(i = iterator.next()).done) {\n    arr.push(i.value);\n  }\n  return arr;\n};\n","/*\n * Copyright 2017 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides a partial internal polyfill for Object.create.\n */\n'require util/defines';\n\n\n/**\n * Polyfill for Object.create() method:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create\n *\n * Does not implement the second argument.\n * @param {!Object} prototype\n * @return {!Object}\n */\n$jscomp.objectCreate =\n    ($jscomp.ASSUME_ES5 || typeof Object.create == 'function') ?\n    Object.create :\n    function(prototype) {\n      /** @constructor */\n      var ctor = function() {};\n      ctor.prototype = prototype;\n      return new ctor();\n    };\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides methods to polyfill native objects.\n * @suppress {reportUnknownTypes}\n */\n'require util/defines';\n\n\n/**\n * Polyfill for Object.defineProperty() method:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\n *\n * Refuses to define properties on Array.prototype and Object.prototype,\n * since we can't make them non-enumerable and this messes up peoples' for\n * loops.  Beyond this, we simply assign values and not worry\n * about enumerability or writeability.\n *\n * @type {(typeof Object.defineProperty)}\n * @suppress {reportUnknownTypes}\n */\n$jscomp.defineProperty =\n    $jscomp.ASSUME_ES5 || typeof Object.defineProperties == 'function' ?\n    Object.defineProperty :\n    function(target, property, descriptor) {\n      if (target == Array.prototype ||\n          // b/155133192\n          /** @type {?} */ (target) == Object.prototype) {\n        return target;\n      }\n\n      /**\n       * NOTE: This is currently never called with a descriptor outside\n       * the control of the compiler.  If we ever decide to polyfill either\n       * Object.defineProperty or Reflect.defineProperty for ES3, we should\n       * explicitly check for `get` or `set` on the descriptor and throw a\n       * TypeError, since it's impossible to properly polyfill it.\n       */\n      target[property] = descriptor.value;\n      return target;\n    };\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Runtime code to store the global object.\n * @suppress {uselessCode}\n */\n'require base';\n\n/**\n * Locate and return a reference to the global object.\n *\n * NOTE: This method is marked with `noinline`, because `RemoveUnusedCode` has\n * trouble removing the loop it contains if it gets inlined into the global\n * scope.\n * @param {?Object} passedInThis\n * @return {!Global} The global object.\n * @suppress {undefinedVars|reportUnknownTypes}\n * @noinline\n */\n$jscomp.getGlobal = function(passedInThis) {\n  var possibleGlobals = [\n    // Web Audio Worklets do not have any way to refer to their global object\n    // other than `globalThis`.\n    // This use of `globalThis` does not prevent removal of the `globalThis`\n    // polyfill, because the usage is guarded by a typeof check.\n    'object' == typeof globalThis && globalThis,\n    // Rhino (used by older Google Docs Script projects) has no `window` or\n    // `self`, but `this` from the global scope is the global object. Also,\n    // some GWT tests running on Rhino do have a `window` and `self` but, for\n    // unknown reasons, see runtime exceptions when we return `window` instead\n    // of `passedInThis`.\n    // NOTE: If the compiler's output is wrapped in a strict-mode function,\n    // this file's code won't actually be executing in global scope, so this\n    // value will be undefined.\n    passedInThis,\n    // Browser windows always have `window`\n    'object' == typeof window && window,\n    // WebWorkers have `self`\n    'object' == typeof self && self,\n    // NodeJS has `global`\n    'object' == typeof global && global,\n  ];\n  for (var i = 0; i < possibleGlobals.length; ++i) {\n    var maybeGlobal = possibleGlobals[i];\n    // It can happen that an environment has, for example, both `global` and\n    // `window` defined in the global scope, but one of them isn't actually\n    // the global object, so check that it really seems to be the global object.\n    // We use `Math` to check for this because it's only 4 characters long,\n    // exists in all possible JS environments, and doesn't have the problematic\n    // equality behavior of `NaN`.\n    if (maybeGlobal && maybeGlobal['Math'] == Math) {\n      return /** @type {!Global} */ (maybeGlobal);\n    }\n  }\n  // Throw an exception if we cannot find the global object.\n  // We have to be sneaky about it, otherwise the compiler will think this code\n  // has a side effect (throwing an exception) that prevents it from being\n  // removed, even when all usages of `$jscomp.global` get removed.\n  // Casting through unknown is necessary to keep the compiler from rejecting\n  // this code.\n  return /** @type {!Global} */ (\n      /** @type {?} */ ({\n        valueOf: function() {\n          throw new Error('Cannot find global object');\n        }\n      }.valueOf()));\n};\n\n\n/**\n * The global object.\n * @const {!Global}\n */\n$jscomp.global = $jscomp.getGlobal(this);\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides methods to polyfill native objects.\n * @suppress {uselessCode}\n */\n'require util/defineproperty';\n'require util/defines';\n'require util/global';\n'require util/shouldpolyfill';\n\n/** @const {!Object<string, ?>} map from classes (Map) to polyfills */\n$jscomp.polyfills = {};\n\n/**\n * Maps a property to an obfuscated look-up string for that property. Only used\n * when `$jscomp.ISOLATE_POLYFILLS is enabled.\n *\n * When compiling with polyfill isolation enabled, to polyfill an\n * `owner.prototype.method` the `$jscomp.polyfill` library function:\n * <ol>\n * <li> creates an obfuscated string for `method`\n * <li> adds the obfuscated string as a new property on the `owner` object\n * <li> assigns the polyfill implementation of `method` to this new obfuscated\n * property on the `owner` object. </li>\n *</ol>\n *\n * This maps the original property name `method` to the new obfuscated property\n * name.\n * @const {!Object<string, symbol>}\n */\n$jscomp.propertyToPolyfillSymbol = {};\n\n/** @const {string} */\n$jscomp.POLYFILL_PREFIX = '$jscp$';\n\n/**\n * Returns the polyfill function of the given property if present, otherwise\n * returns the actual property.\n *\n * This is a variable instead of a $jscomp.* property to make it simpler for\n * the compiler to avoid prematurely deleting it during optimizations.\n *\n * @param {*} target the receiver for the property access, e.g. `my.str` in\n *     `my.str.includes`\n * @param {string} property the name of the property, e.g. `includes` in\n *     `my.str.includes`\n * @return {?} if an obfuscated symbol for the property was added onto the\n *     target, then this function returns the polyfill for the property.\n *     Otherwise simply looks up the property on the target and returns it as\n *     `target[key]`.\n * @noinline prevent inlining so IsolatePolyfills can find this declaration.\n * @suppress {reportUnknownTypes}\n */\nvar $jscomp$lookupPolyfilledValue = function(target, property) {\n  /** @const */\n  var obfuscatedName = $jscomp.propertyToPolyfillSymbol[property];\n  if (obfuscatedName == null) {\n    return target[property];\n  }\n\n  // NOTE: this will throw if `target` is null or undefined.\n  /** @const */\n  var polyfill = target[obfuscatedName];\n\n  // Checking `polyfill !== undefined` is sufficient because $jscomp.polyfill\n  // never installs nullish polyfills. Otherwise we'd have to check something\n  // like `key in target`.\n  return polyfill !== undefined ? polyfill : target[property];\n};\n\n/**\n * @param {string} target Qualified name of the class or method to polyfill,\n *     e.g. 'Array.prototype.includes' or 'Map'.\n * @param {?function(*): *} polyfill A function that takes the current browser\n *     implementation of the target and returns an optional new polyfill\n *     implementation.  If null is returned, then no polyfill will be added.  A\n *     null argument for this parameter indicates that the function will not be\n *     polyfilled, and is only useful for `build_polyfill_table.js` bookkeeping.\n * @param {string} fromLang The language level in which the target is expected\n *     to already be present in the browser.  The compiler requires that\n *     `languageOut < fromLang` before injecting a polyfill (i.e. if the\n *     specified output language already includes the feature then there's no\n *     need to polyfill it).\n * @param {string} toLang The language level required by the polyfill\n *     implementation.  The compiler will issue an error if a polyfill is\n *     required, but `languageOut < toLang`.  Additionally, the\n *     `build_polyfill_table.js` script audits the polyfill dependency tree to\n *     ensure that no polyfill with a lower `toLang` depends on one with a\n *     higher `toLang`.\n * @noinline\n * NOTE: We prevent inlining so RemoveUnusedPolyfills can always recognize this\n * call.\n */\n$jscomp.polyfill = function(target, polyfill, fromLang, toLang) {\n  if (!polyfill) return;\n  if ($jscomp.ISOLATE_POLYFILLS) {\n    $jscomp.polyfillIsolated(target, polyfill, fromLang, toLang);\n  } else {\n    $jscomp.polyfillUnisolated(target, polyfill, fromLang, toLang);\n  }\n};\n\n/**\n * @param {string} target Qualified name of the class or method to polyfill,\n * @param {function(*): *} polyfill A function that takes the current browser\n *     implementation of the target and returns an optional new polyfill\n *     implementation.\n * @param {string} fromLang The language level in which the target is expected\n *     to already be present in the browser.\n * @param {string} toLang The language level required by the polyfill\n *     implementation.\n * @suppress {reportUnknownTypes}\n * @see $jscomp.polyfill for more documentation\n */\n$jscomp.polyfillUnisolated = function(target, polyfill, fromLang, toLang) {\n  var obj = $jscomp.global;\n  var split = target.split('.');\n  for (var i = 0; i < split.length - 1; i++) {\n    var key = split[i];\n    if (!(key in obj)) return;\n    obj = obj[key];\n  }\n  var property = split[split.length - 1];\n  var orig = obj[property];\n  var impl = polyfill(orig);\n  if (impl == orig || impl == null) return;\n  $jscomp.defineProperty(\n      obj, property, {configurable: true, writable: true, value: impl});\n};\n\n/**\n * Defines a polyfill for the given class or method under an obfuscated name.\n *\n * The main differences between this method and $jscomp.polyfillUnisolated are:\n *  - classes are defined on $jscomp.polyfills, not window.\n *  - methods (Array.prototype.includes) are defined on Array.prototype under\n *    an obfuscated name Array.prototype.$jscp$907312$includes or a Symbol, if\n * native.\n *  - this method installs our polyfill even when an existing implementation is\n *    found, as it might be an untrusted polyfill. The exception is that if\n *    Symbol is detected to be native, we assume any implementations of ES6\n *    classes/methods are also native and not polyfills.\n *\n * @param {string} target Qualified name of the class or method to polyfill,\n * @param {function(*): *} polyfill A function that takes the current browser\n *     implementation of the target and returns an optional new polyfill\n *     implementation.\n * @param {string} fromLang The language level in which the target is expected\n *     to already be present in the browser.\n * @param {string} toLang The language level required by the polyfill\n *     implementation.\n * @suppress {reportUnknownTypes}\n * @see $jscomp.polyfill for more parameter documentation\n */\n$jscomp.polyfillIsolated = function(target, polyfill, fromLang, toLang) {\n  var split = target.split('.');\n  var isSimpleName = split.length === 1;\n  var root = split[0];\n\n  // Look up the parent object. For classes this is just $jscomp.global.\n  // For methods/properties this may be a polyfill (Promise) or may a native\n  // object (Array.prototype).\n  var ownerObject;\n  if (!isSimpleName && root in $jscomp.polyfills) {\n    // Handle Symbol.asyncIterator and Promise.prototype.finally\n    ownerObject = $jscomp.polyfills;\n  } else {\n    // Handle Promise, Array.of, and String.prototype.startsWith\n    ownerObject = $jscomp.global;\n  }\n\n  for (var i = 0; i < split.length - 1; i++) {\n    var key = split[i];\n    if (!(key in ownerObject)) return;\n    ownerObject = ownerObject[key];\n  }\n\n  var property = split[split.length - 1];\n  // If Symbol is native and the target is in the ES6 spec, use the native imp.\n  // We assume the method/class was not polyfilled since polyfills typically\n  // back off in the presence of an existing implementation.\n  var nativeImpl = $jscomp.IS_SYMBOL_NATIVE && fromLang === 'es6' ?\n      ownerObject[property] :\n      null;\n  var impl = polyfill(nativeImpl);\n\n  if (impl == null) {\n    return;\n  }\n\n  if (isSimpleName) {\n    // Note: `impl` may be the actual native class instead of a\n    // polyfill. Add it to $jscomp.polyfills anyway. The IsolatePolyfills pass\n    // unconditionally replaces `Symbol` with `$jscomp.polyfills['Symbol']`.\n\n    // Use $jscomp.polyfills instead of ownerObject. For simple names like\n    // Promise and Symbol, ownerObject is the global object, and we want to\n    // avoid adding new global variables.\n    $jscomp.defineProperty(\n        $jscomp.polyfills, property,\n        {configurable: true, writable: true, value: impl});\n  } else if (impl !== nativeImpl) {\n    // Skip installing an obfuscated property if we have found a native version\n    // of the method we're polyfilling. $jscomp$lookupPolyfilledValue will fall\n    // back to the native version anyway.\n    if ($jscomp.propertyToPolyfillSymbol[property] === undefined) {\n      var BIN_ID = (Math.random() * 1e9) >>> 0;\n      $jscomp.propertyToPolyfillSymbol[property] = $jscomp.IS_SYMBOL_NATIVE ?\n          // use bracket access to avoid injecting the Symbol polyfill\n          $jscomp.global['Symbol'](property) :\n          $jscomp.POLYFILL_PREFIX + BIN_ID + '$' + property;\n    }\n\n    /** @const {symbol} */\n    var obfuscatedName = $jscomp.propertyToPolyfillSymbol[property];\n\n    // Define the polyfilled method on its owner but under an obfuscated\n    // name to avoid collisions. The owner will be a native class like `Promise`\n    // or a native class's prototype like `Array.prototype`.\n    $jscomp.defineProperty(\n        ownerObject, obfuscatedName,\n        {configurable: true, writable: true, value: impl});\n  }\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview\n * @suppress {uselessCode}\n */\n\n'require util/objectcreate';\n'require util/polyfill';\n'require util/shouldpolyfill';\n\n/**\n * Find or create a method that implements the behavior of `Reflect.construct`.\n *\n * @return {!Function}\n */\n$jscomp.getConstructImplementation = function() {\n  // Check for https://github.com/Microsoft/ChakraCore/issues/3217\n  /** @return {boolean} */\n  function reflectConstructWorks() {\n    /** @constructor */ function Base() {}\n    /** @constructor */ function Derived() {}\n    new Base();\n    Reflect.construct(Base, [], Derived);\n    return new Base() instanceof Base;\n  }\n\n  if ($jscomp.TRUST_ES6_POLYFILLS && typeof Reflect != 'undefined' &&\n      Reflect.construct) {\n    if (reflectConstructWorks()) return Reflect.construct;\n    var brokenConstruct = Reflect.construct;\n    /**\n     * @param {function(new: ?, ...?)} target The constructor to call.\n     * @param {!Array} argList The arguments as a list.\n     * @param {function(new: TARGET, ...?)=} opt_newTarget The constructor to\n     *     instantiate.\n     * @return {TARGET} The result of the function call.\n     * @template TARGET\n     * @suppress {reportUnknownTypes}\n     */\n    var patchedConstruct = function(target, argList, opt_newTarget) {\n      var out = brokenConstruct(target, argList);\n      if (opt_newTarget) Reflect.setPrototypeOf(out, opt_newTarget.prototype);\n      return out;\n    };\n    return patchedConstruct;\n  }\n\n  /**\n   * @param {function(new: ?, ...?)} target The constructor to call.\n   * @param {!Array} argList The arguments as a list.\n   * @param {function(new: TARGET, ...?)=} opt_newTarget The constructor to\n   *     instantiate.\n   * @return {TARGET} The result of the function call.\n   * @template TARGET\n   * @suppress {reportUnknownTypes}\n   */\n  function construct(target, argList, opt_newTarget) {\n    if (opt_newTarget === undefined) opt_newTarget = target;\n    var proto = opt_newTarget.prototype || Object.prototype;\n    var obj = $jscomp.objectCreate(proto);\n    var apply = Function.prototype.apply;\n    var out = apply.call(target, obj, argList);\n    return out || obj;\n  }\n  return construct;\n};\n\n/**\n * Polyfill for Reflect.construct() method:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/construct\n *\n * The call to `$jscomp.getConstructImplementation()` is wrapped up as an object\n * literal `valueOf()` call in order to hide the (meaningless) side-effects\n * it contains that would otherwise prevent its definition from being removed,\n * even when nothing refers to `$jscomp.construct`.\n * @const\n */\n$jscomp.construct =\n    /** @type {typeof Reflect.construct} */ (\n        {valueOf: $jscomp.getConstructImplementation}.valueOf());\n","/*\n * Copyright 2017 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview\n * @suppress {uselessCode}\n */\n\n'require util/defines';\n'require util/polyfill';\n'require util/shouldpolyfill';\n\n/**\n * @suppress {missingProperties,reportUnknownTypes}\n * @return {boolean}\n */\n$jscomp.underscoreProtoCanBeSet = function() {\n  var x = {a: true};\n  var y = {};\n  try {\n    y.__proto__ = x;\n    return y.a;\n  } catch (e) {\n    // __proto__ property is readonly (possibly IE 10?)\n  }\n  return false;\n};\n\n/**\n * If we can implement it, this will be a function that attempts to set the\n * prototype of an object, otherwise it will be `null`.\n *\n * It returns the first argument if successful. Throws a `TypeError` if the\n * object is not extensible.\n *\n * @type {null|function(!Object, ?Object): !Object}\n */\n$jscomp.setPrototypeOf = ($jscomp.TRUST_ES6_POLYFILLS &&\n                          typeof Object.setPrototypeOf == 'function') ?\n    Object.setPrototypeOf :\n    $jscomp.underscoreProtoCanBeSet() ? function(target, proto) {\n      target.__proto__ = proto;\n      if (target.__proto__ !== proto) {\n        throw new TypeError(target + ' is not extensible');\n      }\n      return target;\n    } : null;\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Polyfill for ES6 extends keyword.\n * @suppress {uselessCode}\n */\n'require base';\n'require util/objectcreate';\n'require es6/util/setprototypeof';\n\n\n/**\n * Inherit the prototype methods and static methods from one constructor\n * into another.\n *\n * This wires up the prototype chain (like goog.inherits) and copies static\n * properties, for ES6-to-ES{3,5} transpilation.\n *\n * Usage:\n * <pre>\n *   function ParentClass() {}\n *\n *   // Regular method.\n *   ParentClass.prototype.foo = function(a) {};\n *\n *   // Static method.\n *   ParentClass.bar = function() {};\n *\n *   function ChildClass() {\n *     ParentClass.call(this);\n *   }\n *   $jscomp.inherits(ChildClass, ParentClass);\n *\n *   var child = new ChildClass();\n *   child.foo();\n *   ChildClass.bar();  // Static inheritance.\n * </pre>\n *\n * @param {!Function} childCtor Child class.\n * @param {!Function} parentCtor Parent class.\n * @suppress {strictMissingProperties} 'superClass_' is not defined on Function\n */\n$jscomp.inherits = function(childCtor, parentCtor) {\n  childCtor.prototype = $jscomp.objectCreate(parentCtor.prototype);\n  /** @override */ childCtor.prototype.constructor = childCtor;\n  if ($jscomp.setPrototypeOf) {\n    // avoid null dereference warning\n    /** @const {!Function} */\n    var setPrototypeOf = $jscomp.setPrototypeOf;\n    setPrototypeOf(childCtor, parentCtor);\n  } else {\n    // setPrototypeOf is not available so we need to copy the static\n    // methods to the child\n    for (var p in parentCtor) {\n      if (p == 'prototype') {\n        // Don't copy parentCtor.prototype to childCtor.\n        continue;\n      }\n      if (Object.defineProperties) {\n        var descriptor = Object.getOwnPropertyDescriptor(parentCtor, p);\n        if (descriptor) {\n          Object.defineProperty(childCtor, p, descriptor);\n        }\n      } else {\n        // Pre-ES5 browser. Just copy with an assignment.\n        childCtor[p] = parentCtor[p];\n      }\n    }\n  }\n\n  childCtor.superClass_ = parentCtor.prototype;\n};\n","/*\n * Copyright 2021 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides a method to return the rest arguments from a\n * function's arguments. Should be called using `apply`, using the start index\n * as the value for `this` and the original function's arguments array as the\n * arguments, to avoid issues with V8 function optimization backoff cause by\n * passing arguments around as a function parameter (apply is special-cased).\n *\n * @suppress {reportUnknownTypes, uselessCode}\n */\n\n'require base';\n\n/**\n * @this {number}\n * @return {!Array<?>}\n * @noinline\n */\n$jscomp.getRestArguments = function() {\n  var startIndex = Number(this);\n  var restArgs = [];\n  for (var i = startIndex; i < arguments.length; i++) {\n    restArgs[i - startIndex] = arguments[i];\n  }\n  return restArgs;\n};\n","/*\n * Copyright 2020 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n\n// This must execute before any Reflect.* static method polyfills.\n$jscomp.polyfill('Reflect', function(orig) {\n  if (orig) return orig;\n  return {};\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview\n * @suppress {uselessCode}\n */\n\n'require es6/util/construct';\n'require util/polyfill';\n'require es6/reflect/reflect';\n\n$jscomp.polyfill('Reflect.construct', function(orig) {\n  // NOTE: This is just Reflect.construct if it's present and functional.\n  return $jscomp.construct;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview\n * @suppress {uselessCode}\n */\n'require util/polyfill';\n'require es6/reflect/reflect';\n'require es6/util/setprototypeof';\n\n\n$jscomp.polyfill(\n    'Reflect.setPrototypeOf',\n    /**\n     * These annotations are intended to match the signature of\n     * $jscomp.polyfill(). Being more specific makes the compiler unhappy.\n     * @suppress {reportUnknownTypes}\n     * @param {?*} orig\n     * @return {*}\n     */\n    function(orig) {\n      if (orig) {\n        return orig;\n      } else if ($jscomp.setPrototypeOf) {\n        /** @const {!function(!Object,?Object):!Object} */\n        var setPrototypeOf = $jscomp.setPrototypeOf;\n        /**\n         * @param {!Object} target\n         * @param {?Object} proto\n         * @return {boolean}\n         */\n        var polyfill = function(target, proto) {\n          try {\n            setPrototypeOf(target, proto);\n            return true;\n          } catch (e) {\n            return false;\n          }\n        };\n        return polyfill;\n      } else {\n        // it isn't possible to implement this method\n        return null;\n      }\n    },\n    'es6', 'es5');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Symbol polyfill.\n * @suppress {uselessCode}\n */\n\n'require es6/util/arrayiterator';\n'require util/defineproperty';\n'require util/global';\n'require util/polyfill';\n\n/**\n * Initializes the Symbol function.\n * @noinline\n */\n// TODO(rishipal): Remove this function\n$jscomp.initSymbol = function() {};\n\n$jscomp.polyfill('Symbol', function(orig) {\n  if (orig) return orig;  // no polyfill needed\n\n  /**\n   * @struct @constructor\n   * @param {string} id\n   * @param {string=} opt_description\n   */\n  var SymbolClass = function(id, opt_description) {\n    /** @private @const {string} */\n    this.$jscomp$symbol$id_ = id;\n\n    /** @const {string|undefined} */\n    this.description;\n\n    // description is read-only.\n    $jscomp.defineProperty(\n        this, 'description',\n        {configurable: true, writable: true, value: opt_description});\n  };\n\n\n  /** @override */\n  SymbolClass.prototype.toString = function() {\n    return this.$jscomp$symbol$id_;\n  };\n\n\n  /**\n   * Identifier for this compiled binary.\n   * @const {number}\n   */\n  var BIN_ID = (Math.random() * 1e9) >>> 0;\n\n  /** @const {string} */\n  var SYMBOL_PREFIX = 'jscomp_symbol_' + BIN_ID + '_';\n\n  /** @type {number} */\n  var counter = 0;\n\n  /**\n   * Produces \"symbols\" (actually just unique strings).\n   * @param {string=} opt_description\n   * @return {!SymbolClass}\n   * @this {?Object}\n   */\n  var symbolPolyfill = function(opt_description) {\n    if (this instanceof symbolPolyfill) {\n      throw new TypeError('Symbol is not a constructor');\n    }\n    return (new SymbolClass(\n        SYMBOL_PREFIX + (opt_description || '') + '_' + counter++,\n        opt_description));\n  };\n\n  return symbolPolyfill;\n}, 'es6', 'es3');\n\n$jscomp.polyfill('Symbol.iterator', function(orig) {\n  if (orig) return orig;  // no polyfill needed\n\n  var symbolIterator = Symbol('Symbol.iterator');\n\n  // Polyfill 'Symbol.iterator' onto Array and the various TypedArray* objects.\n  // This array uses strings to index into $jscomp.global because the TypedArray\n  // objects are present in IE11 but not on older browsers. Using bracket access\n  // saves code size compared to `typeof Int8Array === 'function' && Int8Array`.\n  var /** !Array<string> */ arrayLikes = [\n    'Array',\n    // List taken from https://tc39.es/ecma262/#sec-typedarray-objects.\n    // The BigInt*Arrays are intentionally omitted because they are only present\n    // in browsers where Symbol is fully supported.\n    'Int8Array', 'Uint8Array', 'Uint8ClampedArray', 'Int16Array', 'Uint16Array',\n    'Int32Array', 'Uint32Array', 'Float32Array', 'Float64Array'\n  ];\n\n  for (var i = 0; i < arrayLikes.length; i++) {\n    var ArrayLikeCtor = /** @type {*} */ ($jscomp.global[arrayLikes[i]]);\n    if (typeof ArrayLikeCtor === 'function' &&\n        typeof ArrayLikeCtor.prototype[symbolIterator] != 'function') {\n      $jscomp.defineProperty(ArrayLikeCtor.prototype, symbolIterator, {\n        configurable: true,\n        writable: true,\n        /**\n         * @this {IArrayLike}\n         * @return {!IteratorIterable}\n         */\n        value: function() {\n          return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this));\n        }\n      });\n    }\n  }\n  return symbolIterator;\n}, 'es6', 'es3');\n\n$jscomp.polyfill('Symbol.asyncIterator', function(orig) {\n  if (orig) {\n    return orig;\n  }\n  return Symbol('Symbol.asyncIterator');\n}, 'es9', 'es3');\n\n/**\n * Returns an iterator with the given `next` method.  Passing\n * all iterators through this function allows easily extending\n * the definition of `%IteratorPrototype%` if methods are ever\n * added to it in the future.\n *\n * @param {function(this: Iterator<T>): T} next\n * @return {!IteratorIterable<T>}\n * @template T\n */\n$jscomp.iteratorPrototype = function(next) {\n  var iterator = {next: next};\n  /**\n   * @this {IteratorIterable}\n   * @return {!IteratorIterable}\n   */\n  iterator[Symbol.iterator] = function() {\n    return this;\n  };\n  return /** @type {!IteratorIterable} */ (iterator);\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require base';\n\n/**\n * Synonym for Object.prototype.hasOwnProperty.call(obj, prop).\n * @param {!Object} obj\n * @param {string} prop\n * @return {boolean}\n */\n$jscomp.owns = function(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require es6/conformance';\n'require es6/util/makeiterator';\n'require util/defineproperty';\n'require util/defines';\n'require util/owns';\n'require util/polyfill';\n\n$jscomp.polyfill('WeakMap',\n    /**\n     * @param {*} NativeWeakMap\n     * @return {*}\n     * @suppress {reportUnknownTypes}\n     */\n    function(NativeWeakMap) {\n  /**\n   * Checks conformance of the existing WeakMap.\n   * @return {boolean} True if the browser's implementation conforms.\n   */\n  function isConformant() {\n    if (!NativeWeakMap || !Object.seal) return false;\n    try {\n      var x = Object.seal({});\n      var y = Object.seal({});\n      var map = new /** @type {function(new: WeakMap, !Array)} */ (\n          NativeWeakMap)([[x, 2], [y, 3]]);\n      if (map.get(x) != 2 || map.get(y) != 3) return false;\n      map.delete(x);\n      map.set(y, 4);\n      return !map.has(x) && map.get(y) == 4;\n    } catch (err) { // This should hopefully never happen, but let's be safe.\n      return false;\n    }\n  }\n  if ($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS) {\n    if (NativeWeakMap && $jscomp.ES6_CONFORMANCE) return NativeWeakMap;\n  } else {\n    if (isConformant()) return NativeWeakMap;\n  }\n\n  var prop = '$jscomp_hidden_' + Math.random();\n\n  /** @constructor */\n  function WeakMapMembership() {}\n\n  /**\n   * Returns whether the argument is a valid WeakMap key.\n   * @param {*} key\n   * @return {boolean}\n   */\n  function isValidKey(key) {\n    var type = typeof key;\n    return (type === 'object' && key !== null) || type === 'function';\n  }\n\n  /**\n   * Inserts the hidden property into the target.\n   * @param {!Object} target\n   */\n  function insert(target) {\n    if (!$jscomp.owns(target, prop)) {\n      var obj = new WeakMapMembership();\n      // TODO(sdh): This property will be enumerated in IE8.  If this becomes\n      // a problem, we could avoid it by copying an infrequently-used non-enum\n      // method (like toLocaleString) onto the object itself and encoding the\n      // property on the copy instead.  This codepath must be easily removable\n      // if IE8 support is not needed.\n      $jscomp.defineProperty(target, prop, {value: obj});\n    }\n  }\n\n  /**\n   * Monkey-patches the freezing methods to ensure that the hidden\n   * property is added before any freezing happens.\n   * @param {string} name\n   */\n  function patch(name) {\n    if ($jscomp.ISOLATE_POLYFILLS) {\n      // Monkey-patching Object.freeze and friends can cause bad interactions\n      // with third-party code. This means that polyfill isolation does not\n      // support inserting frozen objects as keys into a WeakMap.\n      return;\n    }\n    var prev = Object[name];\n    if (prev) {\n      Object[name] = function(target) {\n        if (target instanceof WeakMapMembership) {\n          return target;\n        } else {\n          if (Object.isExtensible(target)) {\n            insert(target);\n          }\n          return prev(target);\n        }\n      };\n    }\n  }\n  patch('freeze');\n  patch('preventExtensions');\n  patch('seal');\n  // Note: no need to patch Reflect.preventExtensions since the polyfill\n  // just calls Object.preventExtensions anyway (and if it's not polyfilled\n  // then neither is WeakMap).\n\n  var index = 0;\n\n  /**\n   * Polyfill for WeakMap:\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\n   *\n   * This implementation is as non-leaky as possible, due to patching\n   * the freezing and sealing operations.  It does not include any logic\n   * to handle cases where a key was somehow made non-extensible without\n   * the special hidden property being added.  It takes some care to ensure\n   * the hidden property is not enumerated over nor discoverable, though\n   * it's not completely secure (particularly in IE8).\n   *\n   * @constructor\n   * @extends {WeakMap<KEY, VALUE>}\n   * @template KEY, VALUE\n   * @param {!Iterator<!Array<KEY|VALUE>>|!Array<!Array<KEY|VALUE>>|null=}\n   *     opt_iterable Optional initial data.\n   */\n  var PolyfillWeakMap = function(opt_iterable) {\n    /** @private @const {string} */\n    this.id_ = (index += (Math.random() + 1)).toString();\n\n    if (opt_iterable) {\n      var iter = $jscomp.makeIterator(opt_iterable);\n      var entry;\n      while (!(entry = iter.next()).done) {\n        var item = entry.value;\n        this.set(/** @type {KEY} */ (item[0]), /** @type {VALUE} */ (item[1]));\n      }\n    }\n  };\n\n  /** @override */\n  PolyfillWeakMap.prototype.set = function(key, value) {\n    if (!isValidKey(key)) {\n      throw new Error('Invalid WeakMap key');\n    }\n    insert(key);\n    if (!$jscomp.owns(key, prop)) {\n      // NOTE: If the insert() call fails on the key, but the property\n      // has previously successfully been added higher up the prototype\n      // chain, then we'll silently misbehave.  Instead, throw immediately\n      // before doing something bad.  If this becomes a problem (e.g. due\n      // to some rogue frozen objects) then we may need to add a slow and\n      // leaky fallback array to each WeakMap instance, as well as extra\n      // logic in each accessor to use it (*only*) when necessary.\n      throw new Error('WeakMap key fail: ' + key);\n    }\n    key[prop][this.id_] = value;\n    return this;\n  };\n\n  /** @override */\n  PolyfillWeakMap.prototype.get = function(key) {\n    return isValidKey(key) && $jscomp.owns(key, prop) ? key[prop][this.id_] :\n                                                        undefined;\n  };\n\n  /** @override */\n  PolyfillWeakMap.prototype.has = function(key) {\n    return isValidKey(key) && $jscomp.owns(key, prop) &&\n        $jscomp.owns(key[prop], this.id_);\n  };\n\n  /** @override */\n  PolyfillWeakMap.prototype.delete = function(key) {\n    if (!isValidKey(key) || !$jscomp.owns(key, prop) ||\n        !$jscomp.owns(key[prop], this.id_)) {\n      return false;\n    }\n    return delete key[prop][this.id_];\n  };\n\n  return PolyfillWeakMap;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require es6/conformance';\n'require es6/symbol';\n'require es6/util/makeiterator';\n'require es6/weakmap';\n'require util/defines';\n'require util/owns';\n'require util/polyfill';\n\n\n/**\n * Internal record type for entries.\n * @record\n * @template KEY, VALUE\n * @suppress {reportUnknownTypes}\n */\n$jscomp.MapEntry = function() {\n  /** @type {!$jscomp.MapEntry<KEY, VALUE>} */\n  this.previous;\n  /** @type {!$jscomp.MapEntry<KEY, VALUE>} */\n  this.next;\n  /** @type {?Object} */\n  this.head;\n  /** @type {KEY} */\n  this.key;\n  /** @type {VALUE} */\n  this.value;\n};\n\n\n$jscomp.polyfill('Map',\n    /**\n     * @param {*} NativeMap\n     * @return {*}\n     * @suppress {reportUnknownTypes}\n     */\n    function(NativeMap) {\n\n  /**\n   * Checks conformance of the existing Map.\n   * @return {boolean} True if the browser's implementation conforms.\n   * @suppress {missingProperties} \"entries\" unknown prototype\n   */\n  function isConformant() {\n    if ($jscomp.ASSUME_NO_NATIVE_MAP ||\n        !NativeMap ||\n        typeof NativeMap != \"function\" ||\n        !NativeMap.prototype.entries ||\n        typeof Object.seal != 'function') {\n      return false;\n    }\n    // Some implementations don't support constructor arguments.\n    try {\n      NativeMap = /** @type {function(new: Map, !Iterator=)} */ (NativeMap);\n      var key = Object.seal({x: 4});\n      var map = new NativeMap($jscomp.makeIterator([[key, 's']]));\n      if (map.get(key) != 's' || map.size != 1 || map.get({x: 4}) ||\n          map.set({x: 4}, 't') != map || map.size != 2) {\n        return false;\n      }\n      var /** !Iterator<!Array> */ iter = map.entries();\n      var item = iter.next();\n      if (item.done || item.value[0] != key || item.value[1] != 's') {\n        return false;\n      }\n      item = iter.next();\n      if (item.done || item.value[0].x != 4 ||\n          item.value[1] != 't' || !iter.next().done) {\n        return false;\n      }\n      return true;\n    } catch (err) { // This should hopefully never happen, but let's be safe.\n      return false;\n    }\n  }\n\n  if ($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS) {\n    if (NativeMap && $jscomp.ES6_CONFORMANCE) return NativeMap;\n  } else {\n    if (isConformant()) return NativeMap;\n  }\n\n  /** @const {!WeakMap<!Object, string>} */\n  var idMap = new WeakMap();\n\n\n  /**\n   * Polyfill for the global Map data type.\n   * @constructor\n   * @struct\n   * @extends {Map<KEY, VALUE>}\n   * @implements {Iterable<!Array<KEY|VALUE>>}\n   * @template KEY, VALUE\n   * @param {!Iterable<!Array<KEY|VALUE>>|!Array<!Array<KEY|VALUE>>|null=}\n   *     opt_iterable Optional data to populate the map.\n   */\n  // TODO(sdh): fix param type if heterogeneous arrays ever supported.\n  var PolyfillMap = function(opt_iterable) {\n    /** @private {!Object<!Array<!$jscomp.MapEntry<KEY, VALUE>>>} */\n    this.data_ = {};\n\n    /** @private {!$jscomp.MapEntry<KEY, VALUE>} */\n    this.head_ = createHead();\n\n    // Note: this property should not be changed.  If we're willing to give up\n    // ES3 support, we could define it as a property directly.  It should be\n    // marked readonly if such an annotation ever comes into existence.\n    /** @type {number} */\n    this.size = 0;\n\n    if (opt_iterable) {\n      var iter = $jscomp.makeIterator(opt_iterable);\n      var entry;\n      while (!(entry = iter.next()).done) {\n        var item =\n            /** @type {!IIterableResult<!Array<KEY|VALUE>>} */ (entry).value;\n        this.set(/** @type {KEY} */ (item[0]), /** @type {VALUE} */ (item[1]));\n      }\n    }\n  };\n\n\n  /** @override */\n  PolyfillMap.prototype.set = function(key, value) {\n    // normalize -0/+0 to +0\n    key = key === 0 ? 0 : key;\n    var r = maybeGetEntry(this, key);\n    if (!r.list) {\n      r.list = (this.data_[r.id] = []);\n    }\n    if (!r.entry) {\n      r.entry = {\n        next: this.head_,\n        previous: this.head_.previous,\n        head: this.head_,\n        key: key,\n        value: value,\n      };\n      r.list.push(r.entry);\n      this.head_.previous.next = r.entry;\n      this.head_.previous = r.entry;\n      this.size++;\n    } else {\n      r.entry.value = value;\n    }\n    return this;\n  };\n\n\n  /** @override */\n  PolyfillMap.prototype.delete = function(key) {\n    var r = maybeGetEntry(this, key);\n    if (r.entry && r.list) {\n      r.list.splice(r.index, 1);\n      if (!r.list.length) delete this.data_[r.id];\n      r.entry.previous.next = r.entry.next;\n      r.entry.next.previous = r.entry.previous;\n      r.entry.head = null;\n      this.size--;\n      return true;\n    }\n    return false;\n  };\n\n\n  /** @override */\n  PolyfillMap.prototype.clear = function() {\n    this.data_ = {};\n    this.head_ = this.head_.previous = createHead();\n    this.size = 0;\n  };\n\n\n  /** @override */\n  PolyfillMap.prototype.has = function(key) {\n    return !!(maybeGetEntry(this, key).entry);\n  };\n\n\n  /** @override */\n  PolyfillMap.prototype.get = function(key) {\n    var entry = maybeGetEntry(this, key).entry;\n    // NOTE: this cast is a lie, but so is the extern.\n    return /** @type {VALUE} */ (entry &&\n      /** @type {VALUE} */ (entry.value));\n  };\n\n\n  /** @override */\n  PolyfillMap.prototype.entries = function() {\n    return makeIterator(this, /** @return {!Array<(KEY|VALUE)>} */ function(\n        /** !$jscomp.MapEntry<KEY, VALUE> */ entry) {\n      return ([entry.key, entry.value]);\n    });\n  };\n\n\n  /** @override */\n  PolyfillMap.prototype.keys = function() {\n    return makeIterator(this, /** @return {KEY} */ function(\n        /** !$jscomp.MapEntry<KEY, VALUE> */ entry) {\n      return entry.key;\n    });\n  };\n\n\n  /** @override */\n  PolyfillMap.prototype.values = function() {\n    return makeIterator(this, /** @return {VALUE} */ function(\n        /** !$jscomp.MapEntry<KEY, VALUE> */ entry) {\n      return entry.value;\n    });\n  };\n\n\n  /** @override */\n  PolyfillMap.prototype.forEach = function(callback, opt_thisArg) {\n    var iter = this.entries();\n    var item;\n    while (!(item = iter.next()).done) {\n      var entry = item.value;\n      callback.call(\n          /** @type {?} */ (opt_thisArg),\n          /** @type {VALUE} */ (entry[1]),\n          /** @type {KEY} */ (entry[0]),\n          this);\n    }\n  };\n\n\n  /** @type {?} */ (PolyfillMap.prototype)[Symbol.iterator] =\n      PolyfillMap.prototype.entries;\n\n\n  /**\n   * Returns an entry or undefined.\n   * @param {!PolyfillMap<KEY, VALUE>} map\n   * @param {KEY} key\n   * @return {{id: string,\n   *           list: (!Array<!$jscomp.MapEntry<KEY, VALUE>>|undefined),\n   *           index: number,\n   *           entry: (!$jscomp.MapEntry<KEY, VALUE>|undefined)}}\n   * @template KEY, VALUE\n   */\n  var maybeGetEntry = function(map, key) {\n    var id = getId(key);\n    var list = map.data_[id];\n    if (list && $jscomp.owns(map.data_, id)) {\n      for (var index = 0; index < list.length; index++) {\n        var entry = list[index];\n        if ((key !== key && entry.key !== entry.key) || key === entry.key) {\n          return {id: id, list: list, index: index, entry: entry};\n        }\n      }\n    }\n    return {id: id, list: list, index: -1, entry: undefined};\n  };\n\n\n  /**\n   * Maps over the entries with the given function.\n   * @param {!PolyfillMap<KEY, VALUE>} map\n   * @param {function(!$jscomp.MapEntry<KEY, VALUE>): T} func\n   * @return {!IteratorIterable<T>}\n   * @template KEY, VALUE, T\n   * @private\n   */\n  var makeIterator = function(map, func) {\n    var entry = map.head_;\n    return $jscomp.iteratorPrototype(function() {\n      if (entry) {\n        while (entry.head != map.head_) {\n          entry = entry.previous;\n        }\n        while (entry.next != entry.head) {\n          entry = entry.next;\n          return {done: false, value: func(entry)};\n        }\n        entry = null; // make sure depletion is permanent\n      }\n      return {done: true, value: void 0};\n    });\n  };\n\n\n  /**\n   * Makes a new \"head\" element.\n   * @return {!$jscomp.MapEntry<KEY, VALUE>}\n   * @template KEY, VALUE\n   * @suppress {checkTypes} ignore missing key/value for head only\n   */\n  var createHead = function() {\n    var head = /** type {!$jscomp.MapEntry<KEY, VALUE>} */ ({});\n    head.previous = head.next = head.head = head;\n    return head;\n  };\n\n\n  /**\n   * Counter for generating IDs.\n   * @private {number}\n   */\n  var mapIndex = 0;\n\n\n  /**\n   * @param {*} obj An extensible object.\n   * @return {string} A unique ID.\n   */\n  var getId = function(obj) {\n    var type = obj && typeof obj;\n    if (type == 'object' || type == 'function') {\n      obj = /** @type {!Object} */ (obj);\n      if (!idMap.has(obj)) {\n        var id = '' + (++mapIndex);\n        idMap.set(obj, id);\n        return id;\n      }\n      return idMap.get(obj);\n    }\n    // Add a prefix since obj could be '__proto__';\n    return 'p_' + obj;\n  };\n\n\n  return PolyfillMap;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Utilities for iterator-returning methods.\n */\n'require es6/symbol';\n\n\n/**\n * Creates an iterator from an array-like, with a transformation function.\n * @param {!IArrayLike<INPUT>} array\n * @param {function(number, INPUT): OUTPUT} transform\n * @return {!IteratorIterable<OUTPUT>}\n * @template INPUT, OUTPUT\n * @suppress {checkTypes|reportUnknownTypes}\n */\n$jscomp.iteratorFromArray = function(array, transform) {\n  // NOTE: IE8 doesn't support indexing from boxed Strings.\n  if (array instanceof String) array = array + '';\n  var i = 0;\n  var done = false;\n  var iter = {\n    next: function() {\n      // Once we return done, we must always return done, even if the array\n      // grows later.\n      if (!done && i < array.length) {\n        var index = i++;\n        return {value: transform(index, array[index]), done: false};\n      }\n      done = true;\n      return {done: true, value: void 0};\n    }\n  };\n  iter[Symbol.iterator] = function() { return iter; };\n  return iter;\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n'require es6/util/iteratorfromarray';\n\n$jscomp.polyfill('Array.prototype.entries', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Returns an iterator of [key, value] arrays, one for each entry\n   * in the given array.\n   *\n   * @this {!IArrayLike<VALUE>}\n   * @return {!IteratorIterable<!Array<number|VALUE>>}\n   * @template VALUE\n   * @suppress {reportUnknownTypes}\n   */\n  var polyfill = function() {\n    return $jscomp.iteratorFromArray(\n        this, function(i, v) { return [i, v]; });\n  };\n\n  return polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n\n$jscomp.polyfill('Object.is', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Polyfill for Object.is() method:\n   * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n   *\n   * Determines whether two values are the same value (that is,\n   * functionally equivalent).  This is the same as ===-equality,\n   * except for two cases: 0 is not the same as -0, and NaN is\n   * the same as NaN.\n   *\n   * @param {*} left\n   * @param {*} right\n   * @return {boolean}\n   */\n  var polyfill = function(left, right) {\n    if (left === right) {\n      // Handle the 0 === -0 exception\n      return (left !== 0) || (1 / left === 1 / /** @type {number} */ (right));\n    } else {\n      // Handle the NaN !== NaN exception\n      return (left !== left) && (right !== right);\n    }\n  };\n\n  return polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2017 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require es6/object/is';\n'require util/polyfill';\n\n$jscomp.polyfill('Array.prototype.includes', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Polyfills Array.prototype.includes.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes\n   *\n   * @this {!IArrayLike<T>}\n   * @param {T} searchElement\n   * @param {number=} opt_fromIndex\n   * @return {boolean}\n   * @template T\n   * @suppress {reportUnknownTypes}\n   */\n  var includes = function(searchElement, opt_fromIndex) {\n    var array = this;\n    if (array instanceof String) {\n      array = /** @type {!IArrayLike} */ (String(array));\n    }\n    var len = array.length;\n    var i = opt_fromIndex || 0;\n    if (i < 0) {\n      i = Math.max(i + len, 0);\n    }\n    for (; i < len; i++) {\n      var element = array[i];\n      if (element === searchElement || Object.is(element, searchElement)) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  return includes;\n}, 'es7', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require base';\n\n\n/**\n * Throws if the argument is a RegExp, or if thisArg is undefined.\n * @param {?} thisArg The 'this' arg, which must be defined.\n * @param {*} arg The first argument of the function, which mustn't be a RegExp.\n * @param {string} func Name of the function, for reporting.\n * @return {string} The thisArg, coerced to a string.\n * @suppress {reportUnknownTypes}\n */\n$jscomp.checkStringArgs = function(thisArg, arg, func) {\n  if (thisArg == null) {\n    throw new TypeError(\n        \"The 'this' value for String.prototype.\" + func +\n        ' must not be null or undefined');\n  }\n  if (arg instanceof RegExp) {\n    throw new TypeError(\n        'First argument to String.prototype.' + func +\n        ' must not be a regular expression');\n  }\n  return thisArg + '';\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/checkstringargs';\n'require util/polyfill';\n\n$jscomp.polyfill('String.prototype.includes', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Searches for a substring, starting at the given position.\n   *\n   * <p>Polyfills the instance method String.prototype.includes().\n   *\n   * @this {string}\n   * @param {string} searchString\n   * @param {number=} opt_position\n   * @return {boolean}\n   */\n  var polyfill = function(searchString, opt_position) {\n    'use strict';\n    var string = $jscomp.checkStringArgs(this, searchString, 'includes');\n    return string.indexOf(searchString, opt_position || 0) !== -1;\n  };\n\n  return polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/checkstringargs';\n'require util/polyfill';\n\n$jscomp.polyfill('String.prototype.startsWith', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Tests whether the string starts with a given substring.\n   *\n   * <p>Polyfills the instance method String.prototype.startsWith().\n   *\n   * @this {string}\n   * @param {string} searchString\n   * @param {number=} opt_position\n   * @return {boolean}\n   */\n  var polyfill = function(searchString, opt_position) {\n    'use strict';\n    var string = $jscomp.checkStringArgs(this, searchString, 'startsWith');\n    searchString = searchString + '';\n    var strLen = string.length;\n    var searchLen = searchString.length;\n    var i = Math.max(\n        0,\n        Math.min(/** @type {number} */ (opt_position) | 0, string.length));\n    var j = 0;\n    while (j < searchLen && i < strLen) {\n      if (string[i++] != searchString[j++]) return false;\n    }\n    return j >= searchLen;\n  };\n\n  return polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require es6/util/iteratorfromarray';\n'require util/polyfill';\n\n$jscomp.polyfill('Array.prototype.keys', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Returns an iterator of keys of the given array.\n   *\n   * @this {!IArrayLike}\n   * @return {!IteratorIterable<number>}\n   */\n  var polyfill = function() {\n    return $jscomp.iteratorFromArray(this, function(i) { return i; });\n  };\n\n  return polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n\n$jscomp.polyfill('Number.isNaN', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Returns whether the given argument is the value NaN,\n   * guaranteeing not to coerce to a number first.\n   *\n   * <p>Polyfills the static function Number.isNaN().\n   *\n   * @param {number} x Any value.\n   * @return {boolean} True if x is exactly NaN.\n   */\n  var polyfill = function(x) {\n    return typeof x === 'number' && isNaN(x);\n  };\n\n  return polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n\n$jscomp.polyfill('Array.from', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Creates a new Array from an array-like or iterable object.\n   *\n   * <p>Polyfills the static function Array.from().  Does not support\n   * constructor inheritance (i.e. (subclass of Array).from), and\n   * relies on the compiler to check the validity of inputs rather\n   * than producing spec-compliant TypeErrors.\n   *\n   * @param {!IArrayLike<INPUT>|!Iterable<INPUT>} arrayLike\n   *     An array-like or iterable.\n   * @param {(function(this: THIS, INPUT, number): OUTPUT)=} opt_mapFn\n   *     Function to call on each argument.\n   * @param {THIS=} opt_thisArg\n   *     Object to use as 'this' when calling mapFn.\n   * @return {!Array<OUTPUT>}\n   * @template INPUT, OUTPUT, THIS\n   * @suppress {reportUnknownTypes}\n   */\n  var polyfill = function(arrayLike, opt_mapFn, opt_thisArg) {\n    opt_mapFn = opt_mapFn != null ? opt_mapFn : function(x) { return x; };\n    var result = [];\n    // NOTE: this is cast to ? because [] on @struct is an error\n    var iteratorFunction = typeof Symbol != 'undefined' && Symbol.iterator &&\n        (/** @type {?} */ (arrayLike)[Symbol.iterator]);\n    if (typeof iteratorFunction == 'function') {\n      arrayLike = iteratorFunction.call(arrayLike);\n      var next;\n      var k = 0;\n      while (!(next = arrayLike.next()).done) {\n        result.push(\n            opt_mapFn.call(/** @type {?} */ (opt_thisArg), next.value, k++));\n      }\n    } else {\n      var len = arrayLike.length;  // need to support non-iterables\n      for (var i = 0; i < len; i++) {\n        result.push(\n            opt_mapFn.call(/** @type {?} */ (opt_thisArg), arrayLike[i], i));\n      }\n    }\n    return result;\n  };\n\n  return polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n\n$jscomp.polyfill('Math.trunc', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Truncates any fractional digits from its argument (towards zero).\n   *\n   * <p>Polyfills the static function Math.trunc().\n   *\n   * @param {number} x Any number, or value that can be coerced to a number.\n   * @return {number}\n   */\n  var polyfill = function(x) {\n    x = Number(x);\n    if (isNaN(x) || x === Infinity || x === -Infinity || x === 0) return x;\n    var y = Math.floor(Math.abs(x));\n    return x < 0 ? -y : y;\n  };\n\n  return polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/checkstringargs';\n'require util/polyfill';\n\n$jscomp.polyfill('String.prototype.endsWith', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Tests whether the string ends with a given substring.\n   *\n   * <p>Polyfills the instance method String.prototype.endsWith().\n   *\n   * @this {string}\n   * @param {string} searchString\n   * @param {number=} opt_position\n   * @return {boolean}\n   */\n  var polyfill = function(searchString, opt_position) {\n    'use strict';\n    var string = $jscomp.checkStringArgs(this, searchString, 'endsWith');\n    searchString = searchString + '';\n    if (opt_position === void 0) opt_position = string.length;\n    var i = Math.max(0, Math.min(opt_position | 0, string.length));\n    var j = searchString.length;\n    while (j > 0 && i > 0) {\n      if (string[--i] != searchString[--j]) return false;\n    }\n    return j <= 0;\n  };\nreturn polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require es6/conformance';\n'require es6/map';\n'require es6/symbol';\n'require util/defines';\n'require util/polyfill';\n\n$jscomp.polyfill('Set',\n    /**\n     * @param {*} NativeSet\n     * @return {*}\n     * @suppress {reportUnknownTypes}\n     */\n    function(NativeSet) {\n\n  /**\n   * Checks conformance of the existing Set.\n   * @return {boolean} True if the browser's implementation conforms.\n   * @suppress {missingProperties} \"entries\" unknown prototype\n   */\n  function isConformant() {\n    if ($jscomp.ASSUME_NO_NATIVE_SET ||\n        !NativeSet ||\n        typeof NativeSet != \"function\" ||\n        !NativeSet.prototype.entries ||\n        typeof Object.seal != 'function') {\n      return false;\n    }\n    // Some implementations don't support constructor arguments.\n    try {\n      NativeSet = /** @type {function(new: Set, !Iterator=)} */ (NativeSet);\n      var value = Object.seal({x: 4});\n      var set = new NativeSet($jscomp.makeIterator([value]));\n      if (!set.has(value) || set.size != 1 || set.add(value) != set ||\n          set.size != 1 || set.add({x: 4}) != set || set.size != 2) {\n        return false;\n      }\n      var iter = set.entries();\n      var item = iter.next();\n      if (item.done || item.value[0] != value || item.value[1] != value) {\n        return false;\n      }\n      item = iter.next();\n      if (item.done || item.value[0] == value || item.value[0].x != 4 ||\n          item.value[1] != item.value[0]) {\n        return false;\n      }\n      return iter.next().done;\n    } catch (err) { // This should hopefully never happen, but let's be safe.\n      return false;\n    }\n  }\n\n  if ($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS) {\n    if (NativeSet && $jscomp.ES6_CONFORMANCE) return NativeSet;\n  } else {\n    if (isConformant()) return NativeSet;\n  }\n\n  /**\n   * Polyfill for the global Map data type.\n   * @constructor\n   * @struct\n   * @extends {Set<VALUE>}\n   * @implements {Iterable<VALUE>}\n   * @template KEY, VALUE\n   * @param {!Iterable<VALUE>|!Array<VALUE>|null=} opt_iterable\n   *     Optional data to populate the set.\n   */\n  // TODO(sdh): fix param type if heterogeneous arrays ever supported.\n  var PolyfillSet = function(opt_iterable) {\n    /** @private @const {!Map<VALUE, VALUE>} */\n    this.map_ = new Map();\n    if (opt_iterable) {\n      var iter = $jscomp.makeIterator(opt_iterable);\n      var entry;\n      while (!(entry = iter.next()).done) {\n        var item = /** @type {!IIterableResult<VALUE>} */ (entry).value;\n        this.add(item);\n      }\n    }\n    // Note: this property should not be changed.  If we're willing to give up\n    // ES3 support, we could define it as a property directly.  It should be\n    // marked readonly if such an annotation ever comes into existence.\n    this.size = this.map_.size;\n  };\n\n\n  /** @override */\n  PolyfillSet.prototype.add = function(value) {\n    // normalize -0/+0 to +0\n    value = value === 0 ? 0 : value;\n    this.map_.set(value, value);\n    this.size = this.map_.size;\n    return this;\n  };\n\n\n  /** @override */\n  PolyfillSet.prototype.delete = function(value) {\n    var result = this.map_.delete(value);\n    this.size = this.map_.size;\n    return result;\n  };\n\n\n  /** @override */\n  PolyfillSet.prototype.clear = function() {\n    this.map_.clear();\n    this.size = 0;\n  };\n\n\n  /** @override */\n  PolyfillSet.prototype.has = function(value) {\n    return this.map_.has(value);\n  };\n\n\n  /** @override */\n  PolyfillSet.prototype.entries = function() {\n    return this.map_.entries();\n  };\n\n\n  /** @override */\n  PolyfillSet.prototype.values = function() {\n    return this.map_.values();\n  };\n\n\n  /** @override */\n  PolyfillSet.prototype.keys = PolyfillSet.prototype.values;\n\n\n  /** @type {?} */ (PolyfillSet.prototype)[Symbol.iterator] =\n      PolyfillSet.prototype.values;\n\n\n  /** @override */\n  PolyfillSet.prototype.forEach = function(callback, opt_thisArg) {\n    var set = this;\n    this.map_.forEach(function(value) {\n      return callback.call(/** @type {?} */ (opt_thisArg), value, value, set);\n    });\n  };\n\n\n  return PolyfillSet;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require base';\n'require es6/util/makeiterator';\n'require util/defines';\n'require util/global';\n'require util/polyfill';\n\n\n$jscomp.polyfill('Promise',\n    /**\n     * @param {*} NativePromise\n     * @return {*}\n     * @suppress {reportUnknownTypes}\n     */\n    function(NativePromise) {\n  function platformSupportsPromiseRejectionEvents() {\n    return typeof $jscomp.global['PromiseRejectionEvent'] !== 'undefined';\n  }\n\n  function globalPromiseIsNative() {\n    return $jscomp.global['Promise'] &&\n        $jscomp.global['Promise'].toString().indexOf('[native code]') !== -1;\n  }\n\n  function shouldForcePolyfillPromise() {\n    // Only force polyfill if the global promise is native.\n    return ($jscomp.FORCE_POLYFILL_PROMISE ||\n      $jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION &&\n      !platformSupportsPromiseRejectionEvents()) && globalPromiseIsNative();\n  }\n\n  // TODO(bradfordcsmith): Do we need to add checks for standards conformance?\n  //     e.g. The version of FireFox we currently use for testing has a Promise\n  //     that fails to reject attempts to fulfill it with itself, but that\n  //     isn't reasonably testable here.\n  if (NativePromise && !shouldForcePolyfillPromise()) {\n    return NativePromise;\n  }\n\n  /**\n    * Schedules code to be executed asynchronously.\n    * @constructor\n    * @struct\n    */\n  function AsyncExecutor() {\n    /**\n     * Batch of functions to execute.\n     *\n     * Will be `null` initially and immediately after a batch finishes\n     * executing.\n     * @private {?Array<function()>}\n     */\n    this.batch_ = null;\n  }\n\n  /**\n   * Schedule a function to execute asynchronously.\n   *\n   * -   The function will execute:\n   *     -   After the current call stack has completed executing.\n   *     -   After any functions previously scheduled using this object.\n   * -   The return value will be ignored.\n   * -   An exception thrown by the method will be caught and asynchronously\n   *     rethrown when it cannot interrupt any other code. This class provides\n   *     no way to catch such exceptions.\n   * @param {function():?} f\n   */\n  AsyncExecutor.prototype.asyncExecute = function(f) {\n    if (this.batch_ == null) {\n      // no batch created yet, or last batch was fully executed\n      this.batch_ = [];\n      var self = this;\n      this.asyncExecuteFunction(function() { self.executeBatch_(); });\n    }\n    this.batch_.push(f);\n  };\n\n  // NOTE: We want to make sure AsyncExecutor will work as expected even if\n  // testing code should override setTimeout()\n  /** @const {function(!Function, number)} */\n  var nativeSetTimeout = $jscomp.global['setTimeout'];\n\n  /**\n   * Schedule a function to execute asynchronously as soon as possible.\n   *\n   * NOTE: May be overridden for testing.\n   * @package\n   * @param {function()} f\n   */\n  AsyncExecutor.prototype.asyncExecuteFunction = function(f) {\n    nativeSetTimeout(f, 0);\n  };\n\n  /**\n   * Execute scheduled jobs in a batch until all are executed or the batch\n   * execution time limit has been reached.\n   * @private\n   */\n  AsyncExecutor.prototype.executeBatch_ = function() {\n    while (this.batch_ && this.batch_.length) {\n      var /** !Array<?function()> */ executingBatch = this.batch_;\n      // Executions scheduled while executing this batch go into a new one to\n      // avoid the batch array getting too big.\n      this.batch_ = [];\n      for (var i = 0; i < executingBatch.length; ++i) {\n        var f = /** @type {function()} */ (executingBatch[i]);\n        executingBatch[i] = null;  // free memory\n        try {\n          f();\n        } catch (error) {\n          this.asyncThrow_(error);\n        }\n      }\n    }\n    // All jobs finished executing, so force scheduling a new batch next\n    // time asyncExecute() is called.\n    this.batch_ = null;\n  };\n\n  /**\n   * @private\n   * @param {*} exception\n   */\n  AsyncExecutor.prototype.asyncThrow_ = function(exception) {\n    this.asyncExecuteFunction(function() { throw exception; });\n  };\n\n  /**\n   * @enum {number}\n   */\n  var PromiseState = {\n    /** The Promise is waiting for resolution. */\n    PENDING: 0,\n\n    /** The Promise has been resolved with a fulfillment value. */\n    FULFILLED: 1,\n\n    /** The Promise has been resolved with a rejection reason. */\n    REJECTED: 2\n  };\n\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise\n   * @param {function(\n   *             function((TYPE|IThenable<TYPE>|Thenable|null)=),\n   *             function(*=))} executor\n   * @constructor\n   * @extends {Promise<TYPE>}\n   * @template TYPE\n   */\n  var PolyfillPromise = function(executor) {\n    /** @private {PromiseState} */\n    this.state_ = PromiseState.PENDING;\n\n    /**\n     * The settled result of the Promise. Immutable once set with either a\n     * fulfillment value or rejection reason.\n     * @private {*}\n     */\n    this.result_ = undefined;\n\n    /**\n     * These functions must be asynchronously executed when this promise\n     * settles.\n     * @private {?Array<function()>}\n     */\n    this.onSettledCallbacks_ = [];\n\n    /**\n     * Whether the rejection has any handler when the promise is rejected.\n     * @private {boolean}\n     */\n    this.isRejectionHandled_ = false;\n\n    var resolveAndReject = this.createResolveAndReject_();\n    try {\n      executor(resolveAndReject.resolve, resolveAndReject.reject);\n    } catch (e) {\n      resolveAndReject.reject(e);\n    }\n  };\n\n\n  /**\n   * Create a pair of functions for resolving or rejecting this Promise.\n   *\n   * <p>After the resolve or reject function has been called once, later calls\n   * do nothing.\n   * @private\n   * @return {{\n   *     resolve: function((TYPE|IThenable<TYPE>|Thenable|null)=),\n   *     reject:  function(*=)\n   * }}\n   */\n  PolyfillPromise.prototype.createResolveAndReject_ = function() {\n    var thisPromise = this;\n    var alreadyCalled = false;\n    /**\n     * @param {function(this:PolyfillPromise<TYPE>, T=)} method\n     * @return {function(T=)}\n     * @template T\n     */\n    function firstCallWins(method) {\n      return function(/** T= */ x) {\n        if (!alreadyCalled) {\n          alreadyCalled = true;\n          method.call(thisPromise, x);\n        }\n      };\n    }\n    return {\n      resolve: firstCallWins(this.resolveTo_),\n      reject: firstCallWins(this.reject_)\n    };\n  };\n\n\n  /**\n   * @private\n   * @param {*=} value\n   */\n  PolyfillPromise.prototype.resolveTo_ = function(value) {\n    if (value === this) {\n      this.reject_(new TypeError('A Promise cannot resolve to itself'));\n    } else if (value instanceof PolyfillPromise) {\n      this.settleSameAsPromise_(/** @type {!PolyfillPromise} */ (value));\n    } else if (isObject(value)) {\n      this.resolveToNonPromiseObj_(/** @type {!Object} */ (value));\n    } else {\n      this.fulfill_(value);\n    }\n  };\n\n\n  /**\n   * @private\n   * @param {!Object} obj\n   * @suppress {strictMissingProperties} obj.then\n   */\n  PolyfillPromise.prototype.resolveToNonPromiseObj_ = function(obj) {\n    var thenMethod = undefined;\n\n    try {\n      thenMethod = obj.then;\n    } catch (error) {\n      this.reject_(error);\n      return;\n    }\n    if (typeof thenMethod == 'function') {\n      this.settleSameAsThenable_(thenMethod, /** @type {!Thenable} */ (obj));\n    } else {\n      this.fulfill_(obj);\n    }\n  };\n\n\n  /**\n   * @param {*} value anything\n   * @return {boolean}\n   */\n  function isObject(value) {\n    switch (typeof value) {\n      case 'object':\n        return value != null;\n      case 'function':\n        return true;\n      default:\n        return false;\n    }\n  }\n\n  /**\n   * Reject this promise for the given reason.\n   * @private\n   * @param {*=} reason\n   * @throws {!Error} if this promise is already fulfilled or rejected.\n   */\n  PolyfillPromise.prototype.reject_ = function(reason) {\n    this.settle_(PromiseState.REJECTED, reason);\n  };\n\n  /**\n   * Fulfill this promise with the given value.\n   * @private\n   * @param {!TYPE} value\n   * @throws {!Error} when this promise is already fulfilled or rejected.\n   */\n  PolyfillPromise.prototype.fulfill_ = function(value) {\n    this.settle_(PromiseState.FULFILLED, value);\n  };\n\n  /**\n   * Fulfill or reject this promise with the given value/reason.\n   * @private\n   * @param {!PromiseState} settledState (FULFILLED or REJECTED)\n   * @param {*} valueOrReason\n   * @throws {!Error} when this promise is already fulfilled or rejected.\n   */\n  PolyfillPromise.prototype.settle_ = function(settledState, valueOrReason) {\n    if (this.state_ != PromiseState.PENDING) {\n      throw new Error(\n          'Cannot settle(' + settledState + ', ' + valueOrReason +\n          '): Promise already settled in state' + this.state_);\n    }\n    this.state_ = settledState;\n    this.result_ = valueOrReason;\n    if (this.state_ === PromiseState.REJECTED) {\n      this.scheduleUnhandledRejectionCheck_();\n    }\n    this.executeOnSettledCallbacks_();\n  };\n\n  PolyfillPromise.prototype.scheduleUnhandledRejectionCheck_ = function() {\n    var self = this;\n    nativeSetTimeout(function() {\n      if (self.notifyUnhandledRejection_()) {\n        // console may not exist on IE 9.\n        var nativeConsole = $jscomp.global['console'];\n        if (typeof nativeConsole !== 'undefined') {\n          nativeConsole.error(self.result_);\n        }\n      }\n    }, 1);\n  };\n\n  /**\n   * Dispatches `unhandledrejection` event if the rejection is unhandled.\n   * @return {boolean} False means the fallback handler does not need to run. It\n   *     is either because rejection handlers are detected or one of the\n   *     `unhandledjrection` event handlers call `preventDefault()`.\n   *     True otherwise.\n   * @private\n   * @suppress {missingProperties}\n   */\n  PolyfillPromise.prototype.notifyUnhandledRejection_ = function() {\n    if (this.isRejectionHandled_) {\n      return false;\n    }\n    var NativeCustomEvent = $jscomp.global['CustomEvent'];\n    var NativeEvent = $jscomp.global['Event'];\n    var nativeDispatchEvent = $jscomp.global['dispatchEvent'];\n    if (typeof nativeDispatchEvent === 'undefined') {\n      return true;\n    }\n\n    var event;\n    if (typeof NativeCustomEvent === 'function') {\n      event =\n          new NativeCustomEvent('unhandledrejection', {cancelable: true});\n    } else if (typeof NativeEvent === 'function') {\n      // CustomEvent is not available in FireFox < 48 in workers.\n      // https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent\n      event = new NativeEvent('unhandledrejection', {cancelable: true});\n    } else {\n      // IE does not support CustomEvent constructor.\n      event = $jscomp.global['document'].createEvent('CustomEvent');\n      event.initCustomEvent(\n          'unhandledrejection', /** canBubbleArg */ false,\n          /** cancelableArg */ true, event);\n    }\n    event.promise = this;\n    event.reason = this.result_;\n\n    return nativeDispatchEvent(event);\n  };\n\n  PolyfillPromise.prototype.executeOnSettledCallbacks_ = function() {\n    if (this.onSettledCallbacks_ != null) {\n      for (var i = 0; i < this.onSettledCallbacks_.length; ++i) {\n        asyncExecutor.asyncExecute(this.onSettledCallbacks_[i]);\n      }\n      this.onSettledCallbacks_ = null;  // free memory\n    }\n  };\n\n  /**\n   * All promise async execution is managed by a single executor for the\n   * sake of efficiency.\n   * @const {!AsyncExecutor}\n   */\n  var asyncExecutor = new AsyncExecutor();\n\n  /**\n   * Arrange to settle this promise in the same way as the given thenable.\n   * @private\n   * @param {!PolyfillPromise} promise\n   */\n  PolyfillPromise.prototype.settleSameAsPromise_ = function(promise) {\n    var methods = this.createResolveAndReject_();\n\n    // Calling then() would create an unnecessary extra promise.\n    promise.callWhenSettled_(methods.resolve, methods.reject);\n  };\n\n  /**\n   * Arrange to settle this promise in the same way as the given thenable.\n   * @private\n   * @param {function(\n   *     function((TYPE|IThenable<TYPE>|Thenable|null)=),\n   *     function(*=))\n   * } thenMethod\n   * @param {!Thenable} thenable\n   */\n  PolyfillPromise.prototype.settleSameAsThenable_ = function(\n      thenMethod, thenable) {\n    var methods = this.createResolveAndReject_();\n\n    // Don't trust an unknown thenable implementation not to throw exceptions.\n    try {\n      thenMethod.call(thenable, methods.resolve, methods.reject);\n    } catch (error) {\n      methods.reject(error);\n    }\n  };\n\n  /** @override */\n  PolyfillPromise.prototype.then = function(onFulfilled, onRejected) {\n    var resolveChild;\n    var rejectChild;\n    var childPromise = new PolyfillPromise(function(resolve, reject) {\n      resolveChild = resolve;\n      rejectChild = reject;\n    });\n    function createCallback(paramF, defaultF) {\n      // The spec says to ignore non-function values for onFulfilled and\n      // onRejected\n      if (typeof paramF == 'function') {\n        return function(x) {\n          try {\n            resolveChild(paramF(x));\n          } catch (error) {\n            rejectChild(error);\n          }\n        };\n      } else {\n        return defaultF;\n      }\n    }\n\n    this.callWhenSettled_(\n        createCallback(onFulfilled, resolveChild),\n        createCallback(onRejected, rejectChild));\n    return childPromise;\n  };\n\n  /** @override */\n  PolyfillPromise.prototype.catch = function(onRejected) {\n    return this.then(undefined, onRejected);\n  };\n\n\n  PolyfillPromise.prototype.callWhenSettled_ = function(\n      onFulfilled, onRejected) {\n    var /** !PolyfillPromise */ thisPromise = this;\n    function callback() {\n      switch (thisPromise.state_) {\n        case PromiseState.FULFILLED:\n          onFulfilled(thisPromise.result_);\n          break;\n        case PromiseState.REJECTED:\n          onRejected(thisPromise.result_);\n          break;\n        default:\n          throw new Error('Unexpected state: ' + thisPromise.state_);\n      }\n    }\n    if (this.onSettledCallbacks_ == null) {\n      // we've already settled\n      asyncExecutor.asyncExecute(callback);\n    } else {\n      this.onSettledCallbacks_.push(callback);\n    }\n    this.isRejectionHandled_ = true;\n  };\n\n  // called locally, so give it a name\n  function resolvingPromise(opt_value) {\n    if (opt_value instanceof PolyfillPromise) {\n      return opt_value;\n    } else {\n      return new PolyfillPromise(function(resolve, reject) {\n        resolve(opt_value);\n      });\n    }\n  }\n  PolyfillPromise['resolve'] = resolvingPromise;\n\n\n  PolyfillPromise['reject'] = function(opt_reason) {\n    return new PolyfillPromise(function(resolve, reject) {\n      reject(opt_reason);\n    });\n  };\n\n\n  PolyfillPromise['race'] = function(thenablesOrValues) {\n    return new PolyfillPromise(function(resolve, reject) {\n      var /** !Iterator<*> */ iterator =\n          $jscomp.makeIterator(thenablesOrValues);\n      for (var /** !IIterableResult<*> */ iterRec = iterator.next();\n           !iterRec.done;\n           iterRec = iterator.next()) {\n        // Using resolvingPromise() allows us to treat all elements the same\n        // way.\n        // NOTE: resolvingPromise(promise) always returns the argument\n        // unchanged.\n        // Using .callWhenSettled_() instead of .then() avoids creating an\n        // unnecessary extra promise.\n        resolvingPromise(iterRec.value).callWhenSettled_(resolve, reject);\n      }\n    });\n  };\n\n\n  PolyfillPromise['all'] = function(thenablesOrValues) {\n    var /** !Iterator<*> */ iterator = $jscomp.makeIterator(thenablesOrValues);\n    var /** !IIterableResult<*> */ iterRec = iterator.next();\n\n    if (iterRec.done) {\n      return resolvingPromise([]);\n    } else {\n      return new PolyfillPromise(function(resolveAll, rejectAll) {\n        var resultsArray = [];\n        var unresolvedCount = 0;\n\n        function onFulfilled(i) {\n          return function(ithResult) {\n            resultsArray[i] = ithResult;\n            unresolvedCount--;\n            if (unresolvedCount == 0) {\n              resolveAll(resultsArray);\n            }\n          };\n        }\n\n        do {\n          resultsArray.push(undefined);\n          unresolvedCount++;\n          // Using resolvingPromise() allows us to treat all elements the same\n          // way.\n          // NOTE: resolvingPromise(promise) always returns the argument\n          // unchanged. Using .callWhenSettled_() instead of .then() avoids\n          // creating an unnecessary extra promise.\n          resolvingPromise(iterRec.value)\n              .callWhenSettled_(\n                  onFulfilled(resultsArray.length - 1), rejectAll);\n          iterRec = iterator.next();\n        } while (!iterRec.done);\n      });\n    }\n  };\n\n  return PolyfillPromise;\n}, 'es6', 'es3');\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n\n$jscomp.polyfill('Array.prototype.fill', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Fills elements of an array with a constant value.\n   *\n   * @this {!IArrayLike<VALUE>}\n   * @param {VALUE} value Value to fill.\n   * @param {number=} opt_start Start index, or zero if omitted.\n   * @param {number=} opt_end End index, or length if omitted.\n   * @return {!IArrayLike<VALUE>} The array, with the fill performed in-place.\n   * @template VALUE\n   * @suppress {reportUnknownTypes, strictPrimitiveOperators}\n   */\n  var polyfill = function(value, opt_start, opt_end) {\n    var length = this.length || 0;\n    if (opt_start < 0) {\n      opt_start = Math.max(0, length + /** @type {number} */ (opt_start));\n    }\n    if (opt_end == null || opt_end > length) opt_end = length;\n    opt_end = Number(opt_end);\n    if (opt_end < 0) opt_end = Math.max(0, length + opt_end);\n    for (var i = Number(opt_start || 0); i < opt_end; i++) {\n      this[i] = value;\n    }\n    return this;\n  };\n\n  return polyfill;\n}, 'es6', 'es3');\n","/*\n * Copyright 2020 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require es6/array/fill';\n'require util/polyfill';\n\n/**\n * @param {*} orig\n * @return {*}\n */\n$jscomp.typedArrayFill = function(orig) {\n  if (orig) return orig;\n  return Array.prototype.fill;\n};\n\n$jscomp.polyfill(\n    'Int8Array.prototype.fill', $jscomp.typedArrayFill, 'es6', 'es5');\n$jscomp.polyfill(\n    'Uint8Array.prototype.fill', $jscomp.typedArrayFill, 'es6', 'es5');\n$jscomp.polyfill(\n    'Uint8ClampedArray.prototype.fill', $jscomp.typedArrayFill, 'es6', 'es5');\n$jscomp.polyfill(\n    'Int16Array.prototype.fill', $jscomp.typedArrayFill, 'es6', 'es5');\n$jscomp.polyfill(\n    'Uint16Array.prototype.fill', $jscomp.typedArrayFill, 'es6', 'es5');\n$jscomp.polyfill(\n    'Int32Array.prototype.fill', $jscomp.typedArrayFill, 'es6', 'es5');\n$jscomp.polyfill(\n    'Uint32Array.prototype.fill', $jscomp.typedArrayFill, 'es6', 'es5');\n$jscomp.polyfill(\n    'Float32Array.prototype.fill', $jscomp.typedArrayFill, 'es6', 'es5');\n$jscomp.polyfill(\n    'Float64Array.prototype.fill', $jscomp.typedArrayFill, 'es6', 'es5');\n","/*\n * Copyright 2017 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n\n$jscomp.polyfill('Number.parseInt', function(orig) {\n  return orig || parseInt;\n}, 'es6', 'es3');\n","/*\n * Copyright 2017 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/polyfill';\n\n$jscomp.polyfill('Number.parseFloat', function(orig) {\n  return orig || parseFloat;\n}, 'es6', 'es3');\n","/**\r\n * @license\r\n **************************************************************************\r\n *                   (C) Copyright 2011-2017 - Marauroa                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU General Public License as published by  *\r\n *   the Free Software Foundation; either version 2 of the License, or     *\r\n *   (at your option) any later version.                                   *\r\n *                                                                         *\r\n ***************************************************************************/\r\n\r\n\"use strict\";\r\n\r\nvar marauroa = window.marauroa = window.marauroa || {};\r\n\r\nmarauroa.debug = {\r\n\tmessages: false,\r\n\tunknownEvents: true\r\n};\r\n\r\nif (!window.console) {\r\n\twindow.console = {};\r\n}\r\nif (!window.console.log) {\r\n\twindow.console.log = function() {};\r\n\twindow.console.info = function() {};\r\n\twindow.console.warn = function() {};\r\n\twindow.console.error = function(text) {\r\n\t\talert(text);\r\n\t};\r\n}\r\n\r\nmarauroa.util = {\r\n\tisEmpty: function(obj) {\r\n\t\tfor (var i in obj) {\r\n\t\t\tif (obj.hasOwnProperty(i)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\tisEmptyExceptId: function(obj) {\r\n\t\tfor (var i in obj) {\r\n\t\t\tif (i !== \"id\" && obj.hasOwnProperty(i)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t},\r\n\r\n\tfirst: function(obj) {\r\n\t\tfor (var i in obj) {\r\n\t\t\tif (obj.hasOwnProperty(i)) {\r\n\t\t\t\treturn obj[i];\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tfromProto: function(proto, def) {\r\n\t\tvar obj = undefined;\r\n\t\tif (typeof(proto) === \"function\") {\r\n\t\t\tobj = new proto();\r\n\t\t} else {\r\n\t\t\t/**\r\n\t\t\t * @constructor\r\n\t\t\t */\r\n\t\t\tvar F = function() {\r\n\t\t\t\tthis.proto = proto;\r\n\t\t\t};\r\n\t\t\tF.prototype = proto;\r\n\t\t\tobj = new F();\r\n\t\t}\r\n\r\n\t\tif (!def) {\r\n\t\t\treturn obj;\r\n\t\t}\r\n\t\treturn marauroa.util.merge(obj, def);\r\n\t},\r\n\r\n\tmerge: function(a, b) {\r\n\t\tfor (var key in b) {\r\n\t\t\ta[key] = b[key];\r\n\t\t}\r\n\t\treturn a;\r\n\t}\r\n};\r\n","/***************************************************************************\r\n *                   (C) Copyright 2011-2017 - Marauroa                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU General Public License as published by  *\r\n *   the Free Software Foundation; either version 2 of the License, or     *\r\n *   (at your option) any later version.                                   *\r\n *                                                                         *\r\n ***************************************************************************/\r\n\r\n/**\r\n * It is a wrapper over all the things that the client should do. You should\r\n * extend this class at your game.\r\n *\r\n * @author hendrik\r\n *\r\n */\r\n\"use strict\";\r\n\r\nvar marauroa = window.marauroa = window.marauroa || {};\r\n\r\nmarauroa.clientFramework = {\r\n\tclientid: \"-1\",\r\n\r\n\t/**\r\n\t * connect to the server\r\n\t *\r\n\t * @param host server host name\r\n\t * @param port server port number\r\n\t */\r\n\tconnect: function(host, port, path) {\r\n\t\tvar protocol = \"ws\";\r\n\t\tif (window.location.protocol === \"https:\") {\r\n\t\t\tprotocol = \"wss\";\r\n\t\t}\r\n\t\tif (host === null) {\r\n\t\t\thost = window.location.hostname;\r\n\t\t}\r\n\t\tif (port === null) {\r\n\t\t\tport = window.location.port;\r\n\t\t}\r\n\t\tif (port != \"\") {\r\n\t\t\tport = \":\" + port;\r\n\t\t}\r\n\t\tif (path === null) {\r\n\t\t\tpath = \"ws/\"\r\n\t\t}\r\n\t\tvar url = protocol + \"://\" + host + port + \"/\" + path;\r\n\t\tvar socket = new WebSocket(url);\r\n\t\tsocket.onmessage = marauroa.clientFramework.onMessage;\r\n\t\tsocket.onopen = function() {\r\n\t\t\tsetInterval(function() {\r\n\t\t\t\tvar msg = {\r\n\t\t\t\t\t\t\"t\": \"8\",\r\n\t\t\t\t};\r\n\t\t\t\tmarauroa.clientFramework.sendMessage(msg);\r\n\t\t\t}, 10000);\r\n\t\t\tmarauroa.clientFramework.onConnect();\r\n\t\t}\r\n\t\tsocket.onclose = marauroa.clientFramework.onDisconnect;\r\n\t\tmarauroa.clientFramework.socket = socket;\r\n\t},\r\n\r\n\tonConnect: function(reason, error) {\r\n\t\tif (typeof(error) == \"undefined\") {\r\n\t\t\tconsole.log(\"connected\");\r\n\t\t} else {\r\n\t\t\tconsole.error(\"onConnect: \" + reason + \" error: \" + error);\r\n\t\t}\r\n\t},\r\n\r\n\tonDisconnect: function(reason, error) {\r\n\t\tconsole.log(\"onDisconnect: \" + reason + \" error: \" + error);\r\n\t},\r\n\r\n\tonLoginRequired: function() {\r\n\t\t// a login is required\r\n\t},\r\n\r\n\tlogin: function(username, password) {\r\n\t\tvar msg = {\r\n\t\t\t\"t\": \"34\",\r\n\t\t\t\"u\": username,\r\n\t\t\t\"p\": password\r\n\t\t};\r\n\t\tmarauroa.clientFramework.username = username;\r\n\t\tmarauroa.clientFramework.sendMessage(msg);\r\n\t},\r\n\r\n\tonServerInfo: function(contents) {\r\n\t\tconsole.log(\"ServerInfo\", contents);\r\n\t},\r\n\r\n\tonPreviousLogins: function(previousLogins) {\r\n\t\tconsole.log(\"Previous Logins\", previousLogins);\r\n\t},\r\n\r\n\tonLoginFailed: function(reason, text) {\r\n\t\tconsole.error(\"Login failed with reason \" + reason + \": \" + text);\r\n\t},\r\n\r\n\tonMessage: function(e) {\r\n\t\tvar msg = JSON.parse(e.data);\r\n\t\tif (msg[\"t\"] === \"9\" || msg[\"t\"] === \"15\") {\r\n\t\t\tmarauroa.clientFramework.clientid = msg[\"c\"];\r\n\t\t}\r\n\t\tif (typeof(msg) === \"string\") {\r\n\t\t\tconsole.error(\"JSON error on message: \" + msg);\r\n\t\t} else {\r\n\t\t\tmarauroa.messageFactory.addDispatchMethod(msg);\r\n\t\t\tmsg.dispatch();\r\n\t\t}\r\n\t},\r\n\r\n\tsendMessage: function(msg) {\r\n\t\tvar myMessage = {\r\n\t\t\t\"c\": marauroa.clientFramework.clientid,\r\n\t\t\t\"s\": \"1\"\r\n\t\t};\r\n\t\tmarauroa.util.merge(myMessage, msg);\r\n\t\tmarauroa.clientFramework.socket.send(JSON.stringify(myMessage));\r\n\t},\r\n\r\n\tresync: function() {\r\n\t\t// TODO: send MessageC2SOutOfSync\r\n\t},\r\n\r\n\t/**\r\n\t * After login allows you to choose a character to play\r\n\t *\r\n\t * @param character\r\n\t *            name of the character we want to play with.\r\n\t * @return true if choosing character is successful.\r\n\t * @throws InvalidVersionException\r\n\t *             if we are not using a compatible version\r\n\t * @throws TimeoutException\r\n\t *             if timeout happens while waiting for the message.\r\n\t * @throws BannedAddressException\r\n\t */\r\n\tchooseCharacter: function(character) {\r\n\t\tvar msg = {\r\n\t\t\t\"t\": \"1\",\r\n\t\t\t\"character\": character\r\n\t\t};\r\n\t\tmarauroa.clientFramework.sendMessage(msg);\r\n\t},\r\n\r\n\tonChooseCharacterNack: function() {\r\n\t\tconsole.error(\"Server rejected your character.\");\r\n\t},\r\n\r\n\t/**\r\n\t * Sends a RPAction to server\r\n\t *\r\n\t * @param action\r\n\t *            the action to send to server.\r\n\t */\r\n\tsendAction: function(action) {\r\n\t\tvar msg = {\r\n\t\t\t\"t\": \"0\",\r\n\t\t\t\"a\": action\r\n\t\t};\r\n\t\tmarauroa.clientFramework.sendMessage(msg);\r\n\t},\r\n\r\n\t/**\r\n\t * Request logout of server\r\n\t *\r\n\t * @return true if we have successfully logout or false if server rejects to\r\n\t *         logout our player and maintain it on game world.\r\n\t * @throws InvalidVersionException\r\n\t *             if we are not using a compatible version\r\n\t * @throws TimeoutException\r\n\t *             if timeout happens while waiting for the message.\r\n\t * @throws BannedAddressException\r\n\t */\r\n\tlogout: function() {\r\n\t\tvar msg = {\r\n\t\t\t\t\"t\": \"5\"\r\n\t\t\t};\r\n\t\tmarauroa.clientFramework.sendMessage(msg);\r\n\t},\r\n\r\n\tonLogoutOutAck: function() {\r\n\t\tconsole.log(\"Server accepted logout request\");\r\n\t},\r\n\r\n\tonLogoutOutNack: function() {\r\n\t\tconsole.log(\"Server rejected logout request\");\r\n\t},\r\n\r\n\t/**\r\n\t * Disconnect the socket and finish the network communications.\r\n\t */\r\n\tclose: function() {\r\n\t\tmarauroa.clientFramework.socket.close();\r\n\t},\r\n\r\n\t/**\r\n\t * It is called when a perception arrives so you can choose how to apply the\r\n\t * perception.\r\n\t *\r\n\t * @param perceptionMessage\r\n\t *            the perception message itself.\r\n\t */\r\n\tonPerception: function(perceptionMessage) {\r\n\t\tmarauroa.perceptionHandler.apply(perceptionMessage);\r\n\t},\r\n\r\n\t/**\r\n\t * is called before a content transfer is started.\r\n\t *\r\n\t * <code> items </code> contains a list of names and timestamp.\r\n\t * That information can be used to decide if a transfer from server is needed.\r\n\t * By setting attribute ack to true in a TransferContent it will be acknowledged.\r\n\t * All acknowledges items in the returned List, will be transfered by server.\r\n\t *\r\n\t * @param items\r\n\t *            in this list by default all items.ack attributes are set to false;\r\n\t * @return the list of approved and rejected items.\r\n\t */\r\n\tonTransferREQ: function(items) {\r\n\t\tconsole.log(\"onTransferREQ: \", items);\r\n\t},\r\n\r\n\t/**\r\n\t * It is called when we get a transfer of content\r\n\t *\r\n\t * @param items\r\n\t *            the transfered items.\r\n\t */\r\n\tonTransfer: function(items) {\r\n\t\tconsole.log(\"onTransfer: \", items);\r\n\t},\r\n\r\n\r\n\t/**\r\n\t * It is called when we get the list of characters\r\n\t *\r\n\t * @param characters\r\n\t *            the characters we have available at this account.\r\n\t */\r\n\tonAvailableCharacterDetails: function(characters) {\r\n\t\tconsole.log(\"onAvailableCharacterDetails: \", characters);\r\n\r\n\t\t// create a character if there is none\r\n\t\tif (marauroa.util.isEmpty(characters)) {\r\n\t\t\tconsole.log(\"No character found, creating a character with the username (redefine onAvailableCharacterDetails to prevent this).\");\r\n\t\t\tmarauroa.clientFramework.createCharacter(marauroa.clientFramework.username, {});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// automatically select the first one\r\n\t\tfor (var key in characters) {\r\n\t\t\tif (characters.hasOwnProperty(key)) {\r\n\t\t\t\tmarauroa.clientFramework.chooseCharacter(key);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tcreateAccount: function(username, password, email) {\r\n\t\tvar msg = {\r\n\t\t\t\t\"t\": \"23\",\r\n\t\t\t\t\"u\": username,\r\n\t\t\t\t\"p\": password,\r\n\t\t\t\t\"e\": email\r\n\t\t\t};\r\n\t\tmarauroa.clientFramework.sendMessage(msg);\r\n\t},\r\n\r\n\tonCreateAccountAck: function(username) {\r\n\t\tconsole.log(\"Account \\\"\" + username + \"\\\" created successfully\");\r\n\t},\r\n\r\n\tonCreateAccountNack: function(username, reason) {\r\n\t\tconsole.log(\"Creating Account \\\"\" + username + \"\\\" failed: \", reason);\r\n\t\talert(reason.text);\r\n\t},\r\n\r\n\tcreateCharacter: function(charname, template) {\r\n\t\tvar msg = {\r\n\t\t\t\t\"t\": \"26\",\r\n\t\t\t\t\"charname\": charname,\r\n\t\t\t\t\"template\": template\r\n\t\t\t};\r\n\t\tmarauroa.clientFramework.sendMessage(msg);\r\n\t},\r\n\r\n\tonCreateCharacterAck: function(charname, template) {\r\n\t\tconsole.log(\"Character \\\"\" + charname + \"\\\" created successfully\", template);\r\n\t},\r\n\r\n\tonCreateCharacterNack: function(charname, reason) {\r\n\t\tconsole.log(\"Creating Character \\\"\" + charname + \"\\\" failed: \", reason);\r\n\t\talert(reason.text);\r\n\t}\r\n};\r\n","/***************************************************************************\r\n *                   (C) Copyright 2010-2017 - Marauroa                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU General Public License as published by  *\r\n *   the Free Software Foundation; either version 2 of the License, or     *\r\n *   (at your option) any later version.                                   *\r\n *                                                                         *\r\n ***************************************************************************/\r\n\r\n\"use strict\";\r\n\r\nvar marauroa = window.marauroa = window.marauroa || {};\r\n\r\nmarauroa.messageFactory = new function() {\r\n\r\n\t// Message S2C Login NACK\r\n\tthis[\"t14\"] = function() {\r\n\t\tmarauroa.clientFramework.onLoginFailed(this[\"reason\"], this[\"text\"]);\r\n\t}\r\n\r\n\t// Message S2C CharacterList\r\n\tthis[\"t9\"] = function() {\r\n\t\tmarauroa.clientFramework.onAvailableCharacterDetails(this[\"characters\"]);\r\n\t}\r\n\r\n\t// Message S2C ChoooseCharacterACK\r\n\tthis[\"t10\"] = function() {\r\n\t\tconsole.log(\"Entering world\");\r\n\t}\r\n\r\n\t// Message S2C ChoooseCharacterNACK\r\n\tthis[\"t11\"] = function() {\r\n\t\tconsole.log(\"Character selection rejected\");\r\n\t\tmarauroa.clientFramework.onChooseCharacterNack();\r\n\t}\r\n\r\n\t// Message S2C Login ACK\r\n\tthis[\"t13\"] = function() {\r\n\t\tmarauroa.clientFramework.onPreviousLogins(this[\"previousLogins\"]);\r\n\t}\r\n\r\n\t// Message S2C Send Key\r\n\tthis[\"t15\"] = function() {\r\n\t\tconsole.log(\"Server send key: \", this);\r\n\t\tmarauroa.clientFramework.onLoginRequired();\r\n\t}\r\n\r\n\t// Message S2C Perception\r\n\tthis[\"t19\"] = function() {\r\n\t\tmarauroa.clientFramework.onPerception(this);\r\n\t}\r\n\r\n\t// Message S2C Server Info\r\n\tthis[\"t20\"] = function() {\r\n\t\tmarauroa.clientFramework.onServerInfo(this[\"contents\"]);\r\n\t}\r\n\r\n\t// Message S2C Transfer\r\n\tthis[\"t21\"] = function() {\r\n\t\tmarauroa.clientFramework.onTransfer(this[\"contents\"]);\r\n\t}\r\n\r\n\t// Message S2C TransferREQ\r\n\tthis[\"t22\"] = function() {\r\n\t\tmarauroa.clientFramework.onTransferREQ(this[\"contents\"]);\r\n\t\tvar contents = {};\r\n\t\tfor (var i in this[\"contents\"]) {\r\n\t\t\tif (typeof(this[\"contents\"][i][\"ack\"]) != \"undefined\" && this[\"contents\"][i][\"ack\"]) {\r\n\t\t\t\tcontents[this[\"contents\"][i][\"name\"]] = true;\r\n\t\t\t} else {\r\n\t\t\t\tcontents[this[\"contents\"][i][\"name\"]] = false;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar msg = {\r\n\t\t\t\"t\": \"7\",\r\n\t\t\t\"contents\": contents\r\n\t\t}\r\n\t\tmarauroa.clientFramework.sendMessage(msg);\r\n\t}\r\n\r\n\t// Message S2C CreateAccount ACK\r\n\tthis[\"t24\"] = function() {\r\n\t\tmarauroa.clientFramework.onCreateAccountAck(this[\"username\"]);\r\n\t}\r\n\r\n\t// Message S2C CreateAccount NACK\r\n\tthis[\"t25\"] = function() {\r\n\t\tmarauroa.clientFramework.onCreateAccountNack(this[\"username\"], this[\"reason\"]);\r\n\t}\r\n\r\n\t// Message S2C CreateCharacter ACK\r\n\tthis[\"t27\"] = function() {\r\n\t\tmarauroa.clientFramework.onCreateCharacterAck(this[\"charname\"], this[\"template\"]);\r\n\t}\r\n\r\n\t// Message S2C CreateCharacter NACK\r\n\tthis[\"t28\"] = function() {\r\n\t\tmarauroa.clientFramework.onCreateCharacterNack(this[\"charname\"], this[\"reason\"]);\r\n\t}\r\n\r\n\t// Message S2C Update\r\n\tthis[\"t35\"] = function() {\r\n\t\tvar msg = {\r\n\t\t\t\"t\": \"36\",\r\n\t\t\t\"response\": eval(this[\"update\"])\r\n\t\t}\r\n\t\tmarauroa.clientFramework.sendMessage(msg);\r\n\t}\r\n\r\n\t// handle unexpected unknown messages\r\n\tthis.unknownMessage = function() {\r\n\t\t// do nothing\r\n\t\tconsole.log(\"Unknown message: \" + JSON.stringify(this));\r\n\t}\r\n\r\n\tthis.addDispatchMethod = function(msg) {\r\n\t\tif (typeof(marauroa.messageFactory[\"t\" + msg.t]) != \"undefined\") {\r\n\t\t\tmsg.dispatch = marauroa.messageFactory[\"t\" + msg.t];\r\n\t\t} else {\r\n\t\t\tmsg.dispatch = marauroa.messageFactory.unknownMessage;\r\n\t\t}\r\n\t}\r\n};\r\n","/***************************************************************************\r\n *                   (C) Copyright 2011-2017 - Marauroa                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU General Public License as published by  *\r\n *   the Free Software Foundation; either version 2 of the License, or     *\r\n *   (at your option) any later version.                                   *\r\n *                                                                         *\r\n ***************************************************************************/\r\n\r\n\"use strict\";\r\n\r\nvar marauroa = window.marauroa = window.marauroa || {};\r\n\r\n/**\r\n * The IPerceptionListener interface provides methods that are called while\r\n * applying the perception\r\n */\r\nmarauroa.perceptionListener = {\r\n\r\n\t/**\r\n\t * onAdded is called when an object is added to the world for first time or\r\n\t * after a sync perception. Return true to stop further processing.\r\n\t *\r\n\t * @param object\r\n\t *            the added object.\r\n\t * @return true to stop further processing\r\n\t */\r\n\tonAdded: function(object) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * onModifiedAdded is called when an object is modified by adding or\r\n\t * changing one of its attributes. Return true to stop further processing.\r\n\t * Note that the method is called *before* modifying the object.\r\n\t *\r\n\t * @param object\r\n\t *            the original object\r\n\t * @param changes\r\n\t *            the added and modified changes.\r\n\t * @return true to stop further processing\r\n\t */\r\n\tonModifiedAdded: function(object, changes) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * onModifiedDeleted is called each time the object has one of its\r\n\t * attributes removed. Return true to stop further processing. Note that the\r\n\t * method is called *before* modifying the object.\r\n\t *\r\n\t * @param object\r\n\t *            the original object\r\n\t * @param changes\r\n\t *            the deleted attributes.\r\n\t * @return true to stop further processing\r\n\t */\r\n\tonModifiedDeleted: function(object, changes) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * onDeleted is called when an object is removed of the world Return true to\r\n\t * stop further processing.\r\n\t *\r\n\t * @param object\r\n\t *            the original object\r\n\t * @return true to stop further processing\r\n\t */\r\n\tonDeleted: function(object) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * onMyRPObject is called when our rpobject avatar is processed. Return true\r\n\t * to stop further processing.\r\n\t *\r\n\t * @param added\r\n\t *            the added and modified attributes and slots\r\n\t * @param deleted\r\n\t *            the deleted attributes\r\n\t * @return true to stop further processing\r\n\t */\r\n\tonMyRPObject: function(added, deleted) {\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * onClear is called when the whole world is going to be cleared. It happens\r\n\t * on sync perceptions Return true to stop further processing.\r\n\t *\r\n\t * @return true to stop further processing\r\n\t */\r\n\tonClear: function() {\r\n\t\treturn false;\r\n\t},\r\n\r\n\t/**\r\n\t * onPerceptionBegin is called when the perception is going to be applied\r\n\t *\r\n\t * @param type\r\n\t *            type of the perception: SYNC or DELTA\r\n\t * @param timestamp\r\n\t *            the timestamp of the perception\r\n\t */\r\n\tonPerceptionBegin: function(type, timestamp) {\r\n\t},\r\n\r\n\t/**\r\n\t * onPerceptionBegin is called when the perception has been applied\r\n\t *\r\n\t * @param type\r\n\t *            type of the perception: SYNC or DELTA\r\n\t * @param timestamp\r\n\t *            the timestamp of the perception\r\n\t */\r\n\tonPerceptionEnd: function(type, timestamp) {\r\n\t},\r\n\r\n\t/**\r\n\t * onException is called when an exception happens\r\n\t *\r\n\t * @param exception\r\n\t *            the exception that happened.\r\n\t * @param perception\r\n\t *            the message that causes the problem\r\n\t */\r\n\tonException: function(exception, perception) {\r\n\t\tconsole.error(exception, perception);\r\n\t}\r\n};\r\n\r\nmarauroa.currentZone = {\r\n\tclear: function() {\r\n\t\tfor (var i in marauroa.currentZone) {\r\n\t\t\tif (marauroa.currentZone.hasOwnProperty(i) && typeof(marauroa.currentZone[i]) !== \"function\") {\r\n\t\t\t\tmarauroa.currentZone[i].destroy(marauroa.currentZone);\r\n\t\t\t\tdelete marauroa.currentZone[i];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n\r\nmarauroa.perceptionHandler = {\r\n\r\n\t/**\r\n\t * Apply a perception.\r\n\t *\r\n\t * @param msg\r\n\t *            the perception msg\r\n\t */\r\n\tapply: function(msg) {\r\n\t\tmarauroa.perceptionListener.onPerceptionBegin(msg[\"sync\"], msg[\"s\"]);\r\n\r\n\t\t// clean world on login/zone change\r\n\t\tif (msg[\"sync\"]) {\r\n\t\t\tif (!marauroa.perceptionListener.onClear()) {\r\n\t\t\t\tmarauroa.currentZone.clear();\r\n\t\t\t\tmarauroa.currentZoneName = msg[\"zoneid\"];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// apply perception\r\n\t\tmarauroa.perceptionHandler.applyPerceptionAddedRPObjects(msg);\r\n\t\tmarauroa.perceptionHandler.applyPerceptionModifiedRPObjects(msg);\r\n\t\tmarauroa.perceptionHandler.applyPerceptionDeletedRPObjects(msg);\r\n\t\tmarauroa.perceptionHandler.applyPerceptionMyRPObject(msg);\r\n\r\n\t\t// done, tell marauroa.perceptionListener\r\n\t\tmarauroa.perceptionListener.onPerceptionEnd(msg[\"sync\"], msg[\"s\"]);\r\n\t},\r\n\r\n\t/**\r\n\t * This method applies perceptions addedto the Map<RPObject::ID,RPObject>\r\n\t * passed as argument. It clears the map if this is a sync perception\r\n\t *\r\n\t * @param msg\r\n\t *            the perception message\r\n\t */\r\n\tapplyPerceptionAddedRPObjects: function(msg) {\r\n\t\tif (msg[\"aO\"]) {\r\n\t\t\tfor (var i in msg[\"aO\"]) {\r\n\t\t\t\tif (msg[\"aO\"].hasOwnProperty(i)) {\r\n\t\t\t\t\tif (!marauroa.perceptionListener.onAdded(msg[\"aO\"][i])) {\r\n\t\t\t\t\t\tvar o = marauroa.rpobjectFactory.create(msg[\"aO\"][i][\"c\"]);\r\n\t\t\t\t\t\tmarauroa.perceptionHandler.addChanges(o, msg[\"aO\"][i]);\r\n\t\t\t\t\t\tmarauroa.currentZone[msg[\"aO\"][i][\"a\"][\"id\"]] = o;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * This method applys perceptions deleted to the Map<RPObject::ID,RPObject>\r\n\t * passed as argument.\r\n\t *\r\n\t * @param msg\r\n\t *            the perception message\r\n\t */\r\n\tapplyPerceptionDeletedRPObjects: function(msg) {\r\n\t\tif (msg[\"dO\"]) {\r\n\t\t\tfor (var i in msg[\"dO\"]) {\r\n\t\t\t\tif (msg[\"dO\"].hasOwnProperty(i)) {\r\n\t\t\t\t\tvar tmp = msg[\"dO\"][i][\"a\"][\"id\"];\r\n\t\t\t\t\tif (!marauroa.perceptionListener.onDeleted(msg[\"dO\"][i])) {\r\n\t\t\t\t\t\tmarauroa.currentZone[tmp].destroy(marauroa.currentZone);\r\n\t\t\t\t\t\tdelete marauroa.currentZone[tmp];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * This method applies perceptions modified added and modified deleted to the\r\n\t * Map<RPObject.ID,RPObject> passed as argument.\r\n\t *\r\n\t * @param msg\r\n\t *            the perception message\r\n\t */\r\n\tapplyPerceptionModifiedRPObjects: function(msg) {\r\n\r\n\t\t// deleted attributes\r\n\t\tif (msg[\"dA\"]) {\r\n\t\t\tfor (var i in msg[\"dA\"]) {\r\n\t\t\t\tif (msg[\"dA\"].hasOwnProperty(i)) {\r\n\t\t\t\t\tif (typeof(marauroa.currentZone[msg[\"dA\"][i][\"a\"][\"id\"]]) !== \"undefined\") {\r\n\t\t\t\t\t\tvar o = marauroa.currentZone[msg[\"dA\"][i][\"a\"][\"id\"]];\r\n\t\t\t\t\t\tif (!marauroa.perceptionListener.onModifiedDeleted(msg[\"dA\"][i])) {\r\n\t\t\t\t\t\t\tmarauroa.perceptionHandler.deleteChanges(o, msg[\"dA\"][i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// added attributes\r\n\t\tif (msg[\"aA\"]) {\r\n\t\t\tfor (var i in msg[\"aA\"]) {\r\n\t\t\t\tif (msg[\"aA\"].hasOwnProperty(i)) {\r\n\t\t\t\t\tif (typeof(marauroa.currentZone[msg[\"aA\"][i][\"a\"][\"id\"]]) !== \"undefined\") {\r\n\t\t\t\t\t\tvar o = marauroa.currentZone[msg[\"aA\"][i][\"a\"][\"id\"]];\r\n\t\t\t\t\t\tif (!marauroa.perceptionListener.onModifiedAdded(o, msg[\"aA\"][i])) {\r\n\t\t\t\t\t\t\tmarauroa.perceptionHandler.addChanges(o, msg[\"aA\"][i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * This method applys perceptions for our RPObject to the Map<RPObject::ID,RPObject>\r\n\t * passed as argument.\r\n\t *\r\n\t * @param msg\r\n\t *            the perception message\r\n\t */\r\n\tapplyPerceptionMyRPObject: function(msg) {\r\n\r\n\t\tif (!marauroa.perceptionListener.onMyRPObject(msg[\"aM\"], msg[\"dM\"])) {\r\n\t\t\tvar id;\r\n\t\t\tif (typeof(msg[\"aM\"]) !== \"undefined\") {\r\n\t\t\t\tid = msg[\"aM\"][\"a\"][\"id\"];\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof(msg[\"dM\"]) !== \"undefined\") {\r\n\t\t\t\tid = msg[\"dM\"][\"a\"][\"id\"];\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof(id) === \"undefined\") {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tmarauroa.perceptionHandler.addMyRPObjectToWorldIfPrivate(id, msg[\"aM\"]);\r\n\t\t\tvar o = marauroa.currentZone[id];\r\n\t\t\tmarauroa.me = o;\r\n\t\t\tmarauroa.perceptionHandler.deleteChanges(o, msg[\"dM\"]);\r\n\t\t\tmarauroa.perceptionHandler.addChanges(o, msg[\"aM\"]);\r\n\t\t}\r\n\t},\r\n\r\n\t/**\r\n\t * adds our RPObject to the world in case it was not already added by the public perception.\r\n\t *\r\n\t * @param added added changes of my object\r\n\t */\r\n\taddMyRPObjectToWorldIfPrivate: function(id, added) {\r\n\t\tif (typeof(marauroa.currentZone[id]) !== \"undefined\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!marauroa.perceptionListener.onAdded(added)) {\r\n\t\t\tif (typeof(added) === \"undefined\") {\r\n\t\t\t\tmarauroa.currentZone[id] = {};\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar o = marauroa.rpobjectFactory.create(added[\"c\"]);\r\n\t\t\tmarauroa.currentZone[id] = o;\r\n\t\t\tmarauroa.perceptionHandler.addChanges(o, added);\r\n\t\t}\r\n\t},\r\n\r\n\tdeleteChanges: function(object, diff) {\r\n\t\tif (typeof(diff) === \"undefined\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// delete attributes\r\n\t\tif (typeof(diff[\"a\"]) !== \"undefined\") {\r\n\t\t\tfor (var i in diff[\"a\"]) {\r\n\t\t\t\tif (diff[\"a\"].hasOwnProperty(i) && i !== \"id\" && i !== \"zoneid\") {\r\n\t\t\t\t\tobject.unset(i);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// delete slots and/or their content\r\n\t\tif (typeof(diff[\"s\"]) !== \"undefined\") {\r\n\t\t\tfor (var i in diff[\"s\"]) {\r\n\t\t\t\tif (!diff[\"s\"].hasOwnProperty(i)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// delete slot?\r\n\t\t\t\tif (marauroa.util.isEmpty(diff[\"s\"][i])) {\r\n\t\t\t\t\tobject.del(diff[\"s\"][i]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// TODO: difference between deleting an object from a slot and an attribute from a contained object\r\n\t\t\t\t\tfor (var j in diff[\"s\"][i]) {\r\n\t\t\t\t\t\tif (diff[\"s\"][i].hasOwnProperty(j)) {\r\n\t\t\t\t\t\t\tobject[i].del(diff[\"s\"][i][j][\"a\"].id);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// delete maps and/or their content\r\n\t\tif (typeof(diff[\"m\"]) !== \"undefined\") {\r\n\t\t\tfor (var i in diff[\"m\"]) {\r\n\t\t\t\tif (!diff[\"m\"].hasOwnProperty(i)) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (marauroa.util.isEmpty(diff[\"m\"][i][\"a\"])) {\r\n\t\t\t\t\tobject.unset(diff[\"m\"][i]);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (var j in diff[\"m\"][i][\"a\"]) {\r\n\t\t\t\t\t\tif (diff[\"m\"][i][\"a\"].hasOwnProperty(j)) {\r\n\t\t\t\t\t\t\tobject.unsetMapEntry(i, j);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// TODO: links\r\n\t},\r\n\r\n\taddChanges: function(object, diff) {\r\n\t\tif (typeof(diff) === \"undefined\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tobject[\"_rpclass\"] = diff[\"c\"];\r\n\r\n\t\t// attributes\r\n\t\tfor (var i in diff[\"a\"]) {\r\n\t\t\tif (diff[\"a\"].hasOwnProperty(i)) {\r\n\t\t\t\tif (typeof(object.set) === \"undefined\") {\r\n\t\t\t\t\tconsole.warn(\"Object missing set(key, value)-function\", object, diff[\"a\"]);\r\n\t\t\t\t\tobject[i] = diff[\"a\"][i];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tobject.set(i, diff[\"a\"][i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// maps\r\n\t\tif (typeof(diff[\"m\"]) !== \"undefined\") {\r\n\t\t\tfor (var i in diff[\"m\"]) {\r\n\t\t\t\tif (diff[\"m\"].hasOwnProperty(i)) {\r\n\t\t\t\t\tif (typeof(object[i]) === \"undefined\") {\r\n\t\t\t\t\t\tobject[i] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var j in diff[\"m\"][i][\"a\"]) {\r\n\t\t\t\t\t\tif (j !== \"zoneid\" && j !== \"id\" && diff[\"m\"][i][\"a\"].hasOwnProperty(j)) {\r\n\t\t\t\t\t\t\tobject.setMapEntry(i, j, diff[\"m\"][i][\"a\"][j]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// slots\r\n\t\tif (typeof(diff[\"s\"]) !== \"undefined\") {\r\n\t\t\tfor (var i in diff[\"s\"]) {\r\n\t\t\t\tif (diff[\"s\"].hasOwnProperty(i)) {\r\n\t\t\t\t\t// add slot itself, it it does not exist\r\n\t\t\t\t\tif (typeof(object[i]) === \"undefined\") {\r\n\t\t\t\t\t\tobject[i] = object.createSlot(i);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// for all slot members\r\n\t\t\t\t\tfor (var j in diff[\"s\"][i]) {\r\n\t\t\t\t\t\tif (diff[\"s\"][i].hasOwnProperty(j)) {\r\n\t\t\t\t\t\t\tvar id = diff[\"s\"][i][j][\"a\"].id;\r\n\t\t\t\t\t\t\tif (typeof(object[i].get(id)) === \"undefined\") {\r\n\t\t\t\t\t\t\t\tvar newObject = marauroa.rpobjectFactory.create(diff[\"s\"][i][j][\"c\"]);\r\n\t\t\t\t\t\t\t\tnewObject._parent = object[i];\r\n\t\t\t\t\t\t\t\tnewObject[\"id\"] = id;\r\n\t\t\t\t\t\t\t\tobject[i].add(newObject);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tmarauroa.perceptionHandler.addChanges(object[i].get(id), diff[\"s\"][i][j])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// events\r\n\t\tif (typeof(diff[\"e\"]) !== \"undefined\" && typeof(object.onEvent) !== \"undefined\") {\r\n\t\t\tfor (var i in diff[\"e\"]) {\r\n\t\t\t\tif (diff[\"e\"].hasOwnProperty(i)) {\r\n\t\t\t\t\tobject.onEvent(diff[\"e\"][i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// TODO: links\r\n\t}\r\n}\r\n","/***************************************************************************\r\n *                   (C) Copyright 2011-2017 - Marauroa                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU General Public License as published by  *\r\n *   the Free Software Foundation; either version 2 of the License, or     *\r\n *   (at your option) any later version.                                   *\r\n *                                                                         *\r\n ***************************************************************************/\r\n\r\n\"use strict\";\r\n\r\nvar marauroa = window.marauroa = window.marauroa || {};\r\n\r\n/**\r\n * creates RPObjects\r\n *\r\n * use the rpclass name as attribute name for a prototype object\r\n */\r\nmarauroa.rpobjectFactory = new function(){\r\n\tthis[\"_default\"] = {};\r\n\tthis[\"_default\"].onEvent = function(e) {\r\n\t\tvar event = marauroa.rpeventFactory.create(e[\"c\"]);\r\n\t\tfor (var i in e[\"a\"]) {\r\n\t\t\tif (e[\"a\"].hasOwnProperty(i)) {\r\n\t\t\t\tevent[i] = e[\"a\"][i];\r\n\t\t\t}\r\n\t\t\tevent[\"_rpclass\"] = e[\"c\"];\r\n\t\t}\r\n\t\t// Event slots\r\n\t\tfor (var slot in e[\"s\"]) {\r\n\t\t\tif (e[\"s\"].hasOwnProperty(slot)) {\r\n\t\t\t\tevent[slot] = e[\"s\"][slot];\r\n\t\t\t}\r\n\t\t}\r\n\t\tevent.execute(this);\r\n\t}\r\n\tthis[\"_default\"].set = function(key, value) {\r\n\t\tthis[key] = value;\r\n\t}\r\n\tthis[\"_default\"].setMapEntry = function(map, key, value) {\r\n\t\tthis[map][key] = value;\r\n\t}\r\n\tthis[\"_default\"].unset = function(key) {\r\n\t\tdelete this[key];\r\n\t}\r\n\tthis[\"_default\"].unsetMapEntry = function(map, key) {\r\n\t\tdelete this[map][key];\r\n\t}\r\n\tthis[\"_default\"].destroy = function(parent) {\r\n\t\t// do nothing\r\n\t}\r\n\tthis[\"_default\"].createSlot = function(name) {\r\n\t\tvar slot = marauroa.rpslotFactory.create(name);\r\n\t\tslot._parent = this;\r\n\t\treturn slot;\r\n\t}\r\n\r\n\tthis[\"_default\"].init = function() {\r\n\t\t// do nothing\r\n\t}\r\n\r\n\tthis.create = function(rpclass) {\r\n\t\tvar ctor = this[\"_default\"];\r\n\t\tif (typeof(this[rpclass]) != \"undefined\") {\r\n\t\t\tctor = this[rpclass];\r\n\t\t}\r\n\t\tvar temp = marauroa.util.fromProto(ctor);\r\n\t\ttemp.init();\r\n\t\treturn temp;\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * creates RPEvent\r\n *\r\n * use the rpclass name as attribute name for a prototype object\r\n */\r\nmarauroa.rpeventFactory = new function(){\r\n\tthis[\"_default\"] = {};\r\n\tthis[\"_default\"].execute = function(rpobject) {\r\n\t\tif (marauroa.debug.unknownEvents) {\r\n\t\t\tconsole.log(\"Unhandled event: \", this, \" on \", rpobject);\r\n\t\t}\r\n\t}\r\n\r\n\tthis.create = function(rpclass) {\r\n\t\tvar ctor = this[\"_default\"];\r\n\t\tif (typeof(this[rpclass]) != \"undefined\") {\r\n\t\t\tctor = this[rpclass];\r\n\t\t}\r\n\t\treturn marauroa.util.fromProto(ctor);\r\n\t}\r\n}\r\n\r\n\r\n\r\n/**\r\n * creates RPSlot\r\n *\r\n * use the rpclass name as attribute name for a prototype object\r\n */\r\nmarauroa.rpslotFactory = new function(){\r\n\tthis[\"_default\"] = {\r\n\t\t_objects: []\r\n\t};\r\n\tthis[\"_default\"].add = function(value) {\r\n\t\tif (value && value[\"id\"]) {\r\n\t\t\tthis._objects.push(value);\r\n\t\t}\r\n\t}\r\n\tthis[\"_default\"].get = function(key) {\r\n\t\tvar idx = this.getIndex(key);\r\n\t\tif (idx > -1) {\r\n\t\t\treturn this._objects[idx];\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\tthis[\"_default\"].getByIndex = function(idx) {\r\n\t\treturn this._objects[idx];\r\n\t}\r\n\tthis[\"_default\"].count = function() {\r\n\t\treturn this._objects.length;\r\n\t}\r\n\tthis[\"_default\"].getIndex = function(key) {\r\n\t\tvar i;\r\n\t\tvar c = this._objects.length;\r\n\t\tfor (i = 0; i < c; i++) {\r\n\t\t\tif (this._objects[i][\"id\"] === key) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn -1;\r\n\t}\r\n\tthis[\"_default\"].del = function(key) {\r\n\t\tvar idx = this.getIndex(key);\r\n\t\tif (idx > -1) {\r\n\t\t\tthis._objects.splice(idx, 1);\r\n\t\t}\r\n\t}\r\n\tthis[\"_default\"].first = function() {\r\n\t\tif (this._objects.length > 0) {\r\n\t\t\treturn this._objects[0];\r\n\t\t}\r\n\t\treturn undefined;\r\n\t}\r\n\r\n\tthis.create = function(name) {\r\n\t\tvar ctor = this[\"_default\"];\r\n\t\tif (typeof(this[name]) != \"undefined\") {\r\n\t\t\tctor = this[name];\r\n\t\t}\r\n\t\tvar slot = marauroa.util.fromProto(ctor);\r\n\t\tslot._name = name;\r\n\t\tslot._objects = [];\r\n\t\treturn slot;\r\n\t}\r\n};\r\n","/**\r\n * @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ]\r\n * The MIT License\r\n */\r\n(function() {'use strict';var k=void 0,aa=this;function r(c,d){var a=c.split(\".\"),b=aa;!(a[0]in b)&&b.execScript&&b.execScript(\"var \"+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==k?b[e]=d:b=b[e]?b[e]:b[e]={}};var t=\"undefined\"!==typeof Uint8Array&&\"undefined\"!==typeof Uint16Array&&\"undefined\"!==typeof Uint32Array&&\"undefined\"!==typeof DataView;function u(c){var d=c.length,a=0,b=Number.POSITIVE_INFINITY,e,f,g,h,l,n,m,p,s,x;for(p=0;p<d;++p)c[p]>a&&(a=c[p]),c[p]<b&&(b=c[p]);e=1<<a;f=new (t?Uint32Array:Array)(e);g=1;h=0;for(l=2;g<=a;){for(p=0;p<d;++p)if(c[p]===g){n=0;m=h;for(s=0;s<g;++s)n=n<<1|m&1,m>>=1;x=g<<16|p;for(s=n;s<e;s+=l)f[s]=x;++h}++g;h<<=1;l<<=1}return[f,a,b]};function w(c,d){this.g=[];this.h=32768;this.c=this.f=this.d=this.k=0;this.input=t?new Uint8Array(c):c;this.l=!1;this.i=y;this.p=!1;if(d||!(d={}))d.index&&(this.d=d.index),d.bufferSize&&(this.h=d.bufferSize),d.bufferType&&(this.i=d.bufferType),d.resize&&(this.p=d.resize);switch(this.i){case A:this.a=32768;this.b=new (t?Uint8Array:Array)(32768+this.h+258);break;case y:this.a=0;this.b=new (t?Uint8Array:Array)(this.h);this.e=this.u;this.m=this.r;this.j=this.s;break;default:throw Error(\"invalid inflate mode\");\r\n}}var A=0,y=1;\r\nw.prototype.t=function(){for(;!this.l;){var c=B(this,3);c&1&&(this.l=!0);c>>>=1;switch(c){case 0:var d=this.input,a=this.d,b=this.b,e=this.a,f=d.length,g=k,h=k,l=b.length,n=k;this.c=this.f=0;if(a+1>=f)throw Error(\"invalid uncompressed block header: LEN\");g=d[a++]|d[a++]<<8;if(a+1>=f)throw Error(\"invalid uncompressed block header: NLEN\");h=d[a++]|d[a++]<<8;if(g===~h)throw Error(\"invalid uncompressed block header: length verify\");if(a+g>d.length)throw Error(\"input buffer is broken\");switch(this.i){case A:for(;e+g>\r\nb.length;){n=l-e;g-=n;if(t)b.set(d.subarray(a,a+n),e),e+=n,a+=n;else for(;n--;)b[e++]=d[a++];this.a=e;b=this.e();e=this.a}break;case y:for(;e+g>b.length;)b=this.e({o:2});break;default:throw Error(\"invalid inflate mode\");}if(t)b.set(d.subarray(a,a+g),e),e+=g,a+=g;else for(;g--;)b[e++]=d[a++];this.d=a;this.a=e;this.b=b;break;case 1:this.j(ba,ca);break;case 2:for(var m=B(this,5)+257,p=B(this,5)+1,s=B(this,4)+4,x=new (t?Uint8Array:Array)(C.length),Q=k,R=k,S=k,v=k,M=k,F=k,z=k,q=k,T=k,q=0;q<s;++q)x[C[q]]=\r\nB(this,3);if(!t){q=s;for(s=x.length;q<s;++q)x[C[q]]=0}Q=u(x);v=new (t?Uint8Array:Array)(m+p);q=0;for(T=m+p;q<T;)switch(M=D(this,Q),M){case 16:for(z=3+B(this,2);z--;)v[q++]=F;break;case 17:for(z=3+B(this,3);z--;)v[q++]=0;F=0;break;case 18:for(z=11+B(this,7);z--;)v[q++]=0;F=0;break;default:F=v[q++]=M}R=t?u(v.subarray(0,m)):u(v.slice(0,m));S=t?u(v.subarray(m)):u(v.slice(m));this.j(R,S);break;default:throw Error(\"unknown BTYPE: \"+c);}}return this.m()};\r\nvar E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=t?new Uint16Array(E):E,G=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],H=t?new Uint16Array(G):G,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],J=t?new Uint8Array(I):I,K=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],L=t?new Uint16Array(K):K,N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,\r\n13],O=t?new Uint8Array(N):N,P=new (t?Uint8Array:Array)(288),U,da;U=0;for(da=P.length;U<da;++U)P[U]=143>=U?8:255>=U?9:279>=U?7:8;var ba=u(P),V=new (t?Uint8Array:Array)(30),W,ea;W=0;for(ea=V.length;W<ea;++W)V[W]=5;var ca=u(V);function B(c,d){for(var a=c.f,b=c.c,e=c.input,f=c.d,g=e.length,h;b<d;){if(f>=g)throw Error(\"input buffer is broken\");a|=e[f++]<<b;b+=8}h=a&(1<<d)-1;c.f=a>>>d;c.c=b-d;c.d=f;return h}\r\nfunction D(c,d){for(var a=c.f,b=c.c,e=c.input,f=c.d,g=e.length,h=d[0],l=d[1],n,m;b<l&&!(f>=g);)a|=e[f++]<<b,b+=8;n=h[a&(1<<l)-1];m=n>>>16;if(m>b)throw Error(\"invalid code length: \"+m);c.f=a>>m;c.c=b-m;c.d=f;return n&65535}\r\nw.prototype.j=function(c,d){var a=this.b,b=this.a;this.n=c;for(var e=a.length-258,f,g,h,l;256!==(f=D(this,c));)if(256>f)b>=e&&(this.a=b,a=this.e(),b=this.a),a[b++]=f;else{g=f-257;l=H[g];0<J[g]&&(l+=B(this,J[g]));f=D(this,d);h=L[f];0<O[f]&&(h+=B(this,O[f]));b>=e&&(this.a=b,a=this.e(),b=this.a);for(;l--;)a[b]=a[b++-h]}for(;8<=this.c;)this.c-=8,this.d--;this.a=b};\r\nw.prototype.s=function(c,d){var a=this.b,b=this.a;this.n=c;for(var e=a.length,f,g,h,l;256!==(f=D(this,c));)if(256>f)b>=e&&(a=this.e(),e=a.length),a[b++]=f;else{g=f-257;l=H[g];0<J[g]&&(l+=B(this,J[g]));f=D(this,d);h=L[f];0<O[f]&&(h+=B(this,O[f]));b+l>e&&(a=this.e(),e=a.length);for(;l--;)a[b]=a[b++-h]}for(;8<=this.c;)this.c-=8,this.d--;this.a=b};\r\nw.prototype.e=function(){var c=new (t?Uint8Array:Array)(this.a-32768),d=this.a-32768,a,b,e=this.b;if(t)c.set(e.subarray(32768,c.length));else{a=0;for(b=c.length;a<b;++a)c[a]=e[a+32768]}this.g.push(c);this.k+=c.length;if(t)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];this.a=32768;return e};\r\nw.prototype.u=function(c){var d,a=this.input.length/this.d+1|0,b,e,f,g=this.input,h=this.b;c&&(\"number\"===typeof c.o&&(a=c.o),\"number\"===typeof c.q&&(a+=c.q));2>a?(b=(g.length-this.d)/this.n[2],f=258*(b/2)|0,e=f<h.length?h.length+f:h.length<<1):e=h.length*a;t?(d=new Uint8Array(e),d.set(h)):d=h;return this.b=d};\r\nw.prototype.m=function(){var c=0,d=this.b,a=this.g,b,e=new (t?Uint8Array:Array)(this.k+(this.a-32768)),f,g,h,l;if(0===a.length)return t?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);f=0;for(g=a.length;f<g;++f){b=a[f];h=0;for(l=b.length;h<l;++h)e[c++]=b[h]}f=32768;for(g=this.a;f<g;++f)e[c++]=d[f];this.g=[];return this.buffer=e};\r\nw.prototype.r=function(){var c,d=this.a;t?this.p?(c=new Uint8Array(d),c.set(this.b.subarray(0,d))):c=this.b.subarray(0,d):(this.b.length>d&&(this.b.length=d),c=this.b);return this.buffer=c};r(\"Zlib.RawInflate\",w);r(\"Zlib.RawInflate.prototype.decompress\",w.prototype.t);var X={ADAPTIVE:y,BLOCK:A},Y,Z,$,fa;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(fa=Y.length;$<fa;++$)Z=Y[$],r(\"Zlib.RawInflate.BufferType.\"+Z,X[Z]);}).call(this);\r\n","/***************************************************************************\r\n *                   (C) Copyright 2011-2017 - Marauroa                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU General Public License as published by  *\r\n *   the Free Software Foundation; either version 2 of the License, or     *\r\n *   (at your option) any later version.                                   *\r\n *                                                                         *\r\n ***************************************************************************/\r\n\r\n\"use strict\";\r\n\r\nvar marauroa = window.marauroa = window.marauroa || {};\r\n\r\nmarauroa.Deserializer = function(buffer) {\r\n\tvar offset = 0;\r\n\tvar view = new DataView(buffer);\r\n\r\n\t/**\r\n\t * This method reads a byte from the Serializer\r\n\t *\r\n\t * @return the byte serialized\r\n\t */\r\n\tthis.readByte = function() {\r\n\t\toffset++;\r\n\t\treturn view.getUInt8(offset - 1);\r\n\t}\r\n\r\n\t/**\r\n\t * This method reads a short from the Serializer\r\n\t *\r\n\t * @return the short serialized\r\n\t */\r\n\tthis.readShort = function() {\r\n\t\toffset += 2;\r\n\t\treturn view.getInt16(offset - 2, true);\r\n\t}\r\n\r\n\t/**\r\n\t * This method reads a int from the Serializer\r\n\t *\r\n\t * @return the int serialized\r\n\t */\r\n\tthis.readInt = function() {\r\n\t\toffset += 4;\r\n\t\treturn view.getInt32(offset - 4, true);\r\n\t}\r\n\r\n\t/**\r\n\t * This method reads a byte array from the Serializer\r\n\t *\r\n\t * @return the byte array serialized\r\n\t */\r\n\tthis.readByteArray = function() {\r\n\t\tvar size = view.getUint32(offset, true);\r\n\t\toffset += size + 4;\r\n\t\treturn new DataView(buffer, offset - size, size);\r\n\t}\r\n\r\n\t/**\r\n\t * This method reads a byte array of a maximum length of 255 entries\r\n\t *\r\n\t * @return the byte array serialized\r\n\t */\r\n\tthis.read255LongByteArray = function() {\r\n\t\tvar size = view.getUint8(offset, true);\r\n\t\toffset += size + 1;\r\n\t\treturn new DataView(buffer, offset - size, size);\r\n\t}\r\n\r\n\t/**\r\n\t * This method reads a byte array of a maximum length of 65536 entries\r\n\t *\r\n\t * @return the byte array serialized\r\n\t */\r\n\tthis.read65536LongByteArray = function() {\r\n\t\tvar size = view.getUint16(offset, true);\r\n\t\toffset += size + 1;\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * This method reads a float from the Serializer\r\n\t *\r\n\t * @return the float serialized\r\n\t */\r\n\tthis.readFloat = function() {\r\n\t\toffset += 4;\r\n\t\treturn view.getFloat32(offset - 4, true);\r\n\t}\r\n\r\n\t/**\r\n\t * This method reads a String from the Serializer\r\n\t *\r\n\t * @return the String serialized\r\n\t */\r\n\tthis.readString = function() {\r\n\t\treturn new TextDecoder(\"utf-8\").decode(this.readByteArray());\r\n\t}\r\n\r\n\t/**\r\n\t * This method reads a short string (whose size is smaller than 255 bytes\r\n\t * long)\r\n\t *\r\n\t * @return the String serialized\r\n\t */\r\n\tthis.read255LongString = function() {\r\n\t\treturn new TextDecoder(\"utf-8\").decode(this.read255LongByteArray());\r\n\t}\r\n\r\n\t/**\r\n\t * This method reads a long string (whose size is smaller than 65536 bytes\r\n\t * long)\r\n\t *\r\n\t * @return the String serialized\r\n\t */\r\n\tthis.read65536LongString = function() {\r\n\t\treturn new TextDecoder(\"utf-8\").decode(this.read65536LongByteArray());\r\n\t}\r\n\r\n\t/**\r\n\t * This method reads a String array from the Serializer\r\n\t *\r\n\t * @return the String array serialized\r\n\t */\r\n\tthis.readStringArray = function() {\r\n\t\tvar size = this.readInt();\r\n\t\tvar res = [];\r\n\t\tfor (var i = 0; i < size; i++) {\r\n\t\t\tres.push(this.readString());\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * reads an Attributes-object from the stream\r\n\t *\r\n\t * @param obj object to read into\r\n\t * @return obj\r\n\t */\r\n\tthis.readAttributes = function(obj) {\r\n\t\tthis.readString();\r\n\t\tvar size = this.readInt();\r\n\t\tfor (var i = 0; i < size; i++) {\r\n\t\t\tvar code = this.readShort();\r\n\t\t\tif (code !== -1) {\r\n\t\t\t\tconsole.error(\"RPClass not supported, yet.\");\r\n\t\t\t\treturn obj;\r\n\t\t\t}\r\n\t\t\tvar key = this.readString();\r\n\t\t\tvar value = this.readString();\r\n\t\t\tobj[key] = value;\r\n\t\t}\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tthis.readRPObject = function(obj) {\r\n\t\tthis.readAttributes(obj);\r\n\r\n\t\treturn obj;\r\n\t}\r\n};\r\n\r\nmarauroa.Deserializer.binaryStringToUint = function(binary) {\r\n    var len = binary.length;\r\n    var bytes = new Uint8Array( len );\r\n    for (var i = 0; i < len; i++) {\r\n        bytes[i] = binary.charCodeAt(i);\r\n    }\r\n    return bytes.buffer\r\n};\r\n\r\n/**\r\n * created a deserializer from a deflated data stream that was encoded using base64.\r\n *\r\n * @param base64 base64 string\r\n * @return Deserializer\r\n */\r\nmarauroa.Deserializer.fromDeflatedBase64 = function(base64) {\r\n    var d = window.atob(base64);\r\n    var buffer = marauroa.Deserializer.binaryStringToUint(d.substring(2, d.length - 4));\r\n    var inflate = new window[\"Zlib\"][\"RawInflate\"](buffer);\r\n    var data = inflate[\"decompress\"]();\r\n    return new marauroa.Deserializer(data.buffer);\r\n};\r\n\r\n/**\r\n * created a deserializer from a data stream that was encoded using base64.\r\n *\r\n * @param base64 base64 string\r\n * @return Deserializer\r\n */\r\nmarauroa.Deserializer.fromBase64 = function(base64) {\r\n    return marauroa.Deserializer.fromBinaryString(atob(base64));\r\n};\r\n\r\n\r\n/**\r\n * created a deserializer from a data stream\r\n *\r\n * @param binary binary string\r\n * @return Deserializer\r\n */\r\nmarauroa.Deserializer.fromBinaryString = function(binary) {\r\n    var len = binary.length;\r\n    var bytes = new Uint8Array( len );\r\n    for (var i = 0; i < len; i++) {\r\n        bytes[i] = binary.charCodeAt(i);\r\n    }\r\n    return new marauroa.Deserializer(bytes.buffer);\r\n};\r\n","\n      var stendhal = window.stendhal = window.stendhal || {};\n      stendhal.data = stendhal.data || {};\n\n      stendhal.data.build = {\n        version: \"1.38\",\n        build: \"2023-12-30 15:34:25\",\n        dist: \"webclient\"\n      }\n    ","/*\r\n    From: http://jsxgraph.uni-bayreuth.de/wp/tag/gunzip/\r\n    From: https://jsxgraph.org/wp/\r\n\r\n    Copyright 2008,2009\r\n        Matthias Ehmann,\r\n        Michael Gerhaeuser,\r\n        Carsten Miller,\r\n        Bianca Valentin,\r\n        Alfred Wassermann,\r\n        Peter Wilfahrt\r\n\r\n    This file is part of JSXGraph.\r\n\r\n    JSXGraph is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU Lesser General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    JSXGraph is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU Lesser General Public License for more details.\r\n\r\n    You should have received a copy of the GNU Lesser General Public License\r\n    along with JSXGraph.  If not, see <http://www.gnu.org/licenses/>.\r\n*/\r\n\r\n/**\r\n * @fileoverview Utilities for uncompressing and base64 decoding\r\n */\r\n\r\n/**\r\n  * @class Util class\r\n  * Class for gunzipping, unzipping and base64 decoding of files.\r\n  * It is used for reading GEONExT, Geogebra and Intergeo files.\r\n  *\r\n  * Only Huffman codes are decoded in gunzip.\r\n  * The code is based on the source code for gunzip.c by Pasi Ojala\r\n  * @see <a href=\"http://www.cs.tut.fi/~albert/Dev/gunzip/gunzip.c\">http://www.cs.tut.fi/~albert/Dev/gunzip/gunzip.c</a>\r\n  * @see <a href=\"http://www.cs.tut.fi/~albert\">http://www.cs.tut.fi/~albert</a>\r\n  */\r\nJXG = {};\r\nJXG.Util = {};\r\n\r\n/**\r\n * Unzip zip files\r\n */\r\nJXG.Util.Unzip = function (barray){\r\n    var outputArr = [],\r\n        output = \"\",\r\n        debug = false,\r\n        gpflags,\r\n        files = 0,\r\n        unzipped = [],\r\n        crc,\r\n        buf32k = new Array(32768),\r\n        bIdx = 0,\r\n        modeZIP=false,\r\n\r\n        CRC, SIZE,\r\n\r\n        bitReverse = [\r\n        0x00, 0x80, 0x40, 0xc0, 0x20, 0xa0, 0x60, 0xe0,\r\n        0x10, 0x90, 0x50, 0xd0, 0x30, 0xb0, 0x70, 0xf0,\r\n        0x08, 0x88, 0x48, 0xc8, 0x28, 0xa8, 0x68, 0xe8,\r\n        0x18, 0x98, 0x58, 0xd8, 0x38, 0xb8, 0x78, 0xf8,\r\n        0x04, 0x84, 0x44, 0xc4, 0x24, 0xa4, 0x64, 0xe4,\r\n        0x14, 0x94, 0x54, 0xd4, 0x34, 0xb4, 0x74, 0xf4,\r\n        0x0c, 0x8c, 0x4c, 0xcc, 0x2c, 0xac, 0x6c, 0xec,\r\n        0x1c, 0x9c, 0x5c, 0xdc, 0x3c, 0xbc, 0x7c, 0xfc,\r\n        0x02, 0x82, 0x42, 0xc2, 0x22, 0xa2, 0x62, 0xe2,\r\n        0x12, 0x92, 0x52, 0xd2, 0x32, 0xb2, 0x72, 0xf2,\r\n        0x0a, 0x8a, 0x4a, 0xca, 0x2a, 0xaa, 0x6a, 0xea,\r\n        0x1a, 0x9a, 0x5a, 0xda, 0x3a, 0xba, 0x7a, 0xfa,\r\n        0x06, 0x86, 0x46, 0xc6, 0x26, 0xa6, 0x66, 0xe6,\r\n        0x16, 0x96, 0x56, 0xd6, 0x36, 0xb6, 0x76, 0xf6,\r\n        0x0e, 0x8e, 0x4e, 0xce, 0x2e, 0xae, 0x6e, 0xee,\r\n        0x1e, 0x9e, 0x5e, 0xde, 0x3e, 0xbe, 0x7e, 0xfe,\r\n        0x01, 0x81, 0x41, 0xc1, 0x21, 0xa1, 0x61, 0xe1,\r\n        0x11, 0x91, 0x51, 0xd1, 0x31, 0xb1, 0x71, 0xf1,\r\n        0x09, 0x89, 0x49, 0xc9, 0x29, 0xa9, 0x69, 0xe9,\r\n        0x19, 0x99, 0x59, 0xd9, 0x39, 0xb9, 0x79, 0xf9,\r\n        0x05, 0x85, 0x45, 0xc5, 0x25, 0xa5, 0x65, 0xe5,\r\n        0x15, 0x95, 0x55, 0xd5, 0x35, 0xb5, 0x75, 0xf5,\r\n        0x0d, 0x8d, 0x4d, 0xcd, 0x2d, 0xad, 0x6d, 0xed,\r\n        0x1d, 0x9d, 0x5d, 0xdd, 0x3d, 0xbd, 0x7d, 0xfd,\r\n        0x03, 0x83, 0x43, 0xc3, 0x23, 0xa3, 0x63, 0xe3,\r\n        0x13, 0x93, 0x53, 0xd3, 0x33, 0xb3, 0x73, 0xf3,\r\n        0x0b, 0x8b, 0x4b, 0xcb, 0x2b, 0xab, 0x6b, 0xeb,\r\n        0x1b, 0x9b, 0x5b, 0xdb, 0x3b, 0xbb, 0x7b, 0xfb,\r\n        0x07, 0x87, 0x47, 0xc7, 0x27, 0xa7, 0x67, 0xe7,\r\n        0x17, 0x97, 0x57, 0xd7, 0x37, 0xb7, 0x77, 0xf7,\r\n        0x0f, 0x8f, 0x4f, 0xcf, 0x2f, 0xaf, 0x6f, 0xef,\r\n        0x1f, 0x9f, 0x5f, 0xdf, 0x3f, 0xbf, 0x7f, 0xff\r\n    ],\r\n\r\n    cplens = [\r\n        3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\r\n        35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\r\n    ],\r\n\r\n    cplext = [\r\n        0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2,\r\n        3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 99, 99\r\n    ], /* 99==invalid */\r\n\r\n    cpdist = [\r\n        0x0001, 0x0002, 0x0003, 0x0004, 0x0005, 0x0007, 0x0009, 0x000d,\r\n        0x0011, 0x0019, 0x0021, 0x0031, 0x0041, 0x0061, 0x0081, 0x00c1,\r\n        0x0101, 0x0181, 0x0201, 0x0301, 0x0401, 0x0601, 0x0801, 0x0c01,\r\n        0x1001, 0x1801, 0x2001, 0x3001, 0x4001, 0x6001\r\n    ],\r\n\r\n    cpdext = [\r\n        0,  0,  0,  0,  1,  1,  2,  2,\r\n        3,  3,  4,  4,  5,  5,  6,  6,\r\n        7,  7,  8,  8,  9,  9, 10, 10,\r\n        11, 11, 12, 12, 13, 13\r\n    ],\r\n\r\n    border = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15],\r\n\r\n    bA = barray,\r\n\r\n    bytepos=0,\r\n    bitpos=0,\r\n    bb = 1,\r\n    bits=0,\r\n\r\n    NAMEMAX = 256,\r\n\r\n    nameBuf = [],\r\n\r\n    fileout;\r\n\r\n    function readByte(){\r\n        bits+=8;\r\n        if (bytepos<bA.length){\r\n            //if (debug)\r\n            //    document.write(bytepos+\": \"+bA[bytepos]+\"<br>\");\r\n            return bA[bytepos++];\r\n        } else\r\n            return -1;\r\n    };\r\n\r\n    function byteAlign(){\r\n        bb = 1;\r\n    };\r\n\r\n    function readBit(){\r\n        var carry;\r\n        bits++;\r\n        carry = (bb & 1);\r\n        bb >>= 1;\r\n        if (bb==0){\r\n            bb = readByte();\r\n            carry = (bb & 1);\r\n            bb = (bb>>1) | 0x80;\r\n        }\r\n        return carry;\r\n    };\r\n\r\n    function readBits(a) {\r\n        var res = 0,\r\n            i = a;\r\n\r\n        while(i--) {\r\n            res = (res<<1) | readBit();\r\n        }\r\n        if(a) {\r\n            res = bitReverse[res]>>(8-a);\r\n        }\r\n        return res;\r\n    };\r\n\r\n    function flushBuffer(){\r\n        //document.write('FLUSHBUFFER:'+buf32k);\r\n        bIdx = 0;\r\n    };\r\n    function addBuffer(a){\r\n        SIZE++;\r\n        //CRC=updcrc(a,crc);\r\n        buf32k[bIdx++] = a;\r\n        outputArr.push(String.fromCharCode(a));\r\n        //output+=String.fromCharCode(a);\r\n        if(bIdx==0x8000){\r\n            //document.write('ADDBUFFER:'+buf32k);\r\n            bIdx=0;\r\n        }\r\n    };\r\n\r\n    function HufNode() {\r\n        this.b0=0;\r\n        this.b1=0;\r\n        this.jump = null;\r\n        this.jumppos = -1;\r\n    };\r\n\r\n    var LITERALS = 288;\r\n\r\n    var literalTree = new Array(LITERALS);\r\n    var distanceTree = new Array(32);\r\n    var treepos=0;\r\n    var Places = null;\r\n    var Places2 = null;\r\n\r\n    var impDistanceTree = new Array(64);\r\n    var impLengthTree = new Array(64);\r\n\r\n    var len = 0;\r\n    var fpos = new Array(17);\r\n    fpos[0]=0;\r\n    var flens;\r\n    var fmax;\r\n\r\n    function IsPat() {\r\n        while (1) {\r\n            if (fpos[len] >= fmax)\r\n                return -1;\r\n            if (flens[fpos[len]] == len)\r\n                return fpos[len]++;\r\n            fpos[len]++;\r\n        }\r\n    };\r\n\r\n    function Rec() {\r\n        var curplace = Places[treepos];\r\n        var tmp;\r\n        if (debug)\r\n            document.write(\"<br>len:\"+len+\" treepos:\"+treepos);\r\n        if(len==17) { //war 17\r\n            return -1;\r\n        }\r\n        treepos++;\r\n        len++;\r\n\r\n        tmp = IsPat();\r\n        if (debug)\r\n            document.write(\"<br>IsPat \"+tmp);\r\n        if(tmp >= 0) {\r\n            curplace.b0 = tmp;    /* leaf cell for 0-bit */\r\n            if (debug)\r\n                document.write(\"<br>b0 \"+curplace.b0);\r\n        } else {\r\n        /* Not a Leaf cell */\r\n        curplace.b0 = 0x8000;\r\n        if (debug)\r\n            document.write(\"<br>b0 \"+curplace.b0);\r\n        if(Rec())\r\n            return -1;\r\n        }\r\n        tmp = IsPat();\r\n        if(tmp >= 0) {\r\n            curplace.b1 = tmp;    /* leaf cell for 1-bit */\r\n            if (debug)\r\n                document.write(\"<br>b1 \"+curplace.b1);\r\n            curplace.jump = null;    /* Just for the display routine */\r\n        } else {\r\n            /* Not a Leaf cell */\r\n            curplace.b1 = 0x8000;\r\n            if (debug)\r\n                document.write(\"<br>b1 \"+curplace.b1);\r\n            curplace.jump = Places[treepos];\r\n            curplace.jumppos = treepos;\r\n            if(Rec())\r\n                return -1;\r\n        }\r\n        len--;\r\n        return 0;\r\n    };\r\n\r\n    function CreateTree(currentTree, numval, lengths, show) {\r\n        var i;\r\n        /* Create the Huffman decode tree/table */\r\n        //document.write(\"<br>createtree<br>\");\r\n        if (debug)\r\n            document.write(\"currentTree \"+currentTree+\" numval \"+numval+\" lengths \"+lengths+\" show \"+show);\r\n        Places = currentTree;\r\n        treepos=0;\r\n        flens = lengths;\r\n        fmax  = numval;\r\n        for (i=0;i<17;i++)\r\n            fpos[i] = 0;\r\n        len = 0;\r\n        if(Rec()) {\r\n            //fprintf(stderr, \"invalid huffman tree\\n\");\r\n            if (debug)\r\n                alert(\"invalid huffman tree\\n\");\r\n            return -1;\r\n        }\r\n        if (debug){\r\n            document.write('<br>Tree: '+Places.length);\r\n            for (var a=0;a<32;a++){\r\n                document.write(\"Places[\"+a+\"].b0=\"+Places[a].b0+\"<br>\");\r\n                document.write(\"Places[\"+a+\"].b1=\"+Places[a].b1+\"<br>\");\r\n            }\r\n        }\r\n\r\n        /*if(show) {\r\n            var tmp;\r\n            for(tmp=currentTree;tmp<Places;tmp++) {\r\n                fprintf(stdout, \"0x%03x  0x%03x (0x%04x)\",tmp-currentTree, tmp->jump?tmp->jump-currentTree:0,(tmp->jump?tmp->jump-currentTree:0)*6+0xcf0);\r\n                if(!(tmp.b0 & 0x8000)) {\r\n                    //fprintf(stdout, \"  0x%03x (%c)\", tmp->b0,(tmp->b0<256 && isprint(tmp->b0))?tmp->b0:'\ufffd');\r\n                }\r\n                if(!(tmp.b1 & 0x8000)) {\r\n                    if((tmp.b0 & 0x8000))\r\n                        fprintf(stdout, \"           \");\r\n                    fprintf(stdout, \"  0x%03x (%c)\", tmp->b1,(tmp->b1<256 && isprint(tmp->b1))?tmp->b1:'\ufffd');\r\n                }\r\n                fprintf(stdout, \"\\n\");\r\n            }\r\n        }*/\r\n        return 0;\r\n    };\r\n\r\n    function DecodeValue(currentTree) {\r\n        var len, i,\r\n            xtreepos=0,\r\n            X = currentTree[xtreepos],\r\n            b;\r\n\r\n        /* decode one symbol of the data */\r\n        while(1) {\r\n            b=readBit();\r\n            if (debug)\r\n                document.write(\"b=\"+b);\r\n            if(b) {\r\n                if(!(X.b1 & 0x8000)){\r\n                    if (debug)\r\n                        document.write(\"ret1\");\r\n                    return X.b1;    /* If leaf node, return data */\r\n                }\r\n                X = X.jump;\r\n                len = currentTree.length;\r\n                for (i=0;i<len;i++){\r\n                    if (currentTree[i]===X){\r\n                        xtreepos=i;\r\n                        break;\r\n                    }\r\n                }\r\n                //xtreepos++;\r\n            } else {\r\n                if(!(X.b0 & 0x8000)){\r\n                    if (debug)\r\n                        document.write(\"ret2\");\r\n                    return X.b0;    /* If leaf node, return data */\r\n                }\r\n                //X++; //??????????????????\r\n                xtreepos++;\r\n                X = currentTree[xtreepos];\r\n            }\r\n        }\r\n        if (debug)\r\n            document.write(\"ret3\");\r\n        return -1;\r\n    };\r\n\r\n    function DeflateLoop() {\r\n        var last, c, type, i, len;\r\n\r\n        do {\r\n            /*if((last = readBit())){\r\n                fprintf(errfp, \"Last Block: \");\r\n            } else {\r\n                fprintf(errfp, \"Not Last Block: \");\r\n            }*/\r\n            last = readBit();\r\n            type = readBits(2);\r\n            switch(type) {\r\n                case 0:\r\n                    if (debug)\r\n                        alert(\"Stored\\n\");\r\n                    break;\r\n                case 1:\r\n                    if (debug)\r\n                        alert(\"Fixed Huffman codes\\n\");\r\n                    break;\r\n                case 2:\r\n                    if (debug)\r\n                        alert(\"Dynamic Huffman codes\\n\");\r\n                    break;\r\n                case 3:\r\n                    if (debug)\r\n                        alert(\"Reserved block type!!\\n\");\r\n                    break;\r\n                default:\r\n                    if (debug)\r\n                        alert(\"Unexpected value %d!\\n\", type);\r\n                    break;\r\n            }\r\n\r\n            if(type==0) {\r\n                var blockLen, cSum;\r\n\r\n                // Stored\r\n                byteAlign();\r\n                blockLen = readByte();\r\n                blockLen |= (readByte()<<8);\r\n\r\n                cSum = readByte();\r\n                cSum |= (readByte()<<8);\r\n\r\n                if(((blockLen ^ ~cSum) & 0xffff)) {\r\n                    document.write(\"BlockLen checksum mismatch\\n\");\r\n                }\r\n                while(blockLen--) {\r\n                    c = readByte();\r\n                    addBuffer(c);\r\n                }\r\n            } else if(type==1) {\r\n                var j;\r\n\r\n                /* Fixed Huffman tables -- fixed decode routine */\r\n                while(1) {\r\n                /*\r\n                    256    0000000        0\r\n                    :   :     :\r\n                    279    0010111        23\r\n                    0   00110000    48\r\n                    :    :      :\r\n                    143    10111111    191\r\n                    280 11000000    192\r\n                    :    :      :\r\n                    287 11000111    199\r\n                    144    110010000    400\r\n                    :    :       :\r\n                    255    111111111    511\r\n\r\n                    Note the bit order!\r\n                    */\r\n\r\n                j = (bitReverse[readBits(7)]>>1);\r\n                if(j > 23) {\r\n                    j = (j<<1) | readBit();    /* 48..255 */\r\n\r\n                    if(j > 199) {    /* 200..255 */\r\n                        j -= 128;    /*  72..127 */\r\n                        j = (j<<1) | readBit();        /* 144..255 << */\r\n                    } else {        /*  48..199 */\r\n                        j -= 48;    /*   0..151 */\r\n                        if(j > 143) {\r\n                            j = j+136;    /* 280..287 << */\r\n                            /*   0..143 << */\r\n                        }\r\n                    }\r\n                } else {    /*   0..23 */\r\n                    j += 256;    /* 256..279 << */\r\n                }\r\n                if(j < 256) {\r\n                    addBuffer(j);\r\n                    //document.write(\"out:\"+String.fromCharCode(j));\r\n                    /*fprintf(errfp, \"@%d %02x\\n\", SIZE, j);*/\r\n                } else if(j == 256) {\r\n                    /* EOF */\r\n                    break;\r\n                } else {\r\n                    var len, dist;\r\n\r\n                    j -= 256 + 1;    /* bytes + EOF */\r\n                    len = readBits(cplext[j]) + cplens[j];\r\n\r\n                    j = bitReverse[readBits(5)]>>3;\r\n                    if(cpdext[j] > 8) {\r\n                        dist = readBits(8);\r\n                        dist |= (readBits(cpdext[j]-8)<<8);\r\n                    } else {\r\n                        dist = readBits(cpdext[j]);\r\n                    }\r\n                    dist += cpdist[j];\r\n\r\n                    /*fprintf(errfp, \"@%d (l%02x,d%04x)\\n\", SIZE, len, dist);*/\r\n                    for(j=0;j<len;j++) {\r\n                        var c = buf32k[(bIdx - dist) & 0x7fff];\r\n                        addBuffer(c);\r\n                    }\r\n                }\r\n                } // while\r\n            } else if(type==2) {\r\n                var j, n, literalCodes, distCodes, lenCodes;\r\n                var ll = new Array(288+32);    // \"static\" just to preserve stack\r\n\r\n                // Dynamic Huffman tables\r\n\r\n                literalCodes = 257 + readBits(5);\r\n                distCodes = 1 + readBits(5);\r\n                lenCodes = 4 + readBits(4);\r\n                //document.write(\"<br>param: \"+literalCodes+\" \"+distCodes+\" \"+lenCodes+\"<br>\");\r\n                for(j=0; j<19; j++) {\r\n                    ll[j] = 0;\r\n                }\r\n\r\n                // Get the decode tree code lengths\r\n\r\n                //document.write(\"<br>\");\r\n                for(j=0; j<lenCodes; j++) {\r\n                    ll[border[j]] = readBits(3);\r\n                    //document.write(ll[border[j]]+\" \");\r\n                }\r\n                //fprintf(errfp, \"\\n\");\r\n                //document.write('<br>ll:'+ll);\r\n                len = distanceTree.length;\r\n                for (i=0; i<len; i++)\r\n                    distanceTree[i]=new HufNode();\r\n                if(CreateTree(distanceTree, 19, ll, 0)) {\r\n                    flushBuffer();\r\n                    return 1;\r\n                }\r\n                if (debug){\r\n                    document.write(\"<br>distanceTree\");\r\n                    for(var a=0;a<distanceTree.length;a++){\r\n                        document.write(\"<br>\"+distanceTree[a].b0+\" \"+distanceTree[a].b1+\" \"+distanceTree[a].jump+\" \"+distanceTree[a].jumppos);\r\n                        /*if (distanceTree[a].jumppos!=-1)\r\n                            document.write(\" \"+distanceTree[a].jump.b0+\" \"+distanceTree[a].jump.b1);\r\n                        */\r\n                    }\r\n                }\r\n                //document.write('<BR>tree created');\r\n\r\n                //read in literal and distance code lengths\r\n                n = literalCodes + distCodes;\r\n                i = 0;\r\n                var z=-1;\r\n                if (debug)\r\n                    document.write(\"<br>n=\"+n+\" bits: \"+bits+\"<br>\");\r\n                while(i < n) {\r\n                    z++;\r\n                    j = DecodeValue(distanceTree);\r\n                    if (debug)\r\n                        document.write(\"<br>\"+z+\" i:\"+i+\" decode: \"+j+\"    bits \"+bits+\"<br>\");\r\n                    if(j<16) {    // length of code in bits (0..15)\r\n                           ll[i++] = j;\r\n                    } else if(j==16) {    // repeat last length 3 to 6 times\r\n                           var l;\r\n                        j = 3 + readBits(2);\r\n                        if(i+j > n) {\r\n                            flushBuffer();\r\n                            return 1;\r\n                        }\r\n                        l = i ? ll[i-1] : 0;\r\n                        while(j--) {\r\n                            ll[i++] = l;\r\n                        }\r\n                    } else {\r\n                        if(j==17) {        // 3 to 10 zero length codes\r\n                            j = 3 + readBits(3);\r\n                        } else {        // j == 18: 11 to 138 zero length codes\r\n                            j = 11 + readBits(7);\r\n                        }\r\n                        if(i+j > n) {\r\n                            flushBuffer();\r\n                            return 1;\r\n                        }\r\n                        while(j--) {\r\n                            ll[i++] = 0;\r\n                        }\r\n                    }\r\n                }\r\n                /*for(j=0; j<literalCodes+distCodes; j++) {\r\n                    //fprintf(errfp, \"%d \", ll[j]);\r\n                    if ((j&7)==7)\r\n                        fprintf(errfp, \"\\n\");\r\n                }\r\n                fprintf(errfp, \"\\n\");*/\r\n                // Can overwrite tree decode tree as it is not used anymore\r\n                len = literalTree.length;\r\n                for (i=0; i<len; i++)\r\n                    literalTree[i]=new HufNode();\r\n                if(CreateTree(literalTree, literalCodes, ll, 0)) {\r\n                    flushBuffer();\r\n                    return 1;\r\n                }\r\n                len = literalTree.length;\r\n                for (i=0; i<len; i++)\r\n                    distanceTree[i]=new HufNode();\r\n                var ll2 = new Array();\r\n                for (i=literalCodes; i <ll.length; i++){\r\n                    ll2[i-literalCodes]=ll[i];\r\n                }\r\n                if(CreateTree(distanceTree, distCodes, ll2, 0)) {\r\n                    flushBuffer();\r\n                    return 1;\r\n                }\r\n                if (debug)\r\n                    document.write(\"<br>literalTree\");\r\n                while(1) {\r\n                    j = DecodeValue(literalTree);\r\n                    if(j >= 256) {        // In C64: if carry set\r\n                        var len, dist;\r\n                        j -= 256;\r\n                        if(j == 0) {\r\n                            // EOF\r\n                            break;\r\n                        }\r\n                        j--;\r\n                        len = readBits(cplext[j]) + cplens[j];\r\n\r\n                        j = DecodeValue(distanceTree);\r\n                        if(cpdext[j] > 8) {\r\n                            dist = readBits(8);\r\n                            dist |= (readBits(cpdext[j]-8)<<8);\r\n                        } else {\r\n                            dist = readBits(cpdext[j]);\r\n                        }\r\n                        dist += cpdist[j];\r\n                        while(len--) {\r\n                            var c = buf32k[(bIdx - dist) & 0x7fff];\r\n                            addBuffer(c);\r\n                        }\r\n                    } else {\r\n                        addBuffer(j);\r\n                    }\r\n                }\r\n            }\r\n        } while(!last);\r\n        flushBuffer();\r\n\r\n        byteAlign();\r\n        return 0;\r\n    };\r\n\r\n    JXG.Util.Unzip.prototype.unzipFile = function(name) {\r\n        var i;\r\n        this.unzip();\r\n        //alert(unzipped[0][1]);\r\n        for (i=0;i<unzipped.length;i++){\r\n            if(unzipped[i][1]==name) {\r\n                return unzipped[i][0];\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n    JXG.Util.Unzip.prototype.unzip = function() {\r\n        //convertToByteArray(input);\r\n        if (debug)\r\n            alert(bA);\r\n        /*for (i=0;i<bA.length*8;i++){\r\n            document.write(readBit());\r\n            if ((i+1)%8==0)\r\n                document.write(\" \");\r\n        }*/\r\n        /*for (i=0;i<bA.length;i++){\r\n            document.write(readByte()+\" \");\r\n            if ((i+1)%8==0)\r\n                document.write(\" \");\r\n        }\r\n        for (i=0;i<bA.length;i++){\r\n            document.write(bA[i]+\" \");\r\n            if ((i+1)%16==0)\r\n                document.write(\"<br>\");\r\n        }\r\n        */\r\n        //alert(bA);\r\n        nextFile();\r\n        return unzipped;\r\n    };\r\n\r\n    function nextFile(){\r\n        if (debug)\r\n            alert(\"NEXTFILE\");\r\n        outputArr = [];\r\n        var tmp = [];\r\n        modeZIP = false;\r\n        tmp[0] = readByte();\r\n        tmp[1] = readByte();\r\n        if (debug)\r\n            alert(\"type: \"+tmp[0]+\" \"+tmp[1]);\r\n        if (tmp[0] == parseInt(\"78\",16) && tmp[1] == parseInt(\"da\",16)){ //GZIP\r\n            if (debug)\r\n                alert(\"GEONExT-GZIP\");\r\n            DeflateLoop();\r\n            if (debug)\r\n                alert(outputArr.join(''));\r\n            unzipped[files] = new Array(2);\r\n            unzipped[files][0] = outputArr.join('');\r\n            unzipped[files][1] = \"geonext.gxt\";\r\n            files++;\r\n        }\r\n        if (tmp[0] == parseInt(\"1f\",16) && tmp[1] == parseInt(\"8b\",16)){ //GZIP\r\n            if (debug)\r\n                alert(\"GZIP\");\r\n            //DeflateLoop();\r\n            skipdir();\r\n            if (debug)\r\n                alert(outputArr.join(''));\r\n            unzipped[files] = new Array(2);\r\n            unzipped[files][0] = outputArr.join('');\r\n            unzipped[files][1] = \"file\";\r\n            files++;\r\n        }\r\n        if (tmp[0] == parseInt(\"50\",16) && tmp[1] == parseInt(\"4b\",16)){ //ZIP\r\n            modeZIP = true;\r\n            tmp[2] = readByte();\r\n            tmp[3] = readByte();\r\n            if (tmp[2] == parseInt(\"3\",16) && tmp[3] == parseInt(\"4\",16)){\r\n                //MODE_ZIP\r\n                tmp[0] = readByte();\r\n                tmp[1] = readByte();\r\n                if (debug)\r\n                    alert(\"ZIP-Version: \"+tmp[1]+\" \"+tmp[0]/10+\".\"+tmp[0]%10);\r\n\r\n                gpflags = readByte();\r\n                gpflags |= (readByte()<<8);\r\n                if (debug)\r\n                    alert(\"gpflags: \"+gpflags);\r\n\r\n                var method = readByte();\r\n                method |= (readByte()<<8);\r\n                if (debug)\r\n                    alert(\"method: \"+method);\r\n\r\n                readByte();\r\n                readByte();\r\n                readByte();\r\n                readByte();\r\n\r\n                var crc = readByte();\r\n                crc |= (readByte()<<8);\r\n                crc |= (readByte()<<16);\r\n                crc |= (readByte()<<24);\r\n\r\n                var compSize = readByte();\r\n                compSize |= (readByte()<<8);\r\n                compSize |= (readByte()<<16);\r\n                compSize |= (readByte()<<24);\r\n\r\n                var size = readByte();\r\n                size |= (readByte()<<8);\r\n                size |= (readByte()<<16);\r\n                size |= (readByte()<<24);\r\n\r\n                if (debug)\r\n                    alert(\"local CRC: \"+crc+\"\\nlocal Size: \"+size+\"\\nlocal CompSize: \"+compSize);\r\n\r\n                var filelen = readByte();\r\n                filelen |= (readByte()<<8);\r\n\r\n                var extralen = readByte();\r\n                extralen |= (readByte()<<8);\r\n\r\n                if (debug)\r\n                    alert(\"filelen \"+filelen);\r\n                i = 0;\r\n                nameBuf = [];\r\n                while (filelen--){\r\n                    var c = readByte();\r\n                    if (c == \"/\" | c ==\":\"){\r\n                        i = 0;\r\n                    } else if (i < NAMEMAX-1)\r\n                        nameBuf[i++] = String.fromCharCode(c);\r\n                }\r\n                if (debug)\r\n                    alert(\"nameBuf: \"+nameBuf);\r\n\r\n                //nameBuf[i] = \"\\0\";\r\n                if (!fileout)\r\n                    fileout = nameBuf;\r\n\r\n                var i = 0;\r\n                while (i < extralen){\r\n                    c = readByte();\r\n                    i++;\r\n                }\r\n\r\n                CRC = 0xffffffff;\r\n                SIZE = 0;\r\n\r\n                if (size = 0 && fileOut.charAt(fileout.length-1)==\"/\"){\r\n                    //skipdir\r\n                    if (debug)\r\n                        alert(\"skipdir\");\r\n                }\r\n                if (method == 8){\r\n                    DeflateLoop();\r\n                    if (debug)\r\n                        alert(outputArr.join(''));\r\n                    unzipped[files] = new Array(2);\r\n                    unzipped[files][0] = outputArr.join('');\r\n                    unzipped[files][1] = nameBuf.join('');\r\n                    files++;\r\n                    //return outputArr.join('');\r\n                }\r\n                skipdir();\r\n            }\r\n        }\r\n    };\r\n\r\n    function skipdir(){\r\n        var crc,\r\n            tmp = [],\r\n            compSize, size, os, i, c;\r\n\r\n        if ((gpflags & 8)) {\r\n            tmp[0] = readByte();\r\n            tmp[1] = readByte();\r\n            tmp[2] = readByte();\r\n            tmp[3] = readByte();\r\n\r\n            if (tmp[0] == parseInt(\"50\",16) &&\r\n                tmp[1] == parseInt(\"4b\",16) &&\r\n                tmp[2] == parseInt(\"07\",16) &&\r\n                tmp[3] == parseInt(\"08\",16))\r\n            {\r\n                crc = readByte();\r\n                crc |= (readByte()<<8);\r\n                crc |= (readByte()<<16);\r\n                crc |= (readByte()<<24);\r\n            } else {\r\n                crc = tmp[0] | (tmp[1]<<8) | (tmp[2]<<16) | (tmp[3]<<24);\r\n            }\r\n\r\n            compSize = readByte();\r\n            compSize |= (readByte()<<8);\r\n            compSize |= (readByte()<<16);\r\n            compSize |= (readByte()<<24);\r\n\r\n            size = readByte();\r\n            size |= (readByte()<<8);\r\n            size |= (readByte()<<16);\r\n            size |= (readByte()<<24);\r\n\r\n            if (debug)\r\n                alert(\"CRC:\");\r\n        }\r\n\r\n        if (modeZIP)\r\n            nextFile();\r\n\r\n        tmp[0] = readByte();\r\n        if (tmp[0] != 8) {\r\n            if (debug)\r\n                alert(\"Unknown compression method!\");\r\n            return 0;\r\n        }\r\n\r\n        gpflags = readByte();\r\n        if (debug){\r\n            if ((gpflags & ~(parseInt(\"1f\",16))))\r\n                alert(\"Unknown flags set!\");\r\n        }\r\n\r\n        readByte();\r\n        readByte();\r\n        readByte();\r\n        readByte();\r\n\r\n        readByte();\r\n        os = readByte();\r\n\r\n        if ((gpflags & 4)){\r\n            tmp[0] = readByte();\r\n            tmp[2] = readByte();\r\n            len = tmp[0] + 256*tmp[1];\r\n            if (debug)\r\n                alert(\"Extra field size: \"+len);\r\n            for (i=0;i<len;i++)\r\n                readByte();\r\n        }\r\n\r\n        if ((gpflags & 8)){\r\n            i=0;\r\n            nameBuf=[];\r\n            while (c=readByte()){\r\n                if(c == \"7\" || c == \":\")\r\n                    i=0;\r\n                if (i<NAMEMAX-1)\r\n                    nameBuf[i++] = c;\r\n            }\r\n            //nameBuf[i] = \"\\0\";\r\n            if (debug)\r\n                alert(\"original file name: \"+nameBuf);\r\n        }\r\n\r\n        if ((gpflags & 16)){\r\n            while (c=readByte()){\r\n                //FILE COMMENT\r\n            }\r\n        }\r\n\r\n        if ((gpflags & 2)){\r\n            readByte();\r\n            readByte();\r\n        }\r\n\r\n        DeflateLoop();\r\n\r\n        crc = readByte();\r\n        crc |= (readByte()<<8);\r\n        crc |= (readByte()<<16);\r\n        crc |= (readByte()<<24);\r\n\r\n        size = readByte();\r\n        size |= (readByte()<<8);\r\n        size |= (readByte()<<16);\r\n        size |= (readByte()<<24);\r\n\r\n        if (modeZIP)\r\n            nextFile();\r\n    };\r\n};\r\n\r\n/**\r\n*  Base64 encoding / decoding\r\n*  @see <a href=\"http://www.webtoolkit.info/\">http://www.webtoolkit.info/</A>\r\n*/\r\nJXG.Util.Base64 = {\r\n\r\n    // private property\r\n    _keyStr : \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n\r\n    // public method for encoding\r\n    encode : function (input) {\r\n        var output = [],\r\n            chr1, chr2, chr3, enc1, enc2, enc3, enc4,\r\n            i = 0;\r\n\r\n        input = JXG.Util.Base64._utf8_encode(input);\r\n\r\n        while (i < input.length) {\r\n\r\n            chr1 = input.charCodeAt(i++);\r\n            chr2 = input.charCodeAt(i++);\r\n            chr3 = input.charCodeAt(i++);\r\n\r\n            enc1 = chr1 >> 2;\r\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\r\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\r\n            enc4 = chr3 & 63;\r\n\r\n            if (isNaN(chr2)) {\r\n                enc3 = enc4 = 64;\r\n            } else if (isNaN(chr3)) {\r\n                enc4 = 64;\r\n            }\r\n\r\n            output.push([this._keyStr.charAt(enc1),\r\n                         this._keyStr.charAt(enc2),\r\n                         this._keyStr.charAt(enc3),\r\n                         this._keyStr.charAt(enc4)].join(''));\r\n        }\r\n\r\n        return output.join('');\r\n    },\r\n\r\n    // public method for decoding\r\n    decode : function (input, utf8) {\r\n        var output = [],\r\n            chr1, chr2, chr3,\r\n            enc1, enc2, enc3, enc4,\r\n            i = 0;\r\n\r\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\r\n\r\n        while (i < input.length) {\r\n\r\n            enc1 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc2 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc3 = this._keyStr.indexOf(input.charAt(i++));\r\n            enc4 = this._keyStr.indexOf(input.charAt(i++));\r\n\r\n            chr1 = (enc1 << 2) | (enc2 >> 4);\r\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\r\n            chr3 = ((enc3 & 3) << 6) | enc4;\r\n\r\n            output.push(String.fromCharCode(chr1));\r\n\r\n            if (enc3 != 64) {\r\n                output.push(String.fromCharCode(chr2));\r\n            }\r\n            if (enc4 != 64) {\r\n                output.push(String.fromCharCode(chr3));\r\n            }\r\n        }\r\n\r\n        output = output.join('');\r\n\r\n        if (utf8) {\r\n            output = JXG.Util.Base64._utf8_decode(output);\r\n        }\r\n        return output;\r\n\r\n    },\r\n\r\n    // private method for UTF-8 encoding\r\n    _utf8_encode : function (string) {\r\n        string = string.replace(/\\r\\n/g,\"\\n\");\r\n        var utftext = \"\";\r\n\r\n        for (var n = 0; n < string.length; n++) {\r\n\r\n            var c = string.charCodeAt(n);\r\n\r\n            if (c < 128) {\r\n                utftext += String.fromCharCode(c);\r\n            }\r\n            else if((c > 127) && (c < 2048)) {\r\n                utftext += String.fromCharCode((c >> 6) | 192);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n            else {\r\n                utftext += String.fromCharCode((c >> 12) | 224);\r\n                utftext += String.fromCharCode(((c >> 6) & 63) | 128);\r\n                utftext += String.fromCharCode((c & 63) | 128);\r\n            }\r\n\r\n        }\r\n\r\n        return utftext;\r\n    },\r\n\r\n    // private method for UTF-8 decoding\r\n    _utf8_decode : function (utftext) {\r\n        var string = [],\r\n            i = 0,\r\n            c = 0, c2 = 0, c3 = 0;\r\n\r\n        while ( i < utftext.length ) {\r\n            c = utftext.charCodeAt(i);\r\n            if (c < 128) {\r\n                string.push(String.fromCharCode(c));\r\n                i++;\r\n            }\r\n            else if((c > 191) && (c < 224)) {\r\n                c2 = utftext.charCodeAt(i+1);\r\n                string.push(String.fromCharCode(((c & 31) << 6) | (c2 & 63)));\r\n                i += 2;\r\n            }\r\n            else {\r\n                c2 = utftext.charCodeAt(i+1);\r\n                c3 = utftext.charCodeAt(i+2);\r\n                string.push(String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)));\r\n                i += 3;\r\n            }\r\n        }\r\n        return string.join('');\r\n    },\r\n\r\n    _destrip: function (stripped, wrap){\r\n        var lines = [], lineno, i,\r\n            destripped = [];\r\n\r\n        if (wrap==null)\r\n            wrap = 76;\r\n\r\n        stripped.replace(/ /g, \"\");\r\n        lineno = stripped.length / wrap;\r\n        for (i = 0; i < lineno; i++)\r\n            lines[i]=stripped.substr(i * wrap, wrap);\r\n        if (lineno != stripped.length / wrap)\r\n            lines[lines.length]=stripped.substr(lineno * wrap, stripped.length-(lineno * wrap));\r\n\r\n        for (i = 0; i < lines.length; i++)\r\n            destripped.push(lines[i]);\r\n        return destripped.join('\\n');\r\n    },\r\n\r\n    decodeAsArray: function (input){\r\n        var dec = this.decode(input),\r\n            ar = [], i;\r\n        for (i=0;i<dec.length;i++){\r\n            ar[i]=dec.charCodeAt(i);\r\n        }\r\n        return ar;\r\n    },\r\n\r\n    decodeGEONExT : function (input) {\r\n        return decodeAsArray(destrip(input),false);\r\n    }\r\n};\r\n\r\n/**\r\n * @private\r\n */\r\nJXG.Util.asciiCharCodeAt = function(str,i){\r\n    var c = str.charCodeAt(i);\r\n    if (c>255){\r\n        switch (c) {\r\n            case 8364: c=128;\r\n            break;\r\n            case 8218: c=130;\r\n            break;\r\n            case 402: c=131;\r\n            break;\r\n            case 8222: c=132;\r\n            break;\r\n            case 8230: c=133;\r\n            break;\r\n            case 8224: c=134;\r\n            break;\r\n            case 8225: c=135;\r\n            break;\r\n            case 710: c=136;\r\n            break;\r\n            case 8240: c=137;\r\n            break;\r\n            case 352: c=138;\r\n            break;\r\n            case 8249: c=139;\r\n            break;\r\n            case 338: c=140;\r\n            break;\r\n            case 381: c=142;\r\n            break;\r\n            case 8216: c=145;\r\n            break;\r\n            case 8217: c=146;\r\n            break;\r\n            case 8220: c=147;\r\n            break;\r\n            case 8221: c=148;\r\n            break;\r\n            case 8226: c=149;\r\n            break;\r\n            case 8211: c=150;\r\n            break;\r\n            case 8212: c=151;\r\n            break;\r\n            case 732: c=152;\r\n            break;\r\n            case 8482: c=153;\r\n            break;\r\n            case 353: c=154;\r\n            break;\r\n            case 8250: c=155;\r\n            break;\r\n            case 339: c=156;\r\n            break;\r\n            case 382: c=158;\r\n            break;\r\n            case 376: c=159;\r\n            break;\r\n            default:\r\n            break;\r\n        }\r\n    }\r\n    return c;\r\n};\r\n\r\n/**\r\n * Decoding string into utf-8\r\n * @param {String} string to decode\r\n * @return {String} utf8 decoded string\r\n */\r\nJXG.Util.utf8Decode = function(utftext) {\r\n  var string = [];\r\n  var i = 0;\r\n  var c = 0, c1 = 0, c2 = 0;\r\n\r\n  while ( i < utftext.length ) {\r\n    c = utftext.charCodeAt(i);\r\n\r\n    if (c < 128) {\r\n      string.push(String.fromCharCode(c));\r\n      i++;\r\n    } else if((c > 191) && (c < 224)) {\r\n      c2 = utftext.charCodeAt(i+1);\r\n      string.push(String.fromCharCode(((c & 31) << 6) | (c2 & 63)));\r\n      i += 2;\r\n    } else {\r\n      c2 = utftext.charCodeAt(i+1);\r\n      c3 = utftext.charCodeAt(i+2);\r\n      string.push(String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63)));\r\n      i += 3;\r\n    }\r\n  };\r\n  return string.join('');\r\n};\r\n","/*\r\n A JavaScript implementation of the SHA family of hashes, as\r\n defined in FIPS PUB 180-4 and FIPS PUB 202, as well as the corresponding\r\n HMAC implementation as defined in FIPS PUB 198a\r\n Copyright Brian Turek 2008-2017\r\n Distributed under the BSD License\r\n See https://caligatio.github.io/jsSHA/ for more information\r\n Several functions taken from Paul Johnston\r\n*/\r\n'use strict';(function(L){function u(d,b,h){var c=0,a=[],l=0,e,m,k,f,n,g,q,v,A=!1,p=[],u=[],w,z=!1,x=!1,t=-1;h=h||{};e=h.encoding||\"UTF8\";w=h.numRounds||1;if(w!==parseInt(w,10)||1>w)throw Error(\"numRounds must a integer >= 1\");if(0===d.lastIndexOf(\"SHA3-\",0)||0===d.lastIndexOf(\"SHAKE\",0)){var C=6;g=B;v=function(c){var a=[],e;for(e=0;5>e;e+=1)a[e]=c[e].slice();return a};t=1;if(\"SHA3-224\"===d)n=1152,f=224;else if(\"SHA3-256\"===d)n=1088,f=256;else if(\"SHA3-384\"===d)n=832,f=384;else if(\"SHA3-512\"===d)n=\r\n576,f=512;else if(\"SHAKE128\"===d)n=1344,f=-1,C=31,x=!0;else if(\"SHAKE256\"===d)n=1088,f=-1,C=31,x=!0;else throw Error(\"Chosen SHA variant is not supported\");q=function(c,a,e,f,d){e=n;var b=C,m,l=[],g=e>>>5,k=0,h=a>>>5;for(m=0;m<h&&a>=e;m+=g)f=B(c.slice(m,m+g),f),a-=e;c=c.slice(m);for(a%=e;c.length<g;)c.push(0);m=a>>>3;c[m>>2]^=b<<m%4*8;c[g-1]^=2147483648;for(f=B(c,f);32*l.length<d;){c=f[k%5][k/5|0];l.push(c.b);if(32*l.length>=d)break;l.push(c.a);k+=1;0===64*k%e&&B(null,f)}return l}}else throw Error(\"Chosen SHA variant is not supported\");\r\nk=D(b,e,t);m=y(d);this.setHMACKey=function(a,b,l){var k;if(!0===A)throw Error(\"HMAC key already set\");if(!0===z)throw Error(\"Cannot set HMAC key after calling update\");if(!0===x)throw Error(\"SHAKE is not supported for HMAC\");e=(l||{}).encoding||\"UTF8\";b=D(b,e,t)(a);a=b.binLen;b=b.value;k=n>>>3;l=k/4-1;if(k<a/8){for(b=q(b,a,0,y(d),f);b.length<=l;)b.push(0);b[l]&=4294967040}else if(k>a/8){for(;b.length<=l;)b.push(0);b[l]&=4294967040}for(a=0;a<=l;a+=1)p[a]=b[a]^909522486,u[a]=b[a]^1549556828;m=g(p,m);\r\nc=n;A=!0};this.update=function(e){var b,f,d,h=0,q=n>>>5;b=k(e,a,l);e=b.binLen;f=b.value;b=e>>>5;for(d=0;d<b;d+=q)h+n<=e&&(m=g(f.slice(d,d+q),m),h+=n);c+=h;a=f.slice(h>>>5);l=e%n;z=!0};this.getHash=function(e,b){var k,g,h,n;if(!0===A)throw Error(\"Cannot call getHash after setting HMAC key\");h=E(b);if(!0===x){if(-1===h.shakeLen)throw Error(\"shakeLen must be specified in options\");f=h.shakeLen}switch(e){case \"HEX\":k=function(a){return F(a,f,t,h)};break;case \"B64\":k=function(a){return G(a,f,t,h)};break;\r\ncase \"BYTES\":k=function(a){return H(a,f,t)};break;case \"ARRAYBUFFER\":try{g=new ArrayBuffer(0)}catch(r){throw Error(\"ARRAYBUFFER not supported by this environment\");}k=function(a){return I(a,f,t)};break;default:throw Error(\"format must be HEX, B64, BYTES, or ARRAYBUFFER\");}n=q(a.slice(),l,c,v(m),f);for(g=1;g<w;g+=1)!0===x&&0!==f%32&&(n[n.length-1]&=16777215>>>24-f%32),n=q(n,f,0,y(d),f);return k(n)};this.getHMAC=function(e,b){var k,h,p,w;if(!1===A)throw Error(\"Cannot call getHMAC without first setting HMAC key\");\r\np=E(b);switch(e){case \"HEX\":k=function(a){return F(a,f,t,p)};break;case \"B64\":k=function(a){return G(a,f,t,p)};break;case \"BYTES\":k=function(a){return H(a,f,t)};break;case \"ARRAYBUFFER\":try{k=new ArrayBuffer(0)}catch(M){throw Error(\"ARRAYBUFFER not supported by this environment\");}k=function(a){return I(a,f,t)};break;default:throw Error(\"outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER\");}h=q(a.slice(),l,c,v(m),f);w=g(u,y(d));w=q(h,f,n,w,f);return k(w)}}function g(d,b){this.a=d;this.b=b}function F(d,\r\nb,h,c){var a=\"\";b/=8;var l,e,m;m=-1===h?3:0;for(l=0;l<b;l+=1)e=d[l>>>2]>>>8*(m+l%4*h),a+=\"0123456789abcdef\".charAt(e>>>4&15)+\"0123456789abcdef\".charAt(e&15);return c.outputUpper?a.toUpperCase():a}function G(d,b,h,c){var a=\"\",l=b/8,e,m,k,f;f=-1===h?3:0;for(e=0;e<l;e+=3)for(m=e+1<l?d[e+1>>>2]:0,k=e+2<l?d[e+2>>>2]:0,k=(d[e>>>2]>>>8*(f+e%4*h)&255)<<16|(m>>>8*(f+(e+1)%4*h)&255)<<8|k>>>8*(f+(e+2)%4*h)&255,m=0;4>m;m+=1)8*e+6*m<=b?a+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".charAt(k>>>\r\n6*(3-m)&63):a+=c.b64Pad;return a}function H(d,b,h){var c=\"\";b/=8;var a,l,e;e=-1===h?3:0;for(a=0;a<b;a+=1)l=d[a>>>2]>>>8*(e+a%4*h)&255,c+=String.fromCharCode(l);return c}function I(d,b,h){b/=8;var c,a=new ArrayBuffer(b),l,e;e=new Uint8Array(a);l=-1===h?3:0;for(c=0;c<b;c+=1)e[c]=d[c>>>2]>>>8*(l+c%4*h)&255;return a}function E(d){var b={outputUpper:!1,b64Pad:\"=\",shakeLen:-1};d=d||{};b.outputUpper=d.outputUpper||!1;!0===d.hasOwnProperty(\"b64Pad\")&&(b.b64Pad=d.b64Pad);if(!0===d.hasOwnProperty(\"shakeLen\")){if(0!==\r\nd.shakeLen%8)throw Error(\"shakeLen must be a multiple of 8\");b.shakeLen=d.shakeLen}if(\"boolean\"!==typeof b.outputUpper)throw Error(\"Invalid outputUpper formatting option\");if(\"string\"!==typeof b.b64Pad)throw Error(\"Invalid b64Pad formatting option\");return b}function D(d,b,h){switch(b){case \"UTF8\":case \"UTF16BE\":case \"UTF16LE\":break;default:throw Error(\"encoding must be UTF8, UTF16BE, or UTF16LE\");}switch(d){case \"HEX\":d=function(c,a,b){var e=c.length,d,k,f,g,r,q;if(0!==e%2)throw Error(\"String of HEX type must be in byte increments\");\r\na=a||[0];b=b||0;r=b>>>3;q=-1===h?3:0;for(d=0;d<e;d+=2){k=parseInt(c.substr(d,2),16);if(isNaN(k))throw Error(\"String of HEX type contains invalid characters\");g=(d>>>1)+r;for(f=g>>>2;a.length<=f;)a.push(0);a[f]|=k<<8*(q+g%4*h)}return{value:a,binLen:4*e+b}};break;case \"TEXT\":d=function(c,a,d){var e,m,k=0,f,g,r,q,v,p;a=a||[0];d=d||0;r=d>>>3;if(\"UTF8\"===b)for(p=-1===h?3:0,f=0;f<c.length;f+=1)for(e=c.charCodeAt(f),m=[],128>e?m.push(e):2048>e?(m.push(192|e>>>6),m.push(128|e&63)):55296>e||57344<=e?m.push(224|\r\ne>>>12,128|e>>>6&63,128|e&63):(f+=1,e=65536+((e&1023)<<10|c.charCodeAt(f)&1023),m.push(240|e>>>18,128|e>>>12&63,128|e>>>6&63,128|e&63)),g=0;g<m.length;g+=1){v=k+r;for(q=v>>>2;a.length<=q;)a.push(0);a[q]|=m[g]<<8*(p+v%4*h);k+=1}else if(\"UTF16BE\"===b||\"UTF16LE\"===b)for(p=-1===h?2:0,f=0;f<c.length;f+=1){e=c.charCodeAt(f);\"UTF16LE\"===b&&(g=e&255,e=g<<8|e>>>8);v=k+r;for(q=v>>>2;a.length<=q;)a.push(0);a[q]|=e<<8*(p+v%4*h);k+=2}return{value:a,binLen:8*k+d}};break;case \"B64\":d=function(c,a,b){var e=0,d,g,\r\nf,n,r,q,p,u;if(-1===c.search(/^[a-zA-Z0-9=+\\/]+$/))throw Error(\"Invalid character in base-64 string\");g=c.indexOf(\"=\");c=c.replace(/\\=/g,\"\");if(-1!==g&&g<c.length)throw Error(\"Invalid '=' found in base-64 string\");a=a||[0];b=b||0;q=b>>>3;u=-1===h?3:0;for(g=0;g<c.length;g+=4){r=c.substr(g,4);for(f=n=0;f<r.length;f+=1)d=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".indexOf(r[f]),n|=d<<18-6*f;for(f=0;f<r.length-1;f+=1){p=e+q;for(d=p>>>2;a.length<=d;)a.push(0);a[d]|=(n>>>16-8*f&255)<<\r\n8*(u+p%4*h);e+=1}}return{value:a,binLen:8*e+b}};break;case \"BYTES\":d=function(c,a,b){var e,d,g,f,n,p;a=a||[0];b=b||0;g=b>>>3;p=-1===h?3:0;for(d=0;d<c.length;d+=1)e=c.charCodeAt(d),n=d+g,f=n>>>2,a.length<=f&&a.push(0),a[f]|=e<<8*(p+n%4*h);return{value:a,binLen:8*c.length+b}};break;case \"ARRAYBUFFER\":try{d=new ArrayBuffer(0)}catch(c){throw Error(\"ARRAYBUFFER not supported by this environment\");}d=function(c,a,b){var d,g,k,f,n,p;a=a||[0];b=b||0;g=b>>>3;n=-1===h?3:0;p=new Uint8Array(c);for(d=0;d<c.byteLength;d+=\r\n1)f=d+g,k=f>>>2,a.length<=k&&a.push(0),a[k]|=p[d]<<8*(n+f%4*h);return{value:a,binLen:8*c.byteLength+b}};break;default:throw Error(\"format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER\");}return d}function z(d,b){return 32<b?(b-=32,new g(d.b<<b|d.a>>>32-b,d.a<<b|d.b>>>32-b)):0!==b?new g(d.a<<b|d.b>>>32-b,d.b<<b|d.a>>>32-b):d}function p(d,b){return new g(d.a^b.a,d.b^b.b)}function y(d){var b=[];if(0===d.lastIndexOf(\"SHA3-\",0)||0===d.lastIndexOf(\"SHAKE\",0))for(d=0;5>d;d+=1)b[d]=[new g(0,0),new g(0,0),\r\nnew g(0,0),new g(0,0),new g(0,0)];else throw Error(\"No SHA variants supported\");return b}function B(d,b){var h,c,a,l,e=[],m=[];if(null!==d)for(c=0;c<d.length;c+=2)b[(c>>>1)%5][(c>>>1)/5|0]=p(b[(c>>>1)%5][(c>>>1)/5|0],new g(d[c+1],d[c]));for(h=0;24>h;h+=1){l=y(\"SHA3-\");for(c=0;5>c;c+=1){a=b[c][0];var k=b[c][1],f=b[c][2],n=b[c][3],r=b[c][4];e[c]=new g(a.a^k.a^f.a^n.a^r.a,a.b^k.b^f.b^n.b^r.b)}for(c=0;5>c;c+=1)m[c]=p(e[(c+4)%5],z(e[(c+1)%5],1));for(c=0;5>c;c+=1)for(a=0;5>a;a+=1)b[c][a]=p(b[c][a],m[c]);\r\nfor(c=0;5>c;c+=1)for(a=0;5>a;a+=1)l[a][(2*c+3*a)%5]=z(b[c][a],J[c][a]);for(c=0;5>c;c+=1)for(a=0;5>a;a+=1)b[c][a]=p(l[c][a],new g(~l[(c+1)%5][a].a&l[(c+2)%5][a].a,~l[(c+1)%5][a].b&l[(c+2)%5][a].b));b[0][0]=p(b[0][0],K[h])}return b}var J,K;K=[new g(0,1),new g(0,32898),new g(2147483648,32906),new g(2147483648,2147516416),new g(0,32907),new g(0,2147483649),new g(2147483648,2147516545),new g(2147483648,32777),new g(0,138),new g(0,136),new g(0,2147516425),new g(0,2147483658),new g(0,2147516555),new g(2147483648,\r\n139),new g(2147483648,32905),new g(2147483648,32771),new g(2147483648,32770),new g(2147483648,128),new g(0,32778),new g(2147483648,2147483658),new g(2147483648,2147516545),new g(2147483648,32896),new g(0,2147483649),new g(2147483648,2147516424)];J=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];\r\nL.jsSHA=u})(this);\r\n","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PerceptionListener = void 0;\r\n/**\r\n * Class to override `marauroa.perceptionListener` & handle creating\r\n * User object.\r\n */\r\nclass PerceptionListener {\r\n    constructor(perceptionListener) {\r\n        this._super = perceptionListener;\r\n        for (const prop of Object.getOwnPropertyNames(perceptionListener)) {\r\n            if (typeof (this[prop]) === \"undefined\") {\r\n                // members & methods that are not overridden by this class\r\n                this[prop] = perceptionListener[prop];\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Action when an object is added to the world.\r\n     *\r\n     * @param obj\r\n     *     Object to be added.\r\n     * @return\r\n     *     <code>true</code> if object was added.\r\n     * @see marauroa.perceptionListener.onAdded\r\n     */\r\n    onAdded(obj) {\r\n        if (obj[\"c\"] === \"player\") {\r\n            if (obj.hasOwnProperty(\"a\")) {\r\n                if (obj[\"a\"][\"name\"] === stendhal.session.getCharName()) {\r\n                    // create User object for player controlled by this client\r\n                    obj[\"c\"] = \"user\";\r\n                }\r\n            }\r\n        }\r\n        return this._super.onAdded(obj);\r\n    }\r\n}\r\nexports.PerceptionListener = PerceptionListener;\r\n//# sourceMappingURL=PerceptionListener.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Component = void 0;\r\nclass Component {\r\n    constructor(id, themable = false) {\r\n        let element = document.getElementById(id);\r\n        if (!element) {\r\n            throw new Error(\"Cannot create component because there is no HTML element with id \" + id);\r\n        }\r\n        if (element instanceof HTMLTemplateElement) {\r\n            let fragment = element.content.cloneNode(true);\r\n            element = fragment.children[0];\r\n        }\r\n        this.componentElement = element;\r\n        if (themable) {\r\n            this.componentElement.classList.add(\"background\");\r\n        }\r\n        this.defaultDisplay = element.style.display;\r\n        if (this.defaultDisplay === \"none\") {\r\n            this.defaultDisplay = \"\";\r\n        }\r\n    }\r\n    onParentClose() {\r\n        // do nothing\r\n    }\r\n    ;\r\n    onMoved() {\r\n        // do nothing\r\n    }\r\n    ;\r\n    refresh() {\r\n        // inheriting classes can override\r\n    }\r\n    ;\r\n    /**\r\n     * Sets value for configuration to identify this component.\r\n     *\r\n     * @param cid\r\n     *     The string identifier.\r\n     * @deprecated\r\n     */\r\n    setConfigId(cid) {\r\n        this.cid = cid;\r\n    }\r\n    /**\r\n     * Retrieves the string identifier for this component. If\r\n     * an identifier is not set, an empty string is returned.\r\n     *\r\n     * @return\r\n     *     String identifier.\r\n     */\r\n    getConfigId() {\r\n        return this.cid || \"\";\r\n    }\r\n    isVisible() {\r\n        return this.componentElement.style.display !== \"none\";\r\n    }\r\n    setVisible(visible = true) {\r\n        if (visible) {\r\n            this.componentElement.style.display = this.defaultDisplay;\r\n        }\r\n        else {\r\n            this.componentElement.style.display = \"none\";\r\n        }\r\n    }\r\n    toggleVisibility() {\r\n        this.setVisible(!this.isVisible());\r\n    }\r\n    child(selector) {\r\n        return this.componentElement.querySelector(selector);\r\n    }\r\n}\r\nexports.Component = Component;\r\n//# sourceMappingURL=Component.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SoundManager = void 0;\r\nclass SoundManager {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.layers = [\"music\", \"ambient\", \"creature\", \"sfx\", \"gui\"];\r\n        this.cacheGlobal = {};\r\n        this.cache = {};\r\n        this.active = {\r\n            [\"music\"]: [],\r\n            [\"ambient\"]: [],\r\n            [\"creature\"]: [],\r\n            [\"sfx\"]: [],\r\n            [\"gui\"]: []\r\n        };\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!SoundManager.instance) {\r\n            SoundManager.instance = new SoundManager();\r\n        }\r\n        return SoundManager.instance;\r\n    }\r\n    /**\r\n     * Retrieves active sounds.\r\n     *\r\n     * @param includeGui\r\n     *     Will include sounds from the gui layer (default: false).\r\n     */\r\n    getActive(includeGui = false) {\r\n        const active = [];\r\n        for (const layerName of this.layers) {\r\n            if (layerName === \"gui\" && !includeGui) {\r\n                continue;\r\n            }\r\n            for (const snd of this.active[layerName]) {\r\n                active.push(snd);\r\n            }\r\n        }\r\n        return active;\r\n    }\r\n    /**\r\n     * Initializes an audio object & loads into the cache.\r\n     *\r\n     * @param id\r\n     *     Identifier string used to retrieve from cache.\r\n     * @param filename\r\n     *     Path to sound file.\r\n     * @param global\r\n     *     Store in session cache instead of map.\r\n     * @return\r\n     *     New audio object.\r\n     */\r\n    load(id, filename, global = false) {\r\n        const snd = new Audio(filename);\r\n        snd.autoplay = false;\r\n        // load into cache\r\n        if (global) {\r\n            // globally cached sounds are not removed on map change\r\n            this.cacheGlobal[id] = snd;\r\n        }\r\n        else {\r\n            this.cache[id] = snd;\r\n        }\r\n        return snd;\r\n    }\r\n    /**\r\n     * Retrieves list of valid layer string identifiers.\r\n     */\r\n    getLayerNames() {\r\n        return this.layers;\r\n    }\r\n    /**\r\n     * Retrieves the string identifier of the associated layer index.\r\n     */\r\n    getLayerName(layer) {\r\n        // default to GUI\r\n        let layername = \"gui\";\r\n        if (layer >= 0 && layer < this.layers.length) {\r\n            layername = this.layers[layer];\r\n        }\r\n        else {\r\n            console.warn(\"unknown layer index: \" + layer);\r\n        }\r\n        return layername;\r\n    }\r\n    /**\r\n     * Sets event handlers for when sound finishes.\r\n     *\r\n     * @param layername\r\n     *     Name of layer sound will play on.\r\n     * @param sound\r\n     *     The playing sound.\r\n     */\r\n    onSoundAdded(layername, sound) {\r\n        sound.onended = (e) => {\r\n            // remove from active sounds\r\n            const idx = this.active[layername].indexOf(sound);\r\n            if (idx > -1) {\r\n                this.active[layername].splice(idx, 1);\r\n            }\r\n        };\r\n        // FIXME: loops should be preserved if sound continues on map change\r\n        this.active[layername].push(sound);\r\n    }\r\n    /**\r\n     * Plays a sound.\r\n     *\r\n     * @param soundname\r\n     *     Sound file basename.\r\n     * @param layername\r\n     *     Name of layer sound will play on.\r\n     * @param volume\r\n     *     Volume level between 0.0 and 1.0.\r\n     * @param loop\r\n     *     Whether or not sound should be looped.\r\n     * @return\r\n     *     The new sound instance.\r\n     */\r\n    playEffect(soundname, layername, volume = 1.0, loop = false) {\r\n        const muted = !stendhal.config.getBoolean(\"ui.sound\");\r\n        if (muted && !loop) {\r\n            // don't add non-looping sounds when muted\r\n            return;\r\n        }\r\n        // check volume sanity\r\n        volume = this.normVolume(volume);\r\n        // apply layer volume adjustments\r\n        const actualvolume = this.getAdjustedVolume(layername, volume);\r\n        // check cache first\r\n        let snd = this.cache[soundname] || this.cacheGlobal[soundname];\r\n        if (!snd) {\r\n            // add new sound to cache\r\n            snd = this.load(soundname, stendhal.paths.sounds + \"/\" + soundname + \".ogg\");\r\n        }\r\n        if (!this.cache[soundname]) {\r\n            // add globally cached sounds to map cache\r\n            this.cache[soundname] = snd;\r\n        }\r\n        if (layername === \"gui\" && !this.cacheGlobal[soundname]) {\r\n            // keep gui sounds in global cache\r\n            this.cacheGlobal[soundname] = snd;\r\n        }\r\n        // create a copy so multiple instances can be played simultaneously\r\n        const scopy = snd.cloneNode();\r\n        scopy.autoplay = true;\r\n        scopy.basevolume = volume;\r\n        scopy.volume = Math.min(actualvolume, volume);\r\n        scopy.loop = loop;\r\n        scopy.muted = muted;\r\n        this.onSoundAdded(layername, scopy);\r\n        return scopy;\r\n    }\r\n    /**\r\n     * Plays a sound with volume relative to distance.\r\n     *\r\n     * @param x\r\n     *     X coordinate of sound source.\r\n     * @param y\r\n     *     Y coordinate of sound source.\r\n     * @param radius\r\n     *     Radius at which sound can be heard.\r\n     * @param layer\r\n     *     Channel index sound will play on.\r\n     * @param soundname\r\n     *     Sound file basename.\r\n     * @param volume\r\n     *     Volume level between 0.0 and 1.0.\r\n     * @param loop\r\n     *     Whether or not sound should be looped.\r\n     * @return\r\n     *     The new sound instance.\r\n     */\r\n    playLocalizedEffect(x, y, radius, layer, soundname, volume = 1.0, loop = false) {\r\n        const layername = this.getLayerName(layer);\r\n        const snd = this.playEffect(soundname, layername, volume, loop);\r\n        if (!snd) {\r\n            return;\r\n        }\r\n        // Further adjustments if the sound has a radius\r\n        if (radius) {\r\n            if (!marauroa.me || !x) {\r\n                // can't calculate distance yet\r\n                snd.volume = 0.0;\r\n            }\r\n            else {\r\n                this.adjustForDistance(layername, snd, radius, x, y, marauroa.me[\"_x\"], marauroa.me[\"_y\"]);\r\n            }\r\n        }\r\n        snd.radius = radius;\r\n        snd.x = x;\r\n        snd.y = y;\r\n        return snd;\r\n    }\r\n    /**\r\n     * Plays a sound with uniform volume.\r\n     *\r\n     * @param soundname\r\n     *     Sound file basename.\r\n     * @param layer\r\n     *     Channel index sound will play on.\r\n     * @param volume\r\n     *     Volume level between 0.0 and 1.0.\r\n     * @param loop\r\n     *     Whether or not sound should be looped.\r\n     * @return\r\n     *     The new sound instance.\r\n     */\r\n    playGlobalizedEffect(soundname, layer, volume = 1.0, loop = false) {\r\n        // default to gui layer\r\n        if (typeof (layer) === \"undefined\") {\r\n            layer = this.layers.indexOf(\"gui\");\r\n        }\r\n        return this.playEffect(soundname, this.getLayerName(layer), volume, loop);\r\n    }\r\n    /**\r\n     * Loops a sound with volume relative to distance.\r\n     *\r\n     * @param x\r\n     *     X coordinate of sound source.\r\n     * @param y\r\n     *     Y coordinate of sound source.\r\n     * @param radius\r\n     *     Radius at which sound can be heard.\r\n     * @param layer\r\n     *     Channel index sound will play on.\r\n     * @param soundname\r\n     *     Sound file basename.\r\n     * @param volume\r\n     *     Volume level between 0.0 and 1.0.\r\n     * @return\r\n     *     The new sound instance.\r\n     */\r\n    playLocalizedLoop(x, y, radius, layer, soundname, volume = 1.0) {\r\n        return this.playLocalizedEffect(x, y, radius, layer, soundname, volume, true);\r\n    }\r\n    /**\r\n     * Loops a sound with uniform volume.\r\n     *\r\n     * @param soundname\r\n     *     Sound file basename.\r\n     * @param layer\r\n     *     Channel index sound will play on.\r\n     * @param volume\r\n     *     Volume level between 0.0 and 1.0.\r\n     * @return\r\n     *     The new sound instance.\r\n     */\r\n    playGlobalizedLoop(soundname, layer, volume = 1.0) {\r\n        return this.playGlobalizedEffect(soundname, layer, volume, true);\r\n    }\r\n    /**\r\n     * Loops a sound with volume relative to distance.\r\n     *\r\n     * @param x\r\n     *     X coordinate of sound source.\r\n     * @param y\r\n     *     Y coordinate of sound source.\r\n     * @param radius\r\n     *     Radius at which sound can be heard.\r\n     * @param layer\r\n     *     Channel on which to be played (currently not supported).\r\n     * @param musicname\r\n     *     Sound file basename.\r\n     * @param volume\r\n     *     Volume level between 0.0 and 1.0.\r\n     * @return\r\n     *     The new sound instance.\r\n     */\r\n    playLocalizedMusic(x, y, radius, layer, musicname, volume = 1.0) {\r\n        // load into cache so playEffect doesn't look in \"data/sounds\"\r\n        if (!this.cache[musicname]) {\r\n            this.load(musicname, stendhal.paths.music + \"/\" + musicname + \".ogg\");\r\n        }\r\n        return this.playLocalizedLoop(x, y, radius, layer, musicname, volume);\r\n    }\r\n    /**\r\n     * Loops a sound with uniform volume.\r\n     *\r\n     * @param musicname\r\n     *     Sound file basename.\r\n     * @param volume\r\n     *     Volume level between 0.0 and 1.0.\r\n     * @return\r\n     *     The new sound instance.\r\n     */\r\n    playGlobalizedMusic(musicname, volume = 1.0) {\r\n        // load into cache so playEffect doesn't look in \"data/sounds\"\r\n        if (!this.cache[musicname]) {\r\n            this.load(musicname, stendhal.paths.music + \"/\" + musicname + \".ogg\");\r\n        }\r\n        return this.playGlobalizedLoop(musicname, this.layers.indexOf(\"music\"), volume);\r\n    }\r\n    /**\r\n     * Stops a sound & removes it from active group.\r\n     *\r\n     * @param layer\r\n     *     Channel index sound is playing on.\r\n     * @param sound\r\n     *     The sound to be stopped.\r\n     * @return\r\n     *     <code>true</code> if succeeded.\r\n     */\r\n    stop(layer, sound) {\r\n        if (layer < 0 || layer >= this.layers.length) {\r\n            console.error(\"cannot stop sound on non-existent layer: \" + layer);\r\n            return false;\r\n        }\r\n        const layerName = this.layers[layer];\r\n        const group = this.active[layerName];\r\n        const idx = group.indexOf(sound);\r\n        if (sound && idx > -1) {\r\n            sound.pause();\r\n            sound.currentTime = 0;\r\n            if (sound.onended) {\r\n                sound.onended(new Event(\"stopsound\"));\r\n            }\r\n        }\r\n        return this.active[layerName].indexOf(sound) < 0;\r\n    }\r\n    /**\r\n     * Stops all currently playing sounds.\r\n     *\r\n     * @param includeGui\r\n     *     If <code>true</code>, sounds on the gui layer will stopped\r\n     *     as well.\r\n     * @return\r\n     *     <code>true</code> if all sounds were aborted or paused.\r\n     */\r\n    stopAll(includeGui = false) {\r\n        let stopped = true;\r\n        for (const layerName of this.layers) {\r\n            if (layerName === \"gui\" && !includeGui) {\r\n                continue;\r\n            }\r\n            const curLayer = this.active[layerName];\r\n            // XXX: just iterating over indexes doesn't remove all sounds. async issue?\r\n            while (curLayer.length > 0) {\r\n                this.stop(this.layers.indexOf(layerName), curLayer[0]);\r\n            }\r\n            stopped = stopped && this.active[layerName].length == 0;\r\n        }\r\n        return stopped;\r\n    }\r\n    /**\r\n     * Mutes all currently playing sounds.\r\n     *\r\n     * @return\r\n     *     <code>true</code> if all sounds were muted.\r\n     */\r\n    muteAll() {\r\n        let muted = true;\r\n        for (const layerName of this.layers) {\r\n            for (const snd of this.active[layerName]) {\r\n                snd.muted = true;\r\n                muted = muted && snd.muted;\r\n            }\r\n        }\r\n        return muted;\r\n    }\r\n    /**\r\n     * Unmutes all currently playing sounds.\r\n     *\r\n     * @return\r\n     *     <code>true</code> if all sounds were unmuted.\r\n     */\r\n    unmuteAll() {\r\n        let unmuted = true;\r\n        for (const layerName of this.layers) {\r\n            for (const snd of this.active[layerName]) {\r\n                snd.muted = false;\r\n                unmuted = unmuted && !snd.paused && !snd.muted;\r\n            }\r\n        }\r\n        return unmuted;\r\n    }\r\n    /**\r\n     * Adjusts volume level relative to distance.\r\n     *\r\n     * FIXME: hearing distance is slightly further than in Java client\r\n     *        See: games.stendhal.client.sound.facade.Audible*Area\r\n     *\r\n     * @param layername\r\n     *    String name of layer this sound is played on.\r\n     * @param snd\r\n     *    The sound to be adjusted.\r\n     * @param radius\r\n     *     Radius at which sound can be heard.\r\n     * @param sx\r\n     *     X coordinate of sound entity.\r\n     * @param sy\r\n     *     Y coordinate of sound entity.\r\n     * @param ex\r\n     *     X coordinate of listening entity.\r\n     * @param ey\r\n     *     Y coordinate of listening entity.\r\n     */\r\n    adjustForDistance(layername, snd, radius, sx, sy, ex, ey) {\r\n        const xdist = ex - sx;\r\n        const ydist = ey - sy;\r\n        const dist2 = xdist * xdist + ydist * ydist;\r\n        const rad2 = radius * radius;\r\n        if (dist2 > rad2) {\r\n            // outside the specified radius\r\n            snd.volume = 0.0;\r\n        }\r\n        else {\r\n            const maxvol = this.getAdjustedVolume(layername, snd.basevolume);\r\n            // The sound api does not guarantee anything about how the volume\r\n            // works, so it does not matter much how we scale it.\r\n            snd.volume = this.normVolume(Math.min(rad2 / (dist2 * 20), maxvol));\r\n        }\r\n    }\r\n    /**\r\n     * Normalizes volume level.\r\n     *\r\n     * @param vol\r\n     *     The input volume.\r\n     * @return\r\n     *     Level between 0 and 1.\r\n     */\r\n    normVolume(vol) {\r\n        return vol < 0 ? 0 : vol > 1 ? 1 : vol;\r\n    }\r\n    /**\r\n     * Calculates actual volume against layer volume levels.\r\n     *\r\n     * @param layername\r\n     *     String identifier of layer sound is playing on.\r\n     * @param basevol\r\n     *     The sounds base volume level.\r\n     * @return\r\n     *     Volume level adjusted with \"master\" & associated layer.\r\n     */\r\n    getAdjustedVolume(layername, basevol) {\r\n        let actualvol = basevol * stendhal.config.getFloat(\"ui.sound.master.volume\");\r\n        const lvol = stendhal.config.getFloat(\"ui.sound.\" + layername + \".volume\");\r\n        if (typeof (lvol) !== \"number\") {\r\n            console.warn(\"cannot adjust volume for layer \\\"\" + layername + \"\\\"\");\r\n            return actualvol;\r\n        }\r\n        return actualvol * lvol;\r\n    }\r\n    /**\r\n     * Applies the adjusted volume level to a sound.\r\n     *\r\n     * @param layername\r\n     *     String identifier of layer sound is playing on.\r\n     * @param snd\r\n     *     The sound to be adjusted.\r\n     */\r\n    applyAdjustedVolume(layername, snd) {\r\n        snd.volume = this.normVolume(this.getAdjustedVolume(layername, snd.basevolume));\r\n    }\r\n    /**\r\n     * Sets layer volume level.\r\n     *\r\n     * TODO: return numeric value for determining what went wrong\r\n     *\r\n     * @param layername\r\n     *     Name of layer being adjusted.\r\n     * @param vol\r\n     *     Volume level.\r\n     * @return\r\n     *     <code>true</code> if volume level was set.\r\n     */\r\n    setVolume(layername, vol) {\r\n        const oldvol = stendhal.config.getFloat(\"ui.sound.\" + layername + \".volume\");\r\n        if (typeof (oldvol) === \"undefined\" || oldvol === \"\") {\r\n            return false;\r\n        }\r\n        stendhal.config.set(\"ui.sound.\" + layername + \".volume\", this.normVolume(vol));\r\n        const layerset = layername === \"master\" ? this.layers : [layername];\r\n        for (const l of layerset) {\r\n            const layersounds = this.active[l];\r\n            if (typeof (layersounds) === \"undefined\") {\r\n                continue;\r\n            }\r\n            for (const snd of layersounds) {\r\n                if (typeof (snd.radius) === \"number\"\r\n                    && typeof (snd.x) === \"number\"\r\n                    && typeof (snd.y) === \"number\") {\r\n                    this.adjustForDistance(layername, snd, snd.radius, snd.x, snd.y, marauroa.me[\"_x\"], marauroa.me[\"_y\"]);\r\n                }\r\n                else {\r\n                    this.applyAdjustedVolume(layername, snd);\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Retrieves layer volume level.\r\n     *\r\n     * @param layername\r\n     *     Layer string identifier.\r\n     * @return\r\n     *     Current volume level of layer.\r\n     */\r\n    getVolume(layername = \"master\") {\r\n        let vol = stendhal.config.getFloat(\"ui.sound.\" + layername + \".volume\");\r\n        if (typeof (vol) === \"undefined\" || isNaN(vol) || !isFinite(vol)) {\r\n            console.warn(\"could not get volume for channel \\\"\" + layername + \"\\\"\");\r\n            return 1;\r\n        }\r\n        return this.normVolume(vol);\r\n    }\r\n    /**\r\n     * Called at startup to pre-cache certain sounds.\r\n     */\r\n    startupCache() {\r\n        // login sound\r\n        this.load(\"ui/login\", stendhal.paths.sounds + \"/ui/login.ogg\", true);\r\n    }\r\n}\r\nexports.SoundManager = SoundManager;\r\n//# sourceMappingURL=SoundManager.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FloatingWindow = void 0;\r\nconst Component_1 = require(\"./Component\");\r\nconst SoundManager_1 = require(\"../SoundManager\");\r\nclass FloatingWindow extends Component_1.Component {\r\n    constructor(title, contentComponent, x, y) {\r\n        super(\"window-template\");\r\n        this.contentComponent = contentComponent;\r\n        this.closeSound = \"click-1\";\r\n        this.opened = true;\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.content = contentComponent;\r\n        // create HTML code for window\r\n        this.componentElement.style.position = \"absolute\";\r\n        this.componentElement.style.left = x + \"px\";\r\n        this.componentElement.style.top = y + \"px\";\r\n        const titleBar = this.child(\".windowtitlebar\");\r\n        // apply theme\r\n        stendhal.config.applyTheme(titleBar);\r\n        if (title) {\r\n            this.child(\".windowtitle\").textContent = title;\r\n        }\r\n        else {\r\n            titleBar.classList.add(\"hidden\");\r\n        }\r\n        this.child(\".windowcontent\").append(contentComponent.componentElement);\r\n        // register and prepare event listeners\r\n        titleBar.addEventListener(\"mousedown\", (event) => {\r\n            this.onMouseDown(event);\r\n        });\r\n        titleBar.addEventListener(\"touchstart\", (event) => {\r\n            this.onTouchStart(event);\r\n        });\r\n        const closeButton = this.child(\".windowtitleclose\");\r\n        closeButton.addEventListener(\"click\", (event) => {\r\n            this.onClose(event);\r\n            FloatingWindow.soundManager.playGlobalizedEffect(this.closeSound);\r\n        });\r\n        closeButton.addEventListener(\"touchend\", (event) => {\r\n            this.onClose(event);\r\n            FloatingWindow.soundManager.playGlobalizedEffect(this.closeSound);\r\n        });\r\n        this.onMouseMovedDuringDragListener = (event) => {\r\n            if (event.type === \"mousemove\") {\r\n                this.onMouseMovedDuringDrag(event);\r\n            }\r\n            else {\r\n                this.onTouchMovedDuringDrag(event);\r\n            }\r\n        };\r\n        this.onMouseUpDuringDragListener = () => {\r\n            this.onMouseUpDuringDrag();\r\n        };\r\n        contentComponent.componentElement.addEventListener(\"close\", (event) => {\r\n            this.onClose(event);\r\n        });\r\n        this.contentComponent.parentComponent = this;\r\n        // add window to DOM\r\n        let popupcontainer = document.getElementById(\"popupcontainer\");\r\n        popupcontainer.appendChild(this.componentElement);\r\n    }\r\n    close() {\r\n        this.componentElement.remove();\r\n        this.contentComponent.onParentClose();\r\n        this.opened = false;\r\n        this.contentComponent.parentComponent = undefined;\r\n    }\r\n    onClose(event) {\r\n        this.close();\r\n        event.preventDefault();\r\n    }\r\n    isOpen() {\r\n        return this.opened;\r\n    }\r\n    /**\r\n     * start draging of popup window\r\n     */\r\n    onMouseDown(event) {\r\n        window.addEventListener(\"mousemove\", this.onMouseMovedDuringDragListener, true);\r\n        window.addEventListener(\"mouseup\", this.onMouseUpDuringDragListener, true);\r\n        window.addEventListener(\"touchmove\", this.onMouseMovedDuringDragListener, true);\r\n        window.addEventListener(\"touchend\", this.onMouseUpDuringDragListener, true);\r\n        event.preventDefault();\r\n        let box = this.componentElement.getBoundingClientRect();\r\n        this.offsetX = event.clientX - box.left - window.pageXOffset;\r\n        this.offsetY = event.clientY - box.top - window.pageYOffset;\r\n    }\r\n    onTouchStart(event) {\r\n        const firstT = event.changedTouches[0];\r\n        const simulated = new MouseEvent(\"mousedown\", {\r\n            screenX: firstT.screenX, screenY: firstT.screenY,\r\n            clientX: firstT.clientX, clientY: firstT.clientY\r\n        });\r\n        firstT.target.dispatchEvent(simulated);\r\n        event.preventDefault();\r\n    }\r\n    /**\r\n     * updates position of popup window during drag\r\n     */\r\n    onMouseMovedDuringDrag(event) {\r\n        this.componentElement.style.left = event.clientX - this.offsetX + 'px';\r\n        this.componentElement.style.top = event.clientY - this.offsetY + 'px';\r\n        this.onMoved();\r\n    }\r\n    onTouchMovedDuringDrag(event) {\r\n        const firstT = event.changedTouches[0];\r\n        const simulated = new MouseEvent(\"mousemove\", {\r\n            screenX: firstT.screenX, screenY: firstT.screenY,\r\n            clientX: firstT.clientX, clientY: firstT.clientY\r\n        });\r\n        firstT.target.dispatchEvent(simulated);\r\n        // FIXME: how to disable scrolling\r\n        //event.preventDefault();\r\n    }\r\n    /**\r\n     * deregister global event listeners used for dragging popup window\r\n     */\r\n    onMouseUpDuringDrag() {\r\n        window.removeEventListener(\"mousemove\", this.onMouseMovedDuringDragListener, true);\r\n        window.removeEventListener(\"mouseup\", this.onMouseUpDuringDragListener, true);\r\n        window.removeEventListener(\"touchmove\", this.onMouseMovedDuringDragListener, true);\r\n        window.removeEventListener(\"touchend\", this.onMouseUpDuringDragListener, true);\r\n    }\r\n    checkPos() {\r\n        var _a;\r\n        if (this.content) {\r\n            this.content.onMoved();\r\n        }\r\n        const dialogArea = this.componentElement.getBoundingClientRect();\r\n        const clientArea = document.documentElement.getBoundingClientRect();\r\n        // clientArea.height is 0, if there are now child elements (e. g. on login / choose character dialogs)\r\n        let clientAreaHeight = clientArea.height;\r\n        if (clientAreaHeight == 0) {\r\n            clientAreaHeight = ((_a = window.visualViewport) === null || _a === void 0 ? void 0 : _a.height) || 200;\r\n        }\r\n        const offset = stendhal.ui.getPageOffset();\r\n        let newX = dialogArea.x;\r\n        let newY = dialogArea.y;\r\n        if (newX < 0) {\r\n            newX = 0;\r\n            this.componentElement.style.left = (offset.x + newX) + \"px\";\r\n        }\r\n        else if (dialogArea.x + dialogArea.width > clientArea.right + offset.x) {\r\n            newX = clientArea.right - dialogArea.width;\r\n            this.componentElement.style.left = (offset.x + newX) + \"px\";\r\n        }\r\n        if (newY < 0) {\r\n            newY = 0;\r\n            this.componentElement.style.top = (offset.y + newY) + \"px\";\r\n        }\r\n        else if (dialogArea.y + dialogArea.height > clientAreaHeight) {\r\n            newY = clientAreaHeight - dialogArea.height;\r\n            this.componentElement.style.top = (offset.y + newY) + \"px\";\r\n        }\r\n        return { x: newX + offset.x, y: newY + offset.y };\r\n    }\r\n    onMoved() {\r\n        const pos = this.checkPos();\r\n        if (typeof (this.windowId) !== \"undefined\") {\r\n            stendhal.config.setWindowState(this.windowId, pos.x, pos.y);\r\n        }\r\n    }\r\n    setId(id) {\r\n        this.windowId = id;\r\n    }\r\n}\r\nexports.FloatingWindow = FloatingWindow;\r\nFloatingWindow.soundManager = SoundManager_1.SoundManager.get();\r\n//# sourceMappingURL=FloatingWindow.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SingletonFloatingWindow = void 0;\r\nconst FloatingWindow_1 = require(\"./FloatingWindow\");\r\n/**\r\n * A popup or dialog window that will disappear if another SingletonFloatingWindow is opened\r\n */\r\nclass SingletonFloatingWindow extends FloatingWindow_1.FloatingWindow {\r\n    /**\r\n     * creates and shows a SingletonFloatingWindow\r\n     *\r\n     * @param title title of the window\r\n     * @param contentComponent Component that is shown inside of the window\r\n     * @param x x-location on screen\r\n     * @param y y-location on screen\r\n     */\r\n    constructor(title, contentComponent, x, y) {\r\n        super(title, contentComponent, x, y);\r\n        if (SingletonFloatingWindow.visiblePopup) {\r\n            SingletonFloatingWindow.visiblePopup.close();\r\n        }\r\n        SingletonFloatingWindow.visiblePopup = this;\r\n    }\r\n    close() {\r\n        super.close();\r\n        if (SingletonFloatingWindow.visiblePopup === this) {\r\n            SingletonFloatingWindow.visiblePopup = undefined;\r\n        }\r\n    }\r\n    static closeAll() {\r\n        if (SingletonFloatingWindow.visiblePopup) {\r\n            SingletonFloatingWindow.visiblePopup.close();\r\n        }\r\n    }\r\n}\r\nexports.SingletonFloatingWindow = SingletonFloatingWindow;\r\n//# sourceMappingURL=SingletonFloatingWindow.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ui = void 0;\r\nconst SingletonFloatingWindow_1 = require(\"./toolkit/SingletonFloatingWindow\");\r\nclass UI {\r\n    constructor() {\r\n        this.wellKnownComponents = new Map();\r\n    }\r\n    createSingletonFloatingWindow(title, contentComponent, x, y) {\r\n        return new SingletonFloatingWindow_1.SingletonFloatingWindow(title, contentComponent, x, y);\r\n    }\r\n    registerComponent(key, component) {\r\n        this.wellKnownComponents.set(key, component);\r\n    }\r\n    unregisterComponent(component) {\r\n        for (let entry of this.wellKnownComponents.entries()) {\r\n            if (entry[1] === component) {\r\n                this.wellKnownComponents.delete(entry[0]);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    get(key) {\r\n        return this.wellKnownComponents.get(key);\r\n    }\r\n    getPageOffset() {\r\n        const body = document.body;\r\n        const delem = document.documentElement;\r\n        const offsetX = window.pageXOffset || delem.scrollLeft || body.scrollLeft;\r\n        const offsetY = window.pageYOffset || delem.scrollTop || body.scrollTop;\r\n        return { x: offsetX, y: offsetY };\r\n    }\r\n}\r\nexports.ui = new UI();\r\n//# sourceMappingURL=UI.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UIComponentEnum = void 0;\r\n/**\r\n * well known user interface components\r\n */\r\nclass UIComponentEnum {\r\n}\r\nexports.UIComponentEnum = UIComponentEnum;\r\n// this should be an enum, but after TypeScript and closure compiler are done, all\r\n// enum members resolve to undefined. That is both in JavaScript and TypeScript code\r\n// Panel\r\nUIComponentEnum.TopPanel = 0;\r\nUIComponentEnum.LeftPanel = 1;\r\nUIComponentEnum.RightPanel = 2;\r\nUIComponentEnum.BottomPanel = 3;\r\n// Components\r\nUIComponentEnum.Bag = 101;\r\nUIComponentEnum.BuddyList = 102;\r\nUIComponentEnum.ChatInput = 103;\r\nUIComponentEnum.ChatLog = 104;\r\nUIComponentEnum.GroupPanel = 105;\r\nUIComponentEnum.PlayerEquipment = 106;\r\nUIComponentEnum.Keyring = 107;\r\nUIComponentEnum.MiniMap = 108;\r\nUIComponentEnum.ZoneInfo = 109;\r\nUIComponentEnum.PlayerStats = 110;\r\nUIComponentEnum.SocialPanel = 111;\r\nUIComponentEnum.StatusesList = 112;\r\n// Dialog\r\nUIComponentEnum.TradeDialog = 201;\r\nUIComponentEnum.TravelLogDialog = 202;\r\nUIComponentEnum.OutfitDialog = 203;\r\n//# sourceMappingURL=UIComponentEnum.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Chat = void 0;\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst UIComponentEnum_1 = require(\"../ui/UIComponentEnum\");\r\n/**\r\n * chat logger\r\n */\r\nclass Chat {\r\n    /**\r\n     * Adds a line to the chat log.\r\n     *\r\n     * @param type\r\n     *     Message type.\r\n     * @param message\r\n     *     Message to log.\r\n     * @param orator\r\n     *     Name of entity making the expression (default: <code>undefined</code>).\r\n     * @param profile\r\n     *     Optional entity image filename to show as the speaker.\r\n     * @param headed\r\n     *     Set to <code>true</code> to show a notification bubble.\r\n     */\r\n    static log(type, message, orator, profile, headed = false) {\r\n        headed = headed || typeof (profile) !== \"undefined\";\r\n        if (!Chat.clog) {\r\n            Chat.clog = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatLog);\r\n        }\r\n        if (type === \"emoji\" && message instanceof HTMLImageElement) {\r\n            Chat.clog.addEmojiLine(message, orator);\r\n        }\r\n        else {\r\n            if (typeof (message) === \"string\") {\r\n                Chat.clog.addLine(type, message, orator);\r\n            }\r\n            else if (Object.prototype.toString.call(message) === \"[object Array]\") {\r\n                Chat.clog.addLines(type, message, orator);\r\n            }\r\n        }\r\n        // shows a notification bubble\r\n        if (marauroa.me && headed) {\r\n            let messages = [];\r\n            if (typeof (message) === \"string\") {\r\n                messages.push(message);\r\n            }\r\n            else {\r\n                messages = message;\r\n            }\r\n            for (const m of messages) {\r\n                stendhal.ui.gamewindow.addNotifSprite(type, m, profile);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Adds a line to the chat log & a notification bubble to gamewindow.\r\n     *\r\n     * @param type\r\n     *     Message type.\r\n     * @param message\r\n     *     Message to log.\r\n     * @param orator\r\n     *     Name of entity making the expression (default: <code>undefined</code>).\r\n     * @param profile\r\n     *     Optional entity image filename to show as the speaker.\r\n     */\r\n    static logH(type, message, orator, profile) {\r\n        Chat.log(type, message, orator, profile, true);\r\n    }\r\n    static debug(message) {\r\n        if (Chat.debugLogEnabled) {\r\n            Chat.log(\"client\", message);\r\n        }\r\n    }\r\n}\r\nexports.Chat = Chat;\r\nChat.debugLogEnabled = false;\r\n// initialize with \"hello\" since we won't have received a ChatOptionsEvent at startup\r\nChat.options = [\"hello\"];\r\n//# sourceMappingURL=Chat.js.map","","","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2005-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RPEvent = void 0;\r\n/**\r\n * abstract base class for Events from the server\r\n */\r\nclass RPEvent {\r\n}\r\nexports.RPEvent = RPEvent;\r\n;\r\n//# sourceMappingURL=RPEvent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2023-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ChatOptionsEvent = void 0;\r\nconst Chat_1 = require(\"../util/Chat\");\r\nconst RPEvent_1 = require(\"./RPEvent\");\r\n/**\r\n * shows an image for a detail view\r\n */\r\nclass ChatOptionsEvent extends RPEvent_1.RPEvent {\r\n    execute(entity) {\r\n        if (entity !== marauroa.me) {\r\n            return;\r\n        }\r\n        let optionsList = this['options'].split(\"\\t\");\r\n        let message = [];\r\n        for (let optionListEntry of optionsList) {\r\n            let option = optionListEntry.split(\"|~|\");\r\n            message.push(option[1]);\r\n        }\r\n        // update options to be included in keyword shortcuts dialog\r\n        Chat_1.Chat.attending = this['npc'];\r\n        Chat_1.Chat.options = message;\r\n        let m = \"Chat options for \" + this['npc'] + \": \" + message.join(\", \");\r\n        console.log(m);\r\n        Chat_1.Chat.debug(m);\r\n    }\r\n}\r\nexports.ChatOptionsEvent = ChatOptionsEvent;\r\n;\r\n//# sourceMappingURL=ChatOptionsEvent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageViewerDialog = void 0;\r\nconst Component_1 = require(\"../toolkit/Component\");\r\n/**\r\n * a dialog to display images\r\n */\r\nclass ImageViewerDialog extends Component_1.Component {\r\n    constructor(caption, imageFilename) {\r\n        super(\"imageviewer-template\");\r\n        this.child(\"h3\").textContent = caption;\r\n        this.componentElement.querySelector(\"img\").src = imageFilename;\r\n    }\r\n}\r\nexports.ImageViewerDialog = ImageViewerDialog;\r\n//# sourceMappingURL=ImageViewerDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2005-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ExamineEvent = void 0;\r\nconst ImageViewerDialog_1 = require(\"../ui/dialog/ImageViewerDialog\");\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst RPEvent_1 = require(\"./RPEvent\");\r\n/**\r\n * shows an image for a detail view\r\n */\r\nclass ExamineEvent extends RPEvent_1.RPEvent {\r\n    execute(entity) {\r\n        if (entity !== marauroa.me) {\r\n            return;\r\n        }\r\n        UI_1.ui.createSingletonFloatingWindow(this[\"title\"], new ImageViewerDialog_1.ImageViewerDialog(this[\"caption\"], this[\"path\"]), 100, 50);\r\n    }\r\n}\r\nexports.ExamineEvent = ExamineEvent;\r\n;\r\n//# sourceMappingURL=ExamineEvent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                 (C) Copyright 2005-2023 - Faiumoni e. V.                *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GroupChangeEvent = void 0;\r\nconst RPEvent_1 = require(\"./RPEvent\");\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst UIComponentEnum_1 = require(\"../ui/UIComponentEnum\");\r\n/**\r\n * handles player trade events\r\n */\r\nclass GroupChangeEvent extends RPEvent_1.RPEvent {\r\n    execute(entity) {\r\n        if (entity !== marauroa.me) {\r\n            return;\r\n        }\r\n        stendhal.data.group.updateGroupStatus(this[\"members\"], this[\"leader\"], this[\"lootmode\"]);\r\n        UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.GroupPanel).updateGroupStatus();\r\n    }\r\n}\r\nexports.GroupChangeEvent = GroupChangeEvent;\r\n//# sourceMappingURL=GroupChangeEvent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                 (C) Copyright 2005-2023 - Faiumoni e. V.                *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GroupInviteEvent = void 0;\r\nconst RPEvent_1 = require(\"./RPEvent\");\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst UIComponentEnum_1 = require(\"../ui/UIComponentEnum\");\r\n/**\r\n * handles player trade events\r\n */\r\nclass GroupInviteEvent extends RPEvent_1.RPEvent {\r\n    execute(entity) {\r\n        if (entity !== marauroa.me) {\r\n            return;\r\n        }\r\n        if (this[\"expire\"]) {\r\n            UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.GroupPanel).expiredInvite(this[\"leader\"]);\r\n        }\r\n        else {\r\n            UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.GroupPanel).receivedInvite(this[\"leader\"]);\r\n        }\r\n    }\r\n}\r\nexports.GroupInviteEvent = GroupInviteEvent;\r\n//# sourceMappingURL=GroupInviteEvent.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Arianne                      *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DialogContentComponent = void 0;\r\nconst Component_1 = require(\"./Component\");\r\n/**\r\n * Component representing the contents of a floating dialog.\r\n */\r\nclass DialogContentComponent extends Component_1.Component {\r\n    constructor(id) {\r\n        super(id, true);\r\n        this.componentElement.classList.add(\"dialogcontents\");\r\n    }\r\n    /**\r\n     * Sets the closable dialog frame.\r\n     */\r\n    setFrame(frame) {\r\n        this.frame = frame;\r\n    }\r\n    getFrame() {\r\n        return this.frame;\r\n    }\r\n    /**\r\n     * Closes the containing FloatingWindow.\r\n     */\r\n    close() {\r\n        if (this.frame) {\r\n            this.frame.close();\r\n        }\r\n    }\r\n}\r\nexports.DialogContentComponent = DialogContentComponent;\r\n//# sourceMappingURL=DialogContentComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2007-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TravelLogDialog = void 0;\r\nconst DialogContentComponent_1 = require(\"../toolkit/DialogContentComponent\");\r\nconst UI_1 = require(\"../UI\");\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\n/**\r\n * a dialog to display images\r\n */\r\nclass TravelLogDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor(dataItems) {\r\n        super(\"travellogdialog-template\");\r\n        this.currentProgressType = \"\";\r\n        this.repeatable = {};\r\n        UI_1.ui.registerComponent(UIComponentEnum_1.UIComponentEnum.TravelLogDialog, this);\r\n        this.refresh();\r\n        this.createHtml(dataItems);\r\n        // trigger loading of content for first entry\r\n        this.currentProgressType = dataItems[0];\r\n        var action = {\r\n            \"type\": \"progressstatus\",\r\n            \"progress_type\": this.currentProgressType\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    ;\r\n    refresh() {\r\n        this.componentElement.style.setProperty(\"font-family\", stendhal.config.get(\"ui.font.tlog\"));\r\n    }\r\n    getConfigId() {\r\n        return \"travellog\";\r\n    }\r\n    createHtml(dataItems) {\r\n        let buttons = \"\";\r\n        for (var i = 0; i < dataItems.length; i++) {\r\n            buttons = buttons + \"<button id=\\\"\" + stendhal.ui.html.esc(dataItems[i])\r\n                + \"\\\" class=\\\"progressTypeButton\\\">\"\r\n                + stendhal.ui.html.esc(dataItems[i]) + \"</button>\";\r\n        }\r\n        this.child(\".tavellogtabpanel\").innerHTML = buttons;\r\n        this.componentElement.querySelectorAll(\".progressTypeButton\").forEach((button) => {\r\n            button.addEventListener(\"click\", (event) => {\r\n                this.onProgressTypeButtonClick(event);\r\n            });\r\n        });\r\n        this.child(\".travellogitems\").addEventListener(\"change\", (event) => {\r\n            this.onTravelLogItemsChange(event);\r\n        });\r\n    }\r\n    onProgressTypeButtonClick(event) {\r\n        // clear details when changing category\r\n        this.refreshDetails();\r\n        this.currentProgressType = event.target.id;\r\n        var action = {\r\n            \"type\": \"progressstatus\",\r\n            \"progress_type\": this.currentProgressType\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n        // request repeatable quests\r\n        if (this.currentProgressType === \"Completed Quests\") {\r\n            marauroa.clientFramework.sendAction({\r\n                \"type\": \"progressstatus\",\r\n                \"progress_type\": \"repeatable\"\r\n            });\r\n        }\r\n    }\r\n    onTravelLogItemsChange(event) {\r\n        var action = {\r\n            \"type\": \"progressstatus\",\r\n            \"progress_type\": this.currentProgressType,\r\n            \"item\": event.target.value\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    progressTypeData(progressType, dataItems) {\r\n        if (progressType !== this.currentProgressType) {\r\n            return;\r\n        }\r\n        // sort items alphabetically\r\n        dataItems.sort();\r\n        var html = \"\";\r\n        for (var i = 0; i < dataItems.length; i++) {\r\n            const currentItem = dataItems[i];\r\n            html += \"<option value=\\\"\" + stendhal.ui.html.esc(currentItem) + \"\\\">\"\r\n                + stendhal.ui.html.esc(currentItem);\r\n            if (this.repeatable[currentItem]) {\r\n                html += \" (R)\";\r\n            }\r\n            html += \"</option>\";\r\n        }\r\n        this.child(\".travellogitems\").innerHTML = html;\r\n        // trigger loading of content for first entry\r\n        if (dataItems) {\r\n            // this.child(\".travellogitems\")!.value = dataItems[0];\r\n            var action = {\r\n                \"type\": \"progressstatus\",\r\n                \"progress_type\": progressType,\r\n                \"item\": dataItems[0]\r\n            };\r\n            marauroa.clientFramework.sendAction(action);\r\n        }\r\n    }\r\n    itemData(progressType, selectedItem, description, dataItems) {\r\n        if (progressType !== this.currentProgressType) {\r\n            return;\r\n        }\r\n        const detailsSpan = document.createElement(\"span\");\r\n        detailsSpan.innerHTML = \"<h3>\" + stendhal.ui.html.esc(selectedItem) + \"</h3>\";\r\n        if (this.repeatable[selectedItem]) {\r\n            detailsSpan.innerHTML += \"<p id=\\\"travellogrepeatable\\\">\"\r\n                + \"<img src=\\\"\" + stendhal.paths.gui + \"/rp.png\\\" /> <em>I can do this quest again.</em></p>\";\r\n        }\r\n        detailsSpan.innerHTML += \"<p id=\\\"travellogdescription\\\">\"\r\n            + stendhal.ui.html.esc(description) + \"</p>\";\r\n        const ul = document.createElement(\"ul\");\r\n        ul.className = \"uniform\";\r\n        for (var i = 0; i < dataItems.length; i++) {\r\n            let content = [];\r\n            let html = stendhal.ui.html.esc(dataItems[i], [\"em\", \"tally\"]);\r\n            if (html.includes(\"<tally>\") && html.includes(\"</tally>\")) {\r\n                content = stendhal.ui.html.formatTallyMarks(html);\r\n            }\r\n            else {\r\n                content.push(html);\r\n            }\r\n            const li = document.createElement(\"li\");\r\n            li.className = \"uniform\";\r\n            li.innerHTML = content[0];\r\n            if (content[1]) {\r\n                li.appendChild(content[1]);\r\n                if (content[2]) {\r\n                    li.innerHTML += content[2];\r\n                }\r\n            }\r\n            ul.appendChild(li);\r\n        }\r\n        detailsSpan.appendChild(ul);\r\n        this.refreshDetails(\"\", detailsSpan);\r\n    }\r\n    refreshDetails(html = \"\", newDetails) {\r\n        const details = this.child(\".travellogdetails\");\r\n        details.innerHTML = html;\r\n        if (newDetails) {\r\n            details.appendChild(newDetails);\r\n        }\r\n    }\r\n    onParentClose() {\r\n        UI_1.ui.unregisterComponent(this);\r\n    }\r\n    setRepeatable(dataItems) {\r\n        const repeatable = {};\r\n        for (const item of dataItems) {\r\n            repeatable[item] = true;\r\n        }\r\n        this.repeatable = repeatable;\r\n    }\r\n}\r\nexports.TravelLogDialog = TravelLogDialog;\r\n//# sourceMappingURL=TravelLogDialog.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2005-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ProgressStatusEvent = void 0;\r\nconst FloatingWindow_1 = require(\"../ui/toolkit/FloatingWindow\");\r\nconst TravelLogDialog_1 = require(\"../ui/dialog/TravelLogDialog\");\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst UIComponentEnum_1 = require(\"../ui/UIComponentEnum\");\r\nconst RPEvent_1 = require(\"./RPEvent\");\r\n/**\r\n * show travel log and details\r\n */\r\nclass ProgressStatusEvent extends RPEvent_1.RPEvent {\r\n    execute(_entity) {\r\n        let progressType = this[\"progress_type\"];\r\n        let dataItems = this[\"data\"].substring(1, this[\"data\"].length - 1).split(/\\t/);\r\n        let travelLogDialog = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.TravelLogDialog);\r\n        if (!this[\"progress_type\"]) {\r\n            if (!travelLogDialog) {\r\n                const dstate = stendhal.config.getWindowState(\"travellog\");\r\n                travelLogDialog = new TravelLogDialog_1.TravelLogDialog(dataItems);\r\n                new FloatingWindow_1.FloatingWindow(\"Travel Log\", travelLogDialog, dstate.x, dstate.y).setId(\"travellog\");\r\n            }\r\n            return;\r\n        }\r\n        if (!travelLogDialog) {\r\n            return;\r\n        }\r\n        if (!this[\"item\"]) {\r\n            if (progressType === \"repeatable\") {\r\n                travelLogDialog.setRepeatable(dataItems);\r\n            }\r\n            else {\r\n                travelLogDialog.progressTypeData(progressType, dataItems);\r\n            }\r\n        }\r\n        else {\r\n            travelLogDialog.itemData(progressType, this[\"item\"], this[\"description\"], dataItems);\r\n        }\r\n    }\r\n}\r\nexports.ProgressStatusEvent = ProgressStatusEvent;\r\n;\r\n//# sourceMappingURL=ProgressStatusEvent.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ActionContextMenu = void 0;\r\nconst UI_1 = require(\"../UI\");\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nclass ActionContextMenu extends Component_1.Component {\r\n    constructor(entity, append = []) {\r\n        super(\"contextmenu-template\");\r\n        this.entity = entity;\r\n        this.appendActions = append;\r\n        this.gatherActions();\r\n        var content = \"<div class=\\\"actionmenu\\\">\";\r\n        for (var i = 0; i < this.actions.length; i++) {\r\n            content += \"<button id=\\\"actionbutton.\" + i + \"\\\">\" + stendhal.ui.html.esc(this.actions[i].title) + \"</button><br>\";\r\n        }\r\n        content += \"</div>\";\r\n        this.componentElement.innerHTML = content;\r\n        this.componentElement.addEventListener(\"click\", (event) => {\r\n            this.onClick(event);\r\n        });\r\n    }\r\n    onClick(event) {\r\n        var _a;\r\n        let iStr = (_a = event.target.getAttribute(\"id\")) === null || _a === void 0 ? void 0 : _a.substring(13);\r\n        if (iStr === undefined || iStr === \"\") {\r\n            return;\r\n        }\r\n        let i = parseInt(iStr);\r\n        if (i < 0) {\r\n            return;\r\n        }\r\n        this.componentElement.dispatchEvent(new Event(\"close\"));\r\n        if (i >= this.actions.length) {\r\n            throw new Error(\"actions index is larger than number of actions\");\r\n        }\r\n        if (this.actions[i].action) {\r\n            this.actions[i].action(this.entity);\r\n        }\r\n        else {\r\n            this.executeFallbackAction(this.actions[i].type);\r\n        }\r\n    }\r\n    executeFallbackAction(type) {\r\n        let action = {\r\n            \"type\": type,\r\n            \"target_path\": this.entity.getIdPath(),\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n        // for top level entities, include \"target\", which is required for example on attack-action\r\n        if ('[' + this.entity.id + ']' === this.entity.getIdPath()) {\r\n            action['target'] = '#' + this.entity.id;\r\n        }\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    gatherActions() {\r\n        let actions = [];\r\n        this.entity.buildActions(actions);\r\n        for (const action of this.appendActions) {\r\n            actions.push(action);\r\n        }\r\n        if (marauroa.me[\"adminlevel\"] && marauroa.me[\"adminlevel\"] >= 600) {\r\n            actions.push({\r\n                title: \"(*) Inspect\",\r\n                action: function (entity) {\r\n                    const action = { \"type\": \"inspect\" };\r\n                    if (entity.hasOwnProperty(\"id\")) {\r\n                        action[\"target\"] = \"#\" + entity[\"id\"];\r\n                    }\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n            actions.push({\r\n                title: \"(*) Destroy\",\r\n                action: function (entity) {\r\n                    var action = {\r\n                        \"type\": \"destroy\",\r\n                    };\r\n                    if (entity.isContained()) {\r\n                        action[\"baseobject\"] = marauroa.me[\"id\"];\r\n                        action[\"baseslot\"] = entity.getContainer()._name;\r\n                        action[\"baseitem\"] = entity[\"id\"];\r\n                    }\r\n                    else {\r\n                        action[\"target\"] = \"#\" + entity[\"id\"];\r\n                    }\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n            actions.push({\r\n                title: \"(*) Alter\",\r\n                action: function (entity) {\r\n                    UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatInput).setText(\"/alter #\"\r\n                        + entity[\"id\"]\r\n                        + \" \");\r\n                }\r\n            });\r\n        }\r\n        this.actions = actions;\r\n    }\r\n}\r\nexports.ActionContextMenu = ActionContextMenu;\r\n//# sourceMappingURL=ActionContextMenu.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DropQuantitySelectorDialog = void 0;\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nclass DropQuantitySelectorDialog extends Component_1.Component {\r\n    constructor(action, is_touch = false) {\r\n        var _a;\r\n        super(\"dropquantityselectordialog-template\");\r\n        this.action = action;\r\n        (_a = this.child(\".quantityselectorbutton\")) === null || _a === void 0 ? void 0 : _a.addEventListener(\"click\", (event) => {\r\n            this.onDrop(event);\r\n        });\r\n        if (is_touch) {\r\n            const allButton = document.createElement(\"button\");\r\n            allButton.className = \"allselectorbutton\";\r\n            allButton.innerText = \"All\";\r\n            this.componentElement.appendChild(allButton);\r\n            allButton.addEventListener(\"click\", (event) => {\r\n                this.onDropAll(event);\r\n            });\r\n        }\r\n        let valueInput = this.child(\".quantityselectorvalue\");\r\n        queueMicrotask(() => {\r\n            valueInput.select();\r\n            valueInput.focus();\r\n        });\r\n        valueInput.addEventListener(\"keydown\", (event) => {\r\n            if (event.key === \"Enter\") {\r\n                this.onDrop(event);\r\n            }\r\n        });\r\n    }\r\n    onDrop(event) {\r\n        let quantityStr = this.child(\".quantityselectorvalue\").value;\r\n        let quantity = parseInt(quantityStr);\r\n        if (quantity > 0) {\r\n            this.action[\"quantity\"] = quantityStr;\r\n            marauroa.clientFramework.sendAction(this.action);\r\n        }\r\n        this.componentElement.dispatchEvent(new Event(\"close\"));\r\n        event.preventDefault();\r\n    }\r\n    onDropAll(event) {\r\n        marauroa.clientFramework.sendAction(this.action);\r\n        this.componentElement.dispatchEvent(new Event(\"close\"));\r\n        event.preventDefault();\r\n    }\r\n}\r\nexports.DropQuantitySelectorDialog = DropQuantitySelectorDialog;\r\n//# sourceMappingURL=DropQuantitySelectorDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ItemContainerImplementation = void 0;\r\nconst UI_1 = require(\"../UI\");\r\nconst ActionContextMenu_1 = require(\"../dialog/ActionContextMenu\");\r\nconst DropQuantitySelectorDialog_1 = require(\"../dialog/DropQuantitySelectorDialog\");\r\n/**\r\n * a container for items like a bag or corpse\r\n */\r\nclass ItemContainerImplementation {\r\n    // TODO: replace usage of global document.getElementById()\r\n    /**\r\n     * slot name, slot size, object (a corpse or chest) or null for marauroa.me,\r\n     * which changes on zone change.\r\n     */\r\n    constructor(parentElement, slot, size, object, suffix, quickPickup, defaultImage) {\r\n        this.parentElement = parentElement;\r\n        this.slot = slot;\r\n        this.size = size;\r\n        this.object = object;\r\n        this.suffix = suffix;\r\n        this.quickPickup = quickPickup;\r\n        this.defaultImage = defaultImage;\r\n        this.rightClickDuration = 300;\r\n        this.timestampMouseDown = 0;\r\n        this.timestampMouseDownPrev = 0;\r\n        // slot index where cursor is hovering\r\n        this.selectedIdx = undefined;\r\n        // marked for updating certain attributes\r\n        this.dirty = false;\r\n        this.init(size);\r\n    }\r\n    init(size) {\r\n        this.size = size;\r\n        for (let i = 0; i < size; i++) {\r\n            let e = this.parentElement.querySelector(\"#\" + this.slot + this.suffix + i);\r\n            e.setAttribute(\"draggable\", \"true\");\r\n            e.addEventListener(\"dragstart\", (event) => {\r\n                this.onDragStart(event);\r\n            });\r\n            e.addEventListener(\"dragover\", (event) => {\r\n                this.onDragOver(event);\r\n            });\r\n            e.addEventListener(\"drop\", (event) => {\r\n                this.onDrop(event);\r\n            });\r\n            e.addEventListener(\"mousedown\", (event) => {\r\n                this.onMouseDown(event);\r\n            });\r\n            e.addEventListener(\"mouseup\", (event) => {\r\n                this.onMouseUp(event);\r\n            });\r\n            e.addEventListener(\"touchstart\", (event) => {\r\n                this.onTouchStart(event);\r\n            });\r\n            e.addEventListener(\"touchend\", (event) => {\r\n                this.onTouchEnd(event);\r\n            });\r\n            e.addEventListener(\"contextmenu\", (event) => {\r\n                this.onContextMenu(event);\r\n            });\r\n            e.addEventListener(\"mouseenter\", (event) => {\r\n                this.onMouseEnter(event);\r\n            });\r\n            e.addEventListener(\"mouseleave\", (event) => {\r\n                this.onMouseLeave(event);\r\n            });\r\n        }\r\n        this.update();\r\n    }\r\n    /**\r\n     * Marks items to update cursors & tooltips.\r\n     */\r\n    markDirty() {\r\n        this.dirty = true;\r\n    }\r\n    update() {\r\n        this.render();\r\n    }\r\n    render() {\r\n        let myobject = this.object || marauroa.me;\r\n        let cnt = 0;\r\n        if (myobject && myobject[this.slot]) {\r\n            for (let i = 0; i < myobject[this.slot].count(); i++) {\r\n                let o = myobject[this.slot].getByIndex(i);\r\n                let e = this.parentElement.querySelector(\"#\" + this.slot + this.suffix + cnt);\r\n                if (!e) {\r\n                    continue;\r\n                }\r\n                this.dirty = this.dirty || o !== e.dataItem;\r\n                const item = o;\r\n                let xOffset = 0;\r\n                let yOffset = (item[\"state\"] || 0) * -32;\r\n                if (item.isAnimated()) {\r\n                    item.stepAnimation();\r\n                    xOffset = -(item.getXFrameIndex() * 32);\r\n                }\r\n                e.style.backgroundImage = \"url(\"\r\n                    + stendhal.data.sprites.checkPath(stendhal.paths.sprites\r\n                        + \"/items/\" + o[\"class\"] + \"/\" + o[\"subclass\"] + \".png\")\r\n                    + \")\";\r\n                e.style.backgroundPosition = (xOffset + 1) + \"px \" + (yOffset + 1) + \"px\";\r\n                e.textContent = o.formatQuantity();\r\n                if (this.dirty) {\r\n                    this.updateCursor(e, item);\r\n                    this.updateToolTip(e, item);\r\n                }\r\n                e.dataItem = o;\r\n                cnt++;\r\n            }\r\n        }\r\n        for (let i = cnt; i < this.size; i++) {\r\n            let e = this.parentElement.querySelector(\"#\" + this.slot + this.suffix + i);\r\n            if (this.defaultImage) {\r\n                e.style.backgroundImage = \"url(\" + stendhal.paths.gui + \"/\" + this.defaultImage + \")\";\r\n            }\r\n            else {\r\n                e.style.backgroundImage = \"none\";\r\n            }\r\n            e.textContent = \"\";\r\n            if (this.dirty) {\r\n                this.updateCursor(e);\r\n                this.updateToolTip(e);\r\n            }\r\n            e.dataItem = undefined;\r\n        }\r\n        this.dirty = false;\r\n    }\r\n    onDragStart(event) {\r\n        let myobject = this.object || marauroa.me;\r\n        // some mobile browsers such as Chrome call \"dragstart\" via long touch\r\n        const touchEngaged = stendhal.ui.touch.isTouchEngaged();\r\n        if (!myobject[this.slot] || touchEngaged) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n        let target;\r\n        if (event instanceof DragEvent) {\r\n            target = event.target;\r\n        }\r\n        else {\r\n            // touch event\r\n            const touch = event.touches[0] || event.targetTouches[0] || event.changedTouches[0];\r\n            target = touch.target;\r\n        }\r\n        const slotNumber = target.id.slice(this.slot.length + this.suffix.length);\r\n        let item = myobject[this.slot].getByIndex(slotNumber);\r\n        if (item) {\r\n            stendhal.ui.heldItem = {\r\n                path: item.getIdPath(),\r\n                zone: marauroa.currentZoneName,\r\n                slot: this.slot,\r\n                quantity: item.hasOwnProperty(\"quantity\") ? item[\"quantity\"] : 1\r\n            };\r\n            const img = stendhal.data.sprites.getAreaOf(stendhal.data.sprites.get(item.sprite.filename), 32, 32);\r\n            if (event instanceof DragEvent && event.dataTransfer) {\r\n                event.dataTransfer.setDragImage(img, 0, 0);\r\n            }\r\n            else if (stendhal.ui.touch.isTouchEvent(event)) {\r\n                stendhal.ui.touch.setHeldItem(img);\r\n            }\r\n        }\r\n        else {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    onDragOver(event) {\r\n        event.preventDefault();\r\n        if (event instanceof DragEvent && event.dataTransfer) {\r\n            event.dataTransfer.dropEffect = \"move\";\r\n        }\r\n        // store index of where cursor is located\r\n        const id = event.target.id;\r\n        if (id.includes(\".\")) {\r\n            const tmp = id.split(\".\");\r\n            const idx = tmp[tmp.length - 1];\r\n            if (!isNaN(parseInt(idx, 10))) {\r\n                this.selectedIdx = idx;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    onDrop(event) {\r\n        const myobject = this.object || marauroa.me;\r\n        if (stendhal.ui.heldItem) {\r\n            const action = {\r\n                \"source_path\": stendhal.ui.heldItem.path\r\n            };\r\n            if (stendhal.ui.heldItem.slot === this.slot) {\r\n                action[\"type\"] = \"reorder\";\r\n                action[\"new_position\"] = this.selectedIdx || \"\" + (this.size - 1);\r\n            }\r\n            else {\r\n                action[\"type\"] = \"equip\";\r\n                action[\"target_path\"] = \"[\" + myobject[\"id\"] + \"\\t\" + this.slot + \"]\";\r\n                action[\"zone\"] = stendhal.ui.heldItem.zone;\r\n            }\r\n            const quantity = stendhal.ui.heldItem.quantity;\r\n            stendhal.ui.heldItem = undefined;\r\n            // if ctrl is pressed or holding stackable item from touch event, we ask for the quantity\r\n            const touch_held = stendhal.ui.touch.holdingItem() && quantity > 1;\r\n            const split_action = (event instanceof DragEvent && event.ctrlKey) || touch_held;\r\n            if (split_action) {\r\n                const pos = stendhal.ui.html.extractPosition(event);\r\n                UI_1.ui.createSingletonFloatingWindow(\"Quantity\", new DropQuantitySelectorDialog_1.DropQuantitySelectorDialog(action, touch_held), pos.pageX - 50, pos.pageY - 25);\r\n            }\r\n            else {\r\n                marauroa.clientFramework.sendAction(action);\r\n            }\r\n        }\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n    }\r\n    onContextMenu(event) {\r\n        event.preventDefault();\r\n    }\r\n    isRightClick(event) {\r\n        if (event.which) {\r\n            return (event.which === 3);\r\n        }\r\n        else {\r\n            return (event.button === 2);\r\n        }\r\n    }\r\n    isDoubleClick(evt) {\r\n        return (this.timestampMouseDown - this.timestampMouseDownPrev <= this.rightClickDuration);\r\n    }\r\n    onMouseDown(event) {\r\n        this.timestampMouseDownPrev = this.timestampMouseDown;\r\n        this.timestampMouseDown = +new Date();\r\n    }\r\n    onMouseUp(evt) {\r\n        if (evt instanceof MouseEvent) {\r\n            evt.preventDefault();\r\n        }\r\n        let event = stendhal.ui.html.extractPosition(evt);\r\n        if (event.target.dataItem) {\r\n            const long_touch = stendhal.ui.touch.isLongTouch(evt);\r\n            const context_action = (evt instanceof MouseEvent && this.isRightClick(evt)) || long_touch;\r\n            if (this.quickPickup && !context_action) {\r\n                marauroa.clientFramework.sendAction({\r\n                    type: \"equip\",\r\n                    \"source_path\": event.target.dataItem.getIdPath(),\r\n                    \"target_path\": \"[\" + marauroa.me[\"id\"] + \"\\tbag]\",\r\n                    \"clicked\": \"\",\r\n                    \"zone\": marauroa.currentZoneName\r\n                });\r\n                return;\r\n            }\r\n            if (this.isRightClick(event) || long_touch) {\r\n                const append = [];\r\n                if (window['TouchEvent'] && evt instanceof TouchEvent && long_touch) {\r\n                    // XXX: better way to pass instance to action function?\r\n                    const tmp = this;\r\n                    // action to \"hold\" item for moving or dropping using touch\r\n                    // XXX: temporary workaround, should use drag-and-drop instead\r\n                    append.push({\r\n                        title: \"Hold\",\r\n                        action: function (entity) {\r\n                            tmp.onDragStart(evt);\r\n                        }\r\n                    });\r\n                }\r\n                stendhal.ui.actionContextMenu.set(UI_1.ui.createSingletonFloatingWindow(\"Action\", new ActionContextMenu_1.ActionContextMenu(event.target.dataItem, append), event.pageX - 50, event.pageY - 5));\r\n            }\r\n            else if (!stendhal.ui.heldItem) {\r\n                if (!stendhal.config.getBoolean(\"action.item.doubleclick\") || this.isDoubleClick(event)) {\r\n                    marauroa.clientFramework.sendAction({\r\n                        type: \"use\",\r\n                        \"target_path\": event.target.dataItem.getIdPath(),\r\n                        \"zone\": marauroa.currentZoneName\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        // clean up item held via touch\r\n        stendhal.ui.touch.unsetHeldItem();\r\n        document.getElementById(\"gamewindow\").focus();\r\n    }\r\n    onMouseEnter(evt) {\r\n        // nothing\r\n    }\r\n    onMouseLeave(evt) {\r\n        // nothing\r\n    }\r\n    onTouchStart(evt) {\r\n        const pos = stendhal.ui.html.extractPosition(evt);\r\n        stendhal.ui.touch.onTouchStart(pos.pageX, pos.pageY);\r\n    }\r\n    onTouchEnd(evt) {\r\n        stendhal.ui.touch.onTouchEnd();\r\n        if (stendhal.ui.touch.isLongTouch(evt) && !stendhal.ui.touch.held) {\r\n            this.onMouseUp(evt);\r\n        }\r\n        else if (stendhal.ui.touch.held) {\r\n            evt.preventDefault();\r\n            this.onDrop(evt);\r\n            stendhal.ui.touch.unsetHeldItem();\r\n        }\r\n        stendhal.ui.touch.unsetOrigin();\r\n    }\r\n    /**\r\n     * Updates cursor to display for targeted item.\r\n     *\r\n     * @param target\r\n     *     HTMLElement representing item.\r\n     * @param item\r\n     *     Object containing item information.\r\n     */\r\n    updateCursor(target, item) {\r\n        if (item) {\r\n            target.style.cursor = item.getCursor(0, 0);\r\n            return;\r\n        }\r\n        target.style.cursor = \"url(\" + stendhal.paths.sprites\r\n            + \"/cursor/normal.png) 1 3, auto\";\r\n    }\r\n    /**\r\n     * Sets tooltip to be shown for item.\r\n     *\r\n     * @param target\r\n     *     HTMLElement representing item.\r\n     * @param item\r\n     *     Object containing item information.\r\n     */\r\n    updateToolTip(target, item) {\r\n        target.title = typeof (item) !== \"undefined\" ? item.getToolTip() : \"\";\r\n    }\r\n}\r\nexports.ItemContainerImplementation = ItemContainerImplementation;\r\n//# sourceMappingURL=ItemContainerImplementation.js.map","","","","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ItemInventoryComponent = void 0;\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst ItemContainerImplementation_1 = require(\"./ItemContainerImplementation\");\r\n/**\r\n * handles an item inventory\r\n */\r\nclass ItemInventoryComponent extends Component_1.Component {\r\n    constructor(object, slot, sizeX, sizeY, quickPickup, defaultImage) {\r\n        super(\"iteminventory-template\", true);\r\n        this.slot = slot;\r\n        this.oldSizeX = 0;\r\n        ItemInventoryComponent.counter++;\r\n        this.suffix = \"-\" + ItemInventoryComponent.counter + \"-\";\r\n        this.componentElement.classList.add(\"inventorypopup_\" + sizeX);\r\n        if (quickPickup) {\r\n            this.componentElement.classList.add(\"quickPickup\");\r\n        }\r\n        // TODO: rewrite ItemContainerImplementation not to depend on unique ids (aka suffix)\r\n        this.setSize(sizeX, sizeY);\r\n        this.itemContainerImplementation = new ItemContainerImplementation_1.ItemContainerImplementation(this.componentElement, slot, sizeX * sizeY, object, this.suffix, quickPickup, defaultImage);\r\n        stendhal.ui.equip.add(this.itemContainerImplementation);\r\n    }\r\n    setObject(object) {\r\n        this.itemContainerImplementation.object = object;\r\n    }\r\n    setSize(sizeX, sizeY) {\r\n        this.componentElement.classList.remove(\"inventorypopup_\" + this.oldSizeX);\r\n        this.componentElement.classList.add(\"inventorypopup_\" + sizeX);\r\n        this.oldSizeX = sizeX;\r\n        let html = \"\";\r\n        for (let i = 0; i < sizeX * sizeY; i++) {\r\n            html += \"<div id='\" + this.slot + this.suffix + i + \"' class='itemSlot'></div>\";\r\n        }\r\n        this.componentElement.innerHTML = html;\r\n    }\r\n    update() {\r\n        this.itemContainerImplementation.update();\r\n    }\r\n    markDirty() {\r\n        this.itemContainerImplementation.markDirty();\r\n    }\r\n    onParentClose() {\r\n        let idx = stendhal.ui.equip.indexOf(this.itemContainerImplementation);\r\n        console.log(stendhal.ui.equip.getInventory(), idx);\r\n        if (idx < 0) {\r\n            console.log(\"Cannot cleanup unknown itemContainerImplementation\");\r\n            return;\r\n        }\r\n        stendhal.ui.equip.removeIndex(idx);\r\n    }\r\n}\r\nexports.ItemInventoryComponent = ItemInventoryComponent;\r\nItemInventoryComponent.counter = 0;\r\n//# sourceMappingURL=ItemInventoryComponent.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2007-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TradeDialog = void 0;\r\nconst ItemInventoryComponent_1 = require(\"../component/ItemInventoryComponent\");\r\nconst DialogContentComponent_1 = require(\"../toolkit/DialogContentComponent\");\r\nconst UI_1 = require(\"../UI\");\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\n/**\r\n * a dialog to display images\r\n */\r\nclass TradeDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor() {\r\n        super(\"tradedialog-template\");\r\n        UI_1.ui.registerComponent(UIComponentEnum_1.UIComponentEnum.TradeDialog, this);\r\n        this.refresh();\r\n        this.otherItemsComponent = new ItemInventoryComponent_1.ItemInventoryComponent(TradeDialog.empty, \"trade\", 2, 2, false, undefined);\r\n        this.myItemsComponent = new ItemInventoryComponent_1.ItemInventoryComponent(TradeDialog.empty, \"trade\", 2, 2, false, undefined);\r\n        this.createHtml();\r\n    }\r\n    showState(element, state) {\r\n        element.className = \"trade-\" + state;\r\n        switch (state) {\r\n            case \"NO_ACTIVE_TRADE\":\r\n                element.innerText = \"Inactive\";\r\n                break;\r\n            case \"MAKING_OFFERS\":\r\n                element.innerText = \"Changing\";\r\n                break;\r\n            case \"LOCKED\":\r\n                element.innerText = \"Offered\";\r\n                break;\r\n            case \"DEAL_WAITING_FOR_OTHER_DEAL\":\r\n                element.innerText = \"ACCEPTED\";\r\n                break;\r\n        }\r\n    }\r\n    updateTradeState(me, partner, myState, partnerState) {\r\n        if (partner) {\r\n            this.child(\"#trade-partner-name\").innerText = partner[\"_name\"];\r\n        }\r\n        this.showState(this.child(\"#trade-partner-status\"), partnerState);\r\n        this.showState(this.child(\"#trade-my-status\"), myState);\r\n        this.child(\"#trade-offer\").disabled = !(myState === \"MAKING_OFFERS\");\r\n        this.child(\"#trade-accept\").disabled\r\n            = !(myState === \"LOCKED\" && (partnerState === \"LOCKED\" || partnerState === \"DEAL_WAITING_FOR_OTHER_DEAL\"));\r\n        this.otherItemsComponent.setObject(partner ? partner : TradeDialog.empty);\r\n        this.myItemsComponent.setObject(me);\r\n        if (myState === \"TRADE_COMPLETED\") {\r\n            this.componentElement.dispatchEvent(new Event(\"close\"));\r\n        }\r\n    }\r\n    getConfigId() {\r\n        return \"trade\";\r\n    }\r\n    createHtml() {\r\n        this.child(\"#trade-partner-items\").append(this.otherItemsComponent.componentElement);\r\n        this.child(\"#trade-my-items\").append(this.myItemsComponent.componentElement);\r\n        this.child(\"#trade-accept\").addEventListener(\"click\", () => {\r\n            this.onAcceptClicked();\r\n        });\r\n        this.child(\"#trade-offer\").addEventListener(\"click\", () => {\r\n            this.onOfferClicked();\r\n        });\r\n        this.child(\"#trade-cancel\").addEventListener(\"click\", () => {\r\n            this.onCancelClicked();\r\n        });\r\n    }\r\n    onAcceptClicked() {\r\n        let action = {\r\n            \"type\": \"trade\",\r\n            \"action\": \"deal\",\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    onOfferClicked() {\r\n        let action = {\r\n            \"type\": \"trade\",\r\n            \"action\": \"lock\",\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    onCancelClicked() {\r\n        this.componentElement.dispatchEvent(new Event(\"close\"));\r\n    }\r\n    onParentClose() {\r\n        this.otherItemsComponent.onParentClose();\r\n        this.myItemsComponent.onParentClose();\r\n        UI_1.ui.unregisterComponent(this);\r\n        let action = {\r\n            \"type\": \"trade\",\r\n            \"action\": \"cancel\",\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n}\r\nexports.TradeDialog = TradeDialog;\r\nTradeDialog.empty = {};\r\n//# sourceMappingURL=TradeDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                 (C) Copyright 2005-2023 - Faiumoni e. V.                *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TradeEvent = void 0;\r\nconst FloatingWindow_1 = require(\"../ui/toolkit/FloatingWindow\");\r\nconst TradeDialog_1 = require(\"../ui/dialog/TradeDialog\");\r\nconst UIComponentEnum_1 = require(\"../ui/UIComponentEnum\");\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst RPEvent_1 = require(\"./RPEvent\");\r\n/**\r\n * handles player trade events\r\n */\r\nclass TradeEvent extends RPEvent_1.RPEvent {\r\n    execute(entity) {\r\n        let dialog = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.TradeDialog);\r\n        if (this[\"user_trade_state\"] !== \"NO_ACTIVE_TRADE\" && !dialog) {\r\n            const dstate = stendhal.config.getWindowState(\"trade\");\r\n            dialog = new TradeDialog_1.TradeDialog();\r\n            new FloatingWindow_1.FloatingWindow(\"Trade\", dialog, dstate.x, dstate.y).setId(\"trade\");\r\n        }\r\n        if (dialog) {\r\n            let partner = marauroa.currentZone[this[\"partner_id\"]];\r\n            dialog.updateTradeState(marauroa.me, partner, this[\"user_trade_state\"], this[\"partner_trade_state\"]);\r\n        }\r\n    }\r\n}\r\nexports.TradeEvent = TradeEvent;\r\n;\r\n//# sourceMappingURL=TradeEvent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Arianne                      *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SoundId = void 0;\r\n/** Configured sounds associated with IDs. */\r\nexports.SoundId = {\r\n    \"level_up\": \"player/tadaa\",\r\n    \"level_down\": undefined,\r\n    \"stat_up\": \"player/stat_up-01\",\r\n    \"stat_down\": undefined,\r\n    \"achievement\": \"player/yay\",\r\n    \"commerce\": \"coins-01\",\r\n    \"commerce2\": \"cha-ching\",\r\n    \"heal\": \"heal-01\"\r\n};\r\n//# sourceMappingURL=SoundId.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EventRegistry = void 0;\r\nconst ChatOptionsEvent_1 = require(\"./event/ChatOptionsEvent\");\r\nconst ExamineEvent_1 = require(\"./event/ExamineEvent\");\r\nconst GroupChangeEvent_1 = require(\"./event/GroupChangeEvent\");\r\nconst GroupInviteEvent_1 = require(\"./event/GroupInviteEvent\");\r\nconst ProgressStatusEvent_1 = require(\"./event/ProgressStatusEvent\");\r\nconst RPEvent_1 = require(\"./event/RPEvent\");\r\nconst TradeEvent_1 = require(\"./event/TradeEvent\");\r\nconst UI_1 = require(\"./ui/UI\");\r\nconst DialogContentComponent_1 = require(\"./ui/toolkit/DialogContentComponent\");\r\nconst Chat_1 = require(\"./util/Chat\");\r\nconst SoundId_1 = require(\"./util/SoundId\");\r\nclass EventRegistry {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.initialized = false;\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!EventRegistry.instance) {\r\n            EventRegistry.instance = new EventRegistry();\r\n        }\r\n        return EventRegistry.instance;\r\n    }\r\n    /**\r\n     * Registers standard events.\r\n     */\r\n    init() {\r\n        if (this.initialized) {\r\n            console.warn(\"tried to re-initialize EventRegistry\");\r\n            return;\r\n        }\r\n        this.initialized = true;\r\n        this.register(\"chat_options\", new ChatOptionsEvent_1.ChatOptionsEvent());\r\n        this.register(\"examine\", new ExamineEvent_1.ExamineEvent());\r\n        this.register(\"group_change_event\", new GroupChangeEvent_1.GroupChangeEvent());\r\n        this.register(\"group_invite_event\", new GroupInviteEvent_1.GroupInviteEvent());\r\n        this.register(\"progress_status_event\", new ProgressStatusEvent_1.ProgressStatusEvent());\r\n        this.register(\"trade_state_change_event\", new TradeEvent_1.TradeEvent());\r\n        this.register(\"attack\", {\r\n            execute: function (entity) {\r\n                var target = entity.getAttackTarget();\r\n                if (!target) {\r\n                    return;\r\n                }\r\n                if (this.hasOwnProperty(\"hit\")) {\r\n                    var damage = parseInt(this[\"damage\"], 10);\r\n                    if (damage !== 0) {\r\n                        target.onDamaged(entity, damage);\r\n                    }\r\n                    else {\r\n                        target.onBlocked(entity);\r\n                    }\r\n                }\r\n                else {\r\n                    target.onMissed(entity);\r\n                }\r\n                entity.onAttackPerformed(parseInt(this[\"type\"], 10), this.hasOwnProperty(\"ranged\"), this[\"weapon\"]);\r\n            }\r\n        }); // attack\r\n        this.register(\"bestiary\", {\r\n            execute: function (rpobject) {\r\n                if (!this.hasOwnProperty(\"enemies\")) {\r\n                    // FIXME: proper logging of errors?\r\n                    console.log(\"ERROR: event does not have \\\"enemies\\\" attribute\");\r\n                    return;\r\n                }\r\n                /* --- title & headers --- */\r\n                const header = [\"Bestiary:\", \"\\\"???\\\" = unknown\"];\r\n                const hasRare = this[\"enemies\"].includes(\"(rare)\");\r\n                const hasAbnormal = this[\"enemies\"].includes(\"(abnormal)\");\r\n                // show explanation of \"rare\" & \"abnormal\" creatures in header\r\n                if (hasRare || hasAbnormal) {\r\n                    let subheader = \"\";\r\n                    if (!hasRare) {\r\n                        subheader += \"\\\"abnormal\\\"\";\r\n                    }\r\n                    else {\r\n                        subheader += \"\\\"rare\\\"\";\r\n                        if (hasAbnormal) {\r\n                            subheader += \" and \\\"abnormal\\\"\";\r\n                        }\r\n                    }\r\n                    header[1] = subheader + \" creatures not required for achievements\";\r\n                }\r\n                /* --- contents --- */\r\n                // TODO: clean up columns\r\n                const content = new class extends DialogContentComponent_1.DialogContentComponent {\r\n                }(\"empty-div-template\");\r\n                content.setConfigId(\"bestiary\");\r\n                content.componentElement.classList.add(\"bestiary\");\r\n                const layout = document.createElement(\"div\");\r\n                layout.className = \"horizontalgroup stretchgroup\";\r\n                const col1 = document.createElement(\"div\");\r\n                const col2 = document.createElement(\"div\");\r\n                const col3 = document.createElement(\"div\");\r\n                col1.className = \"verticalgroup stretchgroup\";\r\n                col2.className = \"verticalgroup stretchgroup\";\r\n                col3.className = \"verticalgroup stretchgroup\";\r\n                const t1 = document.createElement(\"div\");\r\n                const t2 = document.createElement(\"div\");\r\n                const t3 = document.createElement(\"div\");\r\n                t1.classList.add(\"shopcol\");\r\n                t2.classList.add(\"shopcol\");\r\n                t3.classList.add(\"shopcol\");\r\n                t1.textContent = \"Name\";\r\n                t2.textContent = \"Solo\";\r\n                t3.textContent = \"Shared\";\r\n                col1.appendChild(t1);\r\n                col2.appendChild(t2);\r\n                col3.appendChild(t3);\r\n                for (const e of this[\"enemies\"].split(\";\")) {\r\n                    const info = e.split(\",\");\r\n                    // empty text will not render outline\r\n                    let solo = \"-\";\r\n                    let shared = \"-\";\r\n                    if (info[1] == \"true\") {\r\n                        solo = \"\u2714\";\r\n                    }\r\n                    if (info[2] == \"true\") {\r\n                        shared = \"\u2714\";\r\n                    }\r\n                    const l1 = document.createElement(\"div\");\r\n                    const l2 = document.createElement(\"div\");\r\n                    const l3 = document.createElement(\"div\");\r\n                    l1.classList.add(\"shopcol\");\r\n                    l2.classList.add(\"shopcol\");\r\n                    l3.classList.add(\"shopcol\");\r\n                    l1.textContent = info[0];\r\n                    l2.textContent = solo;\r\n                    l3.textContent = shared;\r\n                    col1.appendChild(l1);\r\n                    col2.appendChild(l2);\r\n                    col3.appendChild(l3);\r\n                }\r\n                layout.appendChild(col1);\r\n                layout.appendChild(col2);\r\n                layout.appendChild(col3);\r\n                content.componentElement.appendChild(layout);\r\n                stendhal.ui.globalInternalWindow.set(UI_1.ui.createSingletonFloatingWindow(header.join(\" \"), content, 20, 20));\r\n            }\r\n        }); // bestiary\r\n        this.register(\"global_visual_effect\", {\r\n            execute: function (rpobject) {\r\n                // TODO: new GlobalVisualEffectEvent();\r\n            }\r\n        }); // global_visual_effect\r\n        this.register(\"image_event\", {\r\n            execute: function (rpobject) {\r\n                // TODO: new ImageEffectEvent();\r\n                console.log(\"image_event\", this, rpobject);\r\n            }\r\n        }); // image_event\r\n        this.register(\"player_logged_on\", {\r\n            execute: function (rpobject) {\r\n                // TODO: new PlayerLoggedOnEvent();\r\n            }\r\n        }); // player_logged_on\r\n        this.register(\"player_logged_out\", {\r\n            execute: function (rpobject) {\r\n                // TODO: new PlayerLoggedOutEvent();\r\n            }\r\n        }); // player_logged_out\r\n        this.register(\"private_text\", {\r\n            soundTextEvents: {\r\n                \"privmsg\": true,\r\n                \"support\": true,\r\n                \"tutorial\": true\r\n            },\r\n            execute: function (rpobject) {\r\n                const ttype = this[\"texttype\"].toLowerCase();\r\n                const msg = this[\"text\"].replace(/\\\\r\\\\n/g, \"\\n\").replace(/\\\\r/g, \"\\n\");\r\n                let profile;\r\n                if (this.hasOwnProperty(\"profile\")) {\r\n                    profile = this[\"profile\"];\r\n                }\r\n                else if (ttype === \"tutorial\") {\r\n                    profile = \"floattingladynpc\";\r\n                }\r\n                if (ttype === \"server\" && msg.includes(\"\\n\")) {\r\n                    Chat_1.Chat.log(ttype, msg.split(\"\\n\"), undefined, profile);\r\n                }\r\n                else {\r\n                    // scene settings messages should not disturb playing, just create some atmosphere\r\n                    const headed = ttype !== \"scene_setting\";\r\n                    Chat_1.Chat.log(ttype, msg, undefined, profile, headed);\r\n                }\r\n                // play notification sound\r\n                const notif = stendhal.config.get(\"event.pvtmsg.sound\");\r\n                if (notif && this.soundTextEvents[ttype]) {\r\n                    stendhal.ui.soundMan.playGlobalizedEffect(notif);\r\n                }\r\n            }\r\n        }); // private_text\r\n        this.register(\"reached_achievement\", {\r\n            execute: function (rpobject) {\r\n                stendhal.ui.gamewindow.addAchievementNotif(this[\"category\"], this[\"title\"], this[\"description\"]);\r\n            }\r\n        }); // reached_achievement\r\n        this.register(\"show_item_list\", {\r\n            execute: function (rpobject) {\r\n                let title = \"Items\";\r\n                let caption = \"\";\r\n                let items = [];\r\n                if (this.hasOwnProperty(\"title\")) {\r\n                    title = this[\"title\"];\r\n                }\r\n                if (this.hasOwnProperty(\"caption\")) {\r\n                    caption = this[\"caption\"];\r\n                }\r\n                if (this.hasOwnProperty(\"content\")) {\r\n                    for (var obj in this[\"content\"]) {\r\n                        if (this[\"content\"].hasOwnProperty(obj)) {\r\n                            var slotObj = this[\"content\"][obj];\r\n                            var data = this[\"content\"][obj][\"a\"];\r\n                            const i = {\r\n                                clazz: data[\"class\"],\r\n                                subclass: data[\"subclass\"],\r\n                                img: data[\"class\"] + \"/\" + data[\"subclass\"] + \".png\",\r\n                                price: data[\"price\"],\r\n                                desc: data[\"description_info\"]\r\n                            };\r\n                            // seller shops prefix prices with \"-\"\r\n                            if (i.price.startsWith(\"-\")) {\r\n                                i.price = i.price.substr(1);\r\n                            }\r\n                            items.push(i);\r\n                        }\r\n                    }\r\n                }\r\n                const content = new class extends DialogContentComponent_1.DialogContentComponent {\r\n                }(\"empty-div-template\");\r\n                content.componentElement.classList.add(\"shopsign\");\r\n                const captionElement = document.createElement(\"div\");\r\n                captionElement.className = \"horizontalgroup shopcaption\";\r\n                captionElement.textContent = caption + \"\\nItem\\t-\\tPrice\\t-\\tDescription\";\r\n                content.componentElement.appendChild(captionElement);\r\n                const itemList = document.createElement(\"div\");\r\n                itemList.className = \"shoplist\";\r\n                content.componentElement.appendChild(itemList);\r\n                // TODO: organize in columns & show item sprites\r\n                for (const i of items) {\r\n                    const row = document.createElement(\"div\");\r\n                    row.className = \"horizontalgroup shoprow\";\r\n                    const img = document.createElement(\"div\");\r\n                    img.className = \"shopcol\";\r\n                    img.appendChild(stendhal.data.sprites.get(stendhal.paths.sprites + \"/items/\" + i.img));\r\n                    row.appendChild(img);\r\n                    const price = document.createElement(\"div\");\r\n                    price.className = \"shopcol\";\r\n                    price.textContent = i.price;\r\n                    row.appendChild(price);\r\n                    const desc = document.createElement(\"div\");\r\n                    desc.className = \"shopcol shopcolr\";\r\n                    desc.textContent = i.desc;\r\n                    row.appendChild(desc);\r\n                    itemList.appendChild(row);\r\n                }\r\n                stendhal.ui.globalInternalWindow.set(UI_1.ui.createSingletonFloatingWindow(title, content, 20, 20));\r\n            }\r\n        }); // show_item_list\r\n        this.register(\"show_outfit_list\", {\r\n            execute: function (rpobject) {\r\n                let title = \"Outfits\";\r\n                let caption = \"\";\r\n                let outfits = [];\r\n                if (this.hasOwnProperty(\"title\")) {\r\n                    title = this[\"title\"];\r\n                }\r\n                if (this.hasOwnProperty(\"caption\")) {\r\n                    caption = this[\"caption\"];\r\n                }\r\n                if (this.hasOwnProperty(\"outfits\")) {\r\n                    for (let o of this[\"outfits\"].split(\":\")) {\r\n                        o = o.split(\";\");\r\n                        if (o.length > 2) {\r\n                            outfits.push([o[0], o[1], o[2]]);\r\n                        }\r\n                    }\r\n                }\r\n                if (this.hasOwnProperty(\"show_base\")) {\r\n                    //Chat.log(\"normal\", this[\"show_base\"]);\r\n                }\r\n                const content = new class extends DialogContentComponent_1.DialogContentComponent {\r\n                }(\"empty-div-template\");\r\n                content.componentElement.classList.add(\"shopsign\");\r\n                const captionElement = document.createElement(\"div\");\r\n                captionElement.className = \"horizontalgroup shopcaption\";\r\n                captionElement.textContent = caption;\r\n                content.componentElement.appendChild(captionElement);\r\n                const itemList = document.createElement(\"div\");\r\n                itemList.className = \"shoplist\";\r\n                content.componentElement.appendChild(itemList);\r\n                // TODO: organize in columns & show outfit sprites\r\n                for (const o of outfits) {\r\n                    const row = document.createElement(\"div\");\r\n                    row.className = \"horizontalgroup shoprow\";\r\n                    row.textContent = o[0] + \": \" + o[2];\r\n                    itemList.appendChild(row);\r\n                }\r\n                stendhal.ui.globalInternalWindow.set(UI_1.ui.createSingletonFloatingWindow(title, content, 20, 20));\r\n            }\r\n        }); // show_outfit_list\r\n        this.register(\"sound_event\", {\r\n            execute: function (rpobject) {\r\n                var volume = 1;\r\n                // Adjust by the server specified volume, if any\r\n                if (this.hasOwnProperty(\"volume\")) {\r\n                    volume *= parseInt(this[\"volume\"], 10) / 100;\r\n                }\r\n                var radius = parseInt(this[\"radius\"], 10);\r\n                let sound = this[\"sound\"];\r\n                const sound_id = this[\"sound_id\"];\r\n                if (sound_id) {\r\n                    sound = SoundId_1.SoundId[sound_id];\r\n                }\r\n                stendhal.ui.soundMan.playLocalizedEffect(rpobject[\"_x\"], rpobject[\"_y\"], radius, this[\"layer\"], sound, volume);\r\n            }\r\n        }); // sound_event\r\n        this.register(\"text\", {\r\n            execute: function (rpobject) {\r\n                if (this.hasOwnProperty(\"range\")) {\r\n                    rpobject.say(this[\"text\"], this[\"range\"]);\r\n                }\r\n                else {\r\n                    rpobject.say(this[\"text\"]);\r\n                }\r\n            }\r\n        }); // text\r\n        this.register(\"transition_graph\", {\r\n            execute: function (rpobject) {\r\n                // TODO: new TransitionGraphEvent();\r\n            }\r\n        }); // transition_graph\r\n        this.register(\"view_change\", {\r\n            execute: function (rpobject) {\r\n                // TODO: new ViewChangeEvent();\r\n            }\r\n        }); // view_change\r\n    }\r\n    /**\r\n     * Registers a new event.\r\n     *\r\n     * @param _type\r\n     *     String identifier.\r\n     * @param _event\r\n     *     Event to be registered.\r\n     */\r\n    register(_type, _event) {\r\n        if (_event instanceof RPEvent_1.RPEvent) {\r\n            marauroa.rpeventFactory[_type] = _event;\r\n        }\r\n        else {\r\n            marauroa.rpeventFactory[_type] =\r\n                marauroa.util.fromProto(marauroa.rpeventFactory[\"_default\"], _event);\r\n        }\r\n    }\r\n}\r\nexports.EventRegistry = EventRegistry;\r\n//# sourceMappingURL=EventRegistry.js.map","","","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2021-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SlashAction = void 0;\r\n/**\r\n * abstract base class for user actions\r\n */\r\nclass SlashAction {\r\n}\r\nexports.SlashAction = SlashAction;\r\n;\r\n//# sourceMappingURL=SlashAction.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ShowFloatingWindowComponent = void 0;\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst UI_1 = require(\"../../ui/UI\");\r\nconst FloatingWindow_1 = require(\"../../ui/toolkit/FloatingWindow\");\r\n/**\r\n * displays the player stats\r\n */\r\nclass ShowFloatingWindowComponent extends Component_1.Component {\r\n    constructor(uiComponentEnum, title, x, y) {\r\n        super(\"showfloatingwindow-template\");\r\n        this.uiComponentEnum = uiComponentEnum;\r\n        this.title = title;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.componentElement.innerText = title;\r\n        this.componentElement.addEventListener(\"click\", () => {\r\n            this.onClick();\r\n        });\r\n    }\r\n    onClick() {\r\n        var _a, _b;\r\n        let component = UI_1.ui.get(this.uiComponentEnum);\r\n        if (!component) {\r\n            return;\r\n        }\r\n        if ((_a = component.parentComponent) === null || _a === void 0 ? void 0 : _a.isOpen()) {\r\n            (_b = component.parentComponent) === null || _b === void 0 ? void 0 : _b.close();\r\n        }\r\n        else {\r\n            new FloatingWindow_1.FloatingWindow(this.title, component, this.x, this.y);\r\n        }\r\n    }\r\n}\r\nexports.ShowFloatingWindowComponent = ShowFloatingWindowComponent;\r\n//# sourceMappingURL=ShowFloatingWindowComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2022-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DebugAction = void 0;\r\nconst SingletonRepo_1 = require(\"../SingletonRepo\");\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst UIComponentEnum_1 = require(\"../ui/UIComponentEnum\");\r\nconst FloatingWindow_1 = require(\"../ui/toolkit/FloatingWindow\");\r\nconst SlashAction_1 = require(\"./SlashAction\");\r\nconst Chat_1 = require(\"../util/Chat\");\r\nconst ShowFloatingWindowComponent_1 = require(\"../ui/component/ShowFloatingWindowComponent\");\r\n/**\r\n * performances debugging actions\r\n */\r\nclass DebugAction extends SlashAction_1.SlashAction {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.minParams = 0;\r\n        this.maxParams = 0;\r\n        this.uiPopped = false;\r\n    }\r\n    execute(_type, params, _remainder) {\r\n        if (params.length < 1) {\r\n            Chat_1.Chat.logH(\"error\", \"Expected parameters\");\r\n            this.showUsage();\r\n        }\r\n        else if ([\"help\", \"?\"].indexOf(params[0]) > -1) {\r\n            this.showUsage();\r\n        }\r\n        else if (params[0] === \"ui\") {\r\n            this.uiAction(params);\r\n        }\r\n        else if (params[0] === \"weather\") {\r\n            this.debugWeather(params[1]);\r\n        }\r\n        else if (params[0] === \"log\") {\r\n            Chat_1.Chat.debugLogEnabled = true;\r\n        }\r\n        return true;\r\n    }\r\n    showUsage() {\r\n        const usage = [\r\n            \"Usage:\",\r\n            \"  /debug log\",\r\n            \"  /debug ui [pop]\",\r\n            \"  /debug weather [<name>]\"\r\n        ];\r\n        Chat_1.Chat.log(\"client\", usage);\r\n    }\r\n    uiAction(params) {\r\n        console.log(UIComponentEnum_1.UIComponentEnum);\r\n        for (let i in UIComponentEnum_1.UIComponentEnum) {\r\n            console.log(\"in\", i);\r\n        }\r\n        if (params[1] === \"pop\") {\r\n            this.uiPop();\r\n        }\r\n    }\r\n    uiPop() {\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.LeftPanel, \"Left panel\", 10, 10);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.RightPanel, \"Right panel\", 500, 10);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.TopPanel, \"Top panel\", 200, 10);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.BottomPanel, \"Bottom panel\", 10, 500);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.MiniMap, \"Map\", 10, 50);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.PlayerStats, \"Stats\", 10, 190);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.BuddyList, \"Buddies\", 10, 250);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.PlayerEquipment, marauroa.me[\"_name\"], 500, 50);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.Bag, \"Bag\", 500, 200);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.Keyring, \"Keyring\", 500, 300);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.ChatInput, \"Chat\", 100, 500);\r\n        this.uiFloatComponent(UIComponentEnum_1.UIComponentEnum.ChatLog, \"Chat log\", 100, 560);\r\n        this.uiPopped = true;\r\n    }\r\n    uiFloatComponent(uiComponentEnum, title, x, y) {\r\n        let component = UI_1.ui.get(uiComponentEnum);\r\n        if (!component) {\r\n            return;\r\n        }\r\n        component.componentElement.dispatchEvent(new Event(\"close\"));\r\n        component.componentElement.remove();\r\n        new FloatingWindow_1.FloatingWindow(title, component, x, y);\r\n        if (!this.uiPopped) {\r\n            let bottomPannel = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.BottomPanel);\r\n            bottomPannel.add(new ShowFloatingWindowComponent_1.ShowFloatingWindowComponent(uiComponentEnum, title, x, y));\r\n        }\r\n    }\r\n    /**\r\n     * Sets weather animation for debugging.\r\n     *\r\n     * @param weather\r\n     *     Name of weather to be loaded. <code>undefined</code> turns\r\n     *     weather animation off.\r\n     */\r\n    debugWeather(weather) {\r\n        const usage = [\"Usage:\", \"  /debug weather [<name>]\"];\r\n        if (weather && [\"help\", \"?\"].indexOf(weather) > -1) {\r\n            Chat_1.Chat.log(\"client\", usage);\r\n            return;\r\n        }\r\n        if (!stendhal.config.getBoolean(\"gamescreen.weather\")) {\r\n            Chat_1.Chat.logH(\"warning\", \"Weather is disabled.\");\r\n        }\r\n        if (weather) {\r\n            weather = weather.replace(/ /g, \"_\");\r\n            const wfilename = stendhal.paths.weather + \"/\" + weather + \".png\";\r\n            if (!stendhal.data.sprites.getCached(wfilename)) {\r\n                Chat_1.Chat.logH(\"error\", \"unknown weather: \" + wfilename);\r\n                return;\r\n            }\r\n        }\r\n        SingletonRepo_1.singletons.getWeatherRenderer().update(weather);\r\n    }\r\n}\r\nexports.DebugAction = DebugAction;\r\n;\r\n//# sourceMappingURL=DebugAction.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OpenWebsiteAction = void 0;\r\nconst SlashAction_1 = require(\"./SlashAction\");\r\n/**\r\n * opens the specified website in the browser\r\n */\r\nclass OpenWebsiteAction extends SlashAction_1.SlashAction {\r\n    /**\r\n     * creates a OpenWebsiteAction\r\n     *\r\n     * @param url website to open\r\n     */\r\n    constructor(url) {\r\n        super();\r\n        this.url = url;\r\n        this.minParams = 0;\r\n        this.maxParams = 0;\r\n    }\r\n    execute(_type, _params, _remainder) {\r\n        window.location.href = this.url;\r\n        return true;\r\n    }\r\n}\r\nexports.OpenWebsiteAction = OpenWebsiteAction;\r\n;\r\n//# sourceMappingURL=OpenWebsiteAction.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                     Copyright \u00a9 2003-2023 - Arianne                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SettingsDialog = void 0;\r\nconst UI_1 = require(\"../UI\");\r\nconst DialogContentComponent_1 = require(\"../toolkit/DialogContentComponent\");\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\nclass SettingsDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor() {\r\n        super(\"settingsdialog-template\");\r\n        // TODO: add option to reset defaults\r\n        const clog = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatLog);\r\n        this.storedStates = {\r\n            \"txtjoystickx\": stendhal.config.get(\"ui.joystick.center.x\"),\r\n            \"txtjoysticky\": stendhal.config.get(\"ui.joystick.center.y\")\r\n        };\r\n        this.initialStates = {\r\n            \"gamescreen.blood\": stendhal.config.get(\"gamescreen.blood\"),\r\n        };\r\n        /* *** left panel *** */\r\n        const chk_light = this.createCheckBox(\"chk_light\", \"gamescreen.lighting\", \"Lighting effects are enabled\", \"Lighting effects are disabled\");\r\n        // FIXME: lighting effects not yet supported\r\n        chk_light.disabled = true;\r\n        chk_light.parentElement.title = \"Lighting effects not currently supported\";\r\n        const chk_weather = this.createCheckBox(\"chk_weather\", \"gamescreen.weather\", \"Weather is enabled\", \"Weather is disabled\", function () {\r\n            if (clog) {\r\n                clog.addLine(\"client\", \"Weather changes will take effect after you change maps.\");\r\n            }\r\n        });\r\n        chk_weather.parentElement.title = \"Weather effects not currently supported\";\r\n        const sd = this;\r\n        this.createCheckBox(\"chk_blood\", \"gamescreen.blood\", \"Gory images are enabled\", \"Gory images are disabled\");\r\n        this.createCheckBox(\"chk_nonude\", \"gamescreen.nonude\", \"Naked entities have undergarments\", \"Naked entities are not covered\");\r\n        this.createCheckBox(\"chk_shadows\", \"gamescreen.shadows\", \"Shadows are enabled\", \"Shadows are disabled\");\r\n        this.createCheckBox(\"chk_speechcr\", \"gamescreen.speech.creature\", \"Creature speech bubbles are enabled\", \"Creature speech bubbles are disabled\");\r\n        const player_stats = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.PlayerStats);\r\n        const chk_charname = this.createCheckBox(\"chk_charname\", \"ui.stats.charname\", undefined, undefined, function () {\r\n            player_stats.enableCharName(chk_charname.checked);\r\n        });\r\n        const chk_hpbar = this.createCheckBox(\"chk_hpbar\", \"ui.stats.hpbar\", undefined, undefined, function () {\r\n            player_stats.enableBar(\"hp\", chk_hpbar.checked);\r\n        });\r\n        /* *** center panel *** */\r\n        this.createCheckBox(\"chk_dblclick\", \"action.item.doubleclick\", \"Items are used/consumed with double click/touch\", \"Items are used/consumed with single click/touch\", function () {\r\n            // update cursors\r\n            UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.PlayerEquipment).markDirty();\r\n            for (const cid of [UIComponentEnum_1.UIComponentEnum.Bag, UIComponentEnum_1.UIComponentEnum.Keyring]) {\r\n                UI_1.ui.get(cid).markDirty();\r\n            }\r\n        });\r\n        // FIXME: open chest windows are not refreshed\r\n        this.createCheckBox(\"chk_chestqp\", \"action.inventory.quickpickup\", \"Click tranfers items from chests and corpses to player inventory\", \"Click executes default action on items in chests and corpses\");\r\n        const chk_movecont = this.createCheckBox(\"chk_movecont\", \"input.movecont\", \"Player will continue to walk after changing areas\", \"Player will stop after changing areas\", function () {\r\n            const action = { \"type\": \"move.continuous\" };\r\n            if (chk_movecont.checked) {\r\n                action[\"move.continuous\"] = \"\";\r\n            }\r\n            marauroa.clientFramework.sendAction(action);\r\n        });\r\n        // TODO: make this multiple choice\r\n        const chk_pvtsnd = this.createCheckBox(\"chk_pvtsnd\", \"event.pvtmsg.sound\", \"Private message audio notifications enabled\", \"Private message audio notifications disabled\", undefined, \"ui/notify_up\", \"null\");\r\n        chk_pvtsnd.checked = stendhal.config.get(\"event.pvtmsg.sound\") === \"ui/notify_up\";\r\n        this.createCheckBox(\"chk_clickindicator\", \"input.click.indicator\", \"Displaying clicks\", \"Not displaying clicks\").disabled = true;\r\n        this.createCheckBox(\"chk_pathfinding\", \"client.pathfinding\", \"Pathfinding on ground enabled\", \"Pathfinding on ground disabled\");\r\n        /* *** right panel *** */\r\n        const themes = {};\r\n        for (const t of Object.keys(stendhal.config.themes.map)) {\r\n            if (t === \"wood\") {\r\n                themes[t] = t + \" (default)\";\r\n            }\r\n            else {\r\n                themes[t] = t;\r\n            }\r\n        }\r\n        const sel_theme = this.createSelect(\"selecttheme\", themes, Object.keys(themes).indexOf(stendhal.config.getTheme()));\r\n        sel_theme.addEventListener(\"change\", (o) => {\r\n            stendhal.config.setTheme(Object.keys(themes)[sel_theme.selectedIndex]);\r\n            stendhal.config.refreshTheme();\r\n        });\r\n        /* TODO:\r\n         *   - create components to change font size, weight, style, etc.\r\n         */\r\n        const fonts = Object.keys(stendhal.config.fonts);\r\n        const sel_fontbody = this.createFontSelect(\"selfontbody\", fonts.indexOf(stendhal.config.get(\"ui.font.body\")));\r\n        sel_fontbody.addEventListener(\"change\", (e) => {\r\n            const new_font = fonts[sel_fontbody.selectedIndex];\r\n            stendhal.config.set(\"ui.font.body\", new_font);\r\n            document.body.style.setProperty(\"font-family\", new_font);\r\n        });\r\n        const sel_fontchat = this.createFontSelect(\"selfontchat\", fonts.indexOf(stendhal.config.get(\"ui.font.chat\")));\r\n        sel_fontchat.addEventListener(\"change\", (e) => {\r\n            stendhal.config.set(\"ui.font.chat\", fonts[sel_fontchat.selectedIndex]);\r\n            // make sure component is open before trying to refresh\r\n            if (clog) {\r\n                clog.refresh();\r\n            }\r\n        });\r\n        const sel_fonttlog = this.createFontSelect(\"selfonttlog\", fonts.indexOf(stendhal.config.get(\"ui.font.tlog\")));\r\n        sel_fonttlog.addEventListener(\"change\", (e) => {\r\n            stendhal.config.set(\"ui.font.tlog\", fonts[sel_fonttlog.selectedIndex]);\r\n            const tlog = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.TravelLogDialog);\r\n            // make sure component is open before trying to refresh\r\n            if (tlog) {\r\n                tlog.refresh();\r\n            }\r\n        });\r\n        // common chat keyword options\r\n        const txt_chatopts = this.createTextInput(\"txtchatopts\", stendhal.config.get(\"chat.custom_keywords\"), \"Comma-separated list accessible from the chat options dialog\");\r\n        txt_chatopts.addEventListener(\"change\", (e) => {\r\n            stendhal.config.set(\"chat.custom_keywords\", txt_chatopts.value);\r\n        });\r\n        // on-screen joystick\r\n        const js_orienters = [];\r\n        const js_styles = {\r\n            \"none\": \"none\",\r\n            \"joystick\": \"joystick\",\r\n            \"dpad\": \"direction pad\",\r\n        };\r\n        let js_idx = Object.keys(js_styles).indexOf(stendhal.config.get(\"ui.joystick\"));\r\n        if (js_idx < 0) {\r\n            js_idx = 0;\r\n        }\r\n        const sel_joystick = this.createSelect(\"seljoystick\", js_styles, js_idx);\r\n        sel_joystick.addEventListener(\"change\", (e) => {\r\n            stendhal.config.set(\"ui.joystick\", Object.keys(js_styles)[sel_joystick.selectedIndex]);\r\n            stendhal.ui.gamewindow.updateJoystick();\r\n            for (const orienter of js_orienters) {\r\n                orienter.disabled = sel_joystick.selectedIndex < 1;\r\n            }\r\n        });\r\n        // joystck positioning\r\n        for (const orient of [\"x\", \"y\"]) {\r\n            const input_temp = this.createNumberInput(\"txtjoystick\" + orient, parseInt(this.storedStates[\"txtjoystick\" + orient], 10), \"Joystick position on \" + orient.toUpperCase() + \" axis\");\r\n            input_temp.addEventListener(\"input\", (e) => {\r\n                // update configuration\r\n                stendhal.config.set(\"ui.joystick.center.\" + orient, input_temp.value || 0);\r\n                // update on-screen joystick position\r\n                stendhal.ui.gamewindow.updateJoystick();\r\n            });\r\n            // disable if no joystick selected\r\n            input_temp.disabled = sel_joystick.selectedIndex < 1;\r\n            js_orienters.push(input_temp);\r\n        }\r\n        /* *** buttons *** */\r\n        this.btn_reload = this.createButton(\"btn_config_reload\", \"Reloads page if required by changes\");\r\n        this.btn_reload.disabled = true;\r\n        this.btn_reload.addEventListener(\"click\", (e) => {\r\n            this.close();\r\n            location.reload();\r\n        });\r\n        const btn_close = this.createButton(\"btn_config_close\", \"Close this dialog without reloading page\");\r\n        btn_close.addEventListener(\"click\", (e) => {\r\n            this.close();\r\n        });\r\n        const button_layout = this.btn_reload.parentElement;\r\n        button_layout.style.setProperty(\"padding-top\", \"15px\");\r\n    }\r\n    getConfigId() {\r\n        return \"settings\";\r\n    }\r\n    /**\r\n     * Updates state of reload button.\r\n     */\r\n    refresh() {\r\n        let reloadRequired = false;\r\n        for (const key of Object.keys(this.initialStates)) {\r\n            if (stendhal.config.get(key) !== this.initialStates[key]) {\r\n                reloadRequired = true;\r\n                break;\r\n            }\r\n        }\r\n        this.btn_reload.disabled = !reloadRequired;\r\n    }\r\n    /**\r\n     * Creates a checkbox element.\r\n     *\r\n     * @param id\r\n     *     Identifier of element to retrieve.\r\n     * @param tooltip\r\n     *     Optional popup tooltip text.\r\n     * @return\r\n     *     HTMLInputElement.\r\n     */\r\n    createCheckBoxSkel(id, tooltip) {\r\n        const checkbox = this.child(\"input[type=checkbox][id=\" + id + \"]\");\r\n        if (tooltip) {\r\n            checkbox.title = tooltip;\r\n        }\r\n        return checkbox;\r\n    }\r\n    /**\r\n     * Creates a fully function checkbox element.\r\n     *\r\n     * @param id\r\n     *     Identifier of element to retrieve.\r\n     * @param setid\r\n     *     Identifier of associated configuration setting.\r\n     * @param ttpos\r\n     *     Tooltip to display when setting is enabled.\r\n     * @param ttneg\r\n     *     Tooltip to display when setting is disabled.\r\n     * @param action\r\n     *     Action to execute when state changed.\r\n     * @param von\r\n     *     Optional value to set when enabled (<code>null</code> can be\r\n     *     used).\r\n     * @param voff\r\n     *     Optional value to set when disabled (<code>null</code> can be\r\n     *     used).\r\n     * @return\r\n     *     HTMLInputElement.\r\n     */\r\n    createCheckBox(id, setid, ttpos = \"\", ttneg = \"\", action, von, voff) {\r\n        const chk = this.createCheckBoxSkel(id);\r\n        chk.checked = stendhal.config.getBoolean(setid);\r\n        const tt = new CheckTooltip(ttpos, ttneg);\r\n        chk.parentElement.title = tt.getValue(chk.checked);\r\n        chk.addEventListener(\"change\", (e) => {\r\n            if (chk.checked && typeof (von) !== \"undefined\") {\r\n                stendhal.config.set(setid, von);\r\n            }\r\n            else if (!chk.checked && typeof (voff) !== \"undefined\") {\r\n                stendhal.config.set(setid, voff);\r\n            }\r\n            else {\r\n                stendhal.config.set(setid, chk.checked);\r\n            }\r\n            chk.parentElement.title = tt.getValue(chk.checked);\r\n            if (action) {\r\n                action();\r\n            }\r\n            this.refresh();\r\n        });\r\n        return chk;\r\n    }\r\n    /**\r\n     * Creates a button element.\r\n     *\r\n     * @param id\r\n     *     Identifier of element to retrieve.\r\n     * @param tooltip\r\n     *     Optional popup tooltip text.\r\n     * @return\r\n     *     HTMLButtonElement.\r\n     */\r\n    createButton(id, tooltip) {\r\n        const button = this.child(\"button[id=\" + id + \"]\");\r\n        if (tooltip) {\r\n            button.title = tooltip;\r\n        }\r\n        return button;\r\n    }\r\n    /**\r\n     * Creates a select element.\r\n     *\r\n     * @param id\r\n     *     Identifier of element to retrieve.\r\n     * @param options\r\n     *     A {string: string} (identifier: visible text) object for available\r\n     *     options.\r\n     * @param idx\r\n     *     The index to set as selected on construction.\r\n     * @param tooltip\r\n     *     Optional popup tooltip text.\r\n     * @return\r\n     *     HTMLSelectElement.\r\n     */\r\n    createSelect(id, options, idx, tooltip) {\r\n        const sel = this.child(\"select[id=\" + id + \"]\");\r\n        sel.style.setProperty(\"width\", \"9em\");\r\n        sel.parentElement.style.setProperty(\"margin-right\", \"0\");\r\n        sel.parentElement.style.setProperty(\"margin-left\", \"auto\");\r\n        sel.parentElement.style.setProperty(\"padding-bottom\", \"5px\");\r\n        for (const key of Object.keys(options)) {\r\n            const opt = document.createElement(\"option\");\r\n            opt.value = key;\r\n            opt.textContent = options[key];\r\n            sel.appendChild(opt);\r\n        }\r\n        sel.selectedIndex = idx;\r\n        if (tooltip) {\r\n            sel.title = tooltip;\r\n        }\r\n        return sel;\r\n    }\r\n    /**\r\n     * Creates a select element for registered fonts.\r\n     *\r\n     * @param id\r\n     *     Identifier of element to retrieve.\r\n     * @param idx\r\n     *     The index to set as selected on construction.\r\n     * @param tooltip\r\n     *     Optional popup tooltip text.\r\n     * @return\r\n     *     HTMLSelectElement.\r\n     */\r\n    createFontSelect(id, idx, tooltip) {\r\n        const options = {};\r\n        for (const key of Object.keys(stendhal.config.fonts)) {\r\n            let value = stendhal.config.fonts[key];\r\n            if (value === \"\") {\r\n                value = key;\r\n            }\r\n            options[key] = value;\r\n        }\r\n        return this.createSelect(id, options, idx, tooltip);\r\n    }\r\n    /**\r\n     * Creates a text input element.\r\n     *\r\n     * @param id\r\n     *     Identifier of element to retrieve.\r\n     * @param value\r\n     *     Default content.\r\n     * @param tooltip\r\n     *     Optional popup tooltip text.\r\n     * @param type\r\n     *     Input type.\r\n     * @return\r\n     *     HTMLInputElement\r\n     */\r\n    createTextInput(id, value = \"\", tooltip, type = \"text\") {\r\n        const input = this.child(\"input[type=\" + type + \"][id=\" + id + \"]\");\r\n        input.style.setProperty(\"width\", \"9em\");\r\n        input.parentElement.style.setProperty(\"margin-right\", \"0\");\r\n        input.parentElement.style.setProperty(\"margin-left\", \"auto\");\r\n        input.parentElement.style.setProperty(\"padding-bottom\", \"5px\");\r\n        input.value = value;\r\n        if (tooltip) {\r\n            input.title = tooltip;\r\n        }\r\n        return input;\r\n    }\r\n    /**\r\n     * Creates a text input element that accepts only number values.\r\n     *\r\n     * @param id\r\n     *     Identifier of element to retrieve.\r\n     * @param value\r\n     *     Default content.\r\n     * @param tooltip\r\n     *     Optional popup tooltip text.\r\n     * @return\r\n     *     HTMLInputElement\r\n     */\r\n    createNumberInput(id, value = 0, tooltip) {\r\n        const input = this.createTextInput(id, \"\" + value, tooltip, \"number\");\r\n        // allow numbers & empty string only\r\n        input.addEventListener(\"input\", (e) => {\r\n            const new_char = e.data;\r\n            const new_digit = Number(new_char);\r\n            if ((new_char != undefined && new_char.replace(/ |\\t/g, \"\") === \"\") || Number.isNaN(new_digit)) {\r\n                // disallow whitespace & non-numeric characters\r\n                input.value = this.storedStates[input.id];\r\n                return;\r\n            }\r\n            // clean up leading 0s & whitespace\r\n            input.value = \"\" + parseInt(input.value.replace(/ |\\t/g, \"\"), 10);\r\n            this.storedStates[input.id] = input.value;\r\n        });\r\n        return input;\r\n    }\r\n}\r\nexports.SettingsDialog = SettingsDialog;\r\nclass CheckTooltip {\r\n    constructor(e, d) {\r\n        this.valueEnabled = e;\r\n        this.valueDisabled = d;\r\n    }\r\n    getValue(enabled) {\r\n        if (enabled) {\r\n            return this.valueEnabled;\r\n        }\r\n        return this.valueDisabled;\r\n    }\r\n}\r\n//# sourceMappingURL=SettingsDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SettingsAction = void 0;\r\nconst SlashAction_1 = require(\"./SlashAction\");\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst SettingsDialog_1 = require(\"../ui/dialog/SettingsDialog\");\r\nclass SettingsAction extends SlashAction_1.SlashAction {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.minParams = 0;\r\n        this.maxParams = 0;\r\n    }\r\n    execute(_type, _params, _remainder) {\r\n        const wstate = stendhal.config.getWindowState(\"menu\");\r\n        const offset = stendhal.ui.getPageOffset();\r\n        const content = new SettingsDialog_1.SettingsDialog();\r\n        const dialog = UI_1.ui.createSingletonFloatingWindow(\"Settings\", content, wstate.x - offset.x, wstate.y - offset.y);\r\n        dialog.setId(\"menu\");\r\n        content.setFrame(dialog);\r\n        return true;\r\n    }\r\n}\r\nexports.SettingsAction = SettingsAction;\r\n//# sourceMappingURL=SettingsAction.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SlashActionRepo = void 0;\r\nconst SingletonRepo_1 = require(\"./SingletonRepo\");\r\nconst DebugAction_1 = require(\"./action/DebugAction\");\r\nconst OpenWebsiteAction_1 = require(\"./action/OpenWebsiteAction\");\r\nconst SettingsAction_1 = require(\"./action/SettingsAction\");\r\nconst UI_1 = require(\"./ui/UI\");\r\nconst UIComponentEnum_1 = require(\"./ui/UIComponentEnum\");\r\nconst Chat_1 = require(\"./util/Chat\");\r\nclass SlashActionRepo {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this[\"add\"] = {\r\n            execute: (type, params, remainder) => {\r\n                if (params == null) {\r\n                    return false;\r\n                }\r\n                ;\r\n                const action = {\r\n                    \"type\": \"addbuddy\",\r\n                    \"target\": params[0]\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 1\r\n        };\r\n        this[\"adminnote\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": type,\r\n                    \"target\": params[0],\r\n                    \"note\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 1\r\n        };\r\n        this[\"adminlevel\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": type,\r\n                    \"target\": params[0],\r\n                };\r\n                if (params.length >= 2) {\r\n                    action[\"newlevel\"] = params[1];\r\n                }\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 2\r\n        };\r\n        this[\"alter\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": type,\r\n                    \"target\": params[0],\r\n                    \"stat\": params[1],\r\n                    \"mode\": params[2],\r\n                    \"value\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 3,\r\n            maxParams: 3\r\n        };\r\n        this[\"altercreature\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"altercreature\",\r\n                    \"target\": params[0],\r\n                    \"text\": params[1]\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 2,\r\n            maxParams: 2\r\n        };\r\n        this[\"alterkill\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const target = params[0];\r\n                const killtype = params[1];\r\n                const count = params[2];\r\n                var creature = null;\r\n                if (remainder != null && remainder != \"\") {\r\n                    // NOTE: unlike Java client, Javascript client automatically trims whitespace in \"remainder\" parameter\r\n                    creature = remainder;\r\n                }\r\n                const action = {\r\n                    \"type\": \"alterkill\",\r\n                    \"target\": target,\r\n                    \"killtype\": killtype,\r\n                    \"count\": count\r\n                };\r\n                if (creature != null) {\r\n                    action[\"creature\"] = creature;\r\n                }\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 3,\r\n            maxParams: 3\r\n        };\r\n        this[\"alterquest\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"alterquest\",\r\n                    \"target\": params[0],\r\n                    \"name\": params[1]\r\n                };\r\n                if (params[2] != null) {\r\n                    action[\"state\"] = this.checkQuoted(params[2], remainder);\r\n                }\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 2,\r\n            maxParams: 3\r\n        };\r\n        this[\"answer\"] = {\r\n            execute: (type, params, remainder) => {\r\n                if (remainder == null || remainder == \"\") {\r\n                    return false;\r\n                }\r\n                ;\r\n                const action = {\r\n                    \"type\": \"answer\",\r\n                    \"text\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 0\r\n        };\r\n        this[\"away\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"away\",\r\n                };\r\n                if (remainder.length != 0) {\r\n                    action[\"message\"] = remainder;\r\n                }\r\n                ;\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"ban\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"ban\",\r\n                    \"target\": params[0],\r\n                    \"hours\": params[1],\r\n                    \"reason\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 2,\r\n            maxParams: 2\r\n        };\r\n        this[\"chat\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": type,\r\n                    \"text\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"clear\"] = {\r\n            execute: (type, params, remainder) => {\r\n                UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatLog).clear();\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        /*\r\n        \"clickmode\": SlashAction = {\r\n            execute: (type: string, params: string[], remainder: string): boolean => {\r\n                const newMode = !stendhal.config.getBoolean(\"input.doubleclick\");\r\n                stendhal.config.set(\"input.doubleclick\", newMode);\r\n                stendhal.ui.gamewindow.updateClickMode();\r\n    \r\n                if (newMode) {\r\n                    Chat.log(\"info\", \"Click mode is now set to double click.\");\r\n                } else {\r\n                    Chat.log(\"info\", \"Click mode is now set to single click.\");\r\n                }\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        */\r\n        this[\"debug\"] = new DebugAction_1.DebugAction();\r\n        /* FIXME:\r\n         * - not in help output\r\n         */\r\n        this[\"drop\"] = {\r\n            execute: (type, params, remainder) => {\r\n                console.log(type, params, remainder);\r\n                let name = remainder;\r\n                let quantity = parseInt(params[0], 10);\r\n                console.log(name, quantity);\r\n                if (isNaN(quantity)) {\r\n                    name = (params[0] + \" \" + remainder).trim();\r\n                    quantity = 0;\r\n                }\r\n                console.log(name, quantity);\r\n                const action = {\r\n                    \"type\": \"drop\",\r\n                    \"source_name\": name,\r\n                    \"quantity\": \"\" + quantity,\r\n                    \"x\": \"\" + marauroa.me.x,\r\n                    \"y\": \"\" + marauroa.me.y\r\n                };\r\n                console.log(action);\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 1\r\n        };\r\n        this[\"emojilist\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const emojilist = SingletonRepo_1.singletons.getEmojiStore().getEmojiList().sort();\r\n                for (const idx in emojilist) {\r\n                    emojilist[idx] = \"&nbsp;&nbsp;- :\" + emojilist[idx] + \":\";\r\n                }\r\n                emojilist.splice(0, 0, emojilist.length + \" emojis available:\");\r\n                Chat_1.Chat.log(\"client\", emojilist);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"gag\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"gag\",\r\n                    \"target\": params[0],\r\n                    \"minutes\": params[1],\r\n                    \"reason\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 2,\r\n            maxParams: 2\r\n        };\r\n        /* FIXME:\r\n         * - not included in help info\r\n         */\r\n        this[\"group\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"group_management\",\r\n                    \"action\": params[0],\r\n                    \"params\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 1\r\n        };\r\n        this[\"grumpy\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"grumpy\",\r\n                };\r\n                if (remainder.length != 0) {\r\n                    action[\"reason\"] = remainder;\r\n                }\r\n                ;\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"help\"] = {\r\n            execute: (type, params, remainder) => {\r\n                var msg = [\r\n                    \"For a detailed reference, visit #https://stendhalgame.org/wiki/Stendhal_Manual\",\r\n                    \"Here are the most-used commands:\",\r\n                    \"* CHATTING:\",\r\n                    \"- /me <action> \\tShow a message about what you are doing.\",\r\n                    \"- /tell <player> <message> \\tSend a private message to #player.\",\r\n                    \"- /answer <message>\",\r\n                    \"\\t\\tSend a private message to the last player who sent a message to you.\",\r\n                    \"- // <message>\\tSend a private message to the last player you sent a message to.\",\r\n                    \"- /storemessage <player> <message> \\t\\tStore a private message to deliver for an offline #player.\",\r\n                    \"- /who \\tList all players currently online.\",\r\n                    \"- /where <player> \\tShow the current location of #player.\",\r\n                    \"- /sentence <text> \\tSet message on stendhalgame.org profile page and what players see when using #Look.\",\r\n                    \"* SUPPORT:\",\r\n                    \"- /support <message> \\t\\tAsk an administrator for help.\",\r\n                    \"- /faq \\t\\tOpen Stendhal FAQs wiki page in browser.\",\r\n                    \"* ITEM MANIPULATION:\",\r\n                    \"- /markscroll <text> \\t\\tMark your empty scroll and add a #text label.\",\r\n                    \"* BUDDIES AND ENEMIES:\",\r\n                    \"- /add <player> \\tAdd #player to your buddy list.\",\r\n                    \"- /remove <player>\",\r\n                    \"\\t\\tRemove #player from your buddy list.\",\r\n                    \"- /ignore <player> [minutes|*|- [reason...]] \\t\\tAdd #player to your ignore list.\",\r\n                    \"- /ignore \\tFind out who is on your ignore list.\",\r\n                    \"- /unignore <player> \\t\\tRemove #player from your ignore list.\",\r\n                    \"* STATUS:\",\r\n                    \"- /away <message> \\t\\tSet an away message.\",\r\n                    \"- /away \\tRemove away status.\",\r\n                    \"- /grumpy <message> \\t\\tSet a message to ignore all non-buddies.\",\r\n                    \"- /grumpy \\tRemove grumpy status.\",\r\n                    \"- /name <pet> <name> \\t\\tGive a name to your pet.\",\r\n                    \"- /profile [name] \\tOpens a player profile page on stendhalgame.org.\",\r\n                    \"* PLAYER CONTROL:\",\r\n                    //\t\t\t\t\"- /clickmode \\tSwitches between single click mode and double click mode.\",\r\n                    \"- /walk \\tToggles autowalk on/off.\",\r\n                    \"- /stopwalk \\tTurns autowalk off.\",\r\n                    \"- /movecont <on|off> \\tToggle continuous movement (allows players to continue walking after map change or teleport without releasing direction key).\",\r\n                    \"* CLIENT SETTINGS:\",\r\n                    \"- /mute \\tMute or unmute the sounds.\",\r\n                    \"- /volume \\tLists or sets the volume for sound and music.\",\r\n                    \"* MISC:\",\r\n                    \"- /info \\t\\tFind out what the current server time is.\",\r\n                    \"- /clear \\tClear chat log.\",\r\n                    \"- /help \\tShow help information.\",\r\n                    \"- /removedetail \\tRemove the detail layer (e.g. balloon, umbrella, etc.) from character.\",\r\n                    \"- /emojilist \\tList available emojis.\"\r\n                ];\r\n                for (var i = 0; i < msg.length; i++) {\r\n                    Chat_1.Chat.log(\"info\", msg[i]);\r\n                }\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"gmhelp\"] = {\r\n            execute: (type, params, remainder) => {\r\n                var msg = null;\r\n                if (params[0] == null) {\r\n                    msg = [\r\n                        \"For a detailed reference, visit #https://stendhalgame.org/wiki/Stendhal:Administration\",\r\n                        \"Here are the most-used GM commands:\",\r\n                        \"* GENERAL:\",\r\n                        \"- /gmhelp [alter|script|support]\",\r\n                        \"\\t\\tFor more info about alter, script or the supportanswer shortcuts.\",\r\n                        \"- /adminnote <player> <note>\",\r\n                        \"\\t\\tLogs a note about #player.\",\r\n                        \"- /inspect <player>\",\r\n                        \"\\t\\tShow complete details of #player.\",\r\n                        \"- /inspectkill <player> <creature>\",\r\n                        \"\\t\\tShow creature kill counts of #player for #creature.\",\r\n                        \"- /inspectquest <player> [<quest_slot>]\",\r\n                        \"\\t\\tShow the state of quest for #player.\",\r\n                        \"- /script <scriptname>\",\r\n                        \"\\t\\tLoad (or reload) a script on the server. See #/gmhelp #script for details.\",\r\n                        \"* CHATTING:\",\r\n                        \"- /supportanswer <player> <message>\",\r\n                        \"\\t\\tReplies to a support question. Replace #message with $faq, $faqsocial, $ignore, $faqpvp, $wiki, $knownbug, $bugstracker, $rules, $notsupport or $spam shortcuts if desired.\",\r\n                        \"- /tellall <message>\",\r\n                        \"\\t\\tSend a private message to all logged-in players.\",\r\n                        \"* PLAYER CONTROL:\",\r\n                        \"- /teleportto <name>\",\r\n                        \"\\t\\tTeleport yourself near the specified player or NPC.\",\r\n                        \"- /teleclickmode \\tMakes you teleport to the location you double click.\",\r\n                        \"- /ghostmode \\tMakes yourself invisible and intangible.\",\r\n                        \"- /invisible \\tToggles whether or not you are invisible to creatures.\",\r\n                        \"* ENTITY MANIPULATION:\",\r\n                        \"- /adminlevel <player> [<newlevel>]\",\r\n                        \"\\t\\tDisplay or set the adminlevel of the specified #player.\",\r\n                        \"- /jail <player> <minutes> <reason>\",\r\n                        \"\\t\\tImprisons #player for a given length of time.\",\r\n                        \"- /gag <player> <minutes> <reason>\",\r\n                        \"\\t\\tGags #player for a given length of time (player is unable to send messages to anyone).\",\r\n                        \"- /ban <character> <hours> <reason>\",\r\n                        \"\\t\\tBans the account of the character from logging onto the game server or website for the specified amount of hours (-1 till end of time).\",\r\n                        \"- /teleport <player> <zone> <x> <y>\",\r\n                        \"\\t\\tTeleport #player to the given location.\",\r\n                        \"- /alter <player> <attrib> <mode> <value>\",\r\n                        \"\\t\\tAlter stat #attrib of #player by the given amount; #mode can be ADD, SUB, SET or UNSET. See #/gmhelp #alter for details.\",\r\n                        \"- /altercreature <id> name;atk;def;hp;xp\",\r\n                        \"\\t\\tChange values of the creature. Use #- as a placeholder to keep default value. Useful in raids.\",\r\n                        \"- /alterkill <player> <type> <count> <creature>\",\r\n                        \"\\t\\tChange number of #creature killed #type (\\\"solo\\\" or \\\"shared\\\") to #count for #player.\",\r\n                        \"- /alterquest <player> <questslot> <value>\",\r\n                        \"\\t\\tUpdate the #questslot for #player to be #value.\",\r\n                        \"- /summon <creature|item> [x] [y]\",\r\n                        \"- /summon <stackable item> [quantity]\",\r\n                        \"- /summon <stackable item> <x> <y> [quantity]\",\r\n                        \"\\t\\tSummon the specified item or creature at co-ordinates #x, #y in the current zone.\",\r\n                        \"- /summonat <player> <slot> [amount] <item>\",\r\n                        \"\\t\\tSummon the specified item into the specified slot of <player>; <amount> defaults to 1 if not specified.\",\r\n                        \"- /destroy <entity> \\tDestroy an entity completely.\",\r\n                        \"* MISC:\",\r\n                        \"- /jailreport [<player>]\",\r\n                        \"\\t\\tList the jailed players and their sentences.\"\r\n                    ];\r\n                }\r\n                else if ((params.length == 1) && (params[0] != null)) {\r\n                    if (\"alter\" == params[0]) {\r\n                        msg = [\r\n                            \"/alter <player> <attrib> <mode> <value>\",\r\n                            \"\\t\\tAlter stat <attrib> of <player> by the given amount; <mode> can be ADD, SUB, SET or UNSET.\",\r\n                            \"\\t\\t- Examples of <attrib>: atk, def, base_hp, hp, atk_xp, def_xp, xp, outfit\",\r\n                            \"\\t\\t- When modifying 'outfit', you should use SET mode and provide an 8-digit number; the first 2 digits are the 'hair' setting, then 'head', 'outfit', then 'body'\",\r\n                            \"\\t\\t  For example: #'/alter testplayer outfit set 12109901'\",\r\n                            \"\\t\\t  This will make <testplayer> look like danter\"\r\n                        ];\r\n                    }\r\n                    else if (\"script\" == params[0]) {\r\n                        msg = [\r\n                            \"usage: /script [-list|-load|-unload|-execute] [params]\",\r\n                            \"\\t-list : shows available scripts. In this mode can be given one optional parameter for filenames filtering, with using well-known wildcards for filenames ('*' and '?', for example \\\"*.class\\\" for java-only scripts).\",\r\n                            \"\\t-load : load script with first parameter's filename.\",\r\n                            \"\\t-unload : unload script with first parameter's filename from server\",\r\n                            \"\\t-execute : run selected script.\",\r\n                            \"\",\r\n                            \"All scripts are ran using: /script scriptname [params]. After running a script you can remove any traces of it with /script -unload scriptname, this would remove any summoned creatures, for example. It's good practise to do this after summoning creatures for a raid using scripts.\",\r\n                            \"#/script #AdminMaker.class : For test servers only, summons an adminmaker to aid testing.\",\r\n                            \"#/script #AdminSign.class #zone #x #y #text : Makes an AdminSign in zone at (x,y) with text. To put it next to you do /script AdminSign.class - - - text.\",\r\n                            \"#/script #AlterQuest.class #player #questname #state : Update the quest for a player to be in a certain state. Omit #state to remove the quest.\",\r\n                            \"#/script #DeepInspect.class #player : Deep inspects a player and all his/her items.\",\r\n                            \"#/script #DropPlayerItems.class #player #[amount] #item : Drop the specified amount of items from the player if they are equipped in the bag or body.\",\r\n                            \"#/script #EntitySearch.class #nonrespawn : Shows the locations of all creatures that don't respawn, for example creatures that were summoned by a GM, deathmatch creatures, etc.\",\r\n                            \"#/script #FixDM.class #player : sets a player's DeathMatch slot to victory status.\",\r\n                            \"#/script #ListNPCs.class : lists all npcs and their position.\",\r\n                            \"#/script #LogoutPlayer.class #player : kicks a player from the game.\",\r\n                            \"#/script #NPCShout.class #npc #text : NPC shouts text.\",\r\n                            \"#/script #NPCShoutZone.class #npc #zone #text : NPC shouts text to players in given zone. Use - in place of zone to make it your current zone.\",\r\n                            \"#/script #Plague.class #1 #creature : summon a plague of raid creatures around you.\",\r\n                            \"#/script #WhereWho.class : Lists where all the online players are\",\r\n                            \"#/script #Maria.class : Summons Maria, who sells food&drinks. Don't forget to -unload her after you're done.\",\r\n                            \"#/script #ServerReset.class : use only in a real emergency to shut down server. If possible please warn the players to logout and give them some time. It kills the server the hard way.\",\r\n                            \"#/script #ResetSlot.class #player #slot : Resets the named slot such as !kills or !quests. Useful for debugging.\"\r\n                        ];\r\n                        /* TODO:\r\n                        } else if (\"support\" == params[0]) {\r\n                            msg = buildHelpSupportResponse();\r\n                        */\r\n                    }\r\n                    else {\r\n                        return false;\r\n                    }\r\n                }\r\n                else {\r\n                    return false;\r\n                }\r\n                for (var i = 0; i < msg.length; i++) {\r\n                    Chat_1.Chat.log(\"info\", msg[i]);\r\n                }\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 1\r\n        };\r\n        this[\"ignore\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"ignore\"\r\n                };\r\n                if (params[0] == null) {\r\n                    action[\"list\"] = \"1\";\r\n                }\r\n                else {\r\n                    action[\"target\"] = params[0];\r\n                    var duration = params[1];\r\n                    if (duration != null) {\r\n                        /*\r\n                         * Ignore \"forever\" values\r\n                         */\r\n                        if (duration != \"*\" && duration != \"-\") {\r\n                            /*\r\n                             * Validate it's a number\r\n                             */\r\n                            if (isNaN(parseInt(duration, 10))) {\r\n                                return false;\r\n                            }\r\n                            action[\"duration\"] = duration;\r\n                        }\r\n                    }\r\n                    if (remainder.length != 0) {\r\n                        action[\"reason\"] = remainder;\r\n                    }\r\n                }\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 2\r\n        };\r\n        this[\"inspectkill\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const target = params[0];\r\n                var creature = null;\r\n                if (remainder != null && remainder != \"\") {\r\n                    // NOTE: unlike Java client, Javascript client automatically trims whitespace in \"remainder\" parameter\r\n                    creature = remainder;\r\n                }\r\n                const action = {\r\n                    \"type\": \"inspectkill\",\r\n                    \"target\": target\r\n                };\r\n                if (creature != null) {\r\n                    action[\"creature\"] = creature;\r\n                }\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 1\r\n        };\r\n        this[\"inspectquest\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"inspectquest\",\r\n                    \"target\": params[0]\r\n                };\r\n                if (params.length > 1) {\r\n                    action[\"quest_slot\"] = params[1];\r\n                }\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 2\r\n        };\r\n        this[\"jail\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"jail\",\r\n                    \"target\": params[0],\r\n                    \"minutes\": params[1],\r\n                    \"reason\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 2,\r\n            maxParams: 2\r\n        };\r\n        this[\"me\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"emote\",\r\n                    \"text\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"movecont\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const enable = !stendhal.config.getBoolean(\"input.movecont\");\r\n                const action = {\r\n                    \"type\": \"move.continuous\",\r\n                };\r\n                if (enable) {\r\n                    action[\"move.continuous\"] = \"\";\r\n                }\r\n                this.sendAction(action);\r\n                // update config\r\n                stendhal.config.set(\"input.movecont\", enable);\r\n                Chat_1.Chat.log(\"info\", \"Continuous movement \"\r\n                    + (enable ? \"enabled\" : \"disabled\") + \".\");\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"msg\"] = {\r\n            execute: (type, params, remainder) => {\r\n                this.lastPlayerTell = params[0];\r\n                const action = {\r\n                    \"type\": \"tell\",\r\n                    \"target\": params[0],\r\n                    \"text\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 1\r\n        };\r\n        this[\"tell\"] = this[\"msg\"];\r\n        this[\"/\"] = {\r\n            execute: (type, params, remainder) => {\r\n                if (typeof (this.lastPlayerTell) != \"undefined\") {\r\n                    const action = {\r\n                        \"type\": \"tell\",\r\n                        \"target\": this.lastPlayerTell,\r\n                        \"text\": remainder\r\n                    };\r\n                    this.sendAction(action);\r\n                }\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"mute\"] = {\r\n            execute: (type, params, remainder) => {\r\n                stendhal.main.toggleSound();\r\n                if (stendhal.config.getBoolean(\"ui.sound\")) {\r\n                    Chat_1.Chat.log(\"info\", \"Sounds are now on.\");\r\n                }\r\n                else {\r\n                    Chat_1.Chat.log(\"info\", \"Sounds are now off.\");\r\n                }\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"p\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"group_message\",\r\n                    \"text\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        /* FIXME:\r\n         * - parameters don'e work\r\n         */\r\n        this[\"progressstatus\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": type\r\n                };\r\n                if (remainder.length > 0) {\r\n                    if (remainder.indexOf(\"Open Quests\") > -1) {\r\n                        action[\"progress_type\"] = \"Open Quests\";\r\n                        remainder = remainder.substring(12);\r\n                    }\r\n                    else if (remainder.indexOf(\"Completed Quests\") > -1) {\r\n                        action[\"progress_type\"] = \"Completed Quests\";\r\n                        remainder = remainder.substring(17);\r\n                    }\r\n                    else if (remainder.indexOf(\"Production\") > -1) {\r\n                        action[\"progress_type\"] = \"Production\";\r\n                        remainder = remainder.substring(11);\r\n                    }\r\n                    else {\r\n                    }\r\n                    if (remainder) {\r\n                        action[\"item\"] = remainder;\r\n                    }\r\n                }\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"remove\"] = {\r\n            execute: (type, params, remainder) => {\r\n                if (params == null) {\r\n                    return false;\r\n                }\r\n                const action = {\r\n                    \"type\": \"removebuddy\",\r\n                    \"target\": params[0]\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 1\r\n        };\r\n        this[\"screenshot\"] = {\r\n            execute: (type, params, remainder) => {\r\n                stendhal.ui.gamewindow.createScreenshot();\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"sentence\"] = {\r\n            execute: (type, params, remainder) => {\r\n                if (params == null) {\r\n                    return false;\r\n                }\r\n                ;\r\n                const action = {\r\n                    \"type\": \"sentence\",\r\n                    \"value\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"settings\"] = new SettingsAction_1.SettingsAction();\r\n        this[\"stopwalk\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"walk\",\r\n                    \"mode\": \"stop\"\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"volume\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const layername = params[0];\r\n                let vol = params[1];\r\n                if (typeof (layername) === \"undefined\") {\r\n                    const layers = [\"master\", ...stendhal.ui.soundMan.getLayerNames()];\r\n                    Chat_1.Chat.log(\"info\", \"Please use /volume <layer> <value> to adjust the volume.\");\r\n                    Chat_1.Chat.log(\"client\", \"<layer> is one of \\\"\" + layers.join(\"\\\", \\\"\") + \"\\\"\");\r\n                    Chat_1.Chat.log(\"client\", \"<value> is a number in the range 0 to 100.\");\r\n                    Chat_1.Chat.log(\"client\", \"Current volume levels:\");\r\n                    for (const l of layers) {\r\n                        Chat_1.Chat.log(\"client\", \"&nbsp;&nbsp;- \" + l + \" -> \" + stendhal.ui.soundMan.getVolume(l) * 100);\r\n                    }\r\n                }\r\n                else if (typeof (vol) !== \"undefined\") {\r\n                    if (!/^\\d+$/.test(vol)) {\r\n                        Chat_1.Chat.log(\"error\", \"Value must be a number.\");\r\n                        return true;\r\n                    }\r\n                    if (stendhal.ui.soundMan.setVolume(layername, parseInt(vol, 10) / 100)) {\r\n                        Chat_1.Chat.log(\"client\", \"Channel \\\"\" + layername + \"\\\" volume set to \"\r\n                            + (stendhal.ui.soundMan.getVolume(layername) * 100) + \".\");\r\n                    }\r\n                    else {\r\n                        Chat_1.Chat.log(\"error\", \"Unknown layer \\\"\" + layername + \"\\\".\");\r\n                    }\r\n                }\r\n                else {\r\n                    Chat_1.Chat.log(\"error\", \"Please use /volume for help.\");\r\n                }\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 2\r\n        };\r\n        this[\"summon\"] = {\r\n            execute: (type, params, remainder) => {\r\n                var x = null;\r\n                var y = null;\r\n                var quantity = null;\r\n                var nameBuilder = [];\r\n                for (var idx = 0; idx < params.length; idx++) {\r\n                    const str = params[idx];\r\n                    if (str.match(\"[0-9].*\")) {\r\n                        if (x == null) {\r\n                            x = str;\r\n                        }\r\n                        else if (y == null) {\r\n                            y = str;\r\n                        }\r\n                        else if (quantity == null) {\r\n                            quantity = str;\r\n                        }\r\n                        else {\r\n                            nameBuilder.push(str);\r\n                        }\r\n                    }\r\n                    else {\r\n                        nameBuilder.push(str);\r\n                    }\r\n                }\r\n                // use x value as quantity if y was not specified\r\n                if (quantity == null && y == null && x != null) {\r\n                    quantity = x;\r\n                    x = null;\r\n                }\r\n                var creature = nameBuilder.join(\" \");\r\n                if (x == null || y == null) {\r\n                    // for some reason, the action does not accept the x,y coordinates if they are not a string\r\n                    x = marauroa.me.x.toString();\r\n                    y = marauroa.me.y.toString();\r\n                }\r\n                const action = {\r\n                    \"type\": type,\r\n                    \"creature\": creature,\r\n                    \"x\": x,\r\n                    \"y\": y,\r\n                    \"quantity\": quantity || \"0\"\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: -1 // XXX: is this the proper way to allow an unlimited number of arguments?\r\n        };\r\n        this[\"summonat\"] = {\r\n            execute: (type, params, remainder) => {\r\n                var amount = params[2];\r\n                // don't require first parameter to be integer amount\r\n                if (isNaN(parseInt(amount, 10))) {\r\n                    if (remainder) {\r\n                        remainder = amount + \" \" + remainder;\r\n                    }\r\n                    else {\r\n                        remainder = amount;\r\n                    }\r\n                    amount = \"1\";\r\n                }\r\n                const action = {\r\n                    \"type\": type,\r\n                    \"target\": params[0],\r\n                    \"slot\": params[1],\r\n                    \"amount\": amount,\r\n                    \"item\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 3,\r\n            maxParams: 3\r\n        };\r\n        this[\"support\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"support\",\r\n                    \"text\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"supportanswer\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"supportanswer\",\r\n                    \"target\": params[0],\r\n                    \"text\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 1\r\n        };\r\n        this[\"supporta\"] = this[\"supportanswer\"];\r\n        this[\"teleport\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"teleport\",\r\n                    \"target\": params[0],\r\n                    \"zone\": params[1],\r\n                    \"x\": params[2],\r\n                    \"y\": params[3]\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 4,\r\n            maxParams: 4\r\n        };\r\n        this[\"teleportto\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"teleportto\",\r\n                    \"target\": remainder,\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"tellall\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"tellall\",\r\n                    \"text\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"walk\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"walk\"\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"atlas\"] = {\r\n            execute: (type, params, remainder) => {\r\n                window.location.href = \"https://stendhalgame.org/world/atlas.html?me=\"\r\n                    + marauroa.currentZoneName + \".\" + marauroa.me.x + \".\" + marauroa.me.y;\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"beginnersguide\"] = {\r\n            execute: (type, params, remainder) => {\r\n                window.location.href = \"https://stendhalgame.org/wiki/Stendhal_Beginner's_Guide\";\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 0\r\n        };\r\n        this[\"characterselector\"] = new OpenWebsiteAction_1.OpenWebsiteAction(\"https://stendhalgame.org/account/mycharacters.html\");\r\n        this[\"faq\"] = new OpenWebsiteAction_1.OpenWebsiteAction(\"https://stendhalgame.org/wiki/Stendhal_FAQ\");\r\n        this[\"manual\"] = new OpenWebsiteAction_1.OpenWebsiteAction(\"https://stendhalgame.org/wiki/Stendhal_Manual/Controls_and_Game_Settings\");\r\n        this[\"profile\"] = {\r\n            execute: (type, params, remainder) => {\r\n                var url = \"https://stendhalgame.org/character/\";\r\n                var name = marauroa.me[\"_name\"] || SingletonRepo_1.singletons.getSessionManager().getCharName();\r\n                if (params.length > 0 && params[0] != null) {\r\n                    name = params[0];\r\n                }\r\n                if (!name) {\r\n                    console.warn(\"failed to get default character name!\");\r\n                    return true;\r\n                }\r\n                url += name + \".html\";\r\n                Chat_1.Chat.log(\"info\", \"Trying to open #\" + url + \" in your browser.\");\r\n                window.location.href = url;\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 1\r\n        };\r\n        this[\"rules\"] = new OpenWebsiteAction_1.OpenWebsiteAction(\"https://stendhalgame.org/wiki/Stendhal_Rules\");\r\n        this[\"changepassword\"] = new OpenWebsiteAction_1.OpenWebsiteAction(\"https://stendhalgame.org/account/change-password.html\");\r\n        this[\"loginhistory\"] = new OpenWebsiteAction_1.OpenWebsiteAction(\"https://stendhalgame.org/account/history.html\");\r\n        this[\"halloffame\"] = new OpenWebsiteAction_1.OpenWebsiteAction(\"https://stendhalgame.org/world/hall-of-fame/active_overview.html\");\r\n        this[\"storemessage\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": \"storemessage\",\r\n                    \"target\": params[0],\r\n                    \"text\": remainder\r\n                };\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 1,\r\n            maxParams: 1\r\n        };\r\n        this[\"_default\"] = {\r\n            execute: (type, params, remainder) => {\r\n                const action = {\r\n                    \"type\": type\r\n                };\r\n                if (typeof (params[0] != \"undefined\")) {\r\n                    action[\"target\"] = params[0];\r\n                    if (remainder != \"\") {\r\n                        action[\"args\"] = remainder;\r\n                    }\r\n                }\r\n                this.sendAction(action);\r\n                return true;\r\n            },\r\n            minParams: 0,\r\n            maxParams: 1\r\n        };\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!SlashActionRepo.instance) {\r\n            SlashActionRepo.instance = new SlashActionRepo();\r\n        }\r\n        return SlashActionRepo.instance;\r\n    }\r\n    sendAction(action) {\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    execute(line) {\r\n        line = line.trim();\r\n        // double slash is a special command, that should work without\r\n        // entering a space to separate it from the arguments.\r\n        if (line.startsWith(\"//\") && !line.startsWith(\"// \")) {\r\n            line = \"// \" + line.substring(2);\r\n        }\r\n        var array = line.split(\" \");\r\n        // clean whitespace\r\n        for (var el in array) {\r\n            array[el] = array[el].trim();\r\n        }\r\n        array = array.filter(Boolean);\r\n        if (array.length == 0) {\r\n            return false;\r\n        }\r\n        var name = array[0];\r\n        if (name[0] != \"/\") {\r\n            name = \"/chat\";\r\n        }\r\n        else {\r\n            array.shift();\r\n        }\r\n        name = name.substr(1);\r\n        var action;\r\n        if (typeof (this[name]) == \"undefined\") {\r\n            action = this[\"_default\"];\r\n        }\r\n        else {\r\n            action = this[name];\r\n        }\r\n        // use executing character if name parameter not supplied\r\n        if (name == \"where\" && array.length == 0) {\r\n            array[0] = marauroa.me[\"_name\"];\r\n        }\r\n        if (action.minParams <= array.length) {\r\n            var remainder = \"\";\r\n            for (var i = action.maxParams; i < array.length; i++) {\r\n                remainder = remainder + array[i] + \" \";\r\n            }\r\n            array.slice(action.maxParams);\r\n            return action.execute(name, array, remainder.trim());\r\n        }\r\n        else {\r\n            Chat_1.Chat.log(\"error\", \"Missing arguments. Try /help\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Checks for quoted whitepace to be included in parameter.\r\n     *\r\n     * @param p\r\n     *     The parameter to be amended.\r\n     * @param remainder\r\n     *     String to be checked for quoted whitespace.\r\n     * @return\r\n     *     Amended parameter.\r\n     */\r\n    checkQuoted(p, remainder) {\r\n        if (p.includes(\"\\\"\") && remainder.includes(\"\\\"\")) {\r\n            let endQuote = false;\r\n            let paramEnd = 0;\r\n            const arr = Array.from(remainder);\r\n            for (const c of arr) {\r\n                if (c === \" \" && endQuote) {\r\n                    break;\r\n                }\r\n                else if (c === \"\\\"\") {\r\n                    endQuote = !endQuote;\r\n                }\r\n                paramEnd++;\r\n            }\r\n            p = (p + \" \" + remainder.substring(0, paramEnd + 1)).replace(/\\\"/g, \"\").trim();\r\n        }\r\n        return p;\r\n    }\r\n}\r\nexports.SlashActionRepo = SlashActionRepo;\r\n//# sourceMappingURL=SlashActionRepo.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2022-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ConfigManager = void 0;\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst UIComponentEnum_1 = require(\"../ui/UIComponentEnum\");\r\nclass ConfigManager {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.defaults = {\r\n            \"client.pathfinding\": \"true\",\r\n            \"ui.sound\": \"false\",\r\n            \"ui.sound.master.volume\": \"100\",\r\n            \"ui.sound.ambient.volume\": \"100\",\r\n            \"ui.sound.creature.volume\": \"100\",\r\n            \"ui.sound.gui.volume\": \"100\",\r\n            \"ui.sound.music.volume\": \"100\",\r\n            \"ui.sound.sfx.volume\": \"100\",\r\n            \"ui.font.body\": \"Carlito\",\r\n            \"ui.font.chat\": \"Carlito\",\r\n            \"ui.font.tlog\": \"Black Chancery\",\r\n            \"ui.stats.charname\": \"true\",\r\n            \"ui.stats.hpbar\": \"true\",\r\n            \"ui.joystick\": \"none\",\r\n            \"ui.joystick.center.x\": \"224\",\r\n            \"ui.joystick.center.y\": \"384\",\r\n            \"ui.window.chest\": \"160,370\",\r\n            \"ui.window.corpse\": \"160,370\",\r\n            \"ui.window.menu\": \"150,20\",\r\n            \"ui.window.outfit\": \"300,50\",\r\n            \"ui.window.settings\": \"20,20\",\r\n            \"ui.window.shortcuts\": \"20,20\",\r\n            \"ui.window.trade\": \"200,100\",\r\n            \"ui.window.travellog\": \"160,50\",\r\n            // FIXME: these should have been \"gamewindow\" to prevent confusion\r\n            \"gamescreen.blood\": \"true\",\r\n            \"gamescreen.lighting\": \"true\",\r\n            \"gamescreen.weather\": \"true\",\r\n            \"gamescreen.nonude\": \"false\",\r\n            \"gamescreen.shadows\": \"true\",\r\n            \"gamescreen.speech.creature\": \"true\",\r\n            \"input.click.indicator\": \"false\",\r\n            \"input.movecont\": \"false\",\r\n            //\"input.doubleclick\": \"false\",\r\n            \"action.item.doubleclick\": \"false\",\r\n            \"action.inventory.quickpickup\": \"true\",\r\n            \"event.pvtmsg.sound\": \"ui/notify_up\",\r\n            \"chat.custom_keywords\": \"\",\r\n        };\r\n        this.themes = {\r\n            /**\r\n             * Theme backgrounds indexed by ID.\r\n             */\r\n            map: {\r\n                \"aubergine\": \"panel_aubergine.png\",\r\n                \"brick\": \"panel_brick.png\",\r\n                \"honeycomb\": \"panel_honeycomb.png\",\r\n                \"leather\": \"panel_leather.png\",\r\n                \"metal\": \"panel_metal.png\",\r\n                \"parquet\": \"panel_wood_parquet.png\",\r\n                \"stone\": \"panel_stone.png\",\r\n                \"tile\": \"panel_aqua_tile.png\",\r\n                \"wood\": \"panel_wood_v.png\",\r\n                \"wood2\": \"panel_wood_h.png\"\r\n            },\r\n            /**\r\n             * Themes that should use light text.\r\n             */\r\n            dark: {\r\n                \"aubergine\": true,\r\n                \"brick\": true,\r\n                \"leather\": true,\r\n                \"metal\": true,\r\n                \"parquet\": true,\r\n                \"stone\": true,\r\n                \"tile\": true,\r\n                \"wood\": true,\r\n                \"wood2\": true\r\n            }\r\n        };\r\n        this.fonts = {\r\n            \"sans-serif\": \"system default\",\r\n            \"serif\": \"system default (serif)\",\r\n            \"Amaranth\": \"\",\r\n            \"Black Chancery\": \"\",\r\n            \"Carlito\": \"\"\r\n        };\r\n        this.storage = window.localStorage;\r\n        this.windowstates = {};\r\n        this.initialized = false;\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!ConfigManager.instance) {\r\n            ConfigManager.instance = new ConfigManager();\r\n        }\r\n        return ConfigManager.instance;\r\n    }\r\n    /**\r\n     * @deprecated\r\n     */\r\n    init(args) {\r\n        if (this.initialized) {\r\n            console.warn(\"tried to re-initialize ConfigManager\");\r\n            return;\r\n        }\r\n        this.initialized = true;\r\n    }\r\n    /**\r\n     * Stores a configuration setting.\r\n     *\r\n     * @param key\r\n     *     String identifier.\r\n     * @param value\r\n     *     Item to be stored.\r\n     */\r\n    set(key, value) {\r\n        if (typeof (value) === \"object\") {\r\n            value = JSON.stringify(value);\r\n        }\r\n        this.storage.setItem(key, value);\r\n    }\r\n    /**\r\n     * Retrieves a configuration setting value.\r\n     *\r\n     * @param key\r\n     *     String identifier.\r\n     * @return\r\n     *     Stored value identified by key or undefined if key not found.\r\n     */\r\n    get(key) {\r\n        const ret = this.storage.getItem(key) || this.defaults[key];\r\n        // allow null to be a value\r\n        if (ret === \"null\") {\r\n            return null;\r\n        }\r\n        return ret;\r\n    }\r\n    /**\r\n     * Retrieves an integer number value from storage.\r\n     *\r\n     * @param key\r\n     *     String identifier.\r\n     * @param dval\r\n     *     Default value if key is not found.\r\n     * @return\r\n     *     Integer or undefined.\r\n     */\r\n    getInt(key, dval) {\r\n        let value = this.getFloat(key);\r\n        if (typeof (value) === \"undefined\") {\r\n            if (typeof (dval) === \"undefined\") {\r\n                return;\r\n            }\r\n            value = dval;\r\n        }\r\n        return Math.trunc(value);\r\n    }\r\n    /**\r\n     * Retrieves a float number value from storage.\r\n     *\r\n     * @param key\r\n     *     String identifier.\r\n     * @param dval\r\n     *     Default value if key is not found.\r\n     * @return\r\n     *     Float or undefined.\r\n     */\r\n    getFloat(key, dval) {\r\n        let value = Number(this.get(key));\r\n        if (Number.isNaN(value)) {\r\n            if (typeof (dval) === \"undefined\") {\r\n                return;\r\n            }\r\n            value = dval;\r\n        }\r\n        return value;\r\n    }\r\n    /**\r\n     * Retrieves a boolean value from storage.\r\n     *\r\n     * @param key\r\n     *     String identifier.\r\n     * @return\r\n     *     Boolean value of key or false if key not found.\r\n     */\r\n    getBoolean(key) {\r\n        const value = this.get(key);\r\n        if (value) {\r\n            return value.toLowerCase() === \"true\";\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Retrieves a JSON type object or array from storage.\r\n     *\r\n     * @param key\r\n     *     String identifier.\r\n     * @return\r\n     *     Object, array, or undefined.\r\n     */\r\n    getObject(key) {\r\n        let value = this.get(key);\r\n        if (!value) {\r\n            return;\r\n        }\r\n        value = JSON.parse(value);\r\n        if (typeof (value) === \"object\") {\r\n            return value;\r\n        }\r\n    }\r\n    /**\r\n     * Removes a key & its value from storage.\r\n     *\r\n     * @param key\r\n     *     String identifier.\r\n     */\r\n    remove(key) {\r\n        this.storage.removeItem(key);\r\n    }\r\n    /**\r\n     * Removes all data from storage.\r\n     */\r\n    clear() {\r\n        this.storage.clear();\r\n    }\r\n    /**\r\n     * Sets attributes for a dialog window.\r\n     *\r\n     * TODO: move into session manager\r\n     *\r\n     * @param id\r\n     *   Dialog identifier.\r\n     * @param x\r\n     *   Horizontal position.\r\n     * @param y\r\n     *   Vertical position.\r\n     */\r\n    setWindowState(id, x, y) {\r\n        this.windowstates[id] = { x: x, y: y };\r\n        this.set(\"ui.window.\" + id, x + \",\" + y);\r\n    }\r\n    /**\r\n     * Retrieves attributes for a dialog window.\r\n     *\r\n     * TODO: move into session manager\r\n     *\r\n     * @param id\r\n     *   Dialog identifier.\r\n     * @return\r\n     *   Object containing X/Y positioning of dialog.\r\n     */\r\n    getWindowState(id) {\r\n        let state = {};\r\n        if (this.windowstates.hasOwnProperty(id)) {\r\n            state = this.windowstates[id];\r\n        }\r\n        else {\r\n            const tmp = (this.get(\"ui.window.\" + id) || \"0,0\").split(\",\");\r\n            state.x = parseInt(tmp[0], 10);\r\n            state.y = parseInt(tmp[1], 10);\r\n        }\r\n        return state;\r\n    }\r\n    /**\r\n     * Sets the UI theme.\r\n     *\r\n     * @param value\r\n     *     Theme string identifier.\r\n     */\r\n    setTheme(value) {\r\n        this.set(\"ui.theme\", value);\r\n    }\r\n    /**\r\n     * Retrieves the identifier of current theme.\r\n     *\r\n     * @return\r\n     *     String identifier.\r\n     */\r\n    getTheme() {\r\n        return this.get(\"ui.theme\") || \"wood\";\r\n    }\r\n    /**\r\n     * Retrieves image filename of current theme.\r\n     *\r\n     * @return\r\n     *     String filename.\r\n     */\r\n    getThemeBG() {\r\n        return this.themes.map[this.getTheme()] || this.themes.map[\"wood\"];\r\n    }\r\n    /**\r\n     * Applies current theme to an element.\r\n     *\r\n     * @param element\r\n     *     Element to be updated.\r\n     * @param children\r\n     *     If <code>true</code>, theme will be applied to children elements\r\n     *     (default: <code>false</code>).\r\n     * @param recurse\r\n     *     If <code>true</code>, applies to all children recursively (default:\r\n     *     <code>false</code>).\r\n     * @param updateBG\r\n     *     If <code>true</code>, applies white backgrounds for dark themes &\r\n     *     black backgrounds for light themes (default: <code>false</code>).\r\n     */\r\n    applyTheme(element, children = false, recurse = false, updateBG = false) {\r\n        const current = this.getTheme();\r\n        element.style.setProperty(\"background\", \"url(\" + stendhal.paths.gui + \"/\" + this.themes.map[current] + \")\");\r\n        // make texts readable with dark & light themes\r\n        let color = \"#000000\";\r\n        let colorbg = \"#ffffff\";\r\n        if (this.themes.dark[current]) {\r\n            color = \"#ffffff\";\r\n            colorbg = \"#000000\";\r\n        }\r\n        element.style.setProperty(\"color\", color);\r\n        if (updateBG) {\r\n            element.style.setProperty(\"background-color\", colorbg);\r\n        }\r\n        if (children && element.children) {\r\n            for (let idx = 0; idx < element.children.length; idx++) {\r\n                this.applyTheme(element.children[idx], recurse, recurse);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Refreshes theme for all applicable elements.\r\n     *\r\n     * @param updateBG\r\n     *     If <code>true</code>, applies white backgrounds for dark themes &\r\n     *     black backgrounds for light themes (default: <code>false</code>).\r\n     */\r\n    refreshTheme(updateBG = false) {\r\n        for (const elem of Array.from(document.querySelectorAll(\".background\"))) {\r\n            this.applyTheme(elem, undefined, undefined, updateBG);\r\n        }\r\n        const current = this.getTheme();\r\n        let rootStyle = document.documentElement.style;\r\n        rootStyle.setProperty(\"--background-url\", \"url(\" + stendhal.paths.gui + \"/\" + this.themes.map[current] + \")\");\r\n        if (this.usingDarkTheme()) {\r\n            rootStyle.setProperty(\"--text-color\", \"#fff\");\r\n            rootStyle.setProperty(\"--text-color-inactive\", \"#aaa\");\r\n            rootStyle.setProperty(\"--text-color-online\", \"#0a0\");\r\n            rootStyle.setProperty(\"--text-color-offline\", \"#aaa\");\r\n        }\r\n        else {\r\n            rootStyle.setProperty(\"--text-color\", \"#000\");\r\n            rootStyle.setProperty(\"--text-color-inactive\", \"#555\");\r\n            rootStyle.setProperty(\"--text-color-online\", \"#070\");\r\n            rootStyle.setProperty(\"--text-color-offline\", \"#777\");\r\n        }\r\n        const buddyList = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.BuddyList);\r\n        if (buddyList) {\r\n            buddyList.update();\r\n        }\r\n    }\r\n    /**\r\n     * Checks if the current theme is defined as \"dark\".\r\n     */\r\n    usingDarkTheme() {\r\n        return this.themes.dark[this.getTheme()] == true;\r\n    }\r\n}\r\nexports.ConfigManager = ConfigManager;\r\n//# sourceMappingURL=ConfigManager.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SessionManager = void 0;\r\nclass SessionManager {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.storage = window.sessionStorage;\r\n        this.initialized = false;\r\n        this.server_default = true;\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!SessionManager.instance) {\r\n            SessionManager.instance = new SessionManager();\r\n        }\r\n        return SessionManager.instance;\r\n    }\r\n    init(args) {\r\n        if (this.initialized) {\r\n            console.warn(\"tried to re-initialize SessionManager\");\r\n            return;\r\n        }\r\n        this.initialized = true;\r\n        const charname = args.get(\"char\") || args.get(\"character\") || args.get(\"name\");\r\n        if (charname) {\r\n            this.setCharName(charname);\r\n        }\r\n        // server selection from query string (test client only)\r\n        const server = args.get(\"server\");\r\n        if (server && this.isTestClient()) {\r\n            this.server_default = server !== \"main\";\r\n        }\r\n    }\r\n    /**\r\n     * Retrieves a value from session storage.\r\n     *\r\n     * @param key\r\n     *     String identifier.\r\n     * @return\r\n     *     Value indexed by `key` or `null` if key does not exist.\r\n     */\r\n    get(key) {\r\n        return this.storage.getItem(key);\r\n    }\r\n    /**\r\n     * Stores a value in session storage.\r\n     *\r\n     * @param key\r\n     *     String identifier.\r\n     * @param value\r\n     *     Value to be stored.\r\n     */\r\n    set(key, value) {\r\n        this.storage.setItem(key, value);\r\n    }\r\n    /**\r\n     * Sets active character name for this session.\r\n     *\r\n     * @param charname\r\n     *     Player's character name.\r\n     */\r\n    setCharName(charname) {\r\n        this.charname = charname;\r\n        // display character name in browser title/tab\r\n        document.title = \"Stendhal - \" + this.charname;\r\n        // display in stats panel\r\n        document.getElementById(\"charname\").innerText = this.charname;\r\n    }\r\n    /**\r\n     * Retrieves the active character name for this session.\r\n     *\r\n     * @return\r\n     *     Player's character name.\r\n     */\r\n    getCharName() {\r\n        return this.charname || \"\";\r\n    }\r\n    /**\r\n     * Detects if test client is being used based on data path.\r\n     */\r\n    isTestClient() {\r\n        return stendhal.paths.data === \"/testdata\";\r\n    }\r\n    /**\r\n     * Checks if the client should connect to its default server counterpart.\r\n     *\r\n     * Used for test client only.\r\n     *\r\n     * @return\r\n     *   `true` is test client should connect to test server. `false` if it should connect to main\r\n     *   server.\r\n     */\r\n    isServerDefault() {\r\n        return this.server_default;\r\n    }\r\n}\r\nexports.SessionManager = SessionManager;\r\n//# sourceMappingURL=SessionManager.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Paths = void 0;\r\nclass Paths {\r\n    /**\r\n     * Static members & methods only.\r\n     */\r\n    constructor() {\r\n        // do nothing\r\n    }\r\n    /**\r\n     * extract the path information from DOM\r\n     */\r\n    static extractPath(ref) {\r\n        let path = document.getElementsByTagName(\"html\")[0].getAttribute(ref);\r\n        // make sure that there is no javascript:// or similary shinanigans\r\n        if (!path || !path.startsWith(\"/\")) {\r\n            throw new Error(\"Path reference \" + ref + \" is not a relative path.\");\r\n        }\r\n        return path;\r\n    }\r\n}\r\nexports.Paths = Paths;\r\nPaths.data = Paths.extractPath(\"data-data-path\");\r\nPaths.font = Paths.data + \"/font\";\r\nPaths.gui = Paths.data + \"/gui\";\r\nPaths.music = Paths.data + \"/music\";\r\nPaths.sounds = Paths.data + \"/sounds\";\r\nPaths.sprites = Paths.data + \"/sprites\";\r\nPaths.weather = Paths.sprites + \"/weather\";\r\nPaths.achievements = Paths.sprites + \"/achievements\";\r\nPaths.tileset = Paths.extractPath(\"data-tileset-path\");\r\nPaths.ws = Paths.extractPath(\"data-ws\");\r\n//# sourceMappingURL=Paths.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                      (C) Copyright 2023 - Stendhal                      *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.JSONLoader = void 0;\r\nclass JSONLoader {\r\n    constructor(onDataReady) {\r\n        this.onDataReady = onDataReady;\r\n    }\r\n    /**\r\n     * Loads JSON data from file.\r\n     *\r\n     * @param path\r\n     *     Path to JSON file.\r\n     */\r\n    load(path) {\r\n        fetch(path, {\r\n            headers: { \"Content-Type\": \"application/json\" }\r\n        }).then(resp => resp.json()).then(data => {\r\n            this.data = data;\r\n            if (typeof (this.onDataReady) !== \"undefined\") {\r\n                this.onDataReady();\r\n            }\r\n        });\r\n    }\r\n}\r\nexports.JSONLoader = JSONLoader;\r\n//# sourceMappingURL=JSONLoader.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TileStore = void 0;\r\nconst Paths_1 = require(\"./Paths\");\r\nconst JSONLoader_1 = require(\"../util/JSONLoader\");\r\nclass TileStore {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.DEFAULT_DELAY = 500;\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!this.instance) {\r\n            this.instance = new TileStore();\r\n        }\r\n        return this.instance;\r\n    }\r\n    getLandscapeMap() {\r\n        return this.landscapeMap || {};\r\n    }\r\n    getWeatherMap() {\r\n        return this.weatherMap || {};\r\n    }\r\n    /**\r\n     * Initializes landscape & weather tile animations.\r\n     */\r\n    init() {\r\n        if (this.landscapeMap && this.weatherMap) {\r\n            console.warn(\"tried to re-initialize tile animations\");\r\n            return;\r\n        }\r\n        const loader = new JSONLoader_1.JSONLoader();\r\n        loader.onDataReady = () => {\r\n            this.landscapeMap = this.loadAnimations(loader.data[\"landscape\"], Paths_1.Paths.tileset + \"/\");\r\n            this.weatherMap = this.loadAnimations(loader.data[\"weather\"], stendhal.paths.weather + \"/\");\r\n        };\r\n        loader.load(Paths_1.Paths.tileset + \"/animation.json\");\r\n    }\r\n    /**\r\n     * Animations are stored using the tileset name as key with value\r\n     * being a map indexed by initial frames. Frame map contains two\r\n     * lists: <code>frames</code> (a list of frames used in animation)\r\n     * & <code>delays</code> (a list of delay values for the\r\n     * corresponding frame of each index).\r\n     *\r\n     * ani = animationMap[tileset_name];\r\n     * frames = ani[0].frames\r\n     * delays = ani[0].delays\r\n     *\r\n     * @param def\r\n     *     Unformatted animations lists indexed by tileset name.\r\n     *     Example: {ts1: [ani1, ani2, ...], ts2: [ani1, ani2, ...], ...}\r\n     * @param prefix\r\n     *     Parent directory containing the target tileset images.\r\n     * @return\r\n     *     Map of animations.\r\n     */\r\n    loadAnimations(def, prefix) {\r\n        const ani = {};\r\n        for (const tsname of Object.keys(def)) {\r\n            const entry = {};\r\n            for (let li of def[tsname]) {\r\n                // clean whitespace\r\n                li = li.trim();\r\n                li = li.replace(/\\t/g, \" \");\r\n                li = li.replace(/  /g, \" \");\r\n                li = li.split(\" \");\r\n                if (li.length > 1) {\r\n                    let id = li[0];\r\n                    let delay = this.DEFAULT_DELAY;\r\n                    if (id.includes(\"@\")) {\r\n                        const idtemp = id.split(\"@\");\r\n                        id = idtemp[0];\r\n                        if (idtemp.length > 1) {\r\n                            delay = parseInt(idtemp[1], 10);\r\n                        }\r\n                        else {\r\n                            delay = this.DEFAULT_DELAY;\r\n                        }\r\n                    }\r\n                    const frames = [];\r\n                    const delays = [];\r\n                    for (let frame of li[1].split(\":\")) {\r\n                        if (frame.includes(\"@\")) {\r\n                            const ftemp = frame.split(\"@\");\r\n                            delay = parseInt(ftemp[1], 10);\r\n                            frame = ftemp[0];\r\n                        }\r\n                        frame = parseInt(frame, 10);\r\n                        frames.push(frame);\r\n                        delays.push(delay);\r\n                    }\r\n                    let first_frame = frames[0];\r\n                    if (id !== \"*\") {\r\n                        first_frame = parseInt(id, 10);\r\n                    }\r\n                    entry[first_frame] = {\r\n                        frames: frames,\r\n                        delays: delays\r\n                    };\r\n                }\r\n            }\r\n            ani[prefix + tsname + \".png\"] = entry;\r\n        }\r\n        return ani;\r\n    }\r\n}\r\nexports.TileStore = TileStore;\r\n//# sourceMappingURL=TileStore.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WeatherRenderer = void 0;\r\nconst SingletonRepo_1 = require(\"../SingletonRepo\");\r\nconst TileStore_1 = require(\"../data/TileStore\");\r\n// TODO: incorporate thunder\r\nconst weatherLoops = {\r\n    \"rain\": true,\r\n    \"rain_heavy\": true,\r\n    \"rain_light\": true\r\n};\r\nclass WeatherRenderer {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     *\r\n     * Use <code>WeatherRenderer.get()</code>.\r\n     */\r\n    constructor() {\r\n        this.enabled = true;\r\n        this.warned = {};\r\n        this.frameIdx = 0;\r\n        this.lastUpdate = 0;\r\n        this.tilesX = 0;\r\n        this.tilesY = 0;\r\n        this.soundLayer = SingletonRepo_1.singletons.getSoundManager().layers.indexOf(\"ambient\");\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     *\r\n     * @return\r\n     *     WeatherRenderer static instance.\r\n     */\r\n    static get() {\r\n        if (!WeatherRenderer.instance) {\r\n            WeatherRenderer.instance = new WeatherRenderer();\r\n        }\r\n        return WeatherRenderer.instance;\r\n    }\r\n    /**\r\n     * Called when zone is updated to configure the type of weather.\r\n     *\r\n     * @param weather\r\n     *     Weather type identifier.\r\n     */\r\n    update(weather) {\r\n        this.enabled = stendhal.config.getBoolean(\"gamescreen.weather\");\r\n        this.frameIdx = 0;\r\n        this.lastUpdate = Date.now();\r\n        // reset warning messages\r\n        this.warned = {};\r\n        const soundMan = SingletonRepo_1.singletons.getSoundManager();\r\n        // stop previous sounds\r\n        if (this.audio) {\r\n            soundMan.stop(this.soundLayer, this.audio);\r\n            this.audio = undefined;\r\n        }\r\n        if (!weather) {\r\n            this.sprite = undefined;\r\n        }\r\n        else {\r\n            const img = stendhal.paths.weather + \"/\" + weather + \".png\";\r\n            this.sprite = stendhal.data.sprites.get(img);\r\n            /* FIXME:\r\n             *   \"TypeError: $stendhal$$.data.$tileset$.$weatherAnimationMap$\r\n             *   is undefined\". TileStore.weatherMap is not always loaded\r\n             *   before this is called.\r\n             */\r\n            const animationMap = TileStore_1.TileStore.get().getWeatherMap()[img];\r\n            if (!this.sprite || !this.sprite.src) {\r\n                console.error(\"weather sprite for '\" + weather + \"' not found\");\r\n                return;\r\n            }\r\n            //~ if (!animationMap) {\r\n            //~ console.error(\"weather animation map for '\" + weather + \"' not loaded\");\r\n            //~ return;\r\n            if (animationMap && Object.keys(animationMap).length == 0) {\r\n                console.error(\"weather animation map for '\" + weather + \"' is empty\");\r\n                return;\r\n            }\r\n            if (animationMap) {\r\n                this.sprite.frames = animationMap[0].frames;\r\n                this.sprite.delays = animationMap[0].delays;\r\n            }\r\n            else {\r\n                // weather is not animated\r\n                this.sprite.frames = [0];\r\n            }\r\n            let spriteH = this.sprite.height;\r\n            // failsafe assumes min sprite dimensions to be 32x32\r\n            if (!spriteH) {\r\n                spriteH = 32;\r\n                console.log(\"using failsafe sprite height: \" + spriteH);\r\n            }\r\n            const canvas = document.getElementById(\"gamewindow\");\r\n            this.tilesX = Math.ceil(canvas.width / spriteH);\r\n            this.tilesY = Math.ceil(canvas.height / spriteH);\r\n            if (weatherLoops[weather]) {\r\n                this.audio = soundMan.playGlobalizedLoop(\"weather/\" + weather, this.soundLayer);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Draws the weather animation.\r\n     *\r\n     * TODO: don't move animation with character movement.\r\n     *\r\n     * @param ctx\r\n     *    Drawing target element.\r\n     */\r\n    draw(ctx) {\r\n        if (this.enabled && this.sprite && this.sprite.frames) {\r\n            if (!this.tilesX || !this.tilesY) {\r\n                if (!this.warned.tiling) {\r\n                    console.warn(\"cannot tile weather animation\");\r\n                    this.warned.tiling = true;\r\n                }\r\n                return;\r\n            }\r\n            if (!this.sprite.height) {\r\n                if (!this.warned.imgReady) {\r\n                    console.warn(\"waiting on image to load before drawing weather\");\r\n                    this.warned.imgReady = true;\r\n                }\r\n                return;\r\n            }\r\n            // width & height dimensions should be the same\r\n            const dim = this.sprite.height;\r\n            for (let ix = 0; ix < this.tilesX; ix++) {\r\n                for (let iy = 0; iy < this.tilesY; iy++) {\r\n                    ctx.drawImage(this.sprite, this.sprite.frames[this.frameIdx] * dim, 0, dim, dim, (ix * dim) + stendhal.ui.gamewindow.offsetX, (iy * dim) + stendhal.ui.gamewindow.offsetY, dim, dim);\r\n                }\r\n            }\r\n            if (this.sprite.delays) {\r\n                const cycleTime = Date.now();\r\n                const elapsed = cycleTime - this.lastUpdate;\r\n                if (elapsed >= this.sprite.delays[this.frameIdx]) {\r\n                    this.lastUpdate = cycleTime;\r\n                    this.frameIdx = this.getNextFrame(elapsed);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Calculates the next frame to display incorporating frame skipping.\r\n     *\r\n     * @param elapsed\r\n     *     Amount of time (ms) that has elapsed.\r\n     * @return\r\n     *     The next frame index that should be drawn.\r\n     */\r\n    getNextFrame(elapsed) {\r\n        let delayComb = 0, idx = this.frameIdx;\r\n        for (idx; delayComb < elapsed; idx++) {\r\n            delayComb += this.sprite.delays[idx];\r\n            if (idx + 1 >= this.sprite.delays.length) {\r\n                idx = -1;\r\n            }\r\n        }\r\n        return idx;\r\n    }\r\n}\r\nexports.WeatherRenderer = WeatherRenderer;\r\n//# sourceMappingURL=WeatherRenderer.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CStatus = void 0;\r\nclass CStatus {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.initialized = false;\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!CStatus.instance) {\r\n            CStatus.instance = new CStatus();\r\n        }\r\n        return CStatus.instance;\r\n    }\r\n    init() {\r\n        if (this.initialized) {\r\n            console.warn(\"tried to re-initialize CStatus\");\r\n            return;\r\n        }\r\n        this.initialized = true;\r\n        this.send();\r\n    }\r\n    send() {\r\n        if (!marauroa.me) {\r\n            window.setTimeout(stendhal.data.cstatus.send, 1000);\r\n            return;\r\n        }\r\n        var action = {\r\n            \"type\": \"cstatus\",\r\n            // the client version, the server will deactivate certain features that\r\n            // are incompatible with old clients. E. g. changing of light and dark\r\n            // in the current zone is implemented by retransmitting the tileset\r\n            // information. an old client would mistake that for a zone change and\r\n            // hang.\r\n            \"version\": stendhal.data.build.version,\r\n            // The build number is especially helpful for pre releases\r\n            \"build\": stendhal.data.build.build,\r\n            // so that we can ask bug reporters to try again with the official\r\n            // client, if they are using an unofficial one.\r\n            \"dist\": stendhal.data.build.dist,\r\n            // a client id to help with the investigation of hacked accounts\r\n            // especially in the common \"angry sibling\" case.\r\n            \"cid\": stendhal.data.cache.get(\"cid\")\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n}\r\nexports.CStatus = CStatus;\r\n//# sourceMappingURL=CStatus.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2017-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CacheManager = void 0;\r\n/**\r\n * setup a cache that is powered by IndexedDB, but allow synchronous access\r\n * for simplicity of use.\r\n */\r\nclass CacheManager {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!CacheManager.instance) {\r\n            CacheManager.instance = new CacheManager();\r\n        }\r\n        return CacheManager.instance;\r\n    }\r\n    /**\r\n     * Initializes cache.\r\n     */\r\n    init() {\r\n        // https://dzone.com/articles/getting-all-stored-items\r\n        function requestAllItems(storeName, callback) {\r\n            var tx = stendhal.data.cache.db.transaction(storeName, \"readonly\");\r\n            var store = tx.objectStore(storeName);\r\n            var items = [];\r\n            tx.oncomplete = function (evt) {\r\n                callback(items);\r\n            };\r\n            var cursorRequest = store.openCursor();\r\n            cursorRequest.onerror = function (error) {\r\n                console.log(error);\r\n            };\r\n            cursorRequest.onsuccess = function (evt) {\r\n                var cursor = evt.target.result;\r\n                if (cursor) {\r\n                    items.push(cursor.value);\r\n                    cursor.continue();\r\n                }\r\n            };\r\n        }\r\n        let cacheId = null;\r\n        try {\r\n            cacheId = localStorage.getItem(\"cache.cid\");\r\n        }\r\n        catch (e) {\r\n            // ignore\r\n        }\r\n        stendhal.data.cache.sync = {\r\n            \"cid\": cacheId\r\n        };\r\n        if (cacheId || !window.indexedDB) {\r\n            return;\r\n        }\r\n        var open = indexedDB.open(\"stendhal\", 1);\r\n        open.onupgradeneeded = function () {\r\n            var db = open.result;\r\n            db.createObjectStore(\"cache\", { keyPath: \"key\" });\r\n        };\r\n        open.onsuccess = function () {\r\n            stendhal.data.cache.db = open.result;\r\n            requestAllItems(\"cache\", function (items) {\r\n                var len = items.length;\r\n                for (var i = 0; i < len; i += 1) {\r\n                    stendhal.data.cache.sync[items[i].key] = items[i].data;\r\n                    try {\r\n                        cacheId = localStorage.setItem(\"cache.cid\", items[i].data);\r\n                    }\r\n                    catch (e) {\r\n                        // ignore\r\n                    }\r\n                }\r\n                if (!stendhal.data.cache.sync[\"cid\"]) {\r\n                    stendhal.data.cache.put(\"cid\", (Math.random() * 1e48).toString(36));\r\n                }\r\n            });\r\n        };\r\n        open.onerror = function () {\r\n            stendhal.data.cache.put(\"cid\", (Math.random() * 1e48).toString(36));\r\n        };\r\n    }\r\n    get(key) {\r\n        return stendhal.data.cache.sync[key];\r\n    }\r\n    put(key, value) {\r\n        if (stendhal.data.cache.sync[key] === value) {\r\n            return;\r\n        }\r\n        stendhal.data.cache.sync[key] = value;\r\n        try {\r\n            localStorage.setItem(\"cache.\" + key, value);\r\n        }\r\n        catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n}\r\nexports.CacheManager = CacheManager;\r\n//# sourceMappingURL=CacheManager.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmojiStore = void 0;\r\nconst Paths_1 = require(\"./Paths\");\r\nconst JSONLoader_1 = require(\"../util/JSONLoader\");\r\nclass EmojiStore {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     *\r\n     * Use <code>EmojiStore.get()</code>.\r\n     */\r\n    constructor() {\r\n        this.emojilist = [];\r\n        this.emojimap = {};\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     *\r\n     * @return\r\n     *     EmojiStore static instance.\r\n     */\r\n    static get() {\r\n        if (!EmojiStore.instance) {\r\n            EmojiStore.instance = new EmojiStore();\r\n        }\r\n        return EmojiStore.instance;\r\n    }\r\n    /**\r\n     * Loads emoji data from JSON.\r\n     */\r\n    init() {\r\n        const loader = new JSONLoader_1.JSONLoader();\r\n        loader.onDataReady = () => {\r\n            this.emojilist = loader.data[\"emojilist\"];\r\n            this.emojimap = loader.data[\"emojimap\"];\r\n        };\r\n        loader.load(Paths_1.Paths.sprites + \"/emoji/emojis.json\");\r\n    }\r\n    /**\r\n     * Creates an emoji sprite.\r\n     *\r\n     * @param text\r\n     *     Text representing emoji.\r\n     * @return\r\n     *     <code>Image</code> or <code>undefined</code> if emoji isn't available.\r\n     */\r\n    create(text) {\r\n        const filename = this.absPath(text);\r\n        if (!filename) {\r\n            return;\r\n        }\r\n        return stendhal.data.sprites.get(filename);\r\n    }\r\n    /**\r\n     * Checks if text represents an emoji.\r\n     *\r\n     * @param text\r\n     *     Text to be checked.\r\n     * @return\r\n     *     String representing emoji sprite filename or <code>undefined</code>.\r\n     */\r\n    check(text) {\r\n        text = text.replace(/\\\\\\\\/g, \"\\\\\");\r\n        let name = this.emojimap[text];\r\n        if (!name && (text.startsWith(\":\") && text.endsWith(\":\"))) {\r\n            text = text.substr(0, text.length - 1).substr(1);\r\n            if (this.isAvailable(text)) {\r\n                name = text;\r\n            }\r\n        }\r\n        return name;\r\n    }\r\n    /**\r\n     * Retrieves full path to an emoji image.\r\n     *\r\n     * @param name\r\n     *     Text representing emoji image filename.\r\n     * @return\r\n     *     String path to emoji image.\r\n     */\r\n    absPath(name) {\r\n        const checked = this.check(name);\r\n        if (checked) {\r\n            return Paths_1.Paths.sprites + \"/emoji/\" + checked + \".png\";\r\n        }\r\n    }\r\n    /**\r\n     * Checks if an emoji is registered.\r\n     *\r\n     * @param name\r\n     *     Text representing emoji image filename.\r\n     * @return\r\n     *     <code>true</code> if name is registered.\r\n     */\r\n    isAvailable(name) {\r\n        if (name.startsWith(\":\") && name.endsWith(\":\")) {\r\n            name = name.substr(1, name.length - 2);\r\n        }\r\n        return this.emojilist.indexOf(name) > -1;\r\n    }\r\n    /**\r\n     * Get a list of available emojis.\r\n     *\r\n     * @return\r\n     *     A copy of the emoji list.\r\n     */\r\n    getEmojiList() {\r\n        return [...this.emojilist];\r\n    }\r\n}\r\nexports.EmojiStore = EmojiStore;\r\n//# sourceMappingURL=EmojiStore.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2017-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GroupManager = void 0;\r\nclass GroupManager {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.members = [];\r\n        this.lootmode = \"\";\r\n        this.leader = \"\";\r\n        this.count = 0;\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!GroupManager.instance) {\r\n            GroupManager.instance = new GroupManager();\r\n        }\r\n        return GroupManager.instance;\r\n    }\r\n    updateGroupStatus(members, leader, lootmode) {\r\n        this.count = 0;\r\n        if (members) {\r\n            var memberArray = members.substring(1, members.length - 1).split(\"\\t\");\r\n            stendhal.data.group.members = {};\r\n            for (var i = 0; i < memberArray.length; i++) {\r\n                stendhal.data.group.members[memberArray[i]] = true;\r\n                this.count++;\r\n            }\r\n            stendhal.data.group.leader = leader;\r\n            stendhal.data.group.lootmode = lootmode;\r\n        }\r\n        else {\r\n            stendhal.data.group.members = []; // XXX: should this be an object instead of an array?\r\n            stendhal.data.group.leader = \"\";\r\n            stendhal.data.group.lootmode = \"\";\r\n        }\r\n    }\r\n    /**\r\n     * Retrieves the name of the leader of this group or an empty string.\r\n     */\r\n    getLeader() {\r\n        return this.leader;\r\n    }\r\n    /**\r\n     * Retrieves number of members in group.\r\n     */\r\n    getMemberCount() {\r\n        return this.count;\r\n    }\r\n}\r\nexports.GroupManager = GroupManager;\r\n//# sourceMappingURL=GroupManager.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CombinedTileset = void 0;\r\n/**\r\n * a combined tileset with group layers using one single tileset image.\r\n *\r\n * For example: The layers 0_floor, 1_terrain and 2_object are all below the players.\r\n * So instead of drawing up to 3 images per tile on every frame, we created a combined\r\n * tile rewrote the layer information to point to that tile.\r\n *\r\n * We use one large tileset for the combined tiles in order to be compatible with WebGL.\r\n */\r\nclass CombinedTileset {\r\n    constructor(numberOfTiles, combinedLayers) {\r\n        this.combinedLayers = combinedLayers;\r\n        // The original approach used an a very wide image of 32 pixel height.\r\n        // But both Firefox and Chrome are limit the dimension of an image to 2^15 pixels.\r\n        this.tilesPerRow = Math.ceil(Math.sqrt(numberOfTiles));\r\n        this.canvas = document.createElement(\"canvas\");\r\n        this.canvas.width = stendhal.data.map.tileWidth * this.tilesPerRow;\r\n        this.canvas.height = stendhal.data.map.tileHeight * this.tilesPerRow;\r\n        this.ctx = this.canvas.getContext(\"2d\");\r\n    }\r\n}\r\nexports.CombinedTileset = CombinedTileset;\r\n//# sourceMappingURL=CombinedTileset.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MapOfSets = void 0;\r\n/**\r\n * a map which contains sets\r\n */\r\nclass MapOfSets extends Map {\r\n    /**\r\n     * adds an entry to the map. If the key is already known,\r\n     * the value is added to the associated set. Otherwise\r\n     * a new set containing the value is created.\r\n     *\r\n     * @param key key of the entry\r\n     * @param value value of the entry\r\n     */\r\n    add(key, value) {\r\n        let set = this.get(key);\r\n        if (set === undefined) {\r\n            set = new Set();\r\n            this.set(key, set);\r\n        }\r\n        set.add(value);\r\n    }\r\n}\r\nexports.MapOfSets = MapOfSets;\r\n//# sourceMappingURL=MapOfSets.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CombinedTilesetImageLoader = void 0;\r\nconst TileStore_1 = require(\"../data/TileStore\");\r\nconst MapOfSets_1 = require(\"../util/MapOfSets\");\r\nclass CombinedTilesetImageLoader {\r\n    constructor(map, indexToCombinedTiles, combinedTileset) {\r\n        this.map = map;\r\n        this.indexToCombinedTiles = indexToCombinedTiles;\r\n        this.combinedTileset = combinedTileset;\r\n        this.tilesetImages = [];\r\n        this.animations = {};\r\n        this.landscapeAnimationMap = TileStore_1.TileStore.get().getLandscapeMap();\r\n    }\r\n    calculateTileUsedAtIndex() {\r\n        this.tileUsedAtIndex = new MapOfSets_1.MapOfSets();\r\n        for (let [index, combinedTile] of this.indexToCombinedTiles.entries()) {\r\n            for (let tile of combinedTile) {\r\n                let gid = tile & 0x1FFFFFFF;\r\n                this.tileUsedAtIndex.add(gid, index);\r\n            }\r\n        }\r\n    }\r\n    calculateUsedTilesets(gids) {\r\n        let usedTilesets = new Set();\r\n        for (let gid of gids) {\r\n            usedTilesets.add(this.map.getTilesetForGid(gid));\r\n        }\r\n        return usedTilesets;\r\n    }\r\n    loadTileset(tileset) {\r\n        let img = document.createElement(\"img\");\r\n        img.onload = () => {\r\n            this.drawTileset(tileset);\r\n        };\r\n        const tsname = this.map.tilesetFilenames[tileset];\r\n        img.src = tsname + \"?v=\" + stendhal.data.build.version;\r\n        if (this.landscapeAnimationMap) {\r\n            const animation = this.landscapeAnimationMap[tsname];\r\n            if (animation) {\r\n                this.animations[tileset] = animation;\r\n            }\r\n        }\r\n        this.tilesetImages[tileset] = img;\r\n    }\r\n    drawTileset(tileset) {\r\n        let firstGid = this.map.firstgids[tileset];\r\n        let image = this.tilesetImages[tileset];\r\n        let numberOfTiles = image.width / this.map.tileWidth * image.height / this.map.tileHeight;\r\n        let lastGid = firstGid + numberOfTiles;\r\n        for (let gid = firstGid; gid <= lastGid; gid++) {\r\n            let indexes = this.tileUsedAtIndex.get(gid);\r\n            if (indexes === undefined) {\r\n                continue;\r\n            }\r\n            for (let index of indexes) {\r\n                this.drawCombinedTileAtIndex(index);\r\n            }\r\n        }\r\n    }\r\n    drawCombinedTileAtIndex(index) {\r\n        let tiles = this.indexToCombinedTiles.get(index);\r\n        let x = index % this.combinedTileset.tilesPerRow;\r\n        let y = Math.floor(index / this.combinedTileset.tilesPerRow);\r\n        const pixelX = x * this.map.tileWidth;\r\n        const pixelY = y * this.map.tileHeight;\r\n        this.combinedTileset.ctx.clearRect(pixelX, pixelY, this.map.tileWidth, this.map.tileHeight);\r\n        for (let tile of tiles) {\r\n            let flip = tile & 0xE0000000;\r\n            let gid = tile & 0x1FFFFFFF;\r\n            let tileset = this.map.getTilesetForGid(gid);\r\n            let image = this.tilesetImages[tileset];\r\n            if (!image || !image.height) {\r\n                continue;\r\n            }\r\n            let base = this.map.firstgids[tileset];\r\n            let tileIndexInTileset = gid - base;\r\n            this.drawTile(pixelX, pixelY, image, tileIndexInTileset, flip);\r\n        }\r\n    }\r\n    drawTile(pixelX, pixelY, tilesetImage, tileIndexInTileset, flip) {\r\n        const tilesetWidth = tilesetImage.width;\r\n        const tilesPerRow = Math.floor(tilesetWidth / this.map.tileWidth);\r\n        const ctx = this.combinedTileset.ctx;\r\n        if (flip === 0) {\r\n            ctx.drawImage(tilesetImage, (tileIndexInTileset % tilesPerRow) * this.map.tileWidth, Math.floor(tileIndexInTileset / tilesPerRow) * this.map.tileHeight, this.map.tileWidth, this.map.tileHeight, pixelX, pixelY, this.map.tileWidth, this.map.tileHeight);\r\n        }\r\n        else {\r\n            ctx.translate(pixelX, pixelY);\r\n            // an ugly hack to restore the previous transformation matrix\r\n            const restore = [[1, 0, 0, 1, -pixelX, -pixelY]];\r\n            if ((flip & 0x80000000) !== 0) {\r\n                // flip horizontally\r\n                ctx.transform(-1, 0, 0, 1, 0, 0);\r\n                ctx.translate(-this.map.tileWidth, 0);\r\n                restore.push([-1, 0, 0, 1, 0, 0]);\r\n                restore.push([1, 0, 0, 1, this.map.tileWidth, 0]);\r\n            }\r\n            if ((flip & 0x40000000) !== 0) {\r\n                // flip vertically\r\n                ctx.transform(1, 0, 0, -1, 0, 0);\r\n                ctx.translate(0, -this.map.tileWidth);\r\n                restore.push([1, 0, 0, -1, 0, 0]);\r\n                restore.push([1, 0, 0, 1, 0, this.map.tileHeight]);\r\n            }\r\n            if ((flip & 0x20000000) !== 0) {\r\n                // Coordinate swap\r\n                ctx.transform(0, 1, 1, 0, 0, 0);\r\n                restore.push([0, 1, 1, 0, 0, 0]);\r\n            }\r\n            this.drawTile(0, 0, tilesetImage, tileIndexInTileset, 0);\r\n            restore.reverse();\r\n            for (const args of restore) {\r\n                ctx.transform.apply(ctx, args);\r\n            }\r\n        }\r\n    }\r\n    load() {\r\n        console.log(\"CombinedTilesetImageLoader.load()\");\r\n        this.calculateTileUsedAtIndex();\r\n        let usedTilesets = this.calculateUsedTilesets(this.tileUsedAtIndex.keys());\r\n        for (let tileset of usedTilesets) {\r\n            this.loadTileset(tileset);\r\n        }\r\n    }\r\n}\r\nexports.CombinedTilesetImageLoader = CombinedTilesetImageLoader;\r\n//# sourceMappingURL=CombinedTilesetImageLoader.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CombinedTilesetFactory = void 0;\r\nconst CombinedTileset_1 = require(\"./CombinedTileset\");\r\nconst CombinedTilesetImageLoader_1 = require(\"./CombinedTilesetImageLoader\");\r\nclass CombinedTilesetFactory {\r\n    constructor(map) {\r\n        this.map = map;\r\n    }\r\n    combine() {\r\n        let combinedTilesToIndex = new Map();\r\n        let indexToCombinedTiles = new Map();\r\n        let combinedLayers = [];\r\n        let index = 0;\r\n        // initialize the combinedLayers array\r\n        for (let group = 0; group < this.map.layerGroupIndexes.length; group++) {\r\n            combinedLayers[group] = [];\r\n        }\r\n        // lets examine every tile on both the floor and the roof layer-group\r\n        for (let x = 0; x < this.map.zoneSizeX; x++) {\r\n            for (let y = 0; y < this.map.zoneSizeY; y++) {\r\n                for (let group = 0; group < this.map.layerGroupIndexes.length; group++) {\r\n                    let layers = this.map.layerGroupIndexes[group];\r\n                    let combinedTile = [];\r\n                    for (let layer of layers) {\r\n                        let gid = this.map.layers[layer][y * this.map.zoneSizeX + x];\r\n                        if (gid > 0) {\r\n                            combinedTile.push(gid);\r\n                        }\r\n                    }\r\n                    // most of the tiles on the roof layer are empty, so we add a special case here\r\n                    // to skip drawing completely transparent tiles later.\r\n                    if (combinedTile.length === 0) {\r\n                        combinedLayers[group][y * this.map.zoneSizeX + x] = -1;\r\n                        continue;\r\n                    }\r\n                    // use json string as map key because of equality\r\n                    let key = JSON.stringify(combinedTile);\r\n                    let value = combinedTilesToIndex.get(key);\r\n                    if (value === undefined) {\r\n                        value = index;\r\n                        combinedTilesToIndex.set(key, value);\r\n                        indexToCombinedTiles.set(value, combinedTile);\r\n                        index++;\r\n                    }\r\n                    combinedLayers[group][y * this.map.zoneSizeX + x] = value;\r\n                }\r\n            }\r\n        }\r\n        let combinedTileset = new CombinedTileset_1.CombinedTileset(combinedTilesToIndex.size, combinedLayers);\r\n        // console.log(this.map, combinedTilesToIndex, combinedLayers);\r\n        // document.getElementsByTagName(\"body\")[0].append(combinedTileset.canvas);\r\n        let ctImageLoader = new CombinedTilesetImageLoader_1.CombinedTilesetImageLoader(this.map, indexToCombinedTiles, combinedTileset);\r\n        ctImageLoader.load();\r\n        return combinedTileset;\r\n    }\r\n}\r\nexports.CombinedTilesetFactory = CombinedTilesetFactory;\r\n//# sourceMappingURL=CombinedTilesetFactory.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LandscapeRenderer = void 0;\r\nclass LandscapeRenderer {\r\n    drawLayer(canvas, combinedTileset, layerNo, tileOffsetX, tileOffsetY, targetTileWidth, targetTileHeight) {\r\n        if (!combinedTileset) {\r\n            return;\r\n        }\r\n        let ctx = canvas.getContext(\"2d\");\r\n        const layer = combinedTileset.combinedLayers[layerNo];\r\n        const yMax = Math.min(tileOffsetY + canvas.height / targetTileHeight + 1, stendhal.data.map.zoneSizeY);\r\n        const xMax = Math.min(tileOffsetX + canvas.width / targetTileWidth + 1, stendhal.data.map.zoneSizeX);\r\n        for (let y = tileOffsetY; y < yMax; y++) {\r\n            for (let x = tileOffsetX; x < xMax; x++) {\r\n                let index = layer[y * stendhal.data.map.zoneSizeX + x];\r\n                if (index > -1) {\r\n                    try {\r\n                        const pixelX = x * targetTileWidth;\r\n                        const pixelY = y * targetTileHeight;\r\n                        ctx.drawImage(combinedTileset.canvas, (index % combinedTileset.tilesPerRow) * stendhal.data.map.tileWidth, Math.floor(index / combinedTileset.tilesPerRow) * stendhal.data.map.tileHeight, stendhal.data.map.tileWidth, stendhal.data.map.tileHeight, pixelX, pixelY, targetTileWidth, targetTileHeight);\r\n                    }\r\n                    catch (e) {\r\n                        console.error(e);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.LandscapeRenderer = LandscapeRenderer;\r\n//# sourceMappingURL=LandscapeRenderer.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CombinedTilesetRenderingStrategy = exports.LandscapeRenderingStrategy = void 0;\r\nconst CombinedTilesetFactory_1 = require(\"./CombinedTilesetFactory\");\r\nconst LandscapeRenderer_1 = require(\"./LandscapeRenderer\");\r\nclass LandscapeRenderingStrategy {\r\n}\r\nexports.LandscapeRenderingStrategy = LandscapeRenderingStrategy;\r\nclass CombinedTilesetRenderingStrategy extends LandscapeRenderingStrategy {\r\n    onMapLoaded(map) {\r\n        let combinedTilesetFactory = new CombinedTilesetFactory_1.CombinedTilesetFactory(map);\r\n        stendhal.data.map.combinedTileset = combinedTilesetFactory.combine();\r\n    }\r\n    onTilesetLoaded() {\r\n        let body = document.getElementById(\"body\");\r\n        body.style.cursor = \"auto\";\r\n    }\r\n    render(canvas, gamewindow, tileOffsetX, tileOffsetY, targetTileWidth, targetTileHeight) {\r\n        let landscapeRenderder = new LandscapeRenderer_1.LandscapeRenderer();\r\n        landscapeRenderder.drawLayer(canvas, stendhal.data.map.combinedTileset, 0, tileOffsetX, tileOffsetY, targetTileWidth, targetTileHeight);\r\n        gamewindow.drawEntities();\r\n        landscapeRenderder.drawLayer(canvas, stendhal.data.map.combinedTileset, 1, tileOffsetX, tileOffsetY, targetTileWidth, targetTileHeight);\r\n    }\r\n}\r\nexports.CombinedTilesetRenderingStrategy = CombinedTilesetRenderingStrategy;\r\n//# sourceMappingURL=LandscapeRenderingStrategy.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImagePreloader = void 0;\r\n/*\r\n * Start: http://www.webreference.com/programming/javascript/gr/column3/\r\n * ( https://web.archive.org/web/20110910064905/http://www.webreference.com:80/programming/javascript/gr/column3/index.html )\r\n *\r\nfunction ImagePreloader(images, callback) {\r\n    // store the call-back\r\n    this.callback = callback;\r\n\r\n    // initialize internal state.\r\n    this.nLoaded = 0;\r\n    this.nProcessed = 0;\r\n    stendhal.data.map.aImages = new Array;\r\n\r\n    // record the number of images.\r\n    this.nImages = images.length;\r\n\r\n    // for each image, call preload()\r\n    for ( var i = 0; i < images.length; i++) {\r\n        this.preload(images[i]);\r\n    }\r\n}\r\n\r\nImagePreloader.prototype.preload = function(image) {\r\n    // create new Image object and add to array\r\n    var oImage = new Image;\r\n    stendhal.data.map.aImages.push(oImage);\r\n\r\n    // set up event handlers for the Image object\r\n    oImage.onload = ImagePreloader.prototype.onload;\r\n    oImage.onerror = ImagePreloader.prototype.onerror;\r\n    oImage.onabort = ImagePreloader.prototype.onabort;\r\n\r\n    // assign pointer back to this.\r\n    oImage.oImagePreloader = this;\r\n    oImage.bLoaded = false;\r\n\r\n    // assign the .src property of the Image object\r\n    oImage.src = image;\r\n};\r\n\r\nImagePreloader.prototype.onComplete = function() {\r\n    this.nProcessed++;\r\n    if (this.nProcessed == this.nImages) {\r\n        this.callback();\r\n    }\r\n};\r\n\r\nImagePreloader.prototype.onload = function() {\r\n    this.bLoaded = true;\r\n    this.oImagePreloader.nLoaded++;\r\n    this.oImagePreloader.onComplete();\r\n};\r\n\r\nImagePreloader.prototype.onerror = function() {\r\n    this.bError = true;\r\n    this.oImagePreloader.onComplete();\r\n    console.error(\"Error loading \" + this.src);\r\n};\r\n\r\nImagePreloader.prototype.onabort = function() {\r\n    this.bAbort = true;\r\n    this.oImagePreloader.onComplete();\r\n    console.error(\"Loading \" + this.src + \" was aborted\");\r\n};\r\n *\r\n * End: http://www.webreference.com/programming/javascript/gr/column3/\r\n */\r\n/**\r\n * preloads images\r\n *\r\n * @param images image url to load\r\n * @param callback callback to invoke\r\n * @constructor\r\n */\r\nclass ImagePreloader extends Function {\r\n    constructor(images, callback) {\r\n        super();\r\n        this.oImagePreloader = {};\r\n        // store the call-back\r\n        this.callback = callback;\r\n        // initialize internal state.\r\n        this.bLoaded = false;\r\n        this.bError = false;\r\n        this.bAbort = false;\r\n        this.nLoaded = 0;\r\n        this.nProcessed = 0;\r\n        stendhal.data.map.aImages = new Array();\r\n        // record the number of images.\r\n        this.nImages = images.length;\r\n        // for each image, call preload()\r\n        for (let i = 0; i < images.length; i++) {\r\n            this.preload(images[i]);\r\n        }\r\n    }\r\n    preload(image) {\r\n        // create new Image object and add to array\r\n        const oImage = new Image();\r\n        stendhal.data.map.aImages.push(oImage);\r\n        // set up event handlers for the Image object\r\n        oImage.onload = ImagePreloader.prototype.onload;\r\n        oImage.onerror = ImagePreloader.prototype.onerror;\r\n        oImage.onabort = ImagePreloader.prototype.onabort;\r\n        // assign pointer back to this\r\n        oImage.oImagePreloader = this;\r\n        oImage.bLoaded = false;\r\n        // assign the .src property of the Image object\r\n        oImage.src = image;\r\n    }\r\n    onComplete() {\r\n        this.nProcessed++;\r\n        if (this.nProcessed == this.nImages) {\r\n            this.callback();\r\n        }\r\n    }\r\n    onload() {\r\n        this.bLoaded = true;\r\n        this.oImagePreloader.nLoaded++;\r\n        this.oImagePreloader.onComplete();\r\n    }\r\n    onerror() {\r\n        this.bError = true;\r\n        this.oImagePreloader.onComplete();\r\n        console.error(\"Error loading \" + this.src);\r\n    }\r\n    onabort() {\r\n        this.bAbort = true;\r\n        this.oImagePreloader.onComplete();\r\n        console.error(\"Loading \" + this.src + \" was aborted\");\r\n    }\r\n}\r\nexports.ImagePreloader = ImagePreloader;\r\n//# sourceMappingURL=ImagePreloader.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IndividualTilesetRenderingStrategy = void 0;\r\nconst LandscapeRenderingStrategy_1 = require(\"./LandscapeRenderingStrategy\");\r\nconst ImagePreloader_1 = require(\"../data/ImagePreloader\");\r\nconst Chat_1 = require(\"../util/Chat\");\r\nclass IndividualTilesetRenderingStrategy extends LandscapeRenderingStrategy_1.LandscapeRenderingStrategy {\r\n    constructor() {\r\n        super();\r\n        this.targetTileWidth = 32;\r\n        this.targetTileHeight = 32;\r\n        setTimeout(() => {\r\n            Chat_1.Chat.log(\"client\", \"Using IndividualTilesetRenderingStrategy\");\r\n        }, 1000);\r\n    }\r\n    onMapLoaded(_map) {\r\n        // do nothing\r\n        console.log(\"Using IndividualTilesetRenderingStrategy.\");\r\n    }\r\n    onTilesetLoaded() {\r\n        new ImagePreloader_1.ImagePreloader(stendhal.data.map.tilesetFilenames, function () {\r\n            let body = document.getElementById(\"body\");\r\n            body.style.cursor = \"auto\";\r\n        });\r\n    }\r\n    render(canvas, gamewindow, tileOffsetX, tileOffsetY, targetTileWidth, targetTileHeight) {\r\n        this.targetTileWidth = targetTileWidth;\r\n        this.targetTileHeight = targetTileHeight;\r\n        for (var drawingLayer = 0; drawingLayer < stendhal.data.map.layers.length; drawingLayer++) {\r\n            var name = stendhal.data.map.layerNames[drawingLayer];\r\n            if (name !== \"protection\" && name !== \"collision\" && name !== \"objects\"\r\n                && name !== \"blend_ground\" && name !== \"blend_roof\") {\r\n                this.paintLayer(canvas, drawingLayer, tileOffsetX, tileOffsetY);\r\n            }\r\n            if (name === \"2_object\") {\r\n                gamewindow.drawEntities();\r\n            }\r\n        }\r\n    }\r\n    paintLayer(canvas, drawingLayer, tileOffsetX, tileOffsetY) {\r\n        const layer = stendhal.data.map.layers[drawingLayer];\r\n        const yMax = Math.min(tileOffsetY + canvas.height / this.targetTileHeight + 1, stendhal.data.map.zoneSizeY);\r\n        const xMax = Math.min(tileOffsetX + canvas.width / this.targetTileWidth + 1, stendhal.data.map.zoneSizeX);\r\n        let ctx = canvas.getContext(\"2d\");\r\n        for (let y = tileOffsetY; y < yMax; y++) {\r\n            for (let x = tileOffsetX; x < xMax; x++) {\r\n                let gid = layer[y * stendhal.data.map.zoneSizeX + x];\r\n                const flip = gid & 0xE0000000;\r\n                gid &= 0x1FFFFFFF;\r\n                if (gid > 0) {\r\n                    const tileset = stendhal.data.map.getTilesetForGid(gid);\r\n                    const base = stendhal.data.map.firstgids[tileset];\r\n                    const idx = gid - base;\r\n                    try {\r\n                        if (stendhal.data.map.aImages[tileset].height > 0) {\r\n                            this.drawTile(ctx, stendhal.data.map.aImages[tileset], idx, x, y, flip);\r\n                        }\r\n                    }\r\n                    catch (e) {\r\n                        console.error(e);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    drawTile(ctx, tileset, idx, x, y, flip = 0) {\r\n        const tilesetWidth = tileset.width;\r\n        const tilesPerRow = Math.floor(tilesetWidth / stendhal.data.map.tileWidth);\r\n        const pixelX = x * this.targetTileWidth;\r\n        const pixelY = y * this.targetTileHeight;\r\n        if (flip === 0) {\r\n            ctx.drawImage(tileset, (idx % tilesPerRow) * stendhal.data.map.tileWidth, Math.floor(idx / tilesPerRow) * stendhal.data.map.tileHeight, stendhal.data.map.tileWidth, stendhal.data.map.tileHeight, pixelX, pixelY, this.targetTileWidth, this.targetTileHeight);\r\n        }\r\n        else {\r\n            ctx.translate(pixelX, pixelY);\r\n            // an ugly hack to restore the previous transformation matrix\r\n            const restore = [[1, 0, 0, 1, -pixelX, -pixelY]];\r\n            if ((flip & 0x80000000) !== 0) {\r\n                // flip horizontally\r\n                ctx.transform(-1, 0, 0, 1, 0, 0);\r\n                ctx.translate(-this.targetTileWidth, 0);\r\n                restore.push([-1, 0, 0, 1, 0, 0]);\r\n                restore.push([1, 0, 0, 1, this.targetTileWidth, 0]);\r\n            }\r\n            if ((flip & 0x40000000) !== 0) {\r\n                // flip vertically\r\n                ctx.transform(1, 0, 0, -1, 0, 0);\r\n                ctx.translate(0, -this.targetTileWidth);\r\n                restore.push([1, 0, 0, -1, 0, 0]);\r\n                restore.push([1, 0, 0, 1, 0, this.targetTileHeight]);\r\n            }\r\n            if ((flip & 0x20000000) !== 0) {\r\n                // Coordinate swap\r\n                ctx.transform(0, 1, 1, 0, 0, 0);\r\n                restore.push([0, 1, 1, 0, 0, 0]);\r\n            }\r\n            this.drawTile(ctx, tileset, idx, 0, 0);\r\n            restore.reverse();\r\n            for (const args of restore) {\r\n                ctx.transform(args[0], args[1], args[2], args[3], args[4], args[5]);\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.IndividualTilesetRenderingStrategy = IndividualTilesetRenderingStrategy;\r\n//# sourceMappingURL=IndividualTilesetRenderingStrategy.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Map = void 0;\r\nconst Paths_1 = require(\"./Paths\");\r\nconst LandscapeRenderingStrategy_1 = require(\"../landscape/LandscapeRenderingStrategy\");\r\nconst IndividualTilesetRenderingStrategy_1 = require(\"../landscape/IndividualTilesetRenderingStrategy\");\r\nclass Map {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.currentZoneName = \"\";\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.zoneSizeX = -1;\r\n        this.zoneSizeY = -1;\r\n        this.sizeX = 20;\r\n        this.sizeY = 15;\r\n        this.tileWidth = 32;\r\n        this.tileHeight = 32;\r\n        this.zoom = 100;\r\n        this.tilesetFilenames = [];\r\n        this.aImages = -1;\r\n        this.layerNames = -1;\r\n        this.layers = -1;\r\n        this.firstgids = -1;\r\n        this.gidsindex = [];\r\n        this.drawingError = false;\r\n        this.targetTileWidth = 0;\r\n        this.targetTileHeight = 0;\r\n        this.layerGroups = [\r\n            [\"0_floor\", \"1_terrain\", \"2_object\"],\r\n            [\"3_roof\", \"4_roof_add\"]\r\n        ];\r\n        // alternatives for known images that may be considered violent or mature\r\n        this.knownSafeTilesets = [\r\n            Paths_1.Paths.tileset + \"/item/armor/bloodied_small_axe\",\r\n            Paths_1.Paths.tileset + \"/item/blood/floor_stain\",\r\n            Paths_1.Paths.tileset + \"/item/blood/floor_stains_2\",\r\n            Paths_1.Paths.tileset + \"/item/blood/nsew_stains\",\r\n            Paths_1.Paths.tileset + \"/item/blood/small_stains\"\r\n        ];\r\n        if (window.location.search.indexOf(\"old\") > -1) {\r\n            this.strategy = new IndividualTilesetRenderingStrategy_1.IndividualTilesetRenderingStrategy();\r\n        }\r\n        else {\r\n            this.strategy = new LandscapeRenderingStrategy_1.CombinedTilesetRenderingStrategy();\r\n        }\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!Map.instance) {\r\n            Map.instance = new Map();\r\n        }\r\n        return Map.instance;\r\n    }\r\n    /**\r\n     * Returns the index of the tileset a tile belongs to.\r\n     */\r\n    getTilesetForGid(value) {\r\n        if (value < this.gidsindex.length) {\r\n            return this.gidsindex[value];\r\n        }\r\n        else {\r\n            return this.gidsindex[this.gidsindex.length - 1] + 1;\r\n        }\r\n    }\r\n    onTransfer(zoneName, content) {\r\n        this.currentZoneName = zoneName;\r\n        this.firstgids = [];\r\n        this.layers = [];\r\n        this.layerNames = [];\r\n        var body = document.getElementById(\"body\");\r\n        body.style.cursor = \"wait\";\r\n        console.log(\"load map\");\r\n        // tilesets, 0_floor, 1_terrain, 2_object, 3_roof, 4_roof_add,\tblend_ground, blend_roof, protection, collision, data_map\r\n        this.decodeTileset(content, \"tilesets\");\r\n        this.decodeMapLayer(content, \"0_floor\");\r\n        this.decodeMapLayer(content, \"1_terrain\");\r\n        this.decodeMapLayer(content, \"2_object\");\r\n        this.decodeMapLayer(content, \"3_roof\");\r\n        this.decodeMapLayer(content, \"4_roof_add\");\r\n        this.protection = this.decodeMapLayer(content, \"protection\");\r\n        this.collisionData = this.decodeMapLayer(content, \"collision\");\r\n        this.layerGroupIndexes = this.mapLayerGroup();\r\n        this.strategy.onMapLoaded(this);\r\n    }\r\n    decodeTileset(content, name) {\r\n        var layerData = content[name];\r\n        var deserializer = marauroa.Deserializer.fromBase64(layerData);\r\n        var amount = deserializer.readInt();\r\n        this.tilesetFilenames = [];\r\n        for (var i = 0; i < amount; i++) {\r\n            var name = deserializer.readString();\r\n            var source = deserializer.readString();\r\n            var firstgid = deserializer.readInt();\r\n            // Security Note: The following line triggers a false positive.\r\n            // This is not input validation. It just rewrites a path used by the\r\n            // Java client to a path matching the webserver directory layout.\r\n            var filename = \"/\" + source.replace(/\\.\\.\\/\\.\\.\\//g, \"\");\r\n            let baseFilename = filename.replace(/\\.png$/, \"\").replace(\"/tileset\", Paths_1.Paths.tileset);\r\n            if (!stendhal.config.getBoolean(\"gamescreen.blood\") && this.hasSafeTileset(baseFilename)) {\r\n                this.tilesetFilenames.push(baseFilename + \"-safe.png\");\r\n            }\r\n            else {\r\n                this.tilesetFilenames.push(baseFilename + \".png\");\r\n            }\r\n            this.firstgids.push(firstgid);\r\n        }\r\n        // create a lookup table from gid to tileset index for significant performance reasons\r\n        this.gidsindex = [];\r\n        var pos, lastStart = 0, i;\r\n        for (pos = 0; pos < parseInt(this.firstgids.length, 10); pos++) {\r\n            for (i = lastStart; i < this.firstgids[pos]; i++) {\r\n                this.gidsindex.push(pos - 1);\r\n            }\r\n            lastStart = this.firstgids[pos];\r\n        }\r\n        this.strategy.onTilesetLoaded();\r\n    }\r\n    decodeMapLayer(content, name) {\r\n        var layerData = content[name];\r\n        if (!layerData) {\r\n            return;\r\n        }\r\n        var deserializer = marauroa.Deserializer.fromDeflatedBase64(layerData);\r\n        deserializer.readString(); // zone name\r\n        this.zoneSizeX = deserializer.readInt();\r\n        this.zoneSizeY = deserializer.readInt();\r\n        var layerRaw = deserializer.readByteArray();\r\n        var layer = [];\r\n        for (var i = 0; i < this.zoneSizeX * this.zoneSizeY * 4 - 3; i = i + 4) {\r\n            var tileId = layerRaw.getUint32(i, true);\r\n            layer.push(tileId);\r\n        }\r\n        this.layerNames.push(name);\r\n        this.layers.push(layer);\r\n        return layer;\r\n    }\r\n    collision(x, y) {\r\n        return this.collisionData[y * this.zoneSizeX + x] != 0;\r\n    }\r\n    isProtected(x, y) {\r\n        return this.protection[y * this.zoneSizeX + x] != 0;\r\n    }\r\n    mapLayerGroup() {\r\n        let res = [];\r\n        for (let layers of this.layerGroups) {\r\n            let group = [];\r\n            for (let layer of layers) {\r\n                let index = this.layerNames.indexOf(layer);\r\n                if (index > -1) {\r\n                    group.push(index);\r\n                }\r\n            }\r\n            if (group) {\r\n                res.push(group);\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    /**\r\n     * Checks if there is an alternative \"safe\" tileset image available.\r\n     *\r\n     * @param filename\r\n     *     The tileset image base file path.\r\n     * @return\r\n     *     <code>true</code> if a known safe image is available.\r\n     */\r\n    hasSafeTileset(filename) {\r\n        return this.knownSafeTilesets.indexOf(filename) > -1;\r\n    }\r\n}\r\nexports.Map = Map;\r\n//# sourceMappingURL=Map.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                     Copyright \u00a9 2003-2023 - Arianne                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutfitStore = void 0;\r\nconst Paths_1 = require(\"./Paths\");\r\nconst JSONLoader_1 = require(\"../util/JSONLoader\");\r\nclass OutfitStore {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.detailRearLayers = [];\r\n        // player pickable layers\r\n        this.count = {\r\n            \"hat\": 19,\r\n            \"hair\": 57,\r\n            \"mask\": 9,\r\n            \"eyes\": 28,\r\n            \"mouth\": 5,\r\n            \"head\": 4,\r\n            \"dress\": 65,\r\n            \"body\": 3\r\n        };\r\n        this.busty_dress = [\r\n            1, 4, 6, 7, 10, 11, 13, 16,\r\n            29, 37, 40, 53, 54, 56, 61, 64,\r\n            967, 968, 977, 980, 989, 990, 999\r\n        ];\r\n        // hair should not be drawn with hat indexes in this list\r\n        this.hats_no_hair = [\r\n            3, 4, 13, 16, 992, 993, 994, 996, 997\r\n        ];\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!OutfitStore.instance) {\r\n            OutfitStore.instance = new OutfitStore();\r\n        }\r\n        return OutfitStore.instance;\r\n    }\r\n    init() {\r\n        const loader = new JSONLoader_1.JSONLoader();\r\n        loader.onDataReady = () => {\r\n            this.detailRearLayers = loader.data[\"detail\"][\"rear\"];\r\n        };\r\n        loader.load(Paths_1.Paths.sprites + \"/outfit/outfits.json\");\r\n    }\r\n    /**\r\n     * Determines if hair should be drawn under a determinted hat index.\r\n     *\r\n     * @param hat\r\n     *     Hat index to be checked.\r\n     * @return\r\n     *     <code>true</code> if hair should be drawn, <code>false</code> otherwise.\r\n     */\r\n    drawHair(hat) {\r\n        return this.hats_no_hair.indexOf(hat) < 0;\r\n    }\r\n    /**\r\n     * Determines if a busty alternative dress layer should be drawn.\r\n     *\r\n     * @param dress\r\n     *     Dress index.\r\n     * @param body\r\n     *     Body index.\r\n     * @return\r\n     *     <code>true</code> if body type is busty & a busty dress\r\n     *     alternative is available.\r\n     */\r\n    drawBustyDress(dress, body) {\r\n        return body == 1 && this.busty_dress.indexOf(dress) > -1;\r\n    }\r\n    /**\r\n     * Checks if we can draw a \"rear\" detail layer.\r\n     *\r\n     * @param detail\r\n     *     Detail index.\r\n     * @return\r\n     *     <code>true</code> if a rear sprite is available.\r\n     */\r\n    detailHasRearLayer(detail) {\r\n        return this.detailRearLayers.indexOf(detail) > -1;\r\n    }\r\n}\r\nexports.OutfitStore = OutfitStore;\r\n//# sourceMappingURL=OutfitStore.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.store = exports.SpriteStore = void 0;\r\nconst Paths_1 = require(\"./Paths\");\r\nclass SpriteImage extends Image {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.counter = 0;\r\n    }\r\n}\r\nclass SpriteStore {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.knownBrokenUrls = {};\r\n        this.images = {};\r\n        this.knownShadows = {\r\n            \"24x32\": true,\r\n            \"32x32\": true,\r\n            \"32x48\": true,\r\n            \"32x48_long\": true,\r\n            \"48x64\": true,\r\n            \"48x64_float\": true,\r\n            \"64x48\": true,\r\n            \"64x64\": true,\r\n            \"64x85\": true,\r\n            \"64x96\": true,\r\n            \"76x64\": true,\r\n            \"81x96\": true,\r\n            \"96x96\": true,\r\n            \"96x128\": true,\r\n            \"128x96\": true,\r\n            \"128x170\": true,\r\n            \"144x128\": true,\r\n            \"168x224\": true,\r\n            \"192x192\": true,\r\n            \"192x192_float\": true,\r\n            \"192x256\": true,\r\n            \"320x440\": true,\r\n            \"ent\": true\r\n        };\r\n        // alternatives for known images that may be considered violent or mature\r\n        this.knownSafeSprites = {\r\n            [Paths_1.Paths.sprites + \"/monsters/huge_animal/thing\"]: true,\r\n            [Paths_1.Paths.sprites + \"/monsters/mutant/imperial_mutant\"]: true,\r\n            [Paths_1.Paths.sprites + \"/monsters/undead/bloody_zombie\"]: true,\r\n            [Paths_1.Paths.sprites + \"/npc/deadmannpc\"]: true\r\n        };\r\n        // TODO: move to animation.json\r\n        this.animations = {\r\n            idea: {\r\n                \"love\": { delay: 100, offsetX: 24, offsetY: -8 }\r\n            }\r\n        };\r\n        /** Image filters */\r\n        this.filter = {\r\n            // Helper functions\r\n            /**\r\n             * @param {Number} rgb\r\n             * @return {Array<Number>}\r\n             */\r\n            splitrgb: function (rgb) {\r\n                rgb &= 0xffffff;\r\n                var b = rgb & 0xff;\r\n                rgb >>>= 8;\r\n                var g = rgb & 0xff;\r\n                rgb >>>= 8;\r\n                return [rgb, g, b];\r\n            },\r\n            mergergb: function (rgbArray) {\r\n                const r = rgbArray[0] << 16;\r\n                const g = rgbArray[1] << 8;\r\n                return 0xffffff & (r | g | rgbArray[2]);\r\n            },\r\n            /**\r\n             * @param {Array<Number>} rgb\r\n             * @return {Array<Number>}\r\n             */\r\n            rgb2hsl: function (rgb) {\r\n                var r = rgb[0] / 255;\r\n                var g = rgb[1] / 255;\r\n                var b = rgb[2] / 255;\r\n                var max, min, maxVar;\r\n                // Find the max and minimum colors, and remember which one it was\r\n                if (r > g) {\r\n                    max = r;\r\n                    min = g;\r\n                    maxVar = 0;\r\n                }\r\n                else {\r\n                    max = g;\r\n                    min = r;\r\n                    maxVar = 1;\r\n                }\r\n                if (b > max) {\r\n                    max = b;\r\n                    maxVar = 2;\r\n                }\r\n                else if (b < min) {\r\n                    min = b;\r\n                }\r\n                // lightness\r\n                var l = (max + min) / 2;\r\n                var s, h;\r\n                // saturation\r\n                var diff = max - min;\r\n                if (diff < 0.000001) {\r\n                    s = 0;\r\n                    // hue not really defined, but set it to something reasonable\r\n                    h = 0;\r\n                }\r\n                else {\r\n                    if (l < 0.5) {\r\n                        s = diff / (max + min);\r\n                    }\r\n                    else {\r\n                        s = diff / (2 - max - min);\r\n                    }\r\n                    // hue\r\n                    if (maxVar === 0) {\r\n                        h = (g - b) / diff;\r\n                    }\r\n                    else if (maxVar === 1) {\r\n                        h = 2 + (b - r) / diff;\r\n                    }\r\n                    else {\r\n                        h = 4 + (r - g) / diff;\r\n                    }\r\n                    // Normalize to range [0, 1]. It's more useful than the usual 360\r\n                    h /= 6;\r\n                }\r\n                return [h, s, l];\r\n            },\r\n            /**\r\n             * @param {Array<Number>} hsl\r\n             * @return {Array<Number>}\r\n             */\r\n            hsl2rgb: function (hsl) {\r\n                var r, g, b;\r\n                var h = hsl[0];\r\n                var s = hsl[1];\r\n                var l = hsl[2];\r\n                if (s < 0.0000001) {\r\n                    r = g = b = Math.floor(255 * l);\r\n                }\r\n                else {\r\n                    var tmp1, tmp2;\r\n                    if (l < 0.5) {\r\n                        tmp1 = l * (1 + s);\r\n                    }\r\n                    else {\r\n                        tmp1 = l + s - l * s;\r\n                    }\r\n                    tmp2 = 2 * l - tmp1;\r\n                    var rf = stendhal.data.sprites.filter.hue2rgb(this.limitHue(h + 1 / 3), tmp2, tmp1);\r\n                    var gf = stendhal.data.sprites.filter.hue2rgb(this.limitHue(h), tmp2, tmp1);\r\n                    var bf = stendhal.data.sprites.filter.hue2rgb(this.limitHue(h - 1 / 3), tmp2, tmp1);\r\n                    r = Math.floor(255 * rf) & 0xff;\r\n                    g = Math.floor(255 * gf) & 0xff;\r\n                    b = Math.floor(255 * bf) & 0xff;\r\n                }\r\n                return [r, g, b];\r\n            },\r\n            /**\r\n             * @param {Number} hue\r\n             * @param {Number} val1\r\n             * @param {Number} val2\r\n             */\r\n            hue2rgb: function (hue, val1, val2) {\r\n                var res = hue;\r\n                if (6 * hue < 1) {\r\n                    res = val1 + (val2 - val1) * 6 * hue;\r\n                }\r\n                else if (2 * hue < 1) {\r\n                    res = val2;\r\n                }\r\n                else if (3 * hue < 2) {\r\n                    res = val1 + (val2 - val1) * (2 / 3 - hue) * 6;\r\n                }\r\n                else {\r\n                    res = val1;\r\n                }\r\n                return res;\r\n            },\r\n            /**\r\n             * @param {Number} hue\r\n             */\r\n            limitHue: function (hue) {\r\n                var res = hue;\r\n                if (res < 0) {\r\n                    res += 1;\r\n                }\r\n                else if (res > 1) {\r\n                    res -= 1;\r\n                }\r\n                return res;\r\n            }\r\n        };\r\n        // do nothing\r\n    }\r\n    get(filename) {\r\n        if (!filename) {\r\n            return {};\r\n        }\r\n        if (filename.indexOf(\"undefined\") > -1) {\r\n            if (!this.knownBrokenUrls[filename]) {\r\n                console.log(\"Broken image path: \", filename, new Error());\r\n            }\r\n            this.knownBrokenUrls[filename] = true;\r\n            return {};\r\n        }\r\n        if (this.images[filename]) {\r\n            this.images[filename].counter++;\r\n            return this.images[filename];\r\n        }\r\n        var temp = new Image();\r\n        // TypeError: Image constructor: 'new' is required\r\n        //~ var temp = new SpriteImage();\r\n        temp.counter = 0;\r\n        temp.onerror = (function (t, store) {\r\n            return function () {\r\n                if (t.src && !store.knownBrokenUrls[t.src]) {\r\n                    console.log(\"Broken image path:\", t.src, new Error());\r\n                    store.knownBrokenUrls[t.src] = true;\r\n                }\r\n                const failsafe = store.getFailsafe();\r\n                if (failsafe.src && t.src !== failsafe.src) {\r\n                    t.src = failsafe.src;\r\n                }\r\n            };\r\n        })(temp, this);\r\n        temp.src = filename;\r\n        this.images[filename] = temp;\r\n        return temp;\r\n    }\r\n    getWithPromise(filename) {\r\n        return new Promise((resolve) => {\r\n            if (typeof (this.images[filename]) != \"undefined\") {\r\n                this.images[filename].counter++;\r\n                resolve(this.images[filename]);\r\n            }\r\n            const image = new Image();\r\n            // TypeError: Image constructor: 'new' is required\r\n            //~ const image = new SpriteImage();\r\n            image.counter = 0;\r\n            this.images[filename] = image;\r\n            image.onload = () => resolve(image);\r\n            image.src = filename;\r\n        });\r\n    }\r\n    /**\r\n     * Rotates an image.\r\n     *\r\n     * @param img\r\n     *   Image to be rotated.\r\n     * @param angle\r\n     *   Angle of rotation.\r\n     */\r\n    rotate(img, angle) {\r\n        const canvas = document.getElementById(\"drawing-stage\");\r\n        const ctx = canvas.getContext(\"2d\");\r\n        // make sure working with blank canvas\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        ctx.translate(canvas.width / 2, canvas.height / 2);\r\n        ctx.rotate(angle * Math.PI / 180);\r\n        ctx.translate(-canvas.width / 2, -canvas.height / 2);\r\n        ctx.drawImage(img, 0, 0);\r\n        img.src = canvas.toDataURL(\"image/png\");\r\n    }\r\n    /**\r\n     * Retrieves a rotated image.\r\n     *\r\n     * @param filename\r\n     *   Path to target image file.\r\n     * @param angle\r\n     *   Angle of rotation.\r\n     * @return\r\n     *   HTMLImageElement.\r\n     */\r\n    getRotated(filename, angle) {\r\n        if (angle == 0) {\r\n            return this.get(filename);\r\n        }\r\n        const id = filename + \"-rot\" + angle;\r\n        if (this.images[id]) {\r\n            return this.images[id];\r\n        }\r\n        const img = this.get(filename).cloneNode();\r\n        if (img.complete) {\r\n            this.rotate(img, angle);\r\n        }\r\n        else {\r\n            img.onload = () => {\r\n                this.rotate(img, angle);\r\n                img.onload = undefined;\r\n            };\r\n        }\r\n        this.images[id] = img;\r\n        return img;\r\n    }\r\n    /**\r\n     * Used when we only want an image if it was previously cached.\r\n     *\r\n     * @param filename\r\n     *     Full file path.\r\n     * @return\r\n     *     HTMLImageElement or undefined.\r\n     */\r\n    getCached(filename) {\r\n        return this.images[filename];\r\n    }\r\n    /**\r\n     * Retrieves the failsafe sprite.\r\n     *\r\n     * @return\r\n     *     HTMLImageElement with failsafe image data.\r\n     */\r\n    getFailsafe() {\r\n        const filename = Paths_1.Paths.sprites + \"/failsafe.png\";\r\n        let failsafe = this.images[filename];\r\n        if (failsafe) {\r\n            failsafe.counter++;\r\n        }\r\n        else {\r\n            failsafe = new Image();\r\n            // TypeError: Image constructor: 'new' is required\r\n            //~ failsafe = new SpriteImage();\r\n            failsafe.counter = 0;\r\n            failsafe.src = filename;\r\n            this.images[filename] = failsafe;\r\n        }\r\n        return failsafe;\r\n    }\r\n    /**\r\n     * Checks cached images for a valid filename.\r\n     *\r\n     * @param filename\r\n     *     Image filename to be checked.\r\n     * @return\r\n     *     Path to image or failsafe image file.\r\n     */\r\n    checkPath(filename) {\r\n        return this.get(filename).src;\r\n    }\r\n    /** deletes all objects that have not been accessed since this method was called last time */\r\n    // TODO: call clean on map change\r\n    clean() {\r\n        for (var i in this.images) {\r\n            console.log(typeof (this.images[i]));\r\n            if (this.images[i] instanceof SpriteImage) {\r\n                if (this.images[i].counter > 0) {\r\n                    this.images[i].counter--;\r\n                }\r\n                else {\r\n                    delete (this.images[i]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Get an image element whose image data is an area of a specified image.\r\n     * If the area matches the original image, the image itself is returned.\r\n     * Otherwise <em>a copy</em> of the image data is returned. This is meant\r\n     * to be used for obtaining the drag image for drag and drop.\r\n     *\r\n     * @param image original image\r\n     * @param width width of the area\r\n     * @param height height of the area\r\n     * @param {number=} offsetX optional. left x coordinate of the area\r\n     * @param {number=} offsetY optional. top y coordinate of the area\r\n     */\r\n    getAreaOf(image, width, height, offsetX, offsetY) {\r\n        try {\r\n            offsetX = offsetX || 0;\r\n            offsetY = offsetY || 0;\r\n            if ((image.width === width) && (image.height === height)\r\n                && (offsetX === 0) && (offsetY === 0)) {\r\n                return image;\r\n            }\r\n            var canvas = document.createElement(\"canvas\");\r\n            canvas.width = width;\r\n            canvas.height = height;\r\n            var ctx = canvas.getContext(\"2d\");\r\n            ctx.drawImage(image, offsetX, offsetY, width, height, 0, 0, width, height);\r\n            // Firefox would be able to use the canvas directly as a drag image, but\r\n            // Chrome does not. This should work in any standards compliant browser.\r\n            var newImage = new Image();\r\n            newImage.src = canvas.toDataURL(\"image/png\");\r\n            return newImage;\r\n        }\r\n        catch (err) {\r\n            if (err instanceof DOMException) {\r\n                return this.getFailsafe();\r\n            }\r\n            else {\r\n                // don't ignore other errors\r\n                throw err;\r\n            }\r\n        }\r\n        return {};\r\n    }\r\n    /**\r\n     * @param {string} fileName\r\n     * @param {string} filter\r\n     * @param {number=} param\r\n     */\r\n    getFiltered(fileName, filter, param) {\r\n        const img = this.get(fileName);\r\n        let filterFn;\r\n        if (typeof (filter) === \"undefined\"\r\n            || !(filterFn = this.filter[filter])\r\n            || !img.complete || img.width === 0 || img.height === 0) {\r\n            return img;\r\n        }\r\n        const filteredName = fileName + \" \" + filter + \" \" + param;\r\n        let filtered = this.images[filteredName];\r\n        if (typeof (filtered) === \"undefined\") {\r\n            const canvas = document.createElement(\"canvas\");\r\n            canvas.width = img.width;\r\n            canvas.height = img.height;\r\n            const ctx = canvas.getContext(\"2d\");\r\n            ctx.drawImage(img, 0, 0);\r\n            const imgData = ctx.getImageData(0, 0, img.width, img.height);\r\n            const data = imgData.data;\r\n            filterFn(data, param);\r\n            ctx.putImageData(imgData, 0, 0);\r\n            canvas.complete = true;\r\n            this.images[filteredName] = filtered = canvas;\r\n        }\r\n        return filtered;\r\n    }\r\n    /**\r\n     * @param {string} fileName\r\n     * @param {string} filter\r\n     * @param {number=} param\r\n     */\r\n    getFilteredWithPromise(fileName, filter, param) {\r\n        const imgPromise = this.getWithPromise(fileName);\r\n        return imgPromise.then(function (img) {\r\n            let filterFn;\r\n            if (typeof (filter) === \"undefined\"\r\n                || !(filterFn = stendhal.data.sprites.filter[filter])\r\n                || !img.complete || img.width === 0 || img.height === 0) {\r\n                return img;\r\n            }\r\n            const filteredName = fileName + \" \" + filter + \" \" + param;\r\n            let filtered = stendhal.data.sprites.images[filteredName];\r\n            if (typeof (filtered) === \"undefined\") {\r\n                const canvas = document.createElement(\"canvas\");\r\n                canvas.width = img.width;\r\n                canvas.height = img.height;\r\n                const ctx = canvas.getContext(\"2d\");\r\n                ctx.drawImage(img, 0, 0);\r\n                const imgData = ctx.getImageData(0, 0, img.width, img.height);\r\n                const data = imgData.data;\r\n                filterFn(data, param);\r\n                ctx.putImageData(imgData, 0, 0);\r\n                canvas.complete = true;\r\n                stendhal.data.sprites.images[filteredName] = filtered = canvas;\r\n            }\r\n            return filtered;\r\n        });\r\n    }\r\n    /**\r\n     * Retrieves a shadow sprite if the style is available.\r\n     *\r\n     * @param shadowStyle\r\n     *     Style of shadow to get from cache.\r\n     * @return\r\n     *     Image sprite or <code>undefined</code>.\r\n     */\r\n    getShadow(shadowStyle) {\r\n        if (this.knownShadows[shadowStyle]) {\r\n            const img = new Image();\r\n            img.src = Paths_1.Paths.sprites + \"/shadow/\" + shadowStyle + \".png\";\r\n            return img;\r\n        }\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Checks if there is a \"safe\" image available for sprite.\r\n     *\r\n     * @param filename\r\n     *     The sprite image base file path.\r\n     * @return\r\n     *     <code>true</code> if a known safe image is available.\r\n     */\r\n    hasSafeImage(filename) {\r\n        return this.knownSafeSprites[filename] == true;\r\n    }\r\n    /**\r\n     * Called at startup to pre-cache certain images.\r\n     */\r\n    startupCache() {\r\n        // tutorial profile\r\n        this.get(Paths_1.Paths.sprites + \"/npc/floattingladynpc.png\");\r\n        // achievement assets\r\n        this.get(Paths_1.Paths.gui + \"/banner_background.png\");\r\n        for (const cat of [\"commerce\", \"deathmatch\", \"experience\", \"fighting\", \"friend\",\r\n            \"interior_zone\", \"item\", \"obtain\", \"outside_zone\", \"production\", \"quest\",\r\n            \"quest_ados_items\", \"quest_kill_blordroughs\", \"quest_kirdneh_item\",\r\n            \"quest_mithrilbourgh_enemy_army\", \"quest_semos_monster\", \"special\",\r\n            \"underground_zone\"]) {\r\n            this.get(Paths_1.Paths.achievements + \"/\" + cat + \".png\");\r\n        }\r\n        // weather\r\n        for (const weather of [\"fog\", \"fog_heavy\", \"rain\", \"rain_heavy\",\r\n            \"rain_light\", \"snow\", \"snow_heavy\", \"snow_light\", \"wave\"]) {\r\n            this.get(Paths_1.Paths.weather + \"/\" + weather + \".png\");\r\n        }\r\n    }\r\n}\r\nexports.SpriteStore = SpriteStore;\r\n/**\r\n * Hidden class to create the singleton instance internally.\r\n */\r\nclass SpriteStoreInternal extends SpriteStore {\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!SpriteStoreInternal.instance) {\r\n            SpriteStoreInternal.instance = new SpriteStore();\r\n        }\r\n        return SpriteStoreInternal.instance;\r\n    }\r\n}\r\n// SpriteStore singleton instance\r\nexports.store = SpriteStoreInternal.get();\r\n// *** Image filters. Prevent the closure compiler from mangling the names. ***\r\nexports.store.filter['trueColor'] = function (data, color) {\r\n    var hslColor = stendhal.data.sprites.filter.rgb2hsl(stendhal.data.sprites.filter.splitrgb(color));\r\n    var end = data.length;\r\n    for (var i = 0; i < end; i += 4) {\r\n        var rgb = [data[i], data[i + 1], data[i + 2]];\r\n        var hsl = stendhal.data.sprites.filter.rgb2hsl(rgb);\r\n        // Adjust the brightness\r\n        var adj = hslColor[2] - 0.5; // [-0.5, 0.5]\r\n        var tmp = hsl[2] - 0.5; // [-0.5, 0.5]\r\n        // tweaks the middle lights either upward or downward, depending\r\n        // on if source lightness is high or low\r\n        var l = hsl[2] - 2.0 * adj * ((tmp * tmp) - 0.25);\r\n        var resultHsl = [hslColor[0], hslColor[1], l];\r\n        var resultRgb = stendhal.data.sprites.filter.hsl2rgb(resultHsl);\r\n        data[i] = resultRgb[0];\r\n        data[i + 1] = resultRgb[1];\r\n        data[i + 2] = resultRgb[2];\r\n    }\r\n};\r\n//# sourceMappingURL=SpriteStore.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HTMLManager = void 0;\r\n/**\r\n * HTML code manipulation.\r\n */\r\nclass HTMLManager {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!HTMLManager.instance) {\r\n            HTMLManager.instance = new HTMLManager();\r\n        }\r\n        return HTMLManager.instance;\r\n    }\r\n    esc(msg, filter = []) {\r\n        msg = msg.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/\\n/g, \"<br>\");\r\n        // restore filtered tags\r\n        for (const tag of filter) {\r\n            msg = msg.replace(\"&lt;\" + tag + \"&gt;\", \"<\" + tag + \">\")\r\n                .replace(\"&lt;/\" + tag + \"&gt;\", \"</\" + tag + \">\");\r\n        }\r\n        return msg;\r\n    }\r\n    extractKeyCode(e) {\r\n        if (e.which) {\r\n            return e.which;\r\n        }\r\n        else {\r\n            return e.keyCode;\r\n        }\r\n    }\r\n    niceName(s) {\r\n        if (!s) {\r\n            return \"\";\r\n        }\r\n        let temp = s.replace(/_/g, \" \").trim();\r\n        return temp.charAt(0).toUpperCase() + temp.slice(1);\r\n    }\r\n    extractPosition(event) {\r\n        let pos = event;\r\n        if (event.changedTouches) {\r\n            pos = {\r\n                pageX: Math.round(event.changedTouches[0].pageX),\r\n                pageY: Math.round(event.changedTouches[0].pageY),\r\n                target: event.changedTouches[0].target\r\n            };\r\n            pos.offsetX = pos.pageX - event.changedTouches[0].target.offsetLeft;\r\n            pos.offsetY = pos.pageY - event.changedTouches[0].target.offsetTop;\r\n        }\r\n        let canvas = event.target;\r\n        pos.canvasRelativeX = Math.round(pos.offsetX * canvas.width / canvas.clientWidth);\r\n        pos.canvasRelativeY = Math.round(pos.offsetY * canvas.height / canvas.clientHeight);\r\n        return pos;\r\n    }\r\n    formatTallyMarks(line) {\r\n        let tmp = line.split(\"<tally>\");\r\n        const pre = tmp[0];\r\n        tmp = tmp[1].split(\"</tally>\");\r\n        const post = tmp[1];\r\n        const count = parseInt(tmp[0].trim(), 10);\r\n        let tallyString = \"\";\r\n        if (count > 0) {\r\n            let t = 0;\r\n            for (let idx = 0; idx < count; idx++) {\r\n                t++;\r\n                if (t == 5) {\r\n                    tallyString += \"5\";\r\n                    t = 0;\r\n                }\r\n            }\r\n            if (t > 0) {\r\n                tallyString += t;\r\n            }\r\n        }\r\n        else {\r\n            tallyString = \"0\";\r\n        }\r\n        const tally = document.createElement(\"span\");\r\n        tally.className = \"tally\";\r\n        tally.textContent = tallyString;\r\n        return [pre, tally, post];\r\n    }\r\n}\r\nexports.HTMLManager = HTMLManager;\r\n//# sourceMappingURL=HTMLManager.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Inventory = void 0;\r\nclass Inventory {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.inventory = [];\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!Inventory.instance) {\r\n            Inventory.instance = new Inventory();\r\n        }\r\n        return Inventory.instance;\r\n    }\r\n    update() {\r\n        for (var i in this.inventory) {\r\n            this.inventory[i].update();\r\n        }\r\n    }\r\n    getInventory() {\r\n        return this.inventory;\r\n    }\r\n    add(comp) {\r\n        this.inventory.push(comp);\r\n    }\r\n    remove(comp) {\r\n        const idx = this.inventory.indexOf(comp);\r\n        if (idx > -1) {\r\n            this.inventory.splice(idx, 1);\r\n        }\r\n    }\r\n    removeIndex(idx) {\r\n        if (idx > -1 && idx < this.inventory.length) {\r\n            this.inventory.splice(idx, 1);\r\n        }\r\n    }\r\n    indexOf(comp) {\r\n        return this.inventory.indexOf(comp);\r\n    }\r\n}\r\nexports.Inventory = Inventory;\r\n//# sourceMappingURL=Inventory.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.KeyHandler = void 0;\r\nclass KeyHandler {\r\n    /**\r\n     * Static members & methods only.\r\n     */\r\n    constructor() {\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Checks if any direction key is currently pressed.\r\n     *\r\n     * @return\r\n     *     <code>true</code> if direction keycode found in pressed\r\n     *     keys list.\r\n     */\r\n    static isDirPressed() {\r\n        for (const dir of Object.keys(KeyHandler.keycode).map((key) => KeyHandler.keycode[key])) {\r\n            if (KeyHandler.pressedKeys.indexOf(dir) > -1) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    static extractMoveOrFaceActionFromEvent(event) {\r\n        if (event.ctrlKey) {\r\n            return \"face\";\r\n        }\r\n        else if (event.shiftKey) {\r\n            return null;\r\n        }\r\n        return \"move\";\r\n    }\r\n    static extractDirectionFromKeyCode(code) {\r\n        var dir = code - KeyHandler.keycode.left;\r\n        if (dir === 0) {\r\n            dir = 4;\r\n        }\r\n        return dir;\r\n    }\r\n    static onKeyDown(e) {\r\n        var event = e;\r\n        if (!event) {\r\n            event = window.event;\r\n        }\r\n        if (!event) {\r\n            return;\r\n        }\r\n        var code = stendhal.ui.html.extractKeyCode(event);\r\n        if (code >= KeyHandler.keycode.left && code <= KeyHandler.keycode.down) {\r\n            // disable scrolling via arrow keys\r\n            const target = event.target;\r\n            if (target.tagName === \"BODY\" || target.tagName === \"CANVAS\") {\r\n                event.preventDefault();\r\n            }\r\n            // if this is a repeated event, stop further processing\r\n            if (KeyHandler.pressedKeys.indexOf(code) > -1) {\r\n                return;\r\n            }\r\n            KeyHandler.pressedKeys.push(code);\r\n            var type = KeyHandler.extractMoveOrFaceActionFromEvent(event);\r\n            if (!type) {\r\n                return;\r\n            }\r\n            var dir = KeyHandler.extractDirectionFromKeyCode(code);\r\n            var action = { \"type\": type, \"dir\": \"\" + dir };\r\n            marauroa.clientFramework.sendAction(action);\r\n            // stop walking if keypress in direction of current movement\r\n            if (marauroa.me && marauroa.me.autoWalkEnabled()) {\r\n                if (parseInt(marauroa.me[\"dir\"], 10) === dir) {\r\n                    marauroa.clientFramework.sendAction({ \"type\": \"walk\" });\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // move focus to chat-input on keydown\r\n            // but don't do that for Ctrl+C, etc.\r\n            if (!event.altKey && !event.metaKey && !event.ctrlKey && event.key !== \"Control\") {\r\n                if (document.activeElement && document.activeElement.localName !== \"input\") {\r\n                    document.getElementById(\"chatinput\").focus();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    static onKeyUp(e) {\r\n        var event = e;\r\n        if (!event) {\r\n            event = window.event;\r\n        }\r\n        if (!event) {\r\n            return;\r\n        }\r\n        var code = stendhal.ui.html.extractKeyCode(event);\r\n        if (code >= KeyHandler.keycode.left && code <= KeyHandler.keycode.down) {\r\n            var i = KeyHandler.pressedKeys.indexOf(code);\r\n            if (i > -1) {\r\n                KeyHandler.pressedKeys.splice(i, 1);\r\n            }\r\n            var action = {};\r\n            if (!KeyHandler.isDirPressed()) {\r\n                action[\"type\"] = \"stop\";\r\n                marauroa.clientFramework.sendAction(action);\r\n            }\r\n            if (KeyHandler.pressedKeys.length > 0) {\r\n                code = KeyHandler.pressedKeys[0];\r\n                var type = KeyHandler.extractMoveOrFaceActionFromEvent(event);\r\n                if (!type) {\r\n                    return;\r\n                }\r\n                var dir = KeyHandler.extractDirectionFromKeyCode(code);\r\n                action[\"type\"] = type;\r\n                action[\"dir\"] = \"\" + dir;\r\n                marauroa.clientFramework.sendAction(action);\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.KeyHandler = KeyHandler;\r\nKeyHandler.keycode = {\r\n    left: 37,\r\n    up: 38,\r\n    right: 39,\r\n    down: 40\r\n};\r\nKeyHandler.pressedKeys = [];\r\n//# sourceMappingURL=KeyHandler.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RPObject = void 0;\r\n/**\r\n * base class for RPObjects\r\n */\r\nclass RPObject {\r\n    onEvent(e) {\r\n        var event = marauroa.rpeventFactory.create(e[\"c\"]);\r\n        for (var i in e[\"a\"]) {\r\n            if (e[\"a\"].hasOwnProperty(i)) {\r\n                event[i] = e[\"a\"][i];\r\n            }\r\n            event[\"_rpclass\"] = e[\"c\"];\r\n        }\r\n        // Event slots\r\n        for (var slot in e[\"s\"]) {\r\n            if (e[\"s\"].hasOwnProperty(slot)) {\r\n                event[slot] = e[\"s\"][slot];\r\n            }\r\n        }\r\n        event.execute(this);\r\n    }\r\n    set(key, value) {\r\n        this[key] = value;\r\n    }\r\n    setMapEntry(map, key, value) {\r\n        this[map][key] = value;\r\n    }\r\n    unset(key) {\r\n        delete this[key];\r\n    }\r\n    unsetMapEntry(map, key) {\r\n        delete this[map][key];\r\n    }\r\n    destroy(_parent) {\r\n        // do nothing\r\n    }\r\n    createSlot(name) {\r\n        var slot = marauroa.rpslotFactory.create(name);\r\n        slot._parent = this;\r\n        return slot;\r\n    }\r\n    init() {\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves object width.\r\n     */\r\n    getWidth() {\r\n        return this[\"width\"] || 1;\r\n    }\r\n    /**\r\n     * Retrieves object height.\r\n     */\r\n    getHeight() {\r\n        return this[\"height\"] || 1;\r\n    }\r\n    /**\r\n     * Checks if this object is nested.\r\n     */\r\n    isContained() {\r\n        return this._parent !== undefined;\r\n    }\r\n    /**\r\n     * Retrieves the parent object.\r\n     */\r\n    getContainer() {\r\n        return this._parent;\r\n    }\r\n}\r\nexports.RPObject = RPObject;\r\n//# sourceMappingURL=RPObject.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Entity = void 0;\r\nconst Chat_1 = require(\"../util/Chat\");\r\nconst RPObject_1 = require(\"./RPObject\");\r\n/**\r\n * General entity\r\n */\r\nclass Entity extends RPObject_1.RPObject {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.minimapShow = false;\r\n        this.minimapStyle = \"rgb(200,255,200)\";\r\n        this.zIndex = 10000;\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === 'name') {\r\n            if (typeof (this['title']) === \"undefined\") {\r\n                this['title'] = value;\r\n            }\r\n            this[\"_name\"] = value;\r\n        }\r\n        else if (['x', 'y', 'height', 'width'].indexOf(key) > -1) {\r\n            this[key] = parseInt(value, 10);\r\n        }\r\n        else {\r\n            this[key] = value;\r\n        }\r\n    }\r\n    /**\r\n     * is the other entity next to this entity?\r\n     *\r\n     * @return true, if the other entity is right next to us; false otherwise\r\n     */\r\n    isNextTo(other) {\r\n        if (!other || !this[\"x\"] || !this[\"y\"] || !other[\"x\"] || !other[\"y\"]) {\r\n            return false;\r\n        }\r\n        var nextX = ((this[\"x\"] + this[\"width\"] >= other[\"x\"]) && this[\"x\"] <= other[\"x\"])\r\n            || ((other[\"x\"] + other[\"width\"] >= this[\"x\"]) && other[\"x\"] <= this[\"x\"]);\r\n        if (!nextX) {\r\n            return false;\r\n        }\r\n        var nextY = ((this[\"y\"] + this[\"height\"] >= other[\"y\"]) && this[\"y\"] <= other[\"y\"])\r\n            || ((other[\"y\"] + other[\"height\"] >= this[\"y\"]) && other[\"y\"] <= this[\"y\"]);\r\n        return nextY;\r\n    }\r\n    /**\r\n     * Finds distance to another object on the X axis.\r\n     *\r\n     * @param other\r\n     *     The object to measure against.\r\n     * @return\r\n     *     Distance in steps or -1.\r\n     */\r\n    getXDistanceTo(other) {\r\n        if (other && this[\"x\"] && other[\"x\"]) {\r\n            const tx_right = this[\"x\"] + (this[\"width\"] || 1) - 1;\r\n            const ox_right = other[\"x\"] + (other[\"width\"] || 1) - 1;\r\n            if (this[\"x\"] > ox_right) {\r\n                return Math.abs(this[\"x\"] - ox_right);\r\n            }\r\n            else if (other[\"x\"] > tx_right) {\r\n                return Math.abs(other[\"x\"] - tx_right);\r\n            }\r\n            return 0;\r\n        }\r\n        return -1;\r\n    }\r\n    /**\r\n     * Finds distance to another object on the Y axis.\r\n     *\r\n     * @param other\r\n     *     The object to measure against.\r\n     * @return\r\n     *     Distance in steps or -1.\r\n     */\r\n    getYDistanceTo(other) {\r\n        if (other && this[\"y\"] && other[\"y\"]) {\r\n            const ty_bottom = this[\"y\"] + (this[\"height\"] || 1) - 1;\r\n            const oy_bottom = other[\"y\"] + (other[\"height\"] || 1) - 1;\r\n            if (this[\"y\"] > oy_bottom) {\r\n                return Math.abs(this[\"y\"] - oy_bottom);\r\n            }\r\n            else if (other[\"y\"] > ty_bottom) {\r\n                return Math.abs(other[\"y\"] - ty_bottom);\r\n            }\r\n            return 0;\r\n        }\r\n        return -1;\r\n    }\r\n    /**\r\n     * Finds the combined distance on the X & Y axi to\r\n     * another object.\r\n     *\r\n     * @param other\r\n     *     The object to measure against.\r\n     * @return\r\n     *     Distance in steps or -1.\r\n     */\r\n    getDistanceTo(other) {\r\n        let x_dist = this.getXDistanceTo(other);\r\n        let y_dist = this.getYDistanceTo(other);\r\n        if (x_dist < 0 && y_dist < 0) {\r\n            return -1;\r\n        }\r\n        x_dist = x_dist > -1 ? x_dist : 0;\r\n        y_dist = y_dist > -1 ? y_dist : 0;\r\n        return x_dist + y_dist;\r\n    }\r\n    /**\r\n     * is this entity visible to a specific action\r\n     *\r\n     * @param filter 0: short left click\r\n     * @return true, if the entity is visible, false otherwise\r\n     */\r\n    isVisibleToAction(filter) {\r\n        return false;\r\n    }\r\n    /**\r\n     * Map descriptive command names to the real commands\r\n     */\r\n    actionAliasToAction(actionAlias) {\r\n        var actionAliases = {\r\n            \"look_closely\": \"use\",\r\n            \"read\": \"look\"\r\n        };\r\n        var actionCommand = \"look\";\r\n        if (typeof (actionAlias) === \"string\") {\r\n            if (actionAliases.hasOwnProperty(actionAlias)) {\r\n                actionCommand = actionAliases[actionAlias];\r\n            }\r\n            else {\r\n                actionCommand = actionAlias;\r\n            }\r\n        }\r\n        return actionCommand;\r\n    }\r\n    buildActions(list) {\r\n        // menu is an alias for \"Use\" command\r\n        if (this[\"menu\"]) {\r\n            var pos = this[\"menu\"].indexOf(\"|\");\r\n            list.push({\r\n                title: this[\"menu\"].substring(0, pos),\r\n                type: this[\"menu\"].substring(pos + 1).toLowerCase()\r\n            });\r\n        }\r\n        // action replaces \"Look\" command (e. g. \"look closely\" on signs)\r\n        if (this[\"action\"]) {\r\n            list.push({\r\n                title: stendhal.ui.html.niceName(this[\"action\"]),\r\n                type: this.actionAliasToAction(this[\"action\"])\r\n            });\r\n        }\r\n        else {\r\n            list.push({\r\n                title: \"Look\",\r\n                type: \"look\"\r\n            });\r\n        }\r\n    }\r\n    onMiniMapDraw() {\r\n        // do nothing\r\n    }\r\n    /**\r\n     *  Ensure that the drawing code can rely on _x and _y\r\n     */\r\n    updatePosition(time) {\r\n        // The position of non active entities can change too, so always copy\r\n        // the position\r\n        this[\"_y\"] = this[\"y\"];\r\n        this[\"_x\"] = this[\"x\"];\r\n    }\r\n    draw(ctx) {\r\n        if (this.sprite) {\r\n            this.drawSprite(ctx);\r\n        }\r\n    }\r\n    /**\r\n     * draws a standard sprite\r\n     */\r\n    drawSprite(ctx) {\r\n        this.drawSpriteAt(ctx, this[\"x\"] * 32, this[\"y\"] * 32);\r\n    }\r\n    drawSpriteAt(ctx, x, y) {\r\n        var image = stendhal.data.sprites.get(this.sprite.filename);\r\n        if (image.height) {\r\n            var offsetX = this.sprite.offsetX || 0;\r\n            var offsetY = this.sprite.offsetY || 0;\r\n            var width = this.sprite.width || image.width;\r\n            var height = this.sprite.height || image.height;\r\n            // use entity dimensions to center sprite\r\n            x += Math.floor((this.getWidth() * 32 - width) / 2);\r\n            y += Math.floor((this.getHeight() * 32 - height) / 2);\r\n            ctx.drawImage(image, offsetX, offsetY, width, height, x, y, width, height);\r\n        }\r\n    }\r\n    /**\r\n     * gets the container path identifying the item\r\n     *\r\n     * @returns\r\n     */\r\n    getIdPath() {\r\n        var object = this;\r\n        var res = \"\";\r\n        while (object) {\r\n            res = object[\"id\"] + \"\\t\" + res;\r\n            var slot = object._parent;\r\n            if (!slot) {\r\n                break;\r\n            }\r\n            res = slot._name + \"\\t\" + res;\r\n            object = slot._parent;\r\n        }\r\n        return \"[\" + res.substr(0, res.length - 1) + \"]\";\r\n    }\r\n    /**\r\n     * says a text\r\n     *\r\n     * @param text\r\n     *     Message contents.\r\n     * @param rangeSquared\r\n     *     Distance squared within which the entity can be heard (-1\r\n     *     represents entire map).\r\n     */\r\n    say(text, rangeSquared) {\r\n        if (marauroa.me && marauroa.me.isInHearingRange(this, rangeSquared)) {\r\n            Chat_1.Chat.log(\"normal\", text);\r\n        }\r\n    }\r\n    getCursor(x, y) {\r\n        var cursor = \"unknown\";\r\n        if (this[\"cursor\"]) {\r\n            cursor = this[\"cursor\"];\r\n        }\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/\" + cursor.toLowerCase().replace(\"_\", \"\") + \".png) 1 3, auto\";\r\n    }\r\n    /**\r\n     * Create the default action for this entity. If the entity specifies a\r\n     * default action description, interpret it as an action command.\r\n     */\r\n    getDefaultAction() {\r\n        return {\r\n            \"type\": this.actionAliasToAction(this[\"action\"]),\r\n            \"target\": \"#\" + this[\"id\"],\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n    }\r\n    getResistance() {\r\n        return this[\"resistance\"];\r\n    }\r\n    isObstacle(entity) {\r\n        return ((entity != this)\r\n            && (this.getResistance() * (entity.getResistance() / 100) > 95));\r\n    }\r\n    onclick(x, y) {\r\n        marauroa.clientFramework.sendAction(this.getDefaultAction());\r\n    }\r\n    /**\r\n     * Checks if this is an entity that can be moved via\r\n     * drag-and-drop, such as a corpse or an item.\r\n     */\r\n    isDraggable() {\r\n        return false;\r\n    }\r\n    /**\r\n     * Checks if within vieport area.\r\n     */\r\n    inView() {\r\n        const view_rect = {};\r\n        view_rect.left = stendhal.ui.gamewindow.offsetX;\r\n        view_rect.right = view_rect.left + stendhal.ui.gamewindow.width;\r\n        view_rect.top = stendhal.ui.gamewindow.offsetY;\r\n        view_rect.bottom = view_rect.top + stendhal.ui.gamewindow.height;\r\n        const pixelX = this[\"x\"] * stendhal.ui.gamewindow.targetTileWidth\r\n            + Math.floor(stendhal.ui.gamewindow.targetTileWidth / 2);\r\n        const pixelY = this[\"y\"] * stendhal.ui.gamewindow.targetTileHeight\r\n            + Math.floor(stendhal.ui.gamewindow.targetTileHeight / 2);\r\n        const ent_rect = {};\r\n        // horizontal orientation is centered\r\n        ent_rect.left = pixelX - (this[\"drawWidth\"] / 2);\r\n        ent_rect.right = pixelX + (this[\"drawWidth\"] / 2);\r\n        // FIXME: vertical orientation should be offset using entity height & sprite height?\r\n        ent_rect.bottom = pixelY;\r\n        ent_rect.top = ent_rect.bottom - this[\"drawHeight\"];\r\n        return ent_rect.right > view_rect.left && ent_rect.left < view_rect.right\r\n            && ent_rect.bottom > view_rect.top && ent_rect.top < view_rect.bottom;\r\n    }\r\n}\r\nexports.Entity = Entity;\r\n//# sourceMappingURL=Entity.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.InvisibleEntity = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass InvisibleEntity extends Entity_1.Entity {\r\n    isVisibleToAction(_filter) {\r\n        return false;\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/walk.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.InvisibleEntity = InvisibleEntity;\r\n//# sourceMappingURL=InvisibleEntity.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LoopedSoundSource = void 0;\r\nconst InvisibleEntity_1 = require(\"./InvisibleEntity\");\r\nconst LoopedSoundSourceManager_1 = require(\"../ui/LoopedSoundSourceManager\");\r\nclass LoopedSoundSource extends InvisibleEntity_1.InvisibleEntity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.lssMan = LoopedSoundSourceManager_1.LoopedSoundSourceManager.get();\r\n    }\r\n    /**\r\n     * Checks if a looped sound source has been loaded with this\r\n     * entity's ID.\r\n     *\r\n     * @return\r\n     *     <code>true</code> if the ID is found in the sources list.\r\n     */\r\n    isLoaded() {\r\n        return typeof (this.lssMan.getSources()[this[\"id\"]]) !== \"undefined\";\r\n    }\r\n}\r\nexports.LoopedSoundSource = LoopedSoundSource;\r\n//# sourceMappingURL=LoopedSoundSource.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LoopedSoundSourceManager = void 0;\r\nconst SoundManager_1 = require(\"./SoundManager\");\r\nconst LoopedSoundSource_1 = require(\"../entity/LoopedSoundSource\");\r\n// server doesn't distinguish between music & looped sound effects so we\r\n// need make some mappings to tell client which directory to use\r\nconst sfxLoops = {\r\n    \"clock-1\": true,\r\n    \"fire-1\": true,\r\n    \"sleep-1\": true\r\n};\r\nclass LoopedSoundSourceManager {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.sndMan = SoundManager_1.SoundManager.get();\r\n        this.sources = {};\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     *\r\n     * @return\r\n     *     LoopedSoundSourceManager.\r\n     */\r\n    static get() {\r\n        if (!LoopedSoundSourceManager.instance) {\r\n            LoopedSoundSourceManager.instance = new LoopedSoundSourceManager();\r\n        }\r\n        return LoopedSoundSourceManager.instance;\r\n    }\r\n    /**\r\n     * Determines whether sound file should be opened from music or sounds\r\n     * directory.\r\n     */\r\n    isMusic(filename) {\r\n        return !filename.startsWith(\"loop/\")\r\n            && !filename.startsWith(\"weather/\")\r\n            && !sfxLoops[filename];\r\n    }\r\n    /**\r\n     * Retrieves the looped sound sources for the current zone.\r\n     *\r\n     * @return\r\n     *     Sound sources.\r\n     */\r\n    getSources() {\r\n        return this.sources;\r\n    }\r\n    /**\r\n     * Adds a new looped sound source to be played.\r\n     *\r\n     * @param source\r\n     *     Sound source.\r\n     * @return\r\n     *     <code>true</code> if addition succeeded.\r\n     */\r\n    addSource(source) {\r\n        const id = source[\"id\"];\r\n        if (!marauroa.me) {\r\n            console.warn(\"tried to add looped sound source with ID '\" + id + \"' before player was ready\");\r\n            return false;\r\n        }\r\n        if (this.sources[id]) {\r\n            console.warn(\"tried to add looped sound source with existing ID '\" + id + \"'\");\r\n            return true;\r\n        }\r\n        let snd;\r\n        const layer = source[\"layer\"];\r\n        if (this.isMusic(source[\"sound\"])) {\r\n            snd = this.sndMan.playLocalizedMusic(source[\"x\"], source[\"y\"], source[\"radius\"], layer, source[\"sound\"], source[\"volume\"]);\r\n        }\r\n        else {\r\n            snd = this.sndMan.playLocalizedLoop(source[\"x\"], source[\"y\"], source[\"radius\"], layer, source[\"sound\"], source[\"volume\"]);\r\n        }\r\n        if (!snd) {\r\n            console.error(\"failed to add looped sound source with ID '\" + id + \"'\");\r\n            return false;\r\n        }\r\n        this.sources[id] = { layer: layer, sound: snd };\r\n        return true;\r\n    }\r\n    /**\r\n     * Removes a currently playing sound source.\r\n     *\r\n     * @param id\r\n     *     Sound source identifier.\r\n     * @return\r\n     *     <code>true</code> if removal succeeded.\r\n     */\r\n    removeSource(id) {\r\n        const source = this.sources[id];\r\n        if (typeof (source) === \"undefined\") {\r\n            console.warn(\"tried to remove unknown looped sound source with ID '\" + id + \"'\");\r\n            return true;\r\n        }\r\n        // FIXME: doesn't always delete reference\r\n        delete this.sources[id];\r\n        const errmsg = [];\r\n        if (!this.sndMan.stop(source.layer, source.sound)) {\r\n            errmsg.push(\"failed to stop looped sound source with ID '\" + id + \"' (\"\r\n                + source.sound.src + \")\");\r\n        }\r\n        if (this.sources[id]) {\r\n            errmsg.push(\"failed to remove looped sound source with ID '\" + id + \"' (\"\r\n                + source.sound.src + \")\");\r\n        }\r\n        if (errmsg.length > 0) {\r\n            for (const msg of errmsg) {\r\n                console.error(msg);\r\n            }\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Stops all playing looped sounds.\r\n     *\r\n     * FIXME: not all sounds stopped/removed\r\n     *\r\n     * @return\r\n     *     <code>true</code> if the sources list is empty & all removed\r\n     *     sources returned successful.\r\n     */\r\n    removeAll() {\r\n        let removed = true;\r\n        for (const id in this.sources) {\r\n            removed = removed && this.removeSource(id);\r\n        }\r\n        // FIXME: not all sounds being removed\r\n        if (!removed) {\r\n            this.sources = {};\r\n        }\r\n        return Object.keys(this.sources).length == 0;\r\n    }\r\n    /**\r\n     * Retrieves a list of looped sound sources.\r\n     *\r\n     * @return\r\n     *     All <code>LoopedSoundSource</code> entities in current zone.\r\n     */\r\n    getZoneEntities() {\r\n        const ents = [];\r\n        if (stendhal.zone.entities) {\r\n            for (const ent of stendhal.zone.entities) {\r\n                if (ent instanceof LoopedSoundSource_1.LoopedSoundSource) {\r\n                    ents.push(ent);\r\n                }\r\n            }\r\n        }\r\n        return ents;\r\n    }\r\n    /**\r\n     * This is called after zone is created to make sure looped sound\r\n     * sources are added properly.\r\n     */\r\n    onZoneReady() {\r\n        for (const ent of this.getZoneEntities()) {\r\n            if (!ent.isLoaded()) {\r\n                this.addSource(ent);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Adjusts volume level for each looped sound source in current zone.\r\n     *\r\n     * @param x\r\n     *     The new X coordinate of listening entity.\r\n     * @param y\r\n     *     The new Y coordinate of listening entity.\r\n     */\r\n    onDistanceChanged(x, y) {\r\n        for (const ent of this.getZoneEntities()) {\r\n            if (ent.isLoaded()) {\r\n                const layername = this.sndMan.getLayerName(ent[\"layer\"]);\r\n                const snd = this.sources[ent[\"id\"]].sound;\r\n                this.sndMan.adjustForDistance(layername, snd, ent[\"radius\"], ent[\"x\"], ent[\"y\"], x, y);\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.LoopedSoundSourceManager = LoopedSoundSourceManager;\r\n//# sourceMappingURL=LoopedSoundSourceManager.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TouchHandler = void 0;\r\nclass TouchHandler {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.touchEngaged = false;\r\n        this.longTouchDuration = 300;\r\n        this.timestampTouchStart = 0;\r\n        this.timestampTouchEnd = 0;\r\n        // location when touch event began\r\n        this.origin = undefined;\r\n        this.moveThreshold = 16;\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!TouchHandler.instance) {\r\n            TouchHandler.instance = new TouchHandler();\r\n        }\r\n        return TouchHandler.instance;\r\n    }\r\n    /**\r\n     * Checks for touch event.\r\n     */\r\n    isTouchEvent(evt) {\r\n        return window[\"TouchEvent\"] && evt instanceof TouchEvent;\r\n    }\r\n    /**\r\n     * Sets timestamp when touch applied.\r\n     */\r\n    onTouchStart(x, y) {\r\n        this.timestampTouchStart = +new Date();\r\n        this.touchEngaged = true;\r\n        this.origin = { x: x, y: y };\r\n    }\r\n    /**\r\n     * Sets timestamp when touch released.\r\n     */\r\n    onTouchEnd() {\r\n        this.timestampTouchEnd = +new Date();\r\n        this.touchEngaged = false;\r\n    }\r\n    /**\r\n     * Can be used to detect if a mouse event was triggered by touch.\r\n     */\r\n    isTouchEngaged() {\r\n        return this.touchEngaged;\r\n    }\r\n    /**\r\n     * Checks if a touch event represents a long touch after release.\r\n     */\r\n    isLongTouch(evt) {\r\n        if (evt && !this.isTouchEvent(evt)) {\r\n            return false;\r\n        }\r\n        const durationMatch = (this.timestampTouchEnd - this.timestampTouchStart > this.longTouchDuration);\r\n        let positionMatch = true;\r\n        if (evt && this.origin) {\r\n            const pos = stendhal.ui.html.extractPosition(evt);\r\n            // if position has moved too much it's not a long touch\r\n            positionMatch = (Math.abs(pos.pageX - this.origin.x) <= this.moveThreshold)\r\n                && (Math.abs(pos.pageY - this.origin.y) <= this.moveThreshold);\r\n        }\r\n        return durationMatch && positionMatch;\r\n    }\r\n    /**\r\n     * Sets information for a held item representation.\r\n     *\r\n     * @param img\r\n     *     Sprite <code>Image</code> to be drawn.\r\n     */\r\n    setHeldItem(img) {\r\n        this.held = {\r\n            image: img,\r\n            offsetX: document.getElementById(\"gamewindow\").offsetWidth - 32,\r\n            offsetY: 0\r\n        };\r\n    }\r\n    /**\r\n     * Clears information for a held item representation.\r\n     */\r\n    unsetHeldItem() {\r\n        this.held = undefined;\r\n    }\r\n    unsetOrigin() {\r\n        this.origin = undefined;\r\n    }\r\n    /**\r\n     * Checks if there is currently an item being held.\r\n     */\r\n    holdingItem() {\r\n        return this.held != undefined && this.held != null;\r\n    }\r\n    /**\r\n     * Draws representation of a held item.\r\n     *\r\n     * @param ctx\r\n     *     Canvas context where representation is drawn.\r\n     */\r\n    drawHeld(ctx) {\r\n        ctx.globalAlpha = 0.5;\r\n        ctx.drawImage(this.held.image, this.held.offsetX + stendhal.ui.gamewindow.offsetX, this.held.offsetY + stendhal.ui.gamewindow.offsetY);\r\n        ctx.globalAlpha = 1.0;\r\n    }\r\n}\r\nexports.TouchHandler = TouchHandler;\r\n//# sourceMappingURL=TouchHandler.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.JoystickBase = void 0;\r\n/**\r\n * Joystick implementation that does nothing. Used when joystick should not be drawn on-screen.\r\n *\r\n * FIXME: joysticks should be drawn under dialog windows\r\n */\r\nclass JoystickBase {\r\n    constructor() {\r\n        this.radius = 0;\r\n        // last executed direction\r\n        this.direction = 0;\r\n    }\r\n    reset() {\r\n        // do nothing\r\n    }\r\n    onRemoved() {\r\n        // do nothing\r\n    }\r\n    getResource(res) {\r\n        return stendhal.paths.gui + \"/joystick/\" + res + \".png\";\r\n    }\r\n    getCenterX() {\r\n        return stendhal.config.getInt(\"ui.joystick.center.x\", 224);\r\n    }\r\n    getCenterY() {\r\n        return stendhal.config.getInt(\"ui.joystick.center.y\", 384);\r\n    }\r\n    checkActionEvent(e) {\r\n        if (e instanceof MouseEvent && e.button == 0) {\r\n            return true;\r\n        }\r\n        if (e instanceof TouchEvent) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    onDirectionChange(dir) {\r\n        this.direction = dir;\r\n        if (this.direction > 0 && this.direction < 5) {\r\n            marauroa.clientFramework.sendAction({ type: \"move\", dir: \"\" + this.direction });\r\n        }\r\n        else {\r\n            marauroa.clientFramework.sendAction({ type: \"stop\" });\r\n        }\r\n    }\r\n}\r\nexports.JoystickBase = JoystickBase;\r\n//# sourceMappingURL=JoystickBase.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DirectionPad = void 0;\r\nconst JoystickBase_1 = require(\"./JoystickBase\");\r\nclass DirectionPad extends JoystickBase_1.JoystickBase {\r\n    constructor() {\r\n        super();\r\n        // create a temporary image to set radius\r\n        const tmp = new Image();\r\n        tmp.onload = () => {\r\n            // radius must be larger than button size as we cannot detect transparent pixels\r\n            this.radius = tmp.width * 1.25;\r\n            this.onInit();\r\n        };\r\n        tmp.src = this.getResource(\"dpad_button\");\r\n        this.up = new Image();\r\n        this.down = new Image();\r\n        this.left = new Image();\r\n        this.right = new Image();\r\n    }\r\n    onInit() {\r\n        const center_x = this.getCenterX();\r\n        const center_y = this.getCenterY();\r\n        const container = document.getElementById(\"joystick-container\");\r\n        // positioning\r\n        this.up.onload = () => {\r\n            this.up.style.left = (center_x - (this.up.width / 2)) + \"px\";\r\n            this.up.style.top = (center_y - this.radius) + \"px\";\r\n            // add to DOM\r\n            container.appendChild(this.up);\r\n            // remove listener\r\n            this.up.onload = null;\r\n        };\r\n        this.down.onload = () => {\r\n            this.down.style.left = (center_x - (this.down.width / 2)) + \"px\";\r\n            this.down.style.top = (center_y + this.radius - this.down.height) + \"px\";\r\n            // add to DOM\r\n            container.appendChild(this.down);\r\n            // remove listener\r\n            this.down.onload = null;\r\n        };\r\n        this.left.onload = () => {\r\n            this.left.style.left = (center_x - this.radius) + \"px\";\r\n            this.left.style.top = (center_y - (this.left.height / 2)) + \"px\";\r\n            // add to DOM\r\n            container.appendChild(this.left);\r\n            // remove listener\r\n            this.left.onload = null;\r\n        };\r\n        this.right.onload = () => {\r\n            this.right.style.left = (center_x + this.radius - this.right.width) + \"px\";\r\n            this.right.style.top = (center_y - (this.right.height / 2)) + \"px\";\r\n            // add to DOM\r\n            container.appendChild(this.right);\r\n            // remove listener\r\n            this.right.onload = null;\r\n        };\r\n        for (const dimg of [this.up, this.down, this.left, this.right]) {\r\n            dimg.style.position = \"absolute\";\r\n            dimg.draggable = false;\r\n            dimg.addEventListener(\"mousedown\", (e) => {\r\n                this.onMouseDown(e);\r\n            });\r\n            dimg.addEventListener(\"touchstart\", (e) => {\r\n                this.onMouseDown(e);\r\n            });\r\n            // note \"mouseup\" is handled globally in the body element (see Client.ts)\r\n            dimg.addEventListener(\"touchend\", (e) => {\r\n                this.onMouseUp(e);\r\n            });\r\n        }\r\n        this.reset();\r\n    }\r\n    onMouseDown(e) {\r\n        if (!this.checkActionEvent(e)) {\r\n            return;\r\n        }\r\n        let new_direction = 0;\r\n        switch (e.target) {\r\n            case this.up:\r\n                this.up.src = this.getResource(\"dpad_button_active\");\r\n                new_direction = 1;\r\n                break;\r\n            case this.right:\r\n                this.right.src = this.getResource(\"dpad_button_active\");\r\n                this.right.style[\"transform\"] = \"rotate(90deg)\";\r\n                new_direction = 2;\r\n                break;\r\n            case this.down:\r\n                this.down.src = this.getResource(\"dpad_button_active\");\r\n                this.down.style[\"transform\"] = \"rotate(180deg)\";\r\n                new_direction = 3;\r\n                break;\r\n            case this.left:\r\n                this.left.src = this.getResource(\"dpad_button_active\");\r\n                this.left.style[\"transform\"] = \"rotate(-90deg)\";\r\n                new_direction = 4;\r\n                break;\r\n        }\r\n        if (new_direction != this.direction) {\r\n            this.onDirectionChange(new_direction);\r\n        }\r\n    }\r\n    onMouseUp(e) {\r\n        if (!this.checkActionEvent(e)) {\r\n            return;\r\n        }\r\n        this.reset();\r\n    }\r\n    reset() {\r\n        // reset images\r\n        this.up.src = this.getResource(\"dpad_button\");\r\n        this.down.src = this.getResource(\"dpad_button\");\r\n        this.down.style[\"transform\"] = \"rotate(180deg)\";\r\n        this.left.src = this.getResource(\"dpad_button\");\r\n        this.left.style[\"transform\"] = \"rotate(-90deg)\";\r\n        this.right.src = this.getResource(\"dpad_button\");\r\n        this.right.style[\"transform\"] = \"rotate(90deg)\";\r\n        if (this.direction != 0) {\r\n            // stop movement\r\n            this.onDirectionChange(0);\r\n        }\r\n    }\r\n    onRemoved() {\r\n        // remove from DOM\r\n        const container = document.getElementById(\"joystick-container\");\r\n        for (const dimg of [this.up, this.down, this.left, this.right]) {\r\n            if (container.contains(dimg)) {\r\n                container.removeChild(dimg);\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.DirectionPad = DirectionPad;\r\n//# sourceMappingURL=DirectionPad.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Joystick = void 0;\r\nconst JoystickBase_1 = require(\"./JoystickBase\");\r\nclass Joystick extends JoystickBase_1.JoystickBase {\r\n    constructor() {\r\n        super();\r\n        this.engaged = false;\r\n        this.outer = new Image();\r\n        this.inner = new Image();\r\n        const container = document.getElementById(\"joystick-container\");\r\n        for (const jimg of [this.outer, this.inner]) {\r\n            jimg.style.position = \"absolute\";\r\n            jimg.draggable = false;\r\n            // add to DOM\r\n            container.appendChild(jimg);\r\n            // listen for activation events\r\n            for (const etype of [\"mousedown\", \"touchstart\"]) {\r\n                jimg.addEventListener(etype, (e) => {\r\n                    this.onMouseDown(e);\r\n                });\r\n            }\r\n            // note \"mouseup\" is handled globally in the body element (see Client.ts)\r\n            jimg.addEventListener(\"touchend\", (e) => {\r\n                this.onMouseUp(e);\r\n            });\r\n            for (const etype of [\"mousemove\", \"touchmove\"]) {\r\n                // must be added to outer in case movement is too fast to be caught by inner\r\n                jimg.addEventListener(etype, (e) => {\r\n                    if (e.type === \"mousemove\" && !this.engaged) {\r\n                        // prevent movement if mouse button not pressed\r\n                        return;\r\n                    }\r\n                    this.onMouseDown(e);\r\n                });\r\n            }\r\n        }\r\n        // update layout after outer image has loaded\r\n        this.outer.onload = () => {\r\n            // remove listener\r\n            this.outer.onload = null;\r\n            this.onInit();\r\n        };\r\n        this.outer.src = this.getResource(\"joystick_outer\");\r\n    }\r\n    onInit() {\r\n        this.radius = Math.floor(this.outer.width / 2);\r\n        // set position of outer joystick\r\n        this.outer.style.left = (this.getCenterX() - this.radius) + \"px\";\r\n        this.outer.style.top = (this.getCenterY() - this.radius) + \"px\";\r\n        this.reset();\r\n    }\r\n    onMouseDown(e) {\r\n        if (!this.checkActionEvent(e)) {\r\n            return;\r\n        }\r\n        this.engaged = true;\r\n        this.inner.src = this.getResource(\"joystick_inner_active\");\r\n        const pos = stendhal.ui.html.extractPosition(e);\r\n        // update inner button position\r\n        this.updateInner(pos.pageX, pos.pageY);\r\n        const new_direction = this.getPressedDirection();\r\n        if (new_direction != this.direction) {\r\n            this.onDirectionChange(new_direction);\r\n        }\r\n    }\r\n    onMouseUp(e) {\r\n        if (!this.checkActionEvent(e)) {\r\n            return;\r\n        }\r\n        this.reset();\r\n    }\r\n    /**\r\n     * Retrieves the interpreted direction of joystick's state.\r\n     */\r\n    getPressedDirection() {\r\n        let dir = 0;\r\n        // FIXME: need a smarter algorithm for detecting direction based on position of inner circle\r\n        //        relative to center of outer\r\n        const rect = this.inner.getBoundingClientRect();\r\n        const oCenterX = this.getCenterX(), oCenterY = this.getCenterY();\r\n        const iCenterX = rect.left + Math.floor(this.inner.width / 2);\r\n        const iCenterY = rect.top + Math.floor(this.inner.height / 2);\r\n        if (iCenterX < oCenterX - Joystick.play_threshold) {\r\n            dir = 4;\r\n        }\r\n        else if (iCenterX > oCenterX + Joystick.play_threshold) {\r\n            dir = 2;\r\n        }\r\n        else if (iCenterY < oCenterY - Joystick.play_threshold) {\r\n            dir = 1;\r\n        }\r\n        else if (iCenterY > oCenterY + Joystick.play_threshold) {\r\n            dir = 3;\r\n        }\r\n        return dir;\r\n    }\r\n    /**\r\n     * Updates position of inner button.\r\n     */\r\n    updateInner(x, y) {\r\n        // FIXME: need a smarter algorithm for detecting if center of inner circle is beyond radius\r\n        //        of outer\r\n        const bounds = this.outer.getBoundingClientRect();\r\n        const xdiff = Math.abs(x - (bounds.left + this.radius));\r\n        const ydiff = Math.abs(y - (bounds.top + this.radius));\r\n        // don't allow inner button to move beyond radius of outer\r\n        if (xdiff <= this.radius) {\r\n            this.inner.style.left = (x - Math.floor(this.inner.width / 2)) + \"px\";\r\n        }\r\n        if (ydiff <= this.radius) {\r\n            this.inner.style.top = (y - Math.floor(this.inner.height / 2)) + \"px\";\r\n        }\r\n    }\r\n    reset() {\r\n        this.engaged = false;\r\n        this.inner.onload = () => {\r\n            // remove listener\r\n            this.inner.onload = null;\r\n            // center inner joystick on outer\r\n            const rect = this.outer.getBoundingClientRect();\r\n            this.updateInner(rect.left + this.radius, rect.top + this.radius);\r\n        };\r\n        this.inner.src = this.getResource(\"joystick_inner\");\r\n        if (this.direction != 0) {\r\n            // stop movement\r\n            this.onDirectionChange(0);\r\n        }\r\n    }\r\n    onRemoved() {\r\n        // remove from DOM\r\n        const container = document.getElementById(\"joystick-container\");\r\n        for (const jimg of [this.outer, this.inner]) {\r\n            if (container.contains(jimg)) {\r\n                container.removeChild(jimg);\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.Joystick = Joystick;\r\n// number of pixels joystick can move before executing event\r\nJoystick.play_threshold = 24;\r\n//# sourceMappingURL=Joystick.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TextBubble = void 0;\r\nclass TextBubble {\r\n    constructor(text) {\r\n        this.x = -1;\r\n        this.y = -1;\r\n        this.width = -1;\r\n        this.height = -1;\r\n        this.duration = TextBubble.STANDARD_DUR;\r\n        this.text = text;\r\n        this.timeStamp = Date.now();\r\n    }\r\n    getX() {\r\n        return this.x;\r\n    }\r\n    getY() {\r\n        return this.y;\r\n    }\r\n    getWidth() {\r\n        return this.width;\r\n    }\r\n    getHeight() {\r\n        return this.height;\r\n    }\r\n    /**\r\n     * Checks if a point or area clips the boundries of this sprite.\r\n     *\r\n     * @param x1\r\n     *     Left-most position of area to check.\r\n     * @param x2\r\n     *     Right-most position of area to check.\r\n     * @param y1\r\n     *     Top-most position of area to check.\r\n     * @param y2\r\n     *     Bottom-most position of area to check.\r\n     * @return\r\n     *     <code>true</code> if any point is within the area of the\r\n     *     sprite.\r\n     */\r\n    clips(x1, x2, y1, y2) {\r\n        const x = this.getX(), y = this.getY();\r\n        const r = x + this.getWidth();\r\n        const b = y + this.getHeight();\r\n        return (x <= x1 && x1 <= r && x <= x2 && x2 <= r)\r\n            && (y <= y1 && y1 <= b && y <= y2 && y2 <= b);\r\n    }\r\n    /**\r\n     * Checks if a point clips the boundaries of this sprite.\r\n     *\r\n     * @param x\r\n     *     Horizonal coordinate.\r\n     * @param y\r\n     *     Vertical coordinate.\r\n     * @return\r\n     *     <code>true</code> if the point is within the area of the\r\n     *     sprite.\r\n     */\r\n    clipsPoint(x, y) {\r\n        return this.clips(x, x, y, y);\r\n    }\r\n    onClick(evt) {\r\n        const screenRect = document.getElementById(\"gamewindow\")\r\n            .getBoundingClientRect();\r\n        const pointX = evt.clientX - screenRect.x\r\n            + stendhal.ui.gamewindow.offsetX;\r\n        const pointY = evt.clientY - screenRect.y\r\n            + stendhal.ui.gamewindow.offsetY + TextBubble.adjustY;\r\n        if (this.clipsPoint(pointX, pointY)) {\r\n            evt.stopPropagation();\r\n            stendhal.ui.gamewindow.removeTextBubble(this, pointX, pointY);\r\n        }\r\n    }\r\n    /**\r\n     * Action to execute when sprite is added to viewport.\r\n     *\r\n     * Adds a listener to remove sprite with mouse click.\r\n     *\r\n     * @param ctx\r\n     */\r\n    onAdded(ctx) {\r\n        // prevent multiple listeners from being added\r\n        if (typeof (this.onRemovedAction) === \"undefined\") {\r\n            // add click listener to remove chat bubble\r\n            const listener = (e) => {\r\n                this.onClick(e);\r\n            };\r\n            ctx.canvas.addEventListener(\"click\", listener);\r\n            this.onRemovedAction = function () {\r\n                ctx.canvas.removeEventListener(\"click\", listener);\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * Action to execute when sprite is removed from viewport.\r\n     *\r\n     * Removes the listener added with TextBubble.onAdded.\r\n     */\r\n    onRemoved() {\r\n        if (typeof (this.onRemovedAction) !== \"undefined\") {\r\n            this.onRemovedAction();\r\n        }\r\n    }\r\n    /**\r\n     * Sets the duration that the sprite should be displayed on the\r\n     * screen.\r\n     *\r\n     * @param dur\r\n     *     New duration time.\r\n     */\r\n    setDuration(dur) {\r\n        if (dur == 0) {\r\n            this.duration = TextBubble.STANDARD_DUR;\r\n        }\r\n        else {\r\n            this.duration = dur;\r\n        }\r\n    }\r\n    /**\r\n     * Checks if the sprite duration time has expired & should be\r\n     * removed from the screen.\r\n     *\r\n     * @return\r\n     *     <code>true</code> if the duration time has been exceeded.\r\n     */\r\n    expired() {\r\n        return Date.now() >= this.timeStamp + this.duration;\r\n    }\r\n}\r\nexports.TextBubble = TextBubble;\r\nTextBubble.STANDARD_DUR = 5000;\r\nTextBubble.adjustY = 15;\r\n//# sourceMappingURL=TextBubble.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BackgroundPainter = void 0;\r\nclass BackgroundPainter {\r\n    constructor(img) {\r\n        // each slice represents a portion of the image with the upper-left corner at offset x,y\r\n        this.slices = [];\r\n        this.warned = false;\r\n        this.bg = img;\r\n        this.tileW = this.bg.width / 3;\r\n        this.tileH = this.bg.height / 3;\r\n        for (let y = 0; y < this.bg.height; y += this.tileH) {\r\n            const row = [];\r\n            for (let x = 0; x < this.bg.width; x += this.tileW) {\r\n                row.push({ x: x, y: y });\r\n            }\r\n            this.slices.push(row);\r\n        }\r\n    }\r\n    getTileWidth() {\r\n        return this.tileW;\r\n    }\r\n    getTileHeight() {\r\n        return this.tileH;\r\n    }\r\n    /**\r\n     * Draws the images on the canvas.\r\n     *\r\n     * @param x\r\n     *     Left position where to start drawing image.\r\n     * @param y\r\n     *     Top position where to start drawing image.\r\n     * @param width\r\n     *     Number of horizontal tiles to draw.\r\n     * @param height\r\n     *     Number of vertical tiles to draw.\r\n     */\r\n    paint(ctx, x, y, width, height) {\r\n        // FIXME: if image parts were not cached, tile width & height may be 0\r\n        if (!this.tileW || !this.tileH) {\r\n            if (!this.warned) {\r\n                console.warn(\"cannot draw background while tile width or height is 0\");\r\n                this.warned = true;\r\n            }\r\n            // try again\r\n            this.tileW = this.bg.width / 3;\r\n            this.tileH = this.bg.height / 3;\r\n            return;\r\n        }\r\n        // TODO: add support for constructor(String image, int leftWidth, int centerWidth, int topHeight, int centerHeight)\r\n        let drawY = 0, ir = 0;\r\n        while (drawY < height) {\r\n            let drawX = 0, ic = 0;\r\n            while (drawX < width) {\r\n                const slice = this.slices[ir][ic];\r\n                ctx.drawImage(this.bg, slice.x, slice.y, this.tileW, this.tileH, x + drawX, y + drawY, this.tileW, this.tileH);\r\n                drawX += this.tileW;\r\n                // offset last column to fit inside width\r\n                drawX = drawX <= width ? drawX : drawX + (width - drawX);\r\n                ic = drawX + this.tileW >= width ? 2 : 1;\r\n            }\r\n            drawY += this.tileH;\r\n            // offset last row to fit inside height\r\n            drawY = drawY <= height ? drawY : drawY + (height - drawY);\r\n            ir = drawY + this.tileH >= height ? 2 : 1;\r\n        }\r\n    }\r\n}\r\nexports.BackgroundPainter = BackgroundPainter;\r\n//# sourceMappingURL=BackgroundPainter.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.AchievementBanner = void 0;\r\nconst TextBubble_1 = require(\"./TextBubble\");\r\nconst BackgroundPainter_1 = require(\"../util/BackgroundPainter\");\r\nclass AchievementBanner extends TextBubble_1.TextBubble {\r\n    constructor(cat, title, desc) {\r\n        super(desc);\r\n        this.font = \"normal 14px \" + stendhal.config.get(\"ui.font.tlog\");\r\n        this.fontT = \"normal 20px \" + stendhal.config.get(\"ui.font.tlog\");\r\n        this.innerWidth = 0;\r\n        this.innerHeight = 0;\r\n        this.padding = 32;\r\n        this.title = title;\r\n        const bg = stendhal.data.sprites.get(stendhal.paths.gui + \"/banner_background.png\");\r\n        this.banner = new BackgroundPainter_1.BackgroundPainter(bg);\r\n        this.icon = stendhal.data.sprites.get(stendhal.paths.achievements\r\n            + \"/\" + cat.toLowerCase() + \".png\");\r\n        /* keep achievements on the screen a bit longer since they\r\n         * don't leave a line in the chat log\r\n         */\r\n        this.duration = TextBubble_1.TextBubble.STANDARD_DUR * 4;\r\n        const gamewindow = document.getElementById(\"gamewindow\");\r\n        const td = this.getTextDimensions(gamewindow.getContext(\"2d\"));\r\n        this.innerWidth = td.width + this.padding; // add padding between icon & text\r\n        this.innerHeight = td.height;\r\n        this.width = this.innerWidth + (this.padding * 2); // add left & right padding\r\n        this.height = bg.height || this.innerHeight;\r\n        this.x = (gamewindow.width / 2) - (this.width / 2);\r\n        this.y = gamewindow.height - this.height;\r\n    }\r\n    draw(ctx) {\r\n        const targetX = stendhal.ui.gamewindow.offsetX + this.x;\r\n        const targetY = stendhal.ui.gamewindow.offsetY + this.y;\r\n        const iconX = targetX + (this.width / 2) - (this.innerWidth / 2);\r\n        const iconY = targetY + (this.height / 2) - (this.icon.height * 0.75);\r\n        const textX = iconX + this.icon.width + this.padding;\r\n        // TODO: user inner height (text height) for centering vertically\r\n        const textY = targetY + (this.height / 2) + 10;\r\n        this.banner.paint(ctx, targetX, targetY, this.width, this.height);\r\n        if (this.icon.height && this.icon.complete) {\r\n            ctx.drawImage(this.icon, 0, 0, this.icon.width, this.icon.height, iconX, iconY, this.icon.width, this.icon.height);\r\n        }\r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.font = this.fontT;\r\n        ctx.fillText(this.title, textX, textY - 25);\r\n        ctx.font = this.font;\r\n        ctx.fillText(this.text, textX, textY);\r\n        return this.expired();\r\n    }\r\n    getTextDimensions(ctx) {\r\n        const ret = {};\r\n        ctx.font = this.font;\r\n        let m = ctx.measureText(this.text);\r\n        ret.width = m.width;\r\n        ctx.font = this.fontT;\r\n        m = ctx.measureText(this.title);\r\n        ret.width = Math.max(ret.width, m.width);\r\n        // FIXME: how to find text height\r\n        ret.height = 96;\r\n        return ret;\r\n    }\r\n    getX() {\r\n        return stendhal.ui.gamewindow.offsetX + this.x;\r\n    }\r\n    getY() {\r\n        return stendhal.ui.gamewindow.offsetY + this.y;\r\n    }\r\n}\r\nexports.AchievementBanner = AchievementBanner;\r\n//# sourceMappingURL=AchievementBanner.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Arianne                      *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Color = void 0;\r\nclass Color {\r\n    /**\r\n     * Static members & methods only.\r\n     */\r\n    constructor() {\r\n        // do nothing\r\n    }\r\n    static getStatBarColor(ratio) {\r\n        const red = Math.floor(Math.min((1 - ratio) * 2, 1) * 255);\r\n        const green = Math.floor(Math.min(ratio * 2, 1) * 255);\r\n        return \"rgb(\" + red + \", \" + green + \", 0)\";\r\n    }\r\n}\r\nexports.Color = Color;\r\nColor.AQUA = \"#00ffff\";\r\nColor.BLACK = \"#000000\";\r\nColor.BLUE = \"rgb(0, 0, 255)\";\r\nColor.CYAN = Color.AQUA;\r\nColor.DARKGRAY = \"#a9a9a9\";\r\nColor.GRAY = \"#808080\";\r\nColor.GREEN = \"#008000\";\r\nColor.LIGHTGRAY = \"#c0c0c0\";\r\nColor.MAGENTA = \"#ff00ff\";\r\nColor.ORANGE = \"#ffa500\";\r\nColor.PINK = \"#ffc0cb\";\r\nColor.RED = \"#ff0000\";\r\nColor.VIOLET = \"rgb(238, 130, 238)\";\r\nColor.WHITE = \"#ffffff\";\r\nColor.YELLOW = \"#ffff00\";\r\nColor.CREATURE = Color.YELLOW;\r\nColor.DOMESTICANIMAL = \"rgb(255, 150, 0)\";\r\nColor.GHOST = Color.GRAY;\r\nColor.GROUP = \"rgb(99, 61, 139)\";\r\nColor.NPC = \"rgb(0, 150, 0)\";\r\nColor.PLAYER = Color.WHITE;\r\nColor.USER = Color.BLUE;\r\nColor.BACKGROUND = \"#cccccc\";\r\nColor.BLOCKED = Color.RED;\r\nColor.COLLISION = Color.RED;\r\nColor.FLYOVER = \"rgb(212, 158, 72)\";\r\nColor.PROTECTION = \"rgb(202, 230, 202)\";\r\nColor.WALKBLOCK = \"rgb(209, 144, 224)\";\r\nColor.MOVING = \"rgb(200, 255, 200)\";\r\nColor.PORTAL = Color.WHITE;\r\nColor.PORTALOUTLINE = Color.BLACK;\r\nColor.CHEST = Color.VIOLET;\r\n//# sourceMappingURL=Color.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Arianne                      *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NotificationType = void 0;\r\nconst Color_1 = require(\"./Color\");\r\nexports.NotificationType = {\r\n    \"client\": Color_1.Color.GRAY,\r\n    \"detailed\": Color_1.Color.BLACK,\r\n    \"emote\": \"rgb(99, 61, 139)\",\r\n    \"error\": Color_1.Color.RED,\r\n    \"group\": \"rgb(00, 00, 160)\",\r\n    \"heal\": Color_1.Color.GREEN,\r\n    \"information\": Color_1.Color.ORANGE,\r\n    \"negative\": Color_1.Color.RED,\r\n    \"normal\": Color_1.Color.BLACK,\r\n    \"poison\": Color_1.Color.RED,\r\n    \"positive\": Color_1.Color.GREEN,\r\n    \"privmsg\": Color_1.Color.DARKGRAY,\r\n    \"response\": \"#006400\",\r\n    \"scene_setting\": \"#572002\",\r\n    \"server\": Color_1.Color.DARKGRAY,\r\n    \"significant_negative\": Color_1.Color.PINK,\r\n    \"significant_positive\": \"rgb(65, 105, 225)\",\r\n    \"support\": \"#ff7200\",\r\n    \"tutorial\": \"rgb(172, 0, 172)\",\r\n    \"warning\": \"#a00000\"\r\n};\r\n//# sourceMappingURL=NotificationType.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Speech = void 0;\r\nclass Speech {\r\n    // space to be left at the beginning and end of line in pixels\r\n    //private margin_width = 3;\r\n    // the diameter of the arc of the rounded bubble corners\r\n    //private arc_diameter = 2 * this.margin_width + 2;\r\n    /**\r\n     * Draws a rectangle.\r\n     *\r\n     * @param ctx\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param height\r\n     */\r\n    static drawBubble(ctx, x, y, width, height, tail = false) {\r\n        ctx.strokeRect(x, y - 15, width, height);\r\n        ctx.fillRect(x, y - 15, width, height);\r\n        ctx.beginPath();\r\n        ctx.moveTo(x, y);\r\n        // tail\r\n        if (tail) {\r\n            ctx.lineTo(x - 5, y + 8);\r\n            ctx.lineTo(x + 1, y + 5);\r\n        }\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    /**\r\n     * Draws a rectangle with rounded edges.\r\n     *\r\n     * Source: https://stackoverflow.com/a/3368118/4677917\r\n     *\r\n     * @param ctx\r\n     * @param x\r\n     * @param y\r\n     * @param width\r\n     * @param height\r\n     */\r\n    static drawBubbleRounded(ctx, x, y, width, height) {\r\n        //const arc = this.arc_diameter;\r\n        const arc = 3;\r\n        ctx.beginPath();\r\n        ctx.moveTo(x + arc, y);\r\n        ctx.lineTo(x + width - arc, y);\r\n        ctx.quadraticCurveTo(x + width, y, x + width, y + arc);\r\n        ctx.lineTo(x + width, y + height - arc);\r\n        ctx.quadraticCurveTo(x + width, y + height, x + width - arc, y + height);\r\n        ctx.lineTo(x + arc, y + height);\r\n        ctx.quadraticCurveTo(x, y + height, x, y + height - arc);\r\n        ctx.lineTo(x, y + 8);\r\n        // tail\r\n        ctx.lineTo(x - 8, y + 11);\r\n        ctx.lineTo(x, y + 3);\r\n        ctx.lineTo(x, y + arc);\r\n        ctx.quadraticCurveTo(x, y, x + arc, y);\r\n        ctx.stroke();\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n}\r\nexports.Speech = Speech;\r\n//# sourceMappingURL=Speech.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NotificationBubble = void 0;\r\nconst TextBubble_1 = require(\"./TextBubble\");\r\nconst NotificationType_1 = require(\"../util/NotificationType\");\r\nconst Speech_1 = require(\"../util/Speech\");\r\nclass NotificationBubble extends TextBubble_1.TextBubble {\r\n    constructor(mtype, text, profile) {\r\n        super(text);\r\n        this.lmargin = 4;\r\n        this.mtype = mtype;\r\n        this.profileName = profile;\r\n        this.duration = Math.max(TextBubble_1.TextBubble.STANDARD_DUR, this.text.length * TextBubble_1.TextBubble.STANDARD_DUR / 50);\r\n        const linewrap = 30;\r\n        const wordbreak = 60;\r\n        this.lines = [];\r\n        let words = text.split(\"\\t\").join(\" \").split(\" \");\r\n        let nextline = \"\";\r\n        for (const w of words) {\r\n            if (nextline) {\r\n                nextline += \" \";\r\n            }\r\n            nextline += w;\r\n            if (nextline.length > wordbreak) {\r\n                this.lines.push(nextline.substr(0, wordbreak) + \"-\");\r\n                nextline = \"-\" + nextline.substr(wordbreak);\r\n            }\r\n            else if (nextline.length >= linewrap) {\r\n                this.lines.push(nextline);\r\n                nextline = \"\";\r\n            }\r\n        }\r\n        if (nextline) {\r\n            this.lines.push(nextline);\r\n        }\r\n        if (profile) {\r\n            // FIXME: first drawing of profile may still be delayed on slower systems\r\n            // cache profile image at construction\r\n            this.profile = new Image();\r\n            this.loadProfileSprite();\r\n        }\r\n    }\r\n    draw(ctx) {\r\n        const screenTop = stendhal.ui.gamewindow.offsetY;\r\n        const screenBottom = screenTop + ctx.canvas.height;\r\n        const screenLeft = stendhal.ui.gamewindow.offsetX;\r\n        const screenCenterX = screenLeft + (ctx.canvas.width / 2);\r\n        const lcount = this.lines.length;\r\n        let longest = \"\";\r\n        for (let li = 0; li < lcount; li++) {\r\n            if (this.lines[li].length > longest.length) {\r\n                longest = this.lines[li];\r\n            }\r\n        }\r\n        // get width & height of text\r\n        const fontsize = 14;\r\n        const lheight = fontsize + 6;\r\n        const meas = ctx.measureText(longest);\r\n        if (this.width < 0 || this.height < 0) {\r\n            this.width = meas.width + (this.lmargin * 2);\r\n            this.height = lcount * lheight;\r\n        }\r\n        this.x = screenCenterX - (this.width / 2);\r\n        // Note: border is 1 pixel\r\n        this.y = screenBottom - this.height + TextBubble_1.TextBubble.adjustY - 1;\r\n        ctx.lineWidth = 2;\r\n        ctx.font = fontsize + \"px sans-serif\";\r\n        ctx.fillStyle = \"#ffffff\";\r\n        ctx.strokeStyle = \"#000000\";\r\n        if (this.profile) {\r\n            if (!this.profile.complete || !this.profile.height) {\r\n                this.loadProfileSprite();\r\n            }\r\n            if (this.profile.complete && this.profile.height) {\r\n                ctx.drawImage(this.profile, this.x - 48, this.y - 16);\r\n            }\r\n            Speech_1.Speech.drawBubbleRounded(ctx, this.x, this.y - 15, this.width, this.height);\r\n        }\r\n        else {\r\n            Speech_1.Speech.drawBubble(ctx, this.x, this.y, this.width, this.height);\r\n        }\r\n        ctx.fillStyle = NotificationType_1.NotificationType[this.mtype] || \"#000000\";\r\n        let sy = this.y;\r\n        for (let li = 0; li < lcount; li++) {\r\n            ctx.fillText(this.lines[li], this.x + this.lmargin, sy);\r\n            sy += lheight;\r\n        }\r\n        return this.expired();\r\n    }\r\n    /**\r\n     * Loads a profile image to be drawn with text.\r\n     */\r\n    loadProfileSprite() {\r\n        const img = stendhal.data.sprites.get(stendhal.paths.sprites\r\n            + \"/npc/\" + this.profileName + \".png\");\r\n        if (img.complete && img.height) {\r\n            this.profile = stendhal.data.sprites.getAreaOf(img, 48, 48, 48, 128);\r\n        }\r\n    }\r\n}\r\nexports.NotificationBubble = NotificationBubble;\r\n//# sourceMappingURL=NotificationBubble.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SpeechBubble = void 0;\r\nconst TextBubble_1 = require(\"./TextBubble\");\r\nconst Speech_1 = require(\"../util/Speech\");\r\nclass SpeechBubble extends TextBubble_1.TextBubble {\r\n    constructor(text, entity) {\r\n        text = text.replace(/\\\\\\\\/g, \"\\\\\");\r\n        super((text.length > 30) ? (text.substring(0, 30) + \"...\") : text);\r\n        this.entity = entity;\r\n        this.offsetY = 0;\r\n        // find free text bubble position\r\n        const x = this.getX(), y = this.getY();\r\n        for (const bubble of stendhal.ui.gamewindow.textSprites) {\r\n            if (x == bubble.getX() && y + this.offsetY == bubble.getY()) {\r\n                this.offsetY += stendhal.ui.gamewindow.targetTileHeight / 2;\r\n            }\r\n        }\r\n        this.duration = Math.max(TextBubble_1.TextBubble.STANDARD_DUR, this.text.length * TextBubble_1.TextBubble.STANDARD_DUR / 50);\r\n    }\r\n    draw(ctx) {\r\n        ctx.lineWidth = 2;\r\n        ctx.font = \"14px Arial\";\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.strokeStyle = \"#000000\";\r\n        if (this.width < 0 || this.height < 0) {\r\n            // get width of text\r\n            this.width = ctx.measureText(this.text).width + 8;\r\n            this.height = 20;\r\n        }\r\n        const x = this.getX(), y = this.getY();\r\n        Speech_1.Speech.drawBubbleRounded(ctx, x, y, this.width, this.height);\r\n        ctx.fillStyle = \"#000000\";\r\n        ctx.fillText(this.text, x + 4, y + TextBubble_1.TextBubble.adjustY);\r\n        return this.expired();\r\n    }\r\n    getX() {\r\n        let x = this.entity[\"_x\"] * 32 + (32 * this.entity[\"width\"]);\r\n        if (this.entity.inView()) {\r\n            // keep on screen while entity is visible (border is 1 pixel)\r\n            const overdraw = x + this.width - (stendhal.ui.gamewindow.offsetX + stendhal.ui.gamewindow.width) + 1;\r\n            x = overdraw > 0 ? x - overdraw : x;\r\n        }\r\n        return x;\r\n    }\r\n    getY() {\r\n        let y = this.entity[\"_y\"] * 32 - 16 - (32 * (this.entity[\"height\"] - 1)) + this.offsetY - TextBubble_1.TextBubble.adjustY;\r\n        if (this.entity.inView()) {\r\n            // keep on screen while entity is visible (border is 1 pixel)\r\n            y = y < stendhal.ui.gamewindow.offsetY + 1 ? stendhal.ui.gamewindow.offsetY + 1 : y;\r\n        }\r\n        return y;\r\n    }\r\n}\r\nexports.SpeechBubble = SpeechBubble;\r\n//# sourceMappingURL=SpeechBubble.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ViewPort = void 0;\r\nconst UI_1 = require(\"./UI\");\r\nconst UIComponentEnum_1 = require(\"./UIComponentEnum\");\r\nconst ActionContextMenu_1 = require(\"./dialog/ActionContextMenu\");\r\nconst DropQuantitySelectorDialog_1 = require(\"./dialog/DropQuantitySelectorDialog\");\r\nconst DirectionPad_1 = require(\"./joystick/DirectionPad\");\r\nconst Joystick_1 = require(\"./joystick/Joystick\");\r\nconst JoystickBase_1 = require(\"./joystick/JoystickBase\");\r\nconst Client_1 = require(\"../Client\");\r\nconst SingletonRepo_1 = require(\"../SingletonRepo\");\r\nconst AchievementBanner_1 = require(\"../sprite/AchievementBanner\");\r\nconst NotificationBubble_1 = require(\"../sprite/NotificationBubble\");\r\nconst SpeechBubble_1 = require(\"../sprite/SpeechBubble\");\r\nconst Chat_1 = require(\"../util/Chat\");\r\n/**\r\n * game window aka world view\r\n */\r\nclass ViewPort {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        /** screen offsets in pixels. */\r\n        this.offsetX = 0;\r\n        this.offsetY = 0;\r\n        this.timeStamp = Date.now();\r\n        this.targetTileWidth = 32;\r\n        this.targetTileHeight = 32;\r\n        this.drawingError = false;\r\n        this.textSprites = [];\r\n        this.notifSprites = [];\r\n        this.emojiSprites = [];\r\n        this.weatherRenderer = SingletonRepo_1.singletons.getWeatherRenderer();\r\n        /** On-screen joystick. */\r\n        this.joystick = new JoystickBase_1.JoystickBase();\r\n        // Mouse click handling\r\n        this.onMouseDown = (function () {\r\n            var entity;\r\n            var startX;\r\n            var startY;\r\n            const mHandle = {};\r\n            mHandle._onMouseDown = function (e) {\r\n                var pos = stendhal.ui.html.extractPosition(e);\r\n                if (stendhal.ui.touch.isTouchEvent(e)) {\r\n                    if (stendhal.ui.touch.holdingItem()) {\r\n                        // prevent default viewport action when item is \"held\"\r\n                        return;\r\n                    }\r\n                    stendhal.ui.touch.onTouchStart(pos.pageX, pos.pageY);\r\n                }\r\n                if (stendhal.ui.globalpopup) {\r\n                    stendhal.ui.globalpopup.close();\r\n                }\r\n                startX = pos.canvasRelativeX;\r\n                startY = pos.canvasRelativeY;\r\n                var x = pos.canvasRelativeX + stendhal.ui.gamewindow.offsetX;\r\n                var y = pos.canvasRelativeY + stendhal.ui.gamewindow.offsetY;\r\n                // override ground/entity action if there is a text bubble\r\n                if (stendhal.ui.gamewindow.textBubbleAt(x, y + 15)) {\r\n                    return;\r\n                }\r\n                entity = stendhal.zone.entityAt(x, y);\r\n                stendhal.ui.timestampMouseDown = +new Date();\r\n                if (e.type !== \"dblclick\" && e.target) {\r\n                    e.target.addEventListener(\"mousemove\", mHandle.onDrag);\r\n                    e.target.addEventListener(\"mouseup\", mHandle.onMouseUp);\r\n                    e.target.addEventListener(\"touchmove\", mHandle.onDrag);\r\n                    e.target.addEventListener(\"touchend\", mHandle.onMouseUp);\r\n                }\r\n                else if (entity == stendhal.zone.ground) {\r\n                    entity.onclick(pos.canvasRelativeX, pos.canvasRelativeY, true);\r\n                }\r\n            };\r\n            mHandle.isRightClick = function (e) {\r\n                if (+new Date() - stendhal.ui.timestampMouseDown > 300) {\r\n                    return true;\r\n                }\r\n                if (e.which) {\r\n                    return (e.which === 3);\r\n                }\r\n                else {\r\n                    return (e.button === 2);\r\n                }\r\n            };\r\n            mHandle.onMouseUp = function (e) {\r\n                const is_touch = stendhal.ui.touch.isTouchEvent(e);\r\n                if (is_touch) {\r\n                    stendhal.ui.touch.onTouchEnd(e);\r\n                }\r\n                var pos = stendhal.ui.html.extractPosition(e);\r\n                const long_touch = is_touch && stendhal.ui.touch.isLongTouch(e);\r\n                if ((e instanceof MouseEvent && mHandle.isRightClick(e)) || long_touch) {\r\n                    if (entity != stendhal.zone.ground) {\r\n                        const append = [];\r\n                        /*\r\n                        if (long_touch) {\r\n                            // TODO: add option for \"hold\" to allow splitting item stacks\r\n                        }\r\n                        */\r\n                        stendhal.ui.actionContextMenu.set(UI_1.ui.createSingletonFloatingWindow(\"Action\", new ActionContextMenu_1.ActionContextMenu(entity, append), pos.pageX - 50, pos.pageY - 5));\r\n                    }\r\n                }\r\n                else if (stendhal.ui.touch.holdingItem()) {\r\n                    // FIXME: this may be unnecessary\r\n                    stendhal.ui.gamewindow.onDrop(e);\r\n                }\r\n                else {\r\n                    entity.onclick(pos.canvasRelativeX, pos.canvasRelativeY);\r\n                }\r\n                mHandle.cleanUp(pos);\r\n                pos.target.focus();\r\n                e.preventDefault();\r\n            };\r\n            mHandle.onDrag = function (e) {\r\n                if (stendhal.ui.touch.isTouchEvent(e)) {\r\n                    stendhal.ui.gamewindow.onDragStart(e);\r\n                }\r\n                var pos = stendhal.ui.html.extractPosition(e);\r\n                var xDiff = startX - pos.offsetX;\r\n                var yDiff = startY - pos.offsetY;\r\n                // It's not really a click if the mouse has moved too much.\r\n                if (xDiff * xDiff + yDiff * yDiff > 5) {\r\n                    mHandle.cleanUp(e);\r\n                }\r\n            };\r\n            mHandle.cleanUp = function (e) {\r\n                entity = null;\r\n                if (!e.target) {\r\n                    return;\r\n                }\r\n                e.target.removeEventListener(\"mouseup\", mHandle.onMouseUp);\r\n                e.target.removeEventListener(\"mousemove\", mHandle.onDrag);\r\n                e.target.removeEventListener(\"touchend\", mHandle.onMouseUp);\r\n                e.target.removeEventListener(\"touchmove\", mHandle.onDrag);\r\n                // clean up item held via touch\r\n                stendhal.ui.touch.unsetHeldItem();\r\n                stendhal.ui.touch.unsetOrigin();\r\n            };\r\n            return mHandle._onMouseDown;\r\n        })();\r\n        const element = document.getElementById(\"gamewindow\");\r\n        this.ctx = element.getContext(\"2d\");\r\n        this.width = element.width;\r\n        this.height = element.height;\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!ViewPort.instance) {\r\n            ViewPort.instance = new ViewPort();\r\n        }\r\n        return ViewPort.instance;\r\n    }\r\n    draw() {\r\n        var startTime = new Date().getTime();\r\n        if (marauroa.me && document.visibilityState === \"visible\") {\r\n            if (marauroa.currentZoneName === stendhal.data.map.currentZoneName\r\n                || stendhal.data.map.currentZoneName === \"int_vault\"\r\n                || stendhal.data.map.currentZoneName === \"int_adventure_island\"\r\n                || stendhal.data.map.currentZoneName === \"tutorial_island\") {\r\n                this.drawingError = false;\r\n                this.ctx.globalAlpha = 1.0;\r\n                this.adjustView(this.ctx.canvas);\r\n                this.ctx.fillStyle = \"black\";\r\n                this.ctx.fillRect(0, 0, 10000, 10000);\r\n                var tileOffsetX = Math.floor(this.offsetX / this.targetTileWidth);\r\n                var tileOffsetY = Math.floor(this.offsetY / this.targetTileHeight);\r\n                stendhal.data.map.strategy.render(this.ctx.canvas, this, tileOffsetX, tileOffsetY, this.targetTileWidth, this.targetTileHeight);\r\n                this.weatherRenderer.draw(this.ctx);\r\n                this.drawEntitiesTop();\r\n                this.drawEmojiSprites();\r\n                this.drawTextSprites();\r\n                this.drawTextSprites(this.notifSprites);\r\n                if (stendhal.ui.touch.held) {\r\n                    // draw a representation of a item \"held\" via touch input\r\n                    stendhal.ui.touch.drawHeld(this.ctx);\r\n                }\r\n                // redraw inventory sprites\r\n                stendhal.ui.equip.update();\r\n                UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.PlayerEquipment).update();\r\n            }\r\n        }\r\n        setTimeout(function () {\r\n            stendhal.ui.gamewindow.draw.apply(stendhal.ui.gamewindow, arguments);\r\n        }, Math.max((1000 / 20) - (new Date().getTime() - startTime), 1));\r\n    }\r\n    drawEntities() {\r\n        var currentTime = new Date().getTime();\r\n        var time = currentTime - this.timeStamp;\r\n        this.timeStamp = currentTime;\r\n        for (var i in stendhal.zone.entities) {\r\n            var entity = stendhal.zone.entities[i];\r\n            if (typeof (entity.draw) != \"undefined\") {\r\n                entity.updatePosition(time);\r\n                entity.draw(this.ctx);\r\n            }\r\n        }\r\n    }\r\n    drawEntitiesTop() {\r\n        var i;\r\n        for (i in stendhal.zone.entities) {\r\n            const entity = stendhal.zone.entities[i];\r\n            if (typeof (entity.setStatusBarOffset) !== \"undefined\") {\r\n                entity.setStatusBarOffset();\r\n            }\r\n            if (typeof (entity.drawTop) != \"undefined\") {\r\n                entity.drawTop(this.ctx);\r\n            }\r\n        }\r\n    }\r\n    drawTextSprites(sgroup = this.textSprites) {\r\n        for (var i = 0; i < sgroup.length; i++) {\r\n            var sprite = sgroup[i];\r\n            var remove = sprite.draw(this.ctx);\r\n            if (remove) {\r\n                sgroup.splice(i, 1);\r\n                sprite.onRemoved();\r\n                i--;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Adds a sprite to be drawn on screen.\r\n     *\r\n     * @param sprite\r\n     *     Sprite definition.\r\n     */\r\n    addEmojiSprite(sprite) {\r\n        this.emojiSprites.push(sprite);\r\n    }\r\n    drawEmojiSprites() {\r\n        for (let i = 0; i < this.emojiSprites.length; i++) {\r\n            const sprite = this.emojiSprites[i];\r\n            const remove = sprite.draw(this.ctx);\r\n            if (remove) {\r\n                this.emojiSprites.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n    }\r\n    adjustView(canvas) {\r\n        // IE does not support ctx.resetTransform(), so use the following workaround:\r\n        this.ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n        // Coordinates for a screen centered on player\r\n        var centerX = marauroa.me[\"_x\"] * this.targetTileWidth + this.targetTileWidth / 2 - canvas.width / 2;\r\n        var centerY = marauroa.me[\"_y\"] * this.targetTileHeight + this.targetTileHeight / 2 - canvas.height / 2;\r\n        // Keep the world within the screen view\r\n        centerX = Math.min(centerX, stendhal.data.map.zoneSizeX * this.targetTileWidth - canvas.width);\r\n        centerX = Math.max(centerX, 0);\r\n        centerY = Math.min(centerY, stendhal.data.map.zoneSizeY * this.targetTileHeight - canvas.height);\r\n        centerY = Math.max(centerY, 0);\r\n        this.offsetX = Math.round(centerX);\r\n        this.offsetY = Math.round(centerY);\r\n        this.ctx.translate(-this.offsetX, -this.offsetY);\r\n    }\r\n    /**\r\n     * Adds a text bubble sprite to screen.\r\n     *\r\n     * @param sprite\r\n     *     Text sprite to display.\r\n     */\r\n    addTextSprite(sprite) {\r\n        this.textSprites.push(sprite);\r\n        sprite.onAdded(this.ctx);\r\n    }\r\n    /**\r\n     * Adds a notification bubble to screen.\r\n     *\r\n     * @param mtype\r\n     *     Message type.\r\n     * @param text\r\n     *     Text contents.\r\n     * @param profile\r\n     *     Optional entity image filename to show as the speaker.\r\n     */\r\n    addNotifSprite(mtype, text, profile) {\r\n        const bubble = new NotificationBubble_1.NotificationBubble(mtype, text, profile);\r\n        this.notifSprites.push(bubble);\r\n        bubble.onAdded(this.ctx);\r\n    }\r\n    /**\r\n     * Adds a notification bubble to window.\r\n     *\r\n     * @param cat\r\n     *     Achievement categroy.\r\n     * @param title\r\n     *     Achievement title.\r\n     * @param desc\r\n     *     Achievement description.\r\n     */\r\n    addAchievementNotif(cat, title, desc) {\r\n        const banner = new AchievementBanner_1.AchievementBanner(cat, title, desc);\r\n        this.notifSprites.push(banner);\r\n        banner.onAdded(this.ctx);\r\n    }\r\n    /**\r\n     * Removes a text bubble. Looks for topmost sprite at\r\n     * <code>x</code>,<code>y</code>. Otherwise removes\r\n     * <code>sprite</code>.\r\n     *\r\n     * @param sprite\r\n     *     The sprite that is to be removed.\r\n     * @param x\r\n     *     X coordinate to check for overlapping sprite.\r\n     * @param y\r\n     *     Y coordinate to check for overlapping sprite.\r\n     */\r\n    removeTextBubble(sprite, x, y) {\r\n        for (let idx = this.notifSprites.length - 1; idx >= 0; idx--) {\r\n            const topSprite = this.notifSprites[idx];\r\n            if (topSprite == sprite || topSprite.clipsPoint(x, y)) {\r\n                this.notifSprites.splice(idx, 1);\r\n                topSprite.onRemoved();\r\n                return;\r\n            }\r\n        }\r\n        for (let idx = this.textSprites.length - 1; idx >= 0; idx--) {\r\n            const topSprite = this.textSprites[idx];\r\n            if (topSprite == sprite || topSprite.clipsPoint(x, y)) {\r\n                this.textSprites.splice(idx, 1);\r\n                topSprite.onRemoved();\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Checks for an active text bubble.\r\n     *\r\n     * @param x\r\n     *     X coordinate to check.\r\n     * @param y\r\n     *     Y coordinate to check.\r\n     * @return\r\n     *     <code>true</code> if there is a text bubble at position.\r\n     */\r\n    textBubbleAt(x, y) {\r\n        for (const sprite of this.notifSprites) {\r\n            if (sprite.clipsPoint(x, y)) {\r\n                return true;\r\n            }\r\n        }\r\n        for (const sprite of this.textSprites) {\r\n            if (sprite.clipsPoint(x, y)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    onExitZone() {\r\n        // clear speech bubbles & emojis so they don't appear on the new map\r\n        for (const sgroup of [this.textSprites, this.emojiSprites]) {\r\n            for (let idx = sgroup.length - 1; idx >= 0; idx--) {\r\n                const sprite = sgroup[idx];\r\n                sgroup.splice(idx, 1);\r\n                if (sprite instanceof SpeechBubble_1.SpeechBubble) {\r\n                    sprite.onRemoved();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onMouseMove(e) {\r\n        var pos = stendhal.ui.html.extractPosition(e);\r\n        var x = pos.canvasRelativeX + stendhal.ui.gamewindow.offsetX;\r\n        var y = pos.canvasRelativeY + stendhal.ui.gamewindow.offsetY;\r\n        var entity = stendhal.zone.entityAt(x, y);\r\n        document.getElementById(\"gamewindow\").style.cursor = entity.getCursor(x, y);\r\n    }\r\n    /**\r\n     * Changes character facing direction dependent on direction\r\n     * of wheel scroll.\r\n     */\r\n    onMouseWheel(e) {\r\n        if (marauroa.me) {\r\n            e.preventDefault();\r\n            // previous event may have changed type to string\r\n            const currentDir = parseInt(marauroa.me[\"dir\"], 10);\r\n            let newDir = null;\r\n            if (typeof (currentDir) === \"number\") {\r\n                if (e.deltaY >= 100) {\r\n                    // clockwise\r\n                    newDir = currentDir + 1;\r\n                    if (newDir > 4) {\r\n                        newDir = 1;\r\n                    }\r\n                }\r\n                else if (e.deltaY <= -100) {\r\n                    // counter-clockwise\r\n                    newDir = currentDir - 1;\r\n                    if (newDir < 1) {\r\n                        newDir = 4;\r\n                    }\r\n                }\r\n            }\r\n            if (newDir != null) {\r\n                marauroa.clientFramework.sendAction({ \"type\": \"face\", \"dir\": \"\" + newDir });\r\n            }\r\n        }\r\n    }\r\n    // ***************** Drag and drop ******************\r\n    onDragStart(e) {\r\n        var pos = stendhal.ui.html.extractPosition(e);\r\n        let draggedEntity;\r\n        for (const obj of stendhal.zone.getEntitiesAt(pos.canvasRelativeX + stendhal.ui.gamewindow.offsetX, pos.canvasRelativeY + stendhal.ui.gamewindow.offsetY)) {\r\n            if (obj.isDraggable()) {\r\n                draggedEntity = obj;\r\n            }\r\n        }\r\n        var img = undefined;\r\n        if (draggedEntity && draggedEntity.type === \"item\") {\r\n            img = stendhal.data.sprites.getAreaOf(stendhal.data.sprites.get(draggedEntity.sprite.filename), 32, 32);\r\n            stendhal.ui.heldItem = {\r\n                path: draggedEntity.getIdPath(),\r\n                zone: marauroa.currentZoneName,\r\n                quantity: draggedEntity.hasOwnProperty(\"quantity\") ? draggedEntity[\"quantity\"] : 1\r\n            };\r\n        }\r\n        else if (draggedEntity && draggedEntity.type === \"corpse\") {\r\n            img = stendhal.data.sprites.get(draggedEntity.sprite.filename);\r\n            stendhal.ui.heldItem = {\r\n                path: draggedEntity.getIdPath(),\r\n                zone: marauroa.currentZoneName,\r\n                quantity: 1\r\n            };\r\n        }\r\n        else {\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.dataTransfer) {\r\n            window.event = e; // required by setDragImage polyfil\r\n            e.dataTransfer.setDragImage(img, 0, 0);\r\n        }\r\n    }\r\n    onDragOver(e) {\r\n        e.preventDefault(); // Necessary. Allows us to drop.\r\n        if (e.dataTransfer) {\r\n            e.dataTransfer.dropEffect = \"move\";\r\n        }\r\n        return false;\r\n    }\r\n    onDrop(e) {\r\n        if (stendhal.ui.heldItem) {\r\n            var pos = stendhal.ui.html.extractPosition(e);\r\n            var action = {\r\n                \"x\": Math.floor((pos.canvasRelativeX + stendhal.ui.gamewindow.offsetX) / 32).toString(),\r\n                \"y\": Math.floor((pos.canvasRelativeY + stendhal.ui.gamewindow.offsetY) / 32).toString(),\r\n                \"zone\": stendhal.ui.heldItem.zone\r\n            };\r\n            var id = stendhal.ui.heldItem.path.substr(1, stendhal.ui.heldItem.path.length - 2);\r\n            var drop = /\\t/.test(id);\r\n            if (drop) {\r\n                action[\"type\"] = \"drop\";\r\n                action[\"source_path\"] = stendhal.ui.heldItem.path;\r\n            }\r\n            else {\r\n                action[\"type\"] = \"displace\";\r\n                action[\"baseitem\"] = id;\r\n            }\r\n            const quantity = stendhal.ui.heldItem.quantity;\r\n            // item was dropped\r\n            stendhal.ui.heldItem = undefined;\r\n            const touch_held = stendhal.ui.touch.holdingItem() && quantity > 1;\r\n            // if ctrl is pressed or holding stackable item from touch event, we ask for the quantity\r\n            if (e.ctrlKey || touch_held) {\r\n                UI_1.ui.createSingletonFloatingWindow(\"Quantity\", new DropQuantitySelectorDialog_1.DropQuantitySelectorDialog(action, touch_held), pos.pageX - 50, pos.pageY - 25);\r\n            }\r\n            else {\r\n                marauroa.clientFramework.sendAction(action);\r\n            }\r\n        }\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n    /**\r\n     * This is a workaround until it's figured out how to make it work using the same methods as\r\n     * mouse event.\r\n     */\r\n    onTouchEnd(e) {\r\n        stendhal.ui.touch.onTouchEnd();\r\n        stendhal.ui.gamewindow.onDrop(e);\r\n        if (stendhal.ui.touch.holdingItem()) {\r\n            stendhal.ui.touch.unsetHeldItem();\r\n            stendhal.ui.touch.unsetOrigin();\r\n        }\r\n        // execute here because \"touchend\" event propagation is cancelled on the veiwport\r\n        Client_1.Client.handleClickIndicator(e);\r\n    }\r\n    onContentMenu(e) {\r\n        e.preventDefault();\r\n    }\r\n    /**\r\n     * Creates a screenshot of game screen to download.\r\n     */\r\n    createScreenshot() {\r\n        Chat_1.Chat.log(\"client\", \"creating screenshot ...\");\r\n        const uri = this.ctx.canvas.toDataURL(\"image/png\");\r\n        const d = new Date();\r\n        const ts = {\r\n            yyyy: \"\" + d.getFullYear(),\r\n            mm: (\"00\" + (d.getMonth() + 1)).slice(-2),\r\n            dd: (\"00\" + d.getDate()).slice(-2),\r\n            HH: (\"00\" + d.getHours()).slice(-2),\r\n            MM: (\"00\" + d.getMinutes()).slice(-2),\r\n            SS: (\"00\" + d.getSeconds()).slice(-2),\r\n            ms: \"\" + d.getMilliseconds()\r\n        };\r\n        while (ts.ms.length < 3) {\r\n            ts.ms = \"0\" + ts.ms;\r\n        }\r\n        const filename = \"stendhal-\" + ts.yyyy + \".\" + ts.mm + \".\"\r\n            + ts.dd + \"-\" + ts.HH + \".\" + ts.MM + \".\"\r\n            + ts.SS + \".png\";\r\n        const anchor = document.createElement(\"a\");\r\n        anchor.download = filename;\r\n        anchor.target = \"_blank\";\r\n        anchor.href = uri;\r\n        anchor.click();\r\n    }\r\n    /**\r\n     * Updates the on-screen joystick.\r\n     */\r\n    updateJoystick() {\r\n        this.joystick.onRemoved();\r\n        switch (stendhal.config.get(\"ui.joystick\")) {\r\n            case \"joystick\":\r\n                this.joystick = new Joystick_1.Joystick();\r\n                break;\r\n            case \"dpad\":\r\n                this.joystick = new DirectionPad_1.DirectionPad();\r\n                break;\r\n            default:\r\n                this.joystick = new JoystickBase_1.JoystickBase();\r\n        }\r\n    }\r\n}\r\nexports.ViewPort = ViewPort;\r\n//# sourceMappingURL=ViewPort.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.singletons = exports.SingletonRepo = void 0;\r\nconst Client_1 = require(\"./Client\");\r\nconst EventRegistry_1 = require(\"./EventRegistry\");\r\nconst SlashActionRepo_1 = require(\"./SlashActionRepo\");\r\nconst ConfigManager_1 = require(\"./util/ConfigManager\");\r\nconst SessionManager_1 = require(\"./util/SessionManager\");\r\nconst WeatherRenderer_1 = require(\"./util/WeatherRenderer\");\r\nconst CStatus_1 = require(\"./data/CStatus\");\r\nconst CacheManager_1 = require(\"./data/CacheManager\");\r\nconst EmojiStore_1 = require(\"./data/EmojiStore\");\r\nconst GroupManager_1 = require(\"./data/GroupManager\");\r\nconst Map_1 = require(\"./data/Map\");\r\nconst OutfitStore_1 = require(\"./data/OutfitStore\");\r\nconst Paths_1 = require(\"./data/Paths\");\r\nconst SpriteStore_1 = require(\"./data/SpriteStore\");\r\nconst TileStore_1 = require(\"./data/TileStore\");\r\nconst HTMLManager_1 = require(\"./ui/HTMLManager\");\r\nconst Inventory_1 = require(\"./ui/Inventory\");\r\nconst KeyHandler_1 = require(\"./ui/KeyHandler\");\r\nconst LoopedSoundSourceManager_1 = require(\"./ui/LoopedSoundSourceManager\");\r\nconst SoundManager_1 = require(\"./ui/SoundManager\");\r\nconst TouchHandler_1 = require(\"./ui/TouchHandler\");\r\nconst ViewPort_1 = require(\"./ui/ViewPort\");\r\nclass SingletonRepo {\r\n    static getCStatus() {\r\n        return CStatus_1.CStatus.get();\r\n    }\r\n    static getCacheManager() {\r\n        return CacheManager_1.CacheManager.get();\r\n    }\r\n    static getClient() {\r\n        return Client_1.Client.get();\r\n    }\r\n    static getConfigManager() {\r\n        return ConfigManager_1.ConfigManager.get();\r\n    }\r\n    static getEmojiStore() {\r\n        return EmojiStore_1.EmojiStore.get();\r\n    }\r\n    static getEventRegistry() {\r\n        return EventRegistry_1.EventRegistry.get();\r\n    }\r\n    static getGroupManager() {\r\n        return GroupManager_1.GroupManager.get();\r\n    }\r\n    static getHTMLManager() {\r\n        return HTMLManager_1.HTMLManager.get();\r\n    }\r\n    static getInventory() {\r\n        return Inventory_1.Inventory.get();\r\n    }\r\n    static getKeyHandler() {\r\n        return KeyHandler_1.KeyHandler;\r\n    }\r\n    static getLoopedSoundSourceManager() {\r\n        return LoopedSoundSourceManager_1.LoopedSoundSourceManager.get();\r\n    }\r\n    static getMap() {\r\n        return Map_1.Map.get();\r\n    }\r\n    static getOutfitStore() {\r\n        return OutfitStore_1.OutfitStore.get();\r\n    }\r\n    static getPaths() {\r\n        return Paths_1.Paths;\r\n    }\r\n    static getSessionManager() {\r\n        return SessionManager_1.SessionManager.get();\r\n    }\r\n    static getSlashActionRepo() {\r\n        return SlashActionRepo_1.SlashActionRepo.get();\r\n    }\r\n    static getSoundManager() {\r\n        return SoundManager_1.SoundManager.get();\r\n    }\r\n    static getSpriteStore() {\r\n        return SpriteStore_1.store;\r\n    }\r\n    static getTileStore() {\r\n        return TileStore_1.TileStore.get();\r\n    }\r\n    static getTouchHandler() {\r\n        return TouchHandler_1.TouchHandler.get();\r\n    }\r\n    static getViewPort() {\r\n        return ViewPort_1.ViewPort.get();\r\n    }\r\n    static getWeatherRenderer() {\r\n        return WeatherRenderer_1.WeatherRenderer.get();\r\n    }\r\n}\r\nexports.SingletonRepo = SingletonRepo;\r\nexports.singletons = SingletonRepo;\r\n//# sourceMappingURL=SingletonRepo.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Ground = void 0;\r\n/**\r\n * a pseudo entity which represents the ground\r\n */\r\nclass Ground {\r\n    isVisibleToAction(filter) {\r\n        return false;\r\n    }\r\n    /**\r\n     * Calculates whether the click was close enough to a zone border to trigger\r\n     * a zone change.\r\n     *\r\n     * @param x x of click point in world coordinates\r\n     * @param y y of click point in world coordinates\r\n     * @return Direction of the zone to change to, <code>null</code> if no zone change should happen\r\n     */\r\n    calculateZoneChangeDirection(x, y) {\r\n        if (x < 15) {\r\n            return \"4\"; // LEFT\r\n        }\r\n        if (x > stendhal.data.map.zoneSizeX * 32 - 15) {\r\n            return \"2\"; // RIGHT\r\n        }\r\n        if (y < 15) {\r\n            return \"1\"; // UP\r\n        }\r\n        if (y > stendhal.data.map.zoneSizeY * 32 - 15) {\r\n            return \"3\"; // DOWN\r\n        }\r\n        return null;\r\n    }\r\n    getCursor(x, y) {\r\n        if ((x < 15) || (y < 15) || (x > stendhal.data.map.zoneSizeX * 32 - 15) || (y > stendhal.data.map.zoneSizeY * 32 - 15)) {\r\n            return \"url(\" + stendhal.paths.sprites + \"/cursor/walkborder.png) 1 3, auto\";\r\n        }\r\n        var worldX = Math.floor(x / 32);\r\n        var worldY = Math.floor(y / 32);\r\n        if (stendhal.data.map.collision(worldX, worldY)) {\r\n            return \"url(\" + stendhal.paths.sprites + \"/cursor/stop.png) 1 3, auto\";\r\n        }\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/walk.png) 1 3, auto\";\r\n    }\r\n    onclick(x, y, dblclick) {\r\n        if (!stendhal.config.getBoolean(\"client.pathfinding\")) {\r\n            return;\r\n        }\r\n        var gameX = x + stendhal.ui.gamewindow.offsetX;\r\n        var gameY = y + stendhal.ui.gamewindow.offsetY;\r\n        var action = {\r\n            \"type\": \"moveto\",\r\n            \"x\": \"\" + Math.floor(gameX / 32),\r\n            \"y\": \"\" + Math.floor(gameY / 32)\r\n        };\r\n        if (typeof dblclick == \"boolean\" && dblclick) {\r\n            action[\"double_click\"] = \"\";\r\n        }\r\n        var extend = this.calculateZoneChangeDirection(gameX, gameY);\r\n        if (extend) {\r\n            action.extend = extend;\r\n        }\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n}\r\nexports.Ground = Ground;\r\n//# sourceMappingURL=Ground.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Zone = void 0;\r\n/**\r\n * stendhal zone\r\n */\r\nclass Zone {\r\n    constructor() {\r\n        this.entities = [];\r\n    }\r\n    getEntitiesAt(x, y, filter) {\r\n        const xGrid = x / 32;\r\n        const yGrid = y / 32;\r\n        const entities = [];\r\n        for (const i in this.entities) {\r\n            const obj = this.entities[i];\r\n            if (obj.isVisibleToAction(filter)\r\n                && (obj[\"_x\"] <= xGrid) && (obj[\"_y\"] <= yGrid)\r\n                && (obj[\"_x\"] + (obj[\"width\"] || 1) >= xGrid)\r\n                && (obj[\"_y\"] + (obj[\"height\"] || 1) >= yGrid)) {\r\n                entities.push(obj);\r\n            }\r\n        }\r\n        return entities;\r\n    }\r\n    entityAt(x, y, filter) {\r\n        let res = stendhal.zone.ground;\r\n        for (const obj of this.getEntitiesAt(x, y, filter)) {\r\n            res = obj;\r\n        }\r\n        // If we found an entity, return it\r\n        if (res != stendhal.zone.ground) {\r\n            return res;\r\n        }\r\n        // Otherwise we check the draw area\r\n        for (var i in this.entities) {\r\n            let obj = this.entities[i];\r\n            if (!obj.isVisibleToAction(filter) || !obj[\"drawHeight\"]) {\r\n                continue;\r\n            }\r\n            let localX = obj[\"_x\"] * 32;\r\n            let localY = obj[\"_y\"] * 32;\r\n            let drawHeight = obj[\"drawHeight\"];\r\n            let drawWidth = obj[\"drawWidth\"];\r\n            var drawX = ((obj[\"width\"] * 32) - drawWidth) / 2;\r\n            var drawY = (obj[\"height\"] * 32) - drawHeight;\r\n            if ((localX + drawX <= x) && (localX + drawX + drawWidth >= x)\r\n                && (localY + drawY <= y) && (localY + drawY + drawHeight >= y)) {\r\n                res = obj;\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    sortEntities() {\r\n        this.entities = [];\r\n        for (var i in marauroa.currentZone) {\r\n            if (marauroa.currentZone.hasOwnProperty(i) && typeof (marauroa.currentZone[i]) != \"function\") {\r\n                this.entities.push(marauroa.currentZone[i]);\r\n            }\r\n        }\r\n        this.entities.sort(function (entity1, entity2) {\r\n            var rv = entity1.zIndex - entity2.zIndex;\r\n            if (rv == 0) {\r\n                rv = (entity1.y + entity1.height) - (entity2.y + entity2.height);\r\n                if (rv == 0) {\r\n                    rv = entity1.id - entity2.id;\r\n                }\r\n            }\r\n            return rv;\r\n        });\r\n    }\r\n}\r\nexports.Zone = Zone;\r\n//# sourceMappingURL=Zone.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ApplicationMenuDialog = void 0;\r\nconst DialogContentComponent_1 = require(\"../toolkit/DialogContentComponent\");\r\nconst SingletonRepo_1 = require(\"../../SingletonRepo\");\r\nconst slashActions = SingletonRepo_1.singletons.getSlashActionRepo();\r\nclass ApplicationMenuDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor() {\r\n        super(\"applicationmenudialog-template\");\r\n        this.actions = [\r\n            {\r\n                title: \"Account\",\r\n                children: [\r\n                    {\r\n                        title: \"Change Password\",\r\n                        action: \"changepassword\",\r\n                    },\r\n                    {\r\n                        title: \"Select character\",\r\n                        action: \"characterselector\",\r\n                    },\r\n                    {\r\n                        title: \"Login History\",\r\n                        action: \"loginhistory\",\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: \"Tools\",\r\n                children: [\r\n                    {\r\n                        title: \"Take Screenshot\",\r\n                        action: \"screenshot\",\r\n                    },\r\n                    {\r\n                        title: \"Settings\",\r\n                        action: \"settings\",\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: \"Commands\",\r\n                children: [\r\n                    {\r\n                        title: \"Atlas\",\r\n                        action: \"atlas\",\r\n                    },\r\n                    {\r\n                        title: \"Online Players\",\r\n                        action: \"who\",\r\n                    },\r\n                    {\r\n                        title: \"Hall of Fame\",\r\n                        action: \"halloffame\",\r\n                    },\r\n                    {\r\n                        title: \"Travel Log\",\r\n                        action: \"progressstatus\",\r\n                    }\r\n                ]\r\n            },\r\n            {\r\n                title: \"Help\",\r\n                children: [\r\n                    {\r\n                        title: \"Manual\",\r\n                        action: \"manual\",\r\n                    },\r\n                    {\r\n                        title: \"FAQ\",\r\n                        action: \"faq\",\r\n                    },\r\n                    {\r\n                        title: \"Beginners Guide\",\r\n                        action: \"beginnersguide\",\r\n                    },\r\n                    {\r\n                        title: \"Commands\",\r\n                        action: \"help\",\r\n                    },\r\n                    {\r\n                        title: \"Rules\",\r\n                        action: \"rules\",\r\n                    }\r\n                ]\r\n            },\r\n        ];\r\n        var content = \"\";\r\n        for (var i = 0; i < this.actions.length; i++) {\r\n            content += \"<div class=\\\"inlineblock buttonColumn\\\"><h4 class=\\\"menugroup\\\">\" + stendhal.ui.html.esc(this.actions[i].title) + \"</h4>\";\r\n            for (var j = 0; j < this.actions[i].children.length; j++) {\r\n                content += \"<button id=\\\"menubutton.\" + this.actions[i].children[j].action + \"\\\" class=\\\"menubutton\\\">\" + stendhal.ui.html.esc(this.actions[i].children[j].title) + \"</button><br>\";\r\n            }\r\n            content += \"</div>\";\r\n        }\r\n        this.componentElement.innerHTML = content;\r\n        this.componentElement.addEventListener(\"click\", (event) => {\r\n            this.onClick(event);\r\n        });\r\n    }\r\n    getConfigId() {\r\n        return \"menu\";\r\n    }\r\n    onClick(event) {\r\n        /* FIXME: session position is erases because \"settings\" button\r\n         *        causes \"close\" to be called multiple times.\r\n         */\r\n        var _a;\r\n        var cmd = (_a = event.target.id) === null || _a === void 0 ? void 0 : _a.substring(11);\r\n        if (cmd) {\r\n            slashActions.execute(\"/\" + cmd);\r\n        }\r\n        this.componentElement.dispatchEvent(new Event(\"close\"));\r\n        event.preventDefault();\r\n    }\r\n}\r\nexports.ApplicationMenuDialog = ApplicationMenuDialog;\r\n//# sourceMappingURL=ApplicationMenuDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ChooseCharacterDialog = void 0;\r\nconst Client_1 = require(\"../../Client\");\r\nconst DialogContentComponent_1 = require(\"../toolkit/DialogContentComponent\");\r\n/**\r\n * a dialog to select your character from\r\n */\r\nclass ChooseCharacterDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor(characters) {\r\n        super(\"choose-character-template\");\r\n        for (var i in characters) {\r\n            if (characters.hasOwnProperty(i)) {\r\n                let name = characters[i][\"a\"][\"name\"];\r\n                let button = document.createElement(\"button\");\r\n                button.innerText = name;\r\n                button.addEventListener(\"click\", () => {\r\n                    this.componentElement.dispatchEvent(new Event(\"close\"));\r\n                    Client_1.Client.get().chooseCharacter(name);\r\n                });\r\n                this.componentElement.append(button);\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.ChooseCharacterDialog = ChooseCharacterDialog;\r\n//# sourceMappingURL=ChooseCharacterDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CreateAccountDialog = void 0;\r\nconst UI_1 = require(\"../UI\");\r\nconst DialogContentComponent_1 = require(\"../toolkit/DialogContentComponent\");\r\nconst LoginDialog_1 = require(\"./LoginDialog\");\r\n/**\r\n * a dialog to enter username and password\r\n */\r\nclass CreateAccountDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor() {\r\n        super(\"createaccountdialog-template\");\r\n        this.child(\"input[type=submit]\").addEventListener(\"click\", (event) => {\r\n            event.preventDefault();\r\n            let username = this.child(\"#username\").value;\r\n            let password = this.child(\"#password\").value;\r\n            let passwordRepeat = this.child(\"#passwordrepeat\").value;\r\n            let email = this.child(\"#email\").value;\r\n            if (!username || !password || !passwordRepeat) {\r\n                alert(\"Please fill in all required fields.\");\r\n                return;\r\n            }\r\n            if (password != passwordRepeat) {\r\n                alert(\"Password and password repetition do not match.\");\r\n                return;\r\n            }\r\n            marauroa.clientFramework.createAccount(username, password, email);\r\n        });\r\n        this.child(\"a\").addEventListener(\"click\", (event) => {\r\n            event.preventDefault();\r\n            this.close();\r\n            UI_1.ui.createSingletonFloatingWindow(\"Login\", new LoginDialog_1.LoginDialog(), 100, 50);\r\n        });\r\n    }\r\n}\r\nexports.CreateAccountDialog = CreateAccountDialog;\r\n//# sourceMappingURL=CreateAccountDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LoginDialog = void 0;\r\nconst Client_1 = require(\"../../Client\");\r\nconst UI_1 = require(\"../UI\");\r\nconst DialogContentComponent_1 = require(\"../toolkit/DialogContentComponent\");\r\nconst CreateAccountDialog_1 = require(\"./CreateAccountDialog\");\r\n/**\r\n * a dialog to enter username and password\r\n */\r\nclass LoginDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor() {\r\n        super(\"logindialog-template\");\r\n        this.child(\"button\").addEventListener(\"click\", (event) => {\r\n            event.preventDefault();\r\n            let username = this.child(\"#username\").value;\r\n            let password = this.child(\"#password\").value;\r\n            Client_1.Client.get().username = username;\r\n            marauroa.clientFramework.login(username, password);\r\n            this.close();\r\n        });\r\n        this.child(\"a\").addEventListener(\"click\", (event) => {\r\n            event.preventDefault();\r\n            this.close();\r\n            UI_1.ui.createSingletonFloatingWindow(\"Create Account\", new CreateAccountDialog_1.CreateAccountDialog(), 100, 50);\r\n        });\r\n    }\r\n}\r\nexports.LoginDialog = LoginDialog;\r\n//# sourceMappingURL=LoginDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Panel = void 0;\r\nconst Component_1 = require(\"./Component\");\r\n/**\r\n * a panel\r\n */\r\nclass Panel extends Component_1.Component {\r\n    /**\r\n     * creates a new panel\r\n     *\r\n     * @param id id of HTML element or template\r\n     * @param themable\r\n     */\r\n    constructor(id, themable = false) {\r\n        super(id, themable);\r\n        this.children = [];\r\n        this.containerElement = this.componentElement;\r\n    }\r\n    /**\r\n     * adds a component to this panel\r\n     *\r\n     * @param child Component to add to this panel\r\n     */\r\n    add(child) {\r\n        if (this.children.indexOf(child) > -1) {\r\n            return;\r\n        }\r\n        this.children.push(child);\r\n        if (!this.containerElement.contains(child.componentElement)) {\r\n            this.containerElement.append(child.componentElement);\r\n        }\r\n    }\r\n    /**\r\n     * removes a component from this panel\r\n     *\r\n     * @param child Component to remove from this panel\r\n     */\r\n    remove(child) {\r\n        let index = this.children.indexOf(child);\r\n        if (index < 0) {\r\n            return;\r\n        }\r\n        this.children.splice(index, 1);\r\n        if (this.containerElement.contains(child.componentElement)) {\r\n            child.componentElement.remove();\r\n        }\r\n    }\r\n    /**\r\n     * removes all children\r\n     */\r\n    clear() {\r\n        this.children = [];\r\n        this.containerElement.innerHTML = \"\";\r\n    }\r\n}\r\nexports.Panel = Panel;\r\n//# sourceMappingURL=Panel.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TabPanelComponent = void 0;\r\nconst Panel_1 = require(\"./Panel\");\r\n/**\r\n * a tabbed panel\r\n */\r\nclass TabPanelComponent extends Panel_1.Panel {\r\n    /**\r\n     * creates a new panel\r\n     *\r\n     * @param id id of HTML element or template\r\n     */\r\n    constructor() {\r\n        super(\"tabpanel-template\");\r\n        this.currentIndex = 0;\r\n        this.buttons = [];\r\n        this.containerElement = this.child(\".tabpanel-content\");\r\n    }\r\n    add(child) {\r\n        if (this.children.length != this.currentIndex) {\r\n            child.componentElement.style.display = \"none\";\r\n        }\r\n        super.add(child);\r\n    }\r\n    addTab(label) {\r\n        let button = document.createElement(\"button\");\r\n        button.innerText = label;\r\n        button.dataset.index = \"\" + this.child(\".tabpanel-tabs\").children.length;\r\n        button.addEventListener(\"click\", (e) => {\r\n            this.onTabClick(e);\r\n        });\r\n        if (this.buttons.length === 0) {\r\n            button.classList.add(\"active\");\r\n        }\r\n        this.buttons.push(button);\r\n        this.child(\".tabpanel-tabs\").append(button);\r\n    }\r\n    /**\r\n     * Sets the visible child panel.\r\n     *\r\n     * @param idx\r\n     *     Index of child panel to show.\r\n     */\r\n    setCurrentTab(idx) {\r\n        if (idx == this.currentIndex) {\r\n            return;\r\n        }\r\n        // hide\r\n        this.children[this.currentIndex].componentElement.style.display = \"none\";\r\n        this.buttons[this.currentIndex].classList.remove(\"active\");\r\n        // select\r\n        this.currentIndex = idx;\r\n        // show\r\n        this.children[this.currentIndex].componentElement.style.display = \"block\";\r\n        this.buttons[this.currentIndex].classList.add(\"active\");\r\n    }\r\n    onTabClick(event) {\r\n        this.setCurrentTab(Number.parseInt(event.target.dataset.index, 10));\r\n    }\r\n}\r\nexports.TabPanelComponent = TabPanelComponent;\r\n//# sourceMappingURL=TabPanelComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BagComponent = void 0;\r\nconst ItemInventoryComponent_1 = require(\"./ItemInventoryComponent\");\r\nclass BagComponent extends ItemInventoryComponent_1.ItemInventoryComponent {\r\n    constructor(object, slot, sizeX, sizeY, quickPickup, defaultImage) {\r\n        super(object, slot, sizeX, sizeY, quickPickup, defaultImage);\r\n        this.slotSize = \"3 4\";\r\n    }\r\n    update() {\r\n        let features = null;\r\n        if (marauroa.me != null) {\r\n            features = marauroa.me[\"features\"];\r\n        }\r\n        if (features == null) {\r\n            return;\r\n        }\r\n        let size = features[\"bag\"];\r\n        if (size) {\r\n            if (this.slotSize != size) {\r\n                this.slotSize = size;\r\n                let sizeArray = size.split(\" \");\r\n                let sizeX = parseInt(sizeArray[0], 10);\r\n                let sizeY = parseInt(sizeArray[1], 10);\r\n                this.resize(sizeX, sizeY);\r\n            }\r\n        }\r\n        super.update();\r\n    }\r\n    resize(sizeX, sizeY) {\r\n        super.setSize(sizeX, sizeY);\r\n        this.itemContainerImplementation.init(sizeX * sizeY);\r\n    }\r\n}\r\nexports.BagComponent = BagComponent;\r\n//# sourceMappingURL=BagComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BuddyListComponent = void 0;\r\nconst UI_1 = require(\"../UI\");\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst ActionContextMenu_1 = require(\"../dialog/ActionContextMenu\");\r\n/**\r\n * displays the player stats\r\n */\r\nclass BuddyListComponent extends Component_1.Component {\r\n    constructor() {\r\n        super(\"buddyList\");\r\n        this.buddies = [];\r\n        this.componentElement.addEventListener(\"mouseup\", (event) => {\r\n            this.onMouseUp(event);\r\n        });\r\n        this.componentElement.addEventListener(\"contextmenu\", (event) => {\r\n            event.preventDefault();\r\n        });\r\n    }\r\n    // TODO: don't rebuilt the buddylist completely on every turn,\r\n    //       but implement an observer\r\n    update() {\r\n        let data = marauroa.me[\"buddies\"];\r\n        let buddies = [];\r\n        for (let buddy in data) {\r\n            if (data.hasOwnProperty(buddy)) {\r\n                let entry = { \"name\": buddy };\r\n                if (data[buddy] == \"true\") {\r\n                    entry.isOnline = true;\r\n                    entry.status = \"online\";\r\n                }\r\n                else {\r\n                    entry.isOnline = false;\r\n                    entry.status = \"offline\";\r\n                }\r\n                buddies.push(entry);\r\n            }\r\n        }\r\n        this.sort(buddies);\r\n        let html = \"\";\r\n        for (let i = 0; i < buddies.length; i++) {\r\n            html += \"<li class=\" + buddies[i].status + \"><img src=\\\"\";\r\n            if (buddies[i].status == \"online\") {\r\n                html += stendhal.paths.gui + \"/buddy_online.png\";\r\n            }\r\n            else {\r\n                html += stendhal.paths.gui + \"/buddy_offline.png\";\r\n            }\r\n            html += \"\\\"> \" + stendhal.ui.html.esc(buddies[i].name) + \"</li>\";\r\n        }\r\n        if (this.lastHtml !== html) {\r\n            let buddyListUL = this.child(\"#buddyListUL\");\r\n            buddyListUL.innerHTML = html;\r\n            this.lastHtml = html;\r\n        }\r\n        this.buddies = buddies;\r\n    }\r\n    /**\r\n     * sorts the buddy list\r\n     */\r\n    sort(buddies) {\r\n        buddies.sort(function compare(a, b) {\r\n            // online buddies first\r\n            if (a.isOnline) {\r\n                if (!b.isOnline) {\r\n                    return -1;\r\n                }\r\n            }\r\n            else {\r\n                if (b.isOnline) {\r\n                    return 1;\r\n                }\r\n            }\r\n            // sort by name\r\n            if (a.name < b.name) {\r\n                return -1;\r\n            }\r\n            if (a.name > b.name) {\r\n                return 1;\r\n            }\r\n            return 0;\r\n        });\r\n    }\r\n    setBuddyStatus(buddy, status) {\r\n        this.removeBuddy(buddy);\r\n        let newEntry = { \"name\": buddy, \"status\": status };\r\n        this.buddies.push(newEntry);\r\n        this.sort(this.buddies);\r\n    }\r\n    hasBuddy(buddy) {\r\n        let arrayLength = this.buddies.length;\r\n        for (let i = 0; i < arrayLength; i++) {\r\n            if (this.buddies[i].name === buddy) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    removeBuddy(buddy) {\r\n        let arrayLength = this.buddies.length;\r\n        for (let i = 0; i < arrayLength; i++) {\r\n            if (this.buddies[i].name === buddy) {\r\n                this.buddies.splice(i, 1);\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    buildActions(actions) {\r\n        if (!this.current) {\r\n            return;\r\n        }\r\n        if (this.current.className === \"online\") {\r\n            actions.push({\r\n                title: \"Talk\",\r\n                action: function (buddyListComponent) {\r\n                    UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatInput).setText(\"/msg \"\r\n                        + buddyListComponent.current.textContent.trim()\r\n                        + \" \");\r\n                }\r\n            });\r\n            actions.push({\r\n                title: \"Where\",\r\n                action: function (buddyListComponent) {\r\n                    let action = {\r\n                        \"type\": \"where\",\r\n                        \"target\": buddyListComponent.current.textContent.trim(),\r\n                        \"zone\": marauroa.currentZoneName\r\n                    };\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n            // Invite\r\n        }\r\n        else {\r\n            actions.push({\r\n                title: \"Leave Message\",\r\n                action: function (buddyListComponent) {\r\n                    UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatInput).setText(\"/storemessage \"\r\n                        + buddyListComponent.current.textContent.trim()\r\n                        + \" \");\r\n                }\r\n            });\r\n        }\r\n        actions.push({\r\n            title: \"Remove\",\r\n            action: function (buddyListComponent) {\r\n                let action = {\r\n                    \"type\": \"removebuddy\",\r\n                    \"target\": buddyListComponent.current.textContent.trim(),\r\n                    \"zone\": marauroa.currentZoneName\r\n                };\r\n                marauroa.clientFramework.sendAction(action);\r\n                buddyListComponent.removeBuddy(buddyListComponent.current.textContent.trim());\r\n            }\r\n        });\r\n    }\r\n    onMouseUp(event) {\r\n        // get the <li> element. Ignore the click, if it was on the <ul> outside any <li>s.\r\n        this.current = undefined;\r\n        let target = event.target;\r\n        if (target.tagName === \"LI\") {\r\n            this.current = target;\r\n        }\r\n        else if (target.tagName === \"IMG\") {\r\n            this.current = target.parentElement;\r\n        }\r\n        if (this.current) {\r\n            stendhal.ui.actionContextMenu.set(UI_1.ui.createSingletonFloatingWindow(\"Action\", new ActionContextMenu_1.ActionContextMenu(this), Math.max(10, event.pageX - 50), event.pageY - 5));\r\n        }\r\n    }\r\n}\r\nexports.BuddyListComponent = BuddyListComponent;\r\n//# sourceMappingURL=BuddyListComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ChatOptionsDialog = void 0;\r\nconst DialogContentComponent_1 = require(\"../toolkit/DialogContentComponent\");\r\nconst Chat_1 = require(\"../../util/Chat\");\r\nclass ChatOptionsDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor() {\r\n        super(\"keywordmap-template\");\r\n        // common chat options\r\n        const custom_options = [];\r\n        for (let opt of stendhal.config.get(\"chat.custom_keywords\").split(\",\")) {\r\n            opt = opt.trim();\r\n            if (opt) {\r\n                custom_options.push(opt);\r\n            }\r\n        }\r\n        // attending NPC (note that options are parsed from most recent NPC if there are multiple attending)\r\n        const npc_options = [];\r\n        const not_attending = Chat_1.Chat.options.length == 1 && Chat_1.Chat.options[0].toLowerCase() === \"hello\";\r\n        for (let opt of Chat_1.Chat.options) {\r\n            opt = opt.toLowerCase();\r\n            const original = ChatOptionsDialog.aliases[opt];\r\n            if (original) {\r\n                opt = original;\r\n            }\r\n            // don't add duplicates if already in custom options\r\n            if (custom_options.indexOf(opt) == -1) {\r\n                npc_options.push(opt);\r\n            }\r\n        }\r\n        if (npc_options.length > 0) {\r\n            this.addGroup(not_attending || !Chat_1.Chat.attending ? undefined : Chat_1.Chat.attending, npc_options);\r\n        }\r\n        if (custom_options.length > 0) {\r\n            this.addGroup(\"Custom\", custom_options);\r\n        }\r\n    }\r\n    addGroup(title, options) {\r\n        if (title) {\r\n            const titleElement = document.createElement(\"div\");\r\n            titleElement.innerText = title;\r\n            this.componentElement.appendChild(titleElement);\r\n        }\r\n        let row = document.createElement(\"div\");\r\n        this.componentElement.appendChild(row);\r\n        for (let idx = 0; idx < options.length; idx++) {\r\n            if (idx > 0 && idx % 13 == 0) {\r\n                // new row\r\n                row = document.createElement(\"div\");\r\n                this.componentElement.appendChild(row);\r\n            }\r\n            const keyword = options[idx];\r\n            const button = document.createElement(\"button\");\r\n            button.className = \"shortcut-button\";\r\n            button.innerText = keyword;\r\n            button.addEventListener(\"click\", (evt) => {\r\n                this.onButtonPressed(keyword);\r\n            });\r\n            row.appendChild(button);\r\n        }\r\n    }\r\n    onButtonPressed(keyword) {\r\n        const action = {\r\n            \"type\": \"chat\",\r\n            \"text\": keyword\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n        this.close();\r\n    }\r\n}\r\nexports.ChatOptionsDialog = ChatOptionsDialog;\r\n/* Some keywords don't need repeated in NPC options. Others, such as \"task\" or \"favor\" which\r\n * serve as alternatives to \"quest\", may be highlighted in dialogue so keep those.\r\n */\r\nChatOptionsDialog.aliases = {\r\n    \"bye\": \"goodbye\",\r\n    \"hi\": \"hello\",\r\n};\r\n//# sourceMappingURL=ChatOptionsDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmojiMapDialog = void 0;\r\nconst DialogContentComponent_1 = require(\"../toolkit/DialogContentComponent\");\r\nconst SingletonRepo_1 = require(\"../../SingletonRepo\");\r\nclass EmojiMapDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor() {\r\n        super(\"emojimap-template\");\r\n        const emojiStore = SingletonRepo_1.singletons.getEmojiStore();\r\n        let idx = 0;\r\n        let row = document.createElement(\"div\");\r\n        this.componentElement.appendChild(row);\r\n        for (const emoji of emojiStore.getEmojiList()) {\r\n            if (idx > 0 && idx % 13 == 0) {\r\n                // new row\r\n                row = document.createElement(\"div\");\r\n                this.componentElement.appendChild(row);\r\n            }\r\n            const button = document.createElement(\"button\");\r\n            button.className = \"shortcut-button\";\r\n            button.appendChild(stendhal.data.sprites.get(stendhal.paths.sprites + \"/emoji/\" + emoji + \".png\").cloneNode());\r\n            button.addEventListener(\"click\", (evt) => {\r\n                this.onButtonPressed(emoji);\r\n            });\r\n            //~ this.componentElement.appendChild(button);\r\n            row.appendChild(button);\r\n            idx++;\r\n        }\r\n    }\r\n    onButtonPressed(emoji) {\r\n        const action = {\r\n            \"type\": \"chat\",\r\n            \"text\": \":\" + emoji + \":\"\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n        this.close();\r\n    }\r\n}\r\nexports.EmojiMapDialog = EmojiMapDialog;\r\n//# sourceMappingURL=EmojiMapDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ChatInputComponent = void 0;\r\nconst KeyHandler_1 = require(\"../KeyHandler\");\r\nconst UI_1 = require(\"../UI\");\r\nconst ChatOptionsDialog_1 = require(\"../dialog/ChatOptionsDialog\");\r\nconst EmojiMapDialog_1 = require(\"../dialog/EmojiMapDialog\");\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst SingletonRepo_1 = require(\"../../SingletonRepo\");\r\nconst config = SingletonRepo_1.singletons.getConfigManager();\r\nconst slashActions = SingletonRepo_1.singletons.getSlashActionRepo();\r\n/**\r\n * chat input text field\r\n */\r\nclass ChatInputComponent extends Component_1.Component {\r\n    constructor() {\r\n        super(\"chatinput\");\r\n        this.inputElement = this.componentElement;\r\n        this.componentElement.addEventListener(\"keydown\", (event) => {\r\n            this.onKeyDown(event);\r\n        });\r\n        this.componentElement.addEventListener(\"keypress\", (event) => {\r\n            this.onKeyPress(event);\r\n        });\r\n        // restore from previous session\r\n        this.history = config.getObject(\"chat.history\") || [];\r\n        this.historyIndex = config.getInt(\"chat.history.index\", 0);\r\n        const btn_send = document.getElementById(\"send-button\");\r\n        btn_send.addEventListener(\"click\", (e) => {\r\n            this.send();\r\n        });\r\n        // ** keyword shortcuts ** //\r\n        const btn_keyword = document.getElementById(\"keywords-button\");\r\n        // event to bring up keywords dialog\r\n        btn_keyword.addEventListener(\"click\", (e) => {\r\n            this.buildChatOptions();\r\n        });\r\n        // ** emoji shortcuts ** //\r\n        const btn_emoji = document.getElementById(\"emojis-button\");\r\n        // clear default text & add emoji image\r\n        btn_emoji.innerText = \"\";\r\n        // set image for emoji button\r\n        btn_emoji.appendChild(stendhal.data.sprites.get(stendhal.paths.sprites + \"/emoji/smile.png\").cloneNode());\r\n        // event to bring up emoji dialog\r\n        btn_emoji.addEventListener(\"click\", (e) => {\r\n            this.buildEmojiMap();\r\n        });\r\n    }\r\n    clear() {\r\n        this.inputElement.value = \"\";\r\n    }\r\n    setText(text) {\r\n        this.inputElement.value = text;\r\n        this.inputElement.focus();\r\n    }\r\n    fromHistory(i) {\r\n        this.historyIndex = this.historyIndex + i;\r\n        if (this.historyIndex < 0) {\r\n            this.historyIndex = 0;\r\n        }\r\n        if (this.historyIndex >= this.history.length) {\r\n            this.historyIndex = this.history.length;\r\n            this.clear();\r\n        }\r\n        else {\r\n            this.inputElement.value = this.history[this.historyIndex];\r\n        }\r\n    }\r\n    onKeyDown(event) {\r\n        let code = stendhal.ui.html.extractKeyCode(event);\r\n        if (event.shiftKey) {\r\n            // chat history\r\n            if (code === KeyHandler_1.KeyHandler.keycode.up) {\r\n                event.preventDefault();\r\n                this.fromHistory(-1);\r\n            }\r\n            else if (code === KeyHandler_1.KeyHandler.keycode.down) {\r\n                event.preventDefault();\r\n                this.fromHistory(1);\r\n            }\r\n        }\r\n    }\r\n    onKeyPress(event) {\r\n        if (event.keyCode === 13) {\r\n            this.send();\r\n            event.preventDefault();\r\n        }\r\n    }\r\n    remember(text) {\r\n        if (this.history.length > 100) {\r\n            this.history.shift();\r\n        }\r\n        this.history[this.history.length] = text;\r\n        this.historyIndex = this.history.length;\r\n        // preserve across sessions\r\n        // XXX: should this be done at logout/destruction for performance?\r\n        config.set(\"chat.history\", this.history);\r\n        config.set(\"chat.history.index\", this.historyIndex);\r\n    }\r\n    send() {\r\n        let val = this.inputElement.value;\r\n        let array = val.split(\" \");\r\n        if (array[0] === \"/choosecharacter\") {\r\n            marauroa.clientFramework.chooseCharacter(array[1]);\r\n        }\r\n        else if (val === '/close') {\r\n            marauroa.clientFramework.close();\r\n        }\r\n        else {\r\n            if (slashActions.execute(val)) {\r\n                this.remember(val);\r\n            }\r\n        }\r\n        this.clear();\r\n    }\r\n    buildChatOptions() {\r\n        const wstate = stendhal.config.getWindowState(\"shortcuts\");\r\n        const content = new ChatOptionsDialog_1.ChatOptionsDialog();\r\n        const dialog = UI_1.ui.createSingletonFloatingWindow(\"Chat Options\", content, wstate.x, wstate.y);\r\n        dialog.setId(\"shortcuts\");\r\n        // needed in order to close dialog from within\r\n        content.setFrame(dialog);\r\n    }\r\n    buildEmojiMap() {\r\n        const wstate = stendhal.config.getWindowState(\"shortcuts\");\r\n        const content = new EmojiMapDialog_1.EmojiMapDialog();\r\n        const dialog = UI_1.ui.createSingletonFloatingWindow(\"Emojis\", content, wstate.x, wstate.y);\r\n        dialog.setId(\"shortcuts\");\r\n        // needed in order to close dialog from within\r\n        content.setFrame(dialog);\r\n    }\r\n}\r\nexports.ChatInputComponent = ChatInputComponent;\r\n//# sourceMappingURL=ChatInputComponent.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ChatLogComponent = void 0;\r\nconst UI_1 = require(\"../UI\");\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\n/**\r\n * Chat Log\r\n */\r\nclass ChatLogComponent extends Component_1.Component {\r\n    constructor() {\r\n        super(\"chat\");\r\n        this.refresh();\r\n        this.componentElement.addEventListener(\"mouseup\", (evt) => {\r\n            this.onContextMenu(evt);\r\n        });\r\n    }\r\n    refresh() {\r\n        this.componentElement.style.setProperty(\"font-family\", stendhal.config.get(\"ui.font.chat\"));\r\n    }\r\n    /**\r\n     * Generates a timestamp.\r\n     *\r\n     * @return\r\n     *     Timestamp formatted <code>HTMLSpanElement</code> element.\r\n     */\r\n    createTimestamp() {\r\n        const date = new Date();\r\n        let time = \"\" + date.getHours() + \":\";\r\n        if (date.getHours() < 10) {\r\n            time = \"0\" + time;\r\n        }\r\n        if (date.getMinutes() < 10) {\r\n            time = time + \"0\";\r\n        }\r\n        time = time + date.getMinutes();\r\n        const timestamp = document.createElement(\"span\");\r\n        timestamp.className = \"logtimestamp\";\r\n        timestamp.innerHTML = \"[\" + time + \"]\";\r\n        return timestamp;\r\n    }\r\n    add(row) {\r\n        const chatElement = this.componentElement;\r\n        const isAtBottom = (chatElement.scrollHeight - chatElement.clientHeight) <= chatElement.scrollTop + 5;\r\n        chatElement.appendChild(row);\r\n        if (isAtBottom) {\r\n            chatElement.scrollTop = chatElement.scrollHeight;\r\n        }\r\n    }\r\n    /**\r\n     * Adds a line of text.\r\n     *\r\n     * @param type\r\n     *     Message type.\r\n     * @param message\r\n     *     Text to be added.\r\n     * @param orator\r\n     *     Name of entity making the expression (default: <code>undefined</code>).\r\n     * @param timestamp\r\n     *     If <code>false</code>, suppresses prepending message with timestamp.\r\n     */\r\n    addLine(type, message, orator, timestamp = true) {\r\n        if (orator) {\r\n            message = orator + \": \" + message;\r\n        }\r\n        const lcol = document.createElement(\"div\");\r\n        lcol.className = \"logcolL\";\r\n        if (timestamp) {\r\n            lcol.appendChild(this.createTimestamp());\r\n        }\r\n        else {\r\n            // add whitespace to preserve margin of right column\r\n            lcol.innerHTML = \" \";\r\n        }\r\n        const rcol = document.createElement(\"div\");\r\n        rcol.className = \"logcolR log\" + type;\r\n        rcol.innerHTML += this.formatLogEntry(message);\r\n        const row = document.createElement(\"div\");\r\n        row.className = \"logrow\";\r\n        row.appendChild(lcol);\r\n        row.appendChild(rcol);\r\n        this.add(row);\r\n    }\r\n    /**\r\n     * Adds multiple lines of text.\r\n     *\r\n     * @param type\r\n     *     Message type.\r\n     * @param messages\r\n     *     Texts to be added.\r\n     * @param orator\r\n     *     Name of entity making the expression (default: <code>undefined</code>).\r\n     */\r\n    addLines(type, messages, orator) {\r\n        let stamped = false;\r\n        for (const line of messages) {\r\n            if (!stamped) {\r\n                this.addLine(type, line, orator);\r\n                stamped = true;\r\n            }\r\n            else {\r\n                this.addLine(type, line, orator, false);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Adds a line displaying an emoji image.\r\n     *\r\n     * @param emoji\r\n     *     Emoji image sprite.\r\n     * @param orator\r\n     *     Name of entity making the expression (default: <code>undefined</code>).\r\n     */\r\n    addEmojiLine(emoji, orator) {\r\n        const lcol = document.createElement(\"div\");\r\n        lcol.className = \"logcolL\";\r\n        lcol.appendChild(this.createTimestamp());\r\n        const rcol = document.createElement(\"div\");\r\n        rcol.className = \"logcolR lognormal\";\r\n        if (orator) {\r\n            rcol.innerHTML += orator + \": \";\r\n        }\r\n        // create a copy so old emoji line isn't removed\r\n        rcol.appendChild(emoji.cloneNode());\r\n        const row = document.createElement(\"div\");\r\n        row.className = \"logrow\";\r\n        row.appendChild(lcol);\r\n        row.appendChild(rcol);\r\n        this.add(row);\r\n    }\r\n    formatLogEntry(message) {\r\n        if (!message) {\r\n            return \"\";\r\n        }\r\n        let res = \"\";\r\n        let delims = [\" \", \",\", \".\", \"!\", \"?\", \":\", \";\"];\r\n        let length = message.length;\r\n        let inHighlight = false, inUnderline = false, inHighlightQuote = false, inUnderlineQuote = false;\r\n        for (let i = 0; i < length; i++) {\r\n            let c = message[i];\r\n            if (c === \"\\\\\") {\r\n                let n = message[i + 1];\r\n                res += n;\r\n                i++;\r\n                // Highlight Start?\r\n            }\r\n            else if (c === \"#\") {\r\n                if (inHighlight) {\r\n                    res += c;\r\n                    continue;\r\n                }\r\n                let n = message[i + 1];\r\n                if (n === \"#\") {\r\n                    res += c;\r\n                    i++;\r\n                    continue;\r\n                }\r\n                if (n === \"'\") {\r\n                    inHighlightQuote = true;\r\n                    i++;\r\n                }\r\n                inHighlight = true;\r\n                res += \"<span class=\\\"logh\\\">\";\r\n                // Underline start?\r\n            }\r\n            else if (c === \"\u00a7\") {\r\n                if (inUnderline) {\r\n                    res += c;\r\n                    continue;\r\n                }\r\n                let n = message[i + 1];\r\n                if (n === \"\u00a7\") {\r\n                    res += c;\r\n                    i++;\r\n                    continue;\r\n                }\r\n                if (n === \"'\") {\r\n                    inUnderlineQuote = true;\r\n                    i++;\r\n                }\r\n                inUnderline = true;\r\n                res += \"<span class=\\\"logi\\\">\";\r\n                // End Highlight and Underline?\r\n            }\r\n            else if (c === \"'\") {\r\n                if (inUnderlineQuote) {\r\n                    inUnderline = false;\r\n                    inUnderlineQuote = false;\r\n                    res += \"</span>\";\r\n                    continue;\r\n                }\r\n                if (inHighlightQuote) {\r\n                    inHighlight = false;\r\n                    inHighlightQuote = false;\r\n                    res += \"</span>\";\r\n                    continue;\r\n                }\r\n                res += c;\r\n                // HTML escape\r\n            }\r\n            else if (c === \"<\") {\r\n                res += \"&lt;\";\r\n                // End of word\r\n            }\r\n            else if (delims.indexOf(c) > -1) {\r\n                let n = message[i + 1];\r\n                if (c === \" \" || n === \" \" || n == undefined) {\r\n                    if (inUnderline && !inUnderlineQuote && !inHighlightQuote) {\r\n                        inUnderline = false;\r\n                        res += \"</span>\" + c;\r\n                        continue;\r\n                    }\r\n                    if (inHighlight && !inUnderlineQuote && !inHighlightQuote) {\r\n                        inHighlight = false;\r\n                        res += \"</span>\" + c;\r\n                        continue;\r\n                    }\r\n                }\r\n                res += c;\r\n                // Normal characters\r\n            }\r\n            else {\r\n                res += c;\r\n            }\r\n        }\r\n        // Close opened formattings\r\n        if (inUnderline) {\r\n            res += \"</span>\";\r\n        }\r\n        if (inHighlight) {\r\n            res += \"</span>\";\r\n        }\r\n        return res;\r\n    }\r\n    clear() {\r\n        this.componentElement.innerHTML = \"\";\r\n    }\r\n    exportContents(clipboard = true) {\r\n        if (clipboard && (!navigator || !navigator.clipboard)) {\r\n            console.warn(\"copying to clipboard not supported by this browser\");\r\n            return;\r\n        }\r\n        const lines = [];\r\n        // try to get highlightext text first\r\n        if (window.getSelection) {\r\n            const sel = window.getSelection();\r\n            let value;\r\n            if (sel && sel.type == \"Range\") {\r\n                // FIXME: how to get only text from log when text from multiple elements is selected?\r\n                if (sel.rangeCount == 1) {\r\n                    value = sel.toString();\r\n                }\r\n            }\r\n            if (value && value !== \"\") {\r\n                lines.push(value);\r\n            }\r\n            //~ } else if (document.selection && document.selection.type == \"Text\") {\r\n            //~ lines.push(document.selection.createRange().text);\r\n        }\r\n        // if no highlighted text, copy the entire log\r\n        if (lines.length == 0) {\r\n            const children = this.componentElement.children;\r\n            for (let idx = 0; idx < children.length; idx++) {\r\n                const row = children[idx];\r\n                let text = row.children[0].innerHTML.trim() + \" \";\r\n                if (text.trim() === \"\") {\r\n                    text = \"    \";\r\n                }\r\n                text = this.plainText(text + row.children[1].innerHTML, [\"span\", \"div\"]);\r\n                lines.push(text.replace(\"&lt;\", \"<\").replace(\"&gt;\", \">\"));\r\n            }\r\n        }\r\n        if (lines.length > 0) {\r\n            // TODO: export to file\r\n            if (clipboard) {\r\n                navigator.clipboard.writeText(lines.join(\"\\n\"));\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Removes HTML tag formatting from a string.\r\n     *\r\n     * @param msg\r\n     *     Message to format.\r\n     * @param tags\r\n     *     Only remove listed tags.\r\n     * @return\r\n     *     Formatted message.\r\n     */\r\n    plainText(msg, tags = undefined) {\r\n        if (!tags) {\r\n            msg = msg.replace(/<.*?>/g, \"\");\r\n        }\r\n        else {\r\n            for (const tag of tags) {\r\n                msg = msg.replace(new RegExp(\"<\" + tag + \".*?>\", \"g\"), \"\")\r\n                    .replace(new RegExp(\"</\" + tag + \">\", \"g\"), \"\");\r\n            }\r\n        }\r\n        return msg;\r\n    }\r\n    onContextMenu(evt) {\r\n        if (!evt || evt.button != 2 || stendhal.ui.actionContextMenu.isOpen()) {\r\n            return;\r\n        }\r\n        // setting \"log\" to \"this\" here doesn't work\r\n        const log = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatLog);\r\n        const options = [\r\n            {\r\n                title: \"Clear\",\r\n                action: function () { log.clear(); }\r\n            }\r\n        ];\r\n        if (navigator && navigator.clipboard) {\r\n            options.unshift({\r\n                title: \"Copy\",\r\n                action: function () { log.exportContents(); }\r\n            });\r\n        }\r\n        const pos = stendhal.ui.html.extractPosition(evt);\r\n        stendhal.ui.actionContextMenu.set(UI_1.ui.createSingletonFloatingWindow(\"Action\", new LogContextMenu(options), pos.pageX - 50, pos.pageY - 5));\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n    }\r\n}\r\nexports.ChatLogComponent = ChatLogComponent;\r\nclass LogContextMenu extends Component_1.Component {\r\n    constructor(options) {\r\n        super(\"contextmenu-template\");\r\n        this.options = options;\r\n        let content = \"<div class=\\\"actionmenu\\\">\";\r\n        for (let i = 0; i < this.options.length; i++) {\r\n            content += \"<button id=\\\"actionbutton.\" + i + \"\\\">\" + stendhal.ui.html.esc(this.options[i].title) + \"</button><br>\";\r\n        }\r\n        content += \"</div>\";\r\n        this.componentElement.innerHTML = content;\r\n        this.componentElement.addEventListener(\"click\", (evt) => {\r\n            this.onClick(evt);\r\n        });\r\n    }\r\n    onClick(evt) {\r\n        var _a;\r\n        let iStr = (_a = evt.target.getAttribute(\"id\")) === null || _a === void 0 ? void 0 : _a.substring(13);\r\n        if (iStr === undefined || iStr === \"\") {\r\n            return;\r\n        }\r\n        let i = parseInt(iStr);\r\n        if (i < 0) {\r\n            return;\r\n        }\r\n        this.componentElement.dispatchEvent(new Event(\"close\"));\r\n        if (i >= this.options.length) {\r\n            throw new Error(\"actions index is larger than number of actions\");\r\n        }\r\n        const action = this.options[i].action;\r\n        if (action) {\r\n            action();\r\n        }\r\n        else {\r\n            console.error(\"chat log context menu action failed\");\r\n        }\r\n    }\r\n}\r\n//# sourceMappingURL=ChatLogComponent.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GroupMemberComponent = void 0;\r\nconst UI_1 = require(\"../UI\");\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst ActionContextMenu_1 = require(\"../dialog/ActionContextMenu\");\r\n/**\r\n * a group member\r\n */\r\nclass GroupMemberComponent extends Component_1.Component {\r\n    constructor(memberName, isUserLeader) {\r\n        super(\"group-member-template\");\r\n        this.memberName = memberName;\r\n        this.isUserLeader = isUserLeader;\r\n        this.child(\".group-member-name\").innerText = memberName;\r\n        this.componentElement.addEventListener(\"mouseup\", (event) => {\r\n            this.onMouseUp(event);\r\n        });\r\n    }\r\n    buildActions(actions) {\r\n        let playerName = this.memberName;\r\n        actions.push({\r\n            title: \"Talk\",\r\n            action: function (_groupMemberComponent) {\r\n                UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatInput).setText(\"/msg \"\r\n                    + playerName\r\n                    + \" \");\r\n            }\r\n        });\r\n        actions.push({\r\n            title: \"Where\",\r\n            action: function (_groupMemberComponent) {\r\n                let action = {\r\n                    \"type\": \"where\",\r\n                    \"target\": playerName,\r\n                    \"zone\": marauroa.currentZoneName\r\n                };\r\n                marauroa.clientFramework.sendAction(action);\r\n            }\r\n        });\r\n        if (this.isUserLeader && (!marauroa.me || this.memberName != marauroa.me[\"_name\"])) {\r\n            actions.push({\r\n                title: \"Kick\",\r\n                action: function (_groupMemberComponent) {\r\n                    let action = {\r\n                        \"type\": \"group_management\",\r\n                        \"action\": \"kick\",\r\n                        \"params\": playerName,\r\n                        \"zone\": marauroa.currentZoneName\r\n                    };\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n            actions.push({\r\n                title: \"Make leader\",\r\n                action: function (_groupMemberComponent) {\r\n                    let action = {\r\n                        \"type\": \"group_management\",\r\n                        \"action\": \"leader\",\r\n                        \"params\": playerName,\r\n                        \"zone\": marauroa.currentZoneName\r\n                    };\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    onMouseUp(event) {\r\n        stendhal.ui.actionContextMenu.set(UI_1.ui.createSingletonFloatingWindow(\"Action\", new ActionContextMenu_1.ActionContextMenu(this), Math.max(10, event.pageX - 50), event.pageY - 5));\r\n    }\r\n}\r\nexports.GroupMemberComponent = GroupMemberComponent;\r\n//# sourceMappingURL=GroupMemberComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GroupPanelComponent = void 0;\r\nconst UI_1 = require(\"../UI\");\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\nconst Panel_1 = require(\"../toolkit/Panel\");\r\nconst Chat_1 = require(\"../../util/Chat\");\r\nconst GroupMemberComponent_1 = require(\"./GroupMemberComponent\");\r\n/**\r\n * group management\r\n */\r\nclass GroupPanelComponent extends Panel_1.Panel {\r\n    constructor() {\r\n        super(\"group-panel\");\r\n        this.invites = {};\r\n        this.containerElement = this.child(\".group-members\");\r\n        this.child(\".group-lootmode\").addEventListener(\"click\", () => {\r\n            this.onLootmodeClick();\r\n        });\r\n        this.child(\".group-chat\").addEventListener(\"click\", () => {\r\n            this.onGroupChatButtonClick();\r\n        });\r\n        this.child(\".group-invite\").addEventListener(\"click\", () => {\r\n            this.onGroupInviteButtonClick();\r\n        });\r\n        this.child(\".group-part\").addEventListener(\"click\", () => {\r\n            this.onGroupPartButtonClick();\r\n        });\r\n    }\r\n    receivedInvite(leader) {\r\n        if (this.invites[leader]) {\r\n            return;\r\n        }\r\n        let button = document.createElement(\"button\");\r\n        button.innerText = \"Join \" + leader;\r\n        button.title = \"Join the group led by \" + leader;\r\n        button.addEventListener(\"click\", () => {\r\n            this.onJoinClicked(leader);\r\n        });\r\n        this.invites[leader] = button;\r\n        this.child(\".group-invites\").append(button);\r\n        Chat_1.Chat.log(\"client\", \"You received an invite to join a group. Please use the group panel to accept the invite.\");\r\n        // show group panel\r\n        // FIXME: should get tab index dynamically\r\n        UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.SocialPanel).setCurrentTab(1);\r\n    }\r\n    onJoinClicked(leader) {\r\n        let action = {\r\n            \"type\": \"group_management\",\r\n            \"action\": \"join\",\r\n            \"params\": leader,\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    expiredInvite(leader) {\r\n        let button = this.invites[leader];\r\n        if (button) {\r\n            button.remove();\r\n            delete this.invites[leader];\r\n        }\r\n    }\r\n    isInGroup() {\r\n        return stendhal.data.group.members && Object.keys(stendhal.data.group.members).length > 0;\r\n    }\r\n    updateGroupStatus() {\r\n        if (!this.isInGroup()) {\r\n            this.child(\".group-nogroup\").classList.remove(\"hidden\");\r\n            this.child(\".group-group\").classList.add(\"hidden\");\r\n            return;\r\n        }\r\n        this.invites = {};\r\n        this.child(\".group-invites\").innerHTML = \"\";\r\n        this.child(\".group-nogroup\").classList.add(\"hidden\");\r\n        this.child(\".group-group\").classList.remove(\"hidden\");\r\n        this.child(\".group-lootmode\").innerText = stendhal.data.group.lootmode;\r\n        this.child(\".group-leader\").innerText = stendhal.data.group.leader;\r\n        this.renderGroupMembers();\r\n    }\r\n    renderGroupMembers() {\r\n        this.clear();\r\n        for (let member of Object.keys(stendhal.data.group.members)) {\r\n            this.add(new GroupMemberComponent_1.GroupMemberComponent(member, stendhal.data.group.leader === marauroa.me[\"_name\"]));\r\n        }\r\n    }\r\n    onLootmodeClick() {\r\n        let newMode = \"shared\";\r\n        if (stendhal.data.group.lootmode === \"shared\") {\r\n            newMode = \"single\";\r\n        }\r\n        let action = {\r\n            \"type\": \"group_management\",\r\n            \"action\": \"lootmode\",\r\n            \"params\": newMode,\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    onGroupChatButtonClick() {\r\n        if (!this.isInGroup()) {\r\n            Chat_1.Chat.log(\"error\", \"Please invite someone into a group before trying to send group messages.\");\r\n            return;\r\n        }\r\n        UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatInput).setText(\"/p \");\r\n    }\r\n    onGroupInviteButtonClick() {\r\n        if (this.isInGroup() && (stendhal.data.group.leader !== marauroa.me[\"_name\"])) {\r\n            Chat_1.Chat.log(\"error\", \"Only the leader may invite people into the group.\");\r\n            return;\r\n        }\r\n        Chat_1.Chat.log(\"client\", \"Please Fill in the name of the player you want to invite\");\r\n        UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ChatInput).setText(\"/group invite \");\r\n    }\r\n    onGroupPartButtonClick() {\r\n        if (!this.isInGroup()) {\r\n            Chat_1.Chat.log(\"error\", \"You cannot leave a group because your are not a member of a group\");\r\n            return;\r\n        }\r\n        const action = {\r\n            \"type\": \"group_management\",\r\n            \"action\": \"part\",\r\n            \"params\": \"\",\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n}\r\nexports.GroupPanelComponent = GroupPanelComponent;\r\n//# sourceMappingURL=GroupPanelComponent.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.KeyringComponent = void 0;\r\nconst ItemInventoryComponent_1 = require(\"./ItemInventoryComponent\");\r\nclass KeyringComponent extends ItemInventoryComponent_1.ItemInventoryComponent {\r\n    constructor(object, slot, sizeX, sizeY, quickPickup, defaultImage) {\r\n        super(object, slot, sizeX, sizeY, quickPickup, defaultImage);\r\n        this.slotSize = \"2 4\";\r\n    }\r\n    update() {\r\n        let features = null;\r\n        if (marauroa.me != null) {\r\n            features = marauroa.me[\"features\"];\r\n        }\r\n        if (features == null) {\r\n            return;\r\n        }\r\n        let size = features[\"keyring\"];\r\n        if (size) {\r\n            if (!this.isVisible()) {\r\n                this.setVisible(true);\r\n            }\r\n            if (this.slotSize != size) {\r\n                this.slotSize = size;\r\n                let sizeArray = size.split(\" \");\r\n                let sizeX = parseInt(sizeArray[0], 10);\r\n                let sizeY = parseInt(sizeArray[1], 10);\r\n                this.resize(sizeX, sizeY);\r\n            }\r\n        }\r\n        else if (this.isVisible()) {\r\n            this.setVisible(false);\r\n        }\r\n        super.update();\r\n    }\r\n    resize(sizeX, sizeY) {\r\n        super.setSize(sizeX, sizeY);\r\n        this.itemContainerImplementation.init(sizeX * sizeY);\r\n    }\r\n}\r\nexports.KeyringComponent = KeyringComponent;\r\n//# sourceMappingURL=KeyringComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Direction = void 0;\r\n/**\r\n * a direction to face or walk to\r\n *\r\n * @author hendrik\r\n */\r\nclass Direction {\r\n    constructor(val, dx, dy) {\r\n        this.val = val;\r\n        this.dx = dx;\r\n        this.dy = dy;\r\n    }\r\n}\r\nexports.Direction = Direction;\r\nDirection.STOP = new Direction(0, 0, 0);\r\nDirection.UP = new Direction(1, 0, -1);\r\nDirection.RIGHT = new Direction(2, 1, 0);\r\nDirection.DOWN = new Direction(3, 0, 1);\r\nDirection.LEFT = new Direction(4, -1, 0);\r\nDirection.VALUES = [Direction.STOP, Direction.UP, Direction.RIGHT, Direction.DOWN, Direction.LEFT];\r\n//# sourceMappingURL=Direction.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MathUtil = void 0;\r\nclass MathUtil {\r\n    /**\r\n     * Compares to floating point values.\r\n     *\r\n     * @param d1\r\n     *            first value\r\n     * @param d2\r\n     *            second value\r\n     * @param diff\r\n     *            acceptable diff\r\n     * @return true if they are within diff\r\n     */\r\n    static compareDouble(d1, d2, diff = MathUtil.EPSILON) {\r\n        return Math.abs(d1 - d2) < diff;\r\n    }\r\n}\r\nexports.MathUtil = MathUtil;\r\n/** Epsilon value used for coordinate change checks. */\r\nMathUtil.EPSILON = 0.001;\r\n//# sourceMappingURL=MathUtil.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ActiveEntity = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nconst Direction_1 = require(\"../util/Direction\");\r\nconst MathUtil_1 = require(\"../util/MathUtil\");\r\nclass ActiveEntity extends Entity_1.Entity {\r\n    /**\r\n     * Create an active (moving) entity.\r\n     */\r\n    constructor() {\r\n        super();\r\n        /** If <code>true</code>, this entity is not blocked by FlyOverArea */\r\n        this.flying = false;\r\n        this.direction = Direction_1.Direction.DOWN;\r\n        this.dx = 0.0;\r\n        this.dy = 0.0;\r\n    }\r\n    set(key, value) {\r\n        if ([\"dir\", \"speed\", \"x\", \"y\"].indexOf(key) > -1) {\r\n            let numberValue = parseFloat(value);\r\n            if (isNaN(this[\"_\" + key])) {\r\n                this[\"_\" + key] = numberValue;\r\n            }\r\n            this.processPositioning(key, numberValue);\r\n        }\r\n        super.set(key, value);\r\n    }\r\n    unset(key) {\r\n        super.unset(key);\r\n        if ([\"dir\", \"speed\"].indexOf(key) > -1) {\r\n            this.processPositioning(key, 0);\r\n        }\r\n    }\r\n    /**\r\n     * Determine if this entity is not moving.\r\n     *\r\n     * @return <code>true</code> if not moving.\r\n     */\r\n    stopped() {\r\n        return (this.dx == 0.0) && (this.dy == 0.0);\r\n    }\r\n    /**\r\n     * calculates the movement if the server an client are out of sync. for some\r\n     * milliseconds. (server turns are not exactly 300 ms) Most times this will\r\n     * slow down the client movement\r\n     *\r\n     * @param clientPos\r\n     *            the position the client has calculated\r\n     * @param serverPos\r\n     *            the position the server has reported\r\n     * @param delta\r\n     *            the movement based on direction\r\n     * @return the new delta to correct the movement error\r\n     */\r\n    calcDeltaMovement(clientPos, serverPos, delta) {\r\n        let moveErr = clientPos - serverPos;\r\n        let moveCorrection = (delta - moveErr) / delta;\r\n        return (delta + delta * moveCorrection) / 2;\r\n    }\r\n    /**\r\n     * When entity moves, it will be called with the data.\r\n     *\r\n     * @param x new x coordinate\r\n     * @param y new y coordinate\r\n     * @param direction new direction\r\n     * @param speed new speed\r\n     */\r\n    onMove(x, y, direction, speed) {\r\n        let oldx = x;\r\n        let oldy = y;\r\n        this.dx = direction.dx * speed;\r\n        this.dy = direction.dy * speed;\r\n        if ((Direction_1.Direction.LEFT == direction) || (Direction_1.Direction.RIGHT == direction)) {\r\n            this[\"_y\"] = y;\r\n            if (MathUtil_1.MathUtil.compareDouble(this[\"_x\"], x, 1.0)) {\r\n                // make the movement look more nicely: + this.dx * 0.1\r\n                this.dx = this.calcDeltaMovement(this[\"_x\"] + this.dx * 0.1, x, direction.dx)\r\n                    * speed || 0;\r\n            }\r\n            else {\r\n                this[\"_x\"] = x;\r\n            }\r\n            this.dy = 0;\r\n        }\r\n        else if ((Direction_1.Direction.UP == direction) || (Direction_1.Direction.DOWN == direction)) {\r\n            this[\"_x\"] = x;\r\n            if (MathUtil_1.MathUtil.compareDouble(this[\"_y\"], y, 1.0)) {\r\n                // make the movement look more nicely: + this.dy * 0.1\r\n                this.dy = this.calcDeltaMovement(this[\"_y\"] + this.dy * 0.1, y, direction.dy)\r\n                    * speed || 0;\r\n            }\r\n            else {\r\n                this[\"_y\"] = y;\r\n            }\r\n            this.dx = 0;\r\n        }\r\n        else {\r\n            // placing entities\r\n            this[\"_x\"] = x;\r\n            this[\"_y\"] = y;\r\n        }\r\n        // Call onPosition only if the entity actually moved. Also always call\r\n        // on partial coordinates - those are always predicted rather than real\r\n        // and thus should always be a result of prediction. However, the\r\n        // client collision detection does not always agree with that of the\r\n        // server, so relying on just the coordinate change checks can miss\r\n        // entities stopping when they collide with each other.\r\n        if (!MathUtil_1.MathUtil.compareDouble(this[\"_x\"], oldx)\r\n            || !MathUtil_1.MathUtil.compareDouble(this[\"_y\"], oldy)\r\n            || !MathUtil_1.MathUtil.compareDouble(oldx, Math.floor(oldx))\r\n            || !MathUtil_1.MathUtil.compareDouble(oldy, Math.floor(oldy))) {\r\n            // onPosition(x, y);\r\n        }\r\n    }\r\n    /**\r\n     * Update cycle.\r\n     *\r\n     * @param delta\r\n     *            The time (in ms) since last call.\r\n     */\r\n    updatePosition(delta) {\r\n        // do not call super\r\n        if (!this.stopped()) {\r\n            let step = (delta / 300.0);\r\n            let oldX = this[\"_x\"];\r\n            let oldY = this[\"_y\"];\r\n            // update the location of the entity based on speeds\r\n            this[\"_x\"] += (this.dx * step);\r\n            this[\"_y\"] += (this.dy * step);\r\n            if (this.collidesMap() || this.collidesEntities()) {\r\n                this[\"_x\"] = oldX;\r\n                this[\"_y\"] = oldY;\r\n            }\r\n            else {\r\n                // onPosition(x, y);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Process attribute changes that may affect positioning. This is needed\r\n     * because different entities may want to process coordinate changes more\r\n     * gracefully.\r\n     *\r\n     * @param base\r\n     *            The previous values.\r\n     * @param diff\r\n     *            The changes.\r\n     */\r\n    processPositioning(key, value) {\r\n        // Real movement case\r\n        let oldx = this[\"x\"];\r\n        let oldy = this[\"y\"];\r\n        let newX = oldx;\r\n        let newY = oldy;\r\n        if (key == \"x\") {\r\n            newX = value;\r\n        }\r\n        if (key == \"y\") {\r\n            newY = value;\r\n        }\r\n        if (key == \"dir\") {\r\n            this.direction = Direction_1.Direction.VALUES[value];\r\n        }\r\n        let speed = this[\"speed\"];\r\n        if (key == \"speed\") {\r\n            speed = value;\r\n        }\r\n        this.onMove(newX, newY, this.direction, speed);\r\n        if ((this.direction == Direction_1.Direction.STOP) || (speed == 0)) {\r\n            this.dx = 0;\r\n            this.dy = 0;\r\n            // Store the new position before signaling it with onPosition().\r\n            this[\"_x\"] = newX;\r\n            this[\"_y\"] = newY;\r\n        }\r\n    }\r\n    /**\r\n     * Check if the entity collides with the collision map.\r\n     */\r\n    collidesMap() {\r\n        if (this.ignoresCollision()) {\r\n            return false;\r\n        }\r\n        var startX = Math.floor(this[\"_x\"]);\r\n        var startY = Math.floor(this[\"_y\"]);\r\n        var endX = Math.ceil(this[\"_x\"] + this[\"width\"]);\r\n        var endY = Math.ceil(this[\"_y\"] + this[\"height\"]);\r\n        for (var y = startY; y < endY; y++) {\r\n            for (var x = startX; x < endX; x++) {\r\n                if (stendhal.data.map.collision(x, y)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Checks if flag to ignore collision tiles or ghostmode is set.\r\n     */\r\n    ignoresCollision() {\r\n        return typeof (this[\"ignore_collision\"]) !== \"undefined\"\r\n            || typeof (this[\"ghostmode\"]) !== \"undefined\";\r\n    }\r\n    /**\r\n     * Check if the entity with another entity;\r\n     */\r\n    collidesEntities() {\r\n        var thisStartX = Math.floor(this[\"_x\"]);\r\n        var thisStartY = Math.floor(this[\"_y\"]);\r\n        var thisEndX = Math.ceil(this[\"_x\"] + this[\"width\"]);\r\n        var thisEndY = Math.ceil(this[\"_y\"] + this[\"height\"]);\r\n        var i;\r\n        for (i in stendhal.zone.entities) {\r\n            var other = stendhal.zone.entities[i];\r\n            if (!this.isObstacle(other)) {\r\n                continue;\r\n            }\r\n            var otherStartX = Math.floor(other[\"_x\"]);\r\n            var otherStartY = Math.floor(other[\"_y\"]);\r\n            var otherEndX = Math.ceil(other[\"_x\"] + other[\"width\"]);\r\n            var otherEndY = Math.ceil(other[\"_y\"] + other[\"height\"]);\r\n            if (thisStartX < otherEndX && thisEndX > otherStartX\r\n                && thisStartY < otherEndY && thisEndY > otherStartY) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.ActiveEntity = ActiveEntity;\r\n//# sourceMappingURL=ActiveEntity.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Nature = void 0;\r\n/**\r\n * Available natures.\r\n *\r\n * Note that Nature is related to the magic system, and is not intended\r\n * to support other kinds of \"effects\", like slowdown, drop, paralysis, etc.\r\n */\r\nclass Nature {\r\n    constructor(color, elem) {\r\n        this.color = color;\r\n        this.elem = elem;\r\n    }\r\n    /**\r\n     * Retrieves image for weapon & element type.\r\n     *\r\n     * @param weapon\r\n     *     Weapon type (blade_strike (default), axe, club, sword).\r\n     * @return\r\n     *     Sprite path.\r\n     */\r\n    getWeaponPath(weapon) {\r\n        let path = stendhal.paths.sprites + \"/combat/\" + weapon;\r\n        if (typeof (this.elem) !== \"undefined\") {\r\n            path += \"_\" + this.elem;\r\n        }\r\n        return path + \".png\";\r\n    }\r\n}\r\nexports.Nature = Nature;\r\n/** physical attack */\r\nNature.CUT = new Nature(\"#c0c0c0\");\r\n/** fire magic */\r\nNature.FIRE = new Nature(\"#ff6400\", \"fire\");\r\n/** ice magic */\r\nNature.ICE = new Nature(\"#8c8cff\", \"ice\");\r\n/** light magic */\r\nNature.LIGHT = new Nature(\"#fff08c\", \"light\");\r\n/** dark magic */\r\nNature.DARK = new Nature(\"#404040\", \"dark\");\r\nNature.VALUES = [Nature.CUT, Nature.FIRE, Nature.ICE, Nature.LIGHT, Nature.DARK];\r\n//# sourceMappingURL=Nature.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TextSprite = void 0;\r\nclass TextSprite {\r\n    constructor(text, color, font) {\r\n        this.text = text;\r\n        this.color = color;\r\n        this.font = font;\r\n    }\r\n    /*\r\n     * Draws text in specified color with black outline. Setting the font is the\r\n     * caller's responsibility.\r\n     *\r\n     * @param ctx graphics context\r\n     * @param x x coordinate\r\n     * @param y y coordinate\r\n     */\r\n    draw(ctx, x, y) {\r\n        ctx.font = this.font;\r\n        ctx.lineWidth = 2;\r\n        ctx.strokeStyle = \"black\";\r\n        ctx.fillStyle = this.color;\r\n        ctx.lineJoin = \"round\";\r\n        ctx.strokeText(this.text, x, y);\r\n        ctx.fillText(this.text, x, y);\r\n    }\r\n    getTextMetrics(ctx) {\r\n        if (!this.textMetrics) {\r\n            ctx.font = this.font;\r\n            this.textMetrics = ctx.measureText(this.text);\r\n        }\r\n        return this.textMetrics;\r\n    }\r\n}\r\nexports.TextSprite = TextSprite;\r\n//# sourceMappingURL=TextSprite.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Floater = void 0;\r\nconst TextSprite_1 = require(\"./TextSprite\");\r\n/**\r\n * a text floating up from an Entity\r\n */\r\nclass Floater {\r\n    constructor(message, color) {\r\n        this.message = message;\r\n        this.color = color;\r\n        this.initTime = Date.now();\r\n        this.textSprite = new TextSprite_1.TextSprite(this.message, this.color, \"12px sans-serif\");\r\n    }\r\n    draw(ctx, x, y) {\r\n        let textOffset = this.textSprite.getTextMetrics(ctx).width / 2;\r\n        var timeDiff = Date.now() - this.initTime;\r\n        this.textSprite.draw(ctx, x - textOffset, y - timeDiff / 50);\r\n        return (timeDiff > 2000);\r\n    }\r\n}\r\nexports.Floater = Floater;\r\n//# sourceMappingURL=Floater.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmojiSprite = void 0;\r\nclass EmojiSprite {\r\n    constructor(sprite, owner) {\r\n        this.timeStamp = Date.now();\r\n        this.owner = owner;\r\n        this.sprite = sprite;\r\n    }\r\n    draw(ctx) {\r\n        let x = this.owner[\"_x\"] * 32 - 16;\r\n        let y = this.owner[\"_y\"] * 32 - 32;\r\n        if (x < 0) {\r\n            x = 0;\r\n        }\r\n        if (y < 0) {\r\n            y = 0;\r\n        }\r\n        if (this.sprite.height) {\r\n            ctx.drawImage(this.sprite, x, y);\r\n        }\r\n        // 5 seconds\r\n        return Date.now() > this.timeStamp + 5000;\r\n    }\r\n}\r\nexports.EmojiSprite = EmojiSprite;\r\n//# sourceMappingURL=EmojiSprite.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ActionSprite = void 0;\r\nclass ActionSprite {\r\n    constructor() {\r\n        this.initTime = Date.now();\r\n    }\r\n    expired() {\r\n        return Date.now() - this.initTime > 180;\r\n    }\r\n}\r\nexports.ActionSprite = ActionSprite;\r\n//# sourceMappingURL=ActionSprite.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BarehandAttackSprite = void 0;\r\nconst ActionSprite_1 = require(\"./ActionSprite\");\r\nclass BarehandAttackSprite extends ActionSprite_1.ActionSprite {\r\n    constructor(source, image) {\r\n        super();\r\n        this.dir = source[\"dir\"];\r\n        this.image = image;\r\n    }\r\n    draw(ctx, x, y, entityWidth, entityHeight) {\r\n        if (!this.image || !this.image.height) {\r\n            return;\r\n        }\r\n        const dtime = Date.now() - this.initTime;\r\n        const frameIndex = Math.floor(Math.min(dtime / 60, 3));\r\n        const drawWidth = this.image.width / 3;\r\n        const drawHeight = this.image.height / 4;\r\n        const centerX = x + (entityWidth - drawWidth) / 2;\r\n        const centerY = y + (entityHeight - drawHeight) / 2;\r\n        // offset sprite for facing direction\r\n        let sx, sy;\r\n        switch (this.dir + \"\") {\r\n            case \"1\": // UP\r\n                sx = centerX + (stendhal.ui.gamewindow.targetTileWidth / 2);\r\n                sy = y - (stendhal.ui.gamewindow.targetTileHeight * 1.5);\r\n                break;\r\n            case \"3\": // DOWN\r\n                sx = centerX;\r\n                sy = y + entityHeight - drawHeight + (stendhal.ui.gamewindow.targetTileHeight / 2);\r\n                break;\r\n            case \"4\": // LEFT\r\n                sx = x - (stendhal.ui.gamewindow.targetTileWidth / 2);\r\n                sy = centerY - (stendhal.ui.gamewindow.targetTileHeight / 2);\r\n                break;\r\n            case \"2\": // RIGHT\r\n                sx = x + entityWidth - drawWidth + (stendhal.ui.gamewindow.targetTileWidth / 2);\r\n                sy = centerY; // - ICON_OFFSET; // ICON_OFFSET = 8 in Java client\r\n                break;\r\n            default:\r\n                sx = centerX;\r\n                sy = centerY;\r\n        }\r\n        ctx.drawImage(this.image, frameIndex * drawWidth, (this.dir - 1) * drawHeight, drawWidth, drawHeight, sx, sy, drawWidth, drawHeight);\r\n    }\r\n}\r\nexports.BarehandAttackSprite = BarehandAttackSprite;\r\n//# sourceMappingURL=BarehandAttackSprite.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MeleeAttackSprite = void 0;\r\nconst ActionSprite_1 = require(\"./ActionSprite\");\r\nclass MeleeAttackSprite extends ActionSprite_1.ActionSprite {\r\n    constructor(source, image) {\r\n        super();\r\n        this.dir = source[\"dir\"];\r\n        this.image = image;\r\n    }\r\n    draw(ctx, x, y, entityWidth, entityHeight) {\r\n        if (!this.image || !this.image.height) {\r\n            return;\r\n        }\r\n        //~ const dtime = Date.now() - this.initTime;\r\n        //~ const frameIndex = Math.floor(Math.min(dtime / 60, 3));\r\n        const drawWidth = this.image.width;\r\n        const drawHeight = this.image.height;\r\n        var centerX = x + (entityWidth - drawWidth) / 2;\r\n        var centerY = y + (entityHeight - drawHeight) / 2;\r\n        // offset sprite for facing direction\r\n        let sx, sy;\r\n        switch (this.dir + \"\") {\r\n            case \"1\": // UP\r\n                sx = centerX + (stendhal.ui.gamewindow.targetTileWidth / 2);\r\n                sy = y - (stendhal.ui.gamewindow.targetTileHeight * 1.5);\r\n                break;\r\n            case \"3\": // DOWN\r\n                sx = centerX;\r\n                sy = y + entityHeight - drawHeight + (stendhal.ui.gamewindow.targetTileHeight / 2);\r\n                break;\r\n            case \"4\": // LEFT\r\n                sx = x - (stendhal.ui.gamewindow.targetTileWidth / 2);\r\n                sy = centerY - (stendhal.ui.gamewindow.targetTileHeight / 2);\r\n                break;\r\n            case \"2\": // RIGHT\r\n                sx = x + entityWidth - drawWidth + (stendhal.ui.gamewindow.targetTileWidth / 2);\r\n                sy = centerY; // - ICON_OFFSET; // ICON_OFFSET = 8 in Java client\r\n                break;\r\n            default:\r\n                sx = centerX;\r\n                sy = centerY;\r\n        }\r\n        ctx.drawImage(this.image, 0, 0, drawWidth, drawHeight, sx, sy, drawWidth, drawHeight);\r\n    }\r\n}\r\nexports.MeleeAttackSprite = MeleeAttackSprite;\r\n//# sourceMappingURL=MeleeAttackSprite.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RangedAttackSprite = void 0;\r\nconst ActionSprite_1 = require(\"./ActionSprite\");\r\nclass RangedAttackSprite extends ActionSprite_1.ActionSprite {\r\n    constructor(source, target, color, weapon) {\r\n        super();\r\n        this.image = stendhal.data.sprites.get(stendhal.paths.sprites + \"/combat/ranged.png\");\r\n        this.dir = source[\"dir\"];\r\n        this.targetX = (target.x + target.width / 2) * 32;\r\n        this.targetY = (target.y + target.height / 2) * 32;\r\n        this.color = color;\r\n        this.weapon = weapon;\r\n    }\r\n    draw(ctx, x, y, entityWidth, entityHeight) {\r\n        // FIXME: alignment with entity is not correct\r\n        var dtime = Date.now() - this.initTime;\r\n        // We can use fractional \"frame\" for the lines. Just\r\n        // draw the arrow where it should be at the moment.\r\n        var frame = Math.min(dtime / 60, 4);\r\n        var startX = x + entityWidth / 4;\r\n        var startY = y + entityHeight / 4;\r\n        var yLength = (this.targetY - startY) / 4;\r\n        var xLength = (this.targetX - startX) / 4;\r\n        startY += frame * yLength;\r\n        var endY = startY + yLength;\r\n        startX += frame * xLength;\r\n        var endX = startX + xLength;\r\n        ctx.strokeStyle = this.color;\r\n        ctx.lineWidth = 2;\r\n        ctx.moveTo(startX, startY);\r\n        ctx.lineTo(endX, endY);\r\n        ctx.stroke();\r\n        // draw bow\r\n        if (this.weapon === \"ranged\" && this.image.height) {\r\n            frame = Math.floor(Math.min(dtime / 60, 3));\r\n            const yRow = this.dir - 1;\r\n            const drawWidth = this.image.width / 3;\r\n            const drawHeight = this.image.height / 4;\r\n            const centerX = x + (entityWidth - drawWidth) / 2;\r\n            const centerY = y + (entityHeight - drawHeight) / 2;\r\n            // offset sprite for facing direction\r\n            let sx, sy;\r\n            switch (this.dir + \"\") {\r\n                case \"1\": // UP\r\n                    sx = centerX + (stendhal.ui.gamewindow.targetTileWidth / 2);\r\n                    sy = y - (stendhal.ui.gamewindow.targetTileHeight * 1.5);\r\n                    break;\r\n                case \"3\": // DOWN\r\n                    sx = centerX;\r\n                    sy = y + entityHeight - drawHeight + (stendhal.ui.gamewindow.targetTileHeight / 2);\r\n                    break;\r\n                case \"4\": // LEFT\r\n                    sx = x - (stendhal.ui.gamewindow.targetTileWidth / 2);\r\n                    sy = centerY - (stendhal.ui.gamewindow.targetTileHeight / 2);\r\n                    break;\r\n                case \"2\": // RIGHT\r\n                    sx = x + entityWidth - drawWidth + (stendhal.ui.gamewindow.targetTileWidth / 2);\r\n                    sy = centerY; // - ICON_OFFSET; // ICON_OFFSET = 8 in Java client\r\n                    break;\r\n                default:\r\n                    sx = centerX;\r\n                    sy = centerY;\r\n            }\r\n            ctx.drawImage(this.image, frame * drawWidth, yRow * drawHeight, drawWidth, drawHeight, sx, sy, drawWidth, drawHeight);\r\n        }\r\n    }\r\n}\r\nexports.RangedAttackSprite = RangedAttackSprite;\r\n//# sourceMappingURL=RangedAttackSprite.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RPEntity = void 0;\r\nconst ActiveEntity_1 = require(\"./ActiveEntity\");\r\nconst SingletonRepo_1 = require(\"../SingletonRepo\");\r\nconst Chat_1 = require(\"../util/Chat\");\r\nconst Color_1 = require(\"../util/Color\");\r\nconst Nature_1 = require(\"../util/Nature\");\r\nconst Floater_1 = require(\"../sprite/Floater\");\r\nconst EmojiSprite_1 = require(\"../sprite/EmojiSprite\");\r\nconst SpeechBubble_1 = require(\"../sprite/SpeechBubble\");\r\nconst TextSprite_1 = require(\"../sprite/TextSprite\");\r\nconst BarehandAttackSprite_1 = require(\"../sprite/action/BarehandAttackSprite\");\r\nconst MeleeAttackSprite_1 = require(\"../sprite/action/MeleeAttackSprite\");\r\nconst RangedAttackSprite_1 = require(\"../sprite/action/RangedAttackSprite\");\r\nconst SoundManager_1 = require(\"../ui/SoundManager\");\r\nconst emojiStore = SingletonRepo_1.singletons.getEmojiStore();\r\nvar HEALTH_BAR_HEIGHT = 6;\r\nclass RPEntity extends ActiveEntity_1.ActiveEntity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.zIndex = 8000;\r\n        this.drawY = 0;\r\n        this.spritePath = \"\";\r\n        this.titleStyle = \"#FFFFFF\";\r\n        this.attackSprite = undefined; // TODO\r\n        this.attackResult = undefined; // TODO\r\n        this.dir = 3;\r\n        this.floaters = [];\r\n        // for keeping hp bar & title on screen\r\n        this.statusBarYOffset = 0;\r\n        // for adjusting entity hp bar & title vertical position\r\n        this.titleDrawYOffset = 0;\r\n        this.attackers = { size: 0 };\r\n    }\r\n    set(key, value) {\r\n        // Ugly hack to detect changes. The old value is no\r\n        // longer available after super.set()\r\n        let oldValue = this[key];\r\n        super.set(key, value);\r\n        if (key == \"text\") {\r\n            this.say(value);\r\n        }\r\n        else if ([\"hp\", \"base_hp\"].indexOf(key) !== -1) {\r\n            this[key] = parseInt(value, 10);\r\n            if (key === \"hp\" && oldValue != undefined) {\r\n                this.onHPChanged(this[key] - oldValue);\r\n            }\r\n        }\r\n        else if (key === \"id\" && !oldValue && this._target) {\r\n            // update list of attackers since id was not set when entity was targeted\r\n            this._target.onTargeted(this);\r\n        }\r\n        else if (key === \"target\" && this[\"id\"]) {\r\n            if (this._target) {\r\n                this._target.onAttackStopped(this);\r\n            }\r\n            this._target = marauroa.currentZone[value];\r\n            if (this._target) {\r\n                this._target.onTargeted(this);\r\n            }\r\n        }\r\n        else if (key === \"away\") {\r\n            this.addFloater(\"Away\", \"#ffff00\");\r\n        }\r\n        else if (key === \"grumpy\") {\r\n            this.addFloater(\"Grumpy\", \"#ffff00\");\r\n        }\r\n        else if (key === \"xp\" && typeof (oldValue) !== \"undefined\") {\r\n            this.onXPChanged(this[key] - oldValue);\r\n        }\r\n        else if ([\"level\", \"atk\", \"ratk\", \"def\"].indexOf(key) > -1\r\n            && typeof (oldValue) !== \"undefined\") {\r\n            // FIXME: xp change should be printed before level\r\n            this.onLevelChanged(key, value, oldValue);\r\n        }\r\n        else if ([\"title\", \"name\", \"class\", \"type\"].indexOf(key) > -1) {\r\n            this.createTitleTextSprite();\r\n        }\r\n    }\r\n    unset(key) {\r\n        if (key === \"target\" && this._target) {\r\n            this._target.onAttackStopped(this);\r\n            this._target = undefined;\r\n        }\r\n        else if (key === \"away\") {\r\n            this.addFloater(\"Back\", \"#ffff00\");\r\n        }\r\n        else if (key === \"grumpy\") {\r\n            this.addFloater(\"Receptive\", \"#ffff00\");\r\n        }\r\n        super.unset(key);\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return typeof (this[\"ghostmode\"]) == \"undefined\" || marauroa.me && marauroa.me.isAdmin();\r\n    }\r\n    buildActions(list) {\r\n        super.buildActions(list);\r\n        /*\r\n         * Menu is used to provide an alternate action for some entities (like\r\n         * puppies - and they should not be attackable).\r\n         *\r\n         * For now normally attackable entities get a menu only in Capture The\r\n         * Flag, and then they don't need attack. If that changes, this code\r\n         * will need to be adjusted.\r\n         */\r\n        if (!this[\"menu\"]) {\r\n            if (marauroa.me._target === this) {\r\n                list.push({\r\n                    title: \"Stop attack\",\r\n                    action: function (_entity) {\r\n                        var action = {\r\n                            \"type\": \"stop\",\r\n                            \"zone\": marauroa.currentZoneName,\r\n                            \"attack\": \"\"\r\n                        };\r\n                        marauroa.clientFramework.sendAction(action);\r\n                    }\r\n                });\r\n            }\r\n            else if (this !== marauroa.me) {\r\n                list.push({\r\n                    title: \"Attack\",\r\n                    type: \"attack\"\r\n                });\r\n            }\r\n        }\r\n        if (this != marauroa.me) {\r\n            list.push({\r\n                title: \"Push\",\r\n                type: \"push\"\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * retrieves the entity's visible title\r\n     */\r\n    getTitle() {\r\n        return this[\"title\"];\r\n    }\r\n    /**\r\n     * says a text\r\n     *\r\n     * @param text\r\n     *     Message contents.\r\n     * @param rangeSquared\r\n     *     Distance at which message can be heard (-1 represents\r\n     *     entire map).\r\n     */\r\n    say(text, rangeSquared) {\r\n        if (!marauroa.me) {\r\n            return;\r\n        }\r\n        if (marauroa.me.isInHearingRange(this, rangeSquared)) {\r\n            let emoji = emojiStore.create(text);\r\n            if (emoji) {\r\n                this.addEmoji(emoji);\r\n                Chat_1.Chat.log(\"emoji\", emoji, this.getTitle());\r\n            }\r\n            else if (text.startsWith(\"!me\")) {\r\n                Chat_1.Chat.log(\"emote\", text.replace(/^!me/, this.getTitle()));\r\n            }\r\n            else {\r\n                this.addSpeechBubble(text);\r\n                Chat_1.Chat.log(\"normal\", text, this.getTitle());\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Displays a speech bubble attached to an entity.\r\n     *\r\n     * @param text\r\n     *     Text to display.\r\n     */\r\n    addSpeechBubble(text) {\r\n        stendhal.ui.gamewindow.addTextSprite(new SpeechBubble_1.SpeechBubble(text, this));\r\n    }\r\n    addEmoji(emoji) {\r\n        stendhal.ui.gamewindow.addEmojiSprite(new EmojiSprite_1.EmojiSprite(emoji, this));\r\n    }\r\n    /**\r\n     * Checks if the entity should cast a shadow.\r\n     */\r\n    castsShadow() {\r\n        return typeof (this[\"no_shadow\"]) === \"undefined\";\r\n    }\r\n    drawMultipartOutfit(ctx) {\r\n        // layers in draw order\r\n        var layers = [];\r\n        var outfit = {};\r\n        if (\"outfit_ext\" in this) {\r\n            layers = [\"body\", \"dress\", \"head\", \"mouth\", \"eyes\", \"mask\", \"hair\", \"hat\", \"detail\"];\r\n            for (const part of this[\"outfit_ext\"].split(\",\")) {\r\n                if (part.includes(\"=\")) {\r\n                    var tmp = part.split(\"=\");\r\n                    outfit[tmp[0]] = parseInt(tmp[1], 10);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            layers = [\"body\", \"dress\", \"head\", \"hair\", \"detail\"];\r\n            outfit[\"body\"] = this[\"outfit\"] % 100;\r\n            outfit[\"dress\"] = Math.floor(this[\"outfit\"] / 100) % 100;\r\n            outfit[\"head\"] = Math.floor(this[\"outfit\"] / 10000) % 100;\r\n            outfit[\"hair\"] = Math.floor(this[\"outfit\"] / 1000000) % 100;\r\n            outfit[\"detail\"] = Math.floor(this[\"outfit\"] / 100000000) % 100;\r\n        }\r\n        if (stendhal.config.getBoolean(\"gamescreen.shadows\") && this.castsShadow()) {\r\n            // dressed entities should use 48x64 sprites\r\n            // FIXME: this will not display correctly for horse outfit\r\n            const shadow = stendhal.data.sprites.getShadow(\"48x64\");\r\n            if (shadow && shadow.complete && shadow.height) {\r\n                // draw shadow below other layers\r\n                this.drawSpriteImage(ctx, shadow);\r\n            }\r\n        }\r\n        if (this.octx) {\r\n            this.octx.clearRect(0, 0, this.octx.canvas.width, this.octx.canvas.height);\r\n        }\r\n        if (stendhal.data.outfit.detailHasRearLayer(outfit[\"detail\"])) {\r\n            layers.splice(0, 0, \"detail-rear\");\r\n            outfit[\"detail-rear\"] = outfit[\"detail\"];\r\n        }\r\n        for (const layer of layers) {\r\n            // hair is not drawn under certain hats/helmets\r\n            if (layer == \"hair\" && !stendhal.data.outfit.drawHair(outfit[\"hat\"])) {\r\n                continue;\r\n            }\r\n            const lsprite = this.getOutfitPart(layer, outfit[layer], outfit[\"body\"]);\r\n            if (lsprite && lsprite.complete && lsprite.height) {\r\n                if (!this.octx) {\r\n                    let ocanvas = document.createElement(\"canvas\");\r\n                    this.octx = ocanvas.getContext(\"2d\");\r\n                    ocanvas.width = lsprite.width;\r\n                    ocanvas.height = lsprite.height;\r\n                }\r\n                this.octx.drawImage(lsprite, 0, 0);\r\n            }\r\n        }\r\n        if (this.octx) {\r\n            this.drawSpriteImage(ctx, this.octx.canvas);\r\n        }\r\n    }\r\n    /**\r\n     * Get an outfit part (Image or a Promise)\r\n     *\r\n     * @param {string}  part\r\n     * @param {number} index\r\n     * @param {number} body\r\n     */\r\n    getOutfitPart(part, index, body) {\r\n        if (typeof (index) === \"undefined\" || index < 0) {\r\n            return null;\r\n        }\r\n        let n = \"\" + index;\r\n        if (index < 10) {\r\n            n = \"00\" + index;\r\n        }\r\n        else if (index < 100) {\r\n            n = \"0\" + index;\r\n        }\r\n        if (part === \"body\" && index < 3 && stendhal.config.getBoolean(\"gamescreen.nonude\")) {\r\n            n += \"-nonude\";\r\n        }\r\n        else if (part === \"dress\" && stendhal.data.outfit.drawBustyDress(index, body)) {\r\n            n += \"b\";\r\n        }\r\n        else if (part.endsWith(\"-rear\")) {\r\n            n += \"-rear\";\r\n            part = part.replace(/-rear$/, \"\");\r\n        }\r\n        const filename = stendhal.paths.sprites + \"/outfit/\" + part + \"/\" + n + \".png\";\r\n        const colors = this[\"outfit_colors\"];\r\n        let colorname;\r\n        if (part === \"body\" || part === \"head\") {\r\n            colorname = \"skin\";\r\n        }\r\n        else {\r\n            colorname = part;\r\n        }\r\n        if (typeof (colors) !== \"undefined\" && (typeof (colors[colorname]) !== \"undefined\")) {\r\n            return stendhal.data.sprites.getFiltered(filename, \"trueColor\", colors[colorname]);\r\n        }\r\n        else {\r\n            return stendhal.data.sprites.get(filename);\r\n        }\r\n    }\r\n    /**\r\n     * Sets the offset to keep text & health bar on screen when sprite\r\n     * extends past top edge.\r\n     */\r\n    setStatusBarOffset() {\r\n        const screenOffsetY = stendhal.ui.gamewindow.offsetY;\r\n        const entityBottom = (this[\"_y\"] * 32) + (this[\"height\"] * 32);\r\n        // FIXME: how to get text height dynamically?\r\n        const entityTop = entityBottom - this[\"drawHeight\"]\r\n            - HEALTH_BAR_HEIGHT - 26;\r\n        if (screenOffsetY > entityTop && screenOffsetY < entityBottom) {\r\n            this.statusBarYOffset = screenOffsetY - entityTop;\r\n        }\r\n        else {\r\n            this.statusBarYOffset = 0;\r\n        }\r\n    }\r\n    /**\r\n     * draw RPEntities\r\n     */\r\n    draw(ctx) {\r\n        if (typeof (this[\"ghostmode\"]) != \"undefined\" && marauroa.me && !marauroa.me.isAdmin()) {\r\n            return;\r\n        }\r\n        this.drawCombat(ctx);\r\n        this.drawMain(ctx);\r\n        this.drawAttack(ctx);\r\n        this.drawStatusIcons(ctx);\r\n    }\r\n    drawMain(ctx) {\r\n        let filename;\r\n        if (typeof (this[\"outfit\"]) != \"undefined\" || typeof (this[\"outfit_ext\"]) != \"undefined\") {\r\n            this.drawMultipartOutfit(ctx);\r\n        }\r\n        else {\r\n            filename = stendhal.paths.sprites + \"/\" + this.spritePath + \"/\" + this[\"class\"];\r\n            if (typeof (this[\"subclass\"]) != \"undefined\") {\r\n                filename = filename + \"/\" + this[\"subclass\"];\r\n            }\r\n            // check for safe image\r\n            if (!stendhal.config.getBoolean(\"gamescreen.blood\") && stendhal.data.sprites.hasSafeImage(filename)) {\r\n                filename = filename + \"-safe.png\";\r\n            }\r\n            else {\r\n                filename = filename + \".png\";\r\n            }\r\n            let image = stendhal.data.sprites.get(filename);\r\n            if (stendhal.config.getBoolean(\"gamescreen.shadows\") && this.castsShadow()) {\r\n                // check for configured shadow style\r\n                let shadow_style = this[\"shadow_style\"];\r\n                if (typeof (shadow_style) === \"undefined\") {\r\n                    // default to sprite dimensions\r\n                    shadow_style = (image.width / 3) + \"x\" + (image.height / 4);\r\n                }\r\n                const shadow = stendhal.data.sprites.getShadow(shadow_style);\r\n                // draw shadow first\r\n                if (typeof (shadow) !== \"undefined\") {\r\n                    this.drawSpriteImage(ctx, shadow);\r\n                }\r\n            }\r\n            this.drawSpriteImage(ctx, image);\r\n        }\r\n    }\r\n    drawStatusIcons(ctx) {\r\n        function _drawAnimatedIcon(icon, delay, nFrames, xdim, ydim, x, y) {\r\n            var frame = Math.floor(Date.now() / delay) % nFrames;\r\n            ctx.drawImage(icon, frame * xdim, 0, xdim, ydim, x, y, xdim, ydim);\r\n        }\r\n        function drawAnimatedIcon(iconPath, delay, x, y, fWidth) {\r\n            var icon = stendhal.data.sprites.get(iconPath);\r\n            var dimH = icon.height;\r\n            var dimW = typeof (fWidth) !== \"undefined\" ? fWidth : dimH;\r\n            var nFrames = icon.width / dimW;\r\n            _drawAnimatedIcon(icon, delay, nFrames, dimW, dimH, x, y);\r\n        }\r\n        function drawAnimatedIconWithFrames(iconPath, nFrames, delay, x, y) {\r\n            var icon = stendhal.data.sprites.get(iconPath);\r\n            var ydim = icon.height;\r\n            var xdim = icon.width / nFrames;\r\n            _drawAnimatedIcon(icon, delay, nFrames, xdim, ydim, x, y);\r\n        }\r\n        var x = this[\"_x\"] * 32 - 10;\r\n        var y = (this[\"_y\"] + 1) * 32;\r\n        if (this.hasOwnProperty(\"choking\")) {\r\n            ctx.drawImage(stendhal.data.sprites.get(stendhal.paths.sprites + \"/ideas/choking.png\"), x, y - 10);\r\n        }\r\n        else if (this.hasOwnProperty(\"eating\")) {\r\n            ctx.drawImage(stendhal.data.sprites.get(stendhal.paths.sprites + \"/ideas/eat.png\"), x, y - 10);\r\n        }\r\n        // NPC and pet idea icons\r\n        if (this.hasOwnProperty(\"idea\")) {\r\n            const idea = stendhal.paths.sprites + \"/ideas/\" + this[\"idea\"] + \".png\";\r\n            const ani = stendhal.data.sprites.animations.idea[this[\"idea\"]];\r\n            if (ani) {\r\n                drawAnimatedIcon(idea, ani.delay, x + ani.offsetX * this[\"width\"], y - this[\"drawHeight\"] + ani.offsetY);\r\n            }\r\n            else {\r\n                ctx.drawImage(stendhal.data.sprites.get(idea), x + 32 * this[\"width\"], y - this[\"drawHeight\"]);\r\n            }\r\n        }\r\n        if (this.hasOwnProperty(\"away\")) {\r\n            drawAnimatedIcon(stendhal.paths.sprites + \"/ideas/away.png\", 1500, x + 32 * this[\"width\"], y - this[\"drawHeight\"]);\r\n        }\r\n        if (this.hasOwnProperty(\"grumpy\")) {\r\n            drawAnimatedIcon(stendhal.paths.sprites + \"/ideas/grumpy.png\", 1000, x + 5, y - this[\"drawHeight\"]);\r\n        }\r\n        if (this.hasOwnProperty(\"last_player_kill_time\")) {\r\n            drawAnimatedIconWithFrames(stendhal.paths.sprites + \"/ideas/pk.png\", 12, 300, x, y - this[\"drawHeight\"]);\r\n        }\r\n        // status affects\r\n        if (this.hasOwnProperty(\"poisoned\")) {\r\n            drawAnimatedIcon(stendhal.paths.sprites + \"/status/poison.png\", 100, x + 32 * this[\"width\"] - 10, y - this[\"drawHeight\"]);\r\n        }\r\n        if (this.hasOwnProperty(\"status_confuse\")) {\r\n            drawAnimatedIcon(stendhal.paths.sprites + \"/status/confuse.png\", 200, x + 32 * this[\"width\"] - 14, y - this[\"drawHeight\"] + 16);\r\n        }\r\n        if (this.hasOwnProperty(\"status_shock\")) {\r\n            drawAnimatedIcon(stendhal.paths.sprites + \"/status/shock.png\", 200, x + 32 * this[\"width\"] - 25, y - 32, 38);\r\n        }\r\n        // NPC job icons\r\n        let nextX = x;\r\n        if (this.hasOwnProperty(\"job_healer\")) {\r\n            ctx.drawImage(stendhal.data.sprites.get(stendhal.paths.sprites + \"/status/healer.png\"), nextX, y - 10);\r\n            nextX += 12;\r\n        }\r\n        if (this.hasOwnProperty(\"job_merchant\")) {\r\n            ctx.drawImage(stendhal.data.sprites.get(stendhal.paths.sprites + \"/status/merchant.png\"), nextX, y - 10);\r\n            nextX += 12;\r\n        }\r\n        if (this.hasOwnProperty(\"job_producer\")) {\r\n            ctx.drawImage(stendhal.data.sprites.get(stendhal.paths.sprites + \"/status/producer.png\"), nextX, y - 16);\r\n            nextX += 16;\r\n        }\r\n    }\r\n    /**\r\n     * Draw colored ellipses (or rectangles on browsers that do not support\r\n     * ellipses) when the entity is being attacked, or is attacking the user.\r\n     */\r\n    drawCombat(ctx) {\r\n        if (this.attackers.size > 0) {\r\n            ctx.lineWidth = 1;\r\n            /*\r\n             * As of 2015-9-15 CanvasRenderingContext2D.ellipse() is not\r\n             * supported in most browsers. Fall back to rectangles on these.\r\n             * Also on Chrome 45.0.2454.85 ellipse() does not seem to support\r\n             * the begin angle parameter correctly, nor does the stroke\r\n             * direction work as it should so it can't be used as a workaround.\r\n             * Currently the second ellipse part is drawn as a full ellipse, but\r\n             * the code below should eventually draw the right thing once\r\n             * browsers catch up. Probably.\r\n             */\r\n            if (ctx.ellipse instanceof Function) {\r\n                var xRad = this[\"width\"] * 16;\r\n                var yRad = this[\"height\"] * 16 / Math.SQRT2;\r\n                var centerX = this[\"_x\"] * 32 + xRad;\r\n                var centerY = (this[\"_y\"] + this[\"height\"]) * 32 - yRad;\r\n                ctx.strokeStyle = \"#4a0000\";\r\n                ctx.beginPath();\r\n                ctx.ellipse(centerX, centerY, xRad, yRad, 0, 0, Math.PI, false);\r\n                ctx.stroke();\r\n                ctx.strokeStyle = \"#e60a0a\";\r\n                ctx.beginPath();\r\n                ctx.ellipse(centerX, centerY, xRad, yRad, 0, Math.PI, 2 * Math.PI, false);\r\n                ctx.stroke();\r\n            }\r\n            else {\r\n                ctx.strokeStyle = \"#e60a0a\";\r\n                ctx.strokeRect(32 * this[\"_x\"], 32 * this[\"_y\"], 32 * this[\"width\"], 32 * this[\"height\"]);\r\n            }\r\n        }\r\n        if (this.getAttackTarget() === marauroa.me) {\r\n            ctx.lineWidth = 1;\r\n            // See above about ellipses.\r\n            if (ctx.ellipse instanceof Function) {\r\n                var xRad = this[\"width\"] * 16 - 1;\r\n                var yRad = this[\"height\"] * 16 / Math.SQRT2 - 1;\r\n                var centerX = this[\"_x\"] * 32 + xRad + 1;\r\n                var centerY = (this[\"_y\"] + this[\"height\"]) * 32 - yRad - 1;\r\n                ctx.strokeStyle = \"#ffc800\";\r\n                ctx.beginPath();\r\n                ctx.ellipse(centerX, centerY, xRad, yRad, 0, 0, Math.PI, false);\r\n                ctx.stroke();\r\n                ctx.strokeStyle = \"#ffdd0a\";\r\n                ctx.beginPath();\r\n                ctx.ellipse(centerX, centerY, xRad, yRad, 0, Math.PI, 2 * Math.PI, false);\r\n                ctx.stroke();\r\n            }\r\n            else {\r\n                ctx.strokeStyle = \"#ffdd0a\";\r\n                ctx.strokeRect(32 * this[\"_x\"] + 1, 32 * this[\"_y\"] + 1, 32 * this[\"width\"] - 2, 32 * this[\"height\"] - 2);\r\n            }\r\n        }\r\n        if (this.attackResult) {\r\n            if (this.attackResult.draw(ctx, (this[\"_x\"] + this[\"width\"]) * 32 - 10, (this[\"_y\"] + this[\"height\"]) * 32 - 10)) {\r\n                this.attackResult = undefined;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Draw entities in this.floaters array. Each floater should have\r\n     * draw(ctx, x, y) method, where ctx is the canvas context, and x, y are\r\n     * the coordinates where to start floating. The method should return true\r\n     * when the floater should be removed.\r\n     */\r\n    drawFloaters(ctx) {\r\n        var centerX = (this[\"_x\"] + this[\"width\"] / 2) * 32;\r\n        var topY = (this[\"_y\"] + 1) * 32 - this[\"drawHeight\"];\r\n        // Grab an unchanging copy\r\n        var currentFloaters = this.floaters;\r\n        for (var i = 0; i < currentFloaters.length; i++) {\r\n            var floater = currentFloaters[i];\r\n            if (floater.draw(ctx, centerX, topY)) {\r\n                // copy the array and remove the specific element from the copy\r\n                this.floaters = this.floaters.slice();\r\n                this.floaters.splice(this.floaters.indexOf(floater), 1);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     * @param {Image} image\r\n     */\r\n    drawSpriteImage(ctx, image) {\r\n        var localX = this[\"_x\"] * 32;\r\n        var localY = this[\"_y\"] * 32;\r\n        if (image.height) { // image.complete is true on missing image files\r\n            var nFrames = 3;\r\n            var nDirections = 4;\r\n            var yRow = this[\"dir\"] - 1;\r\n            var frame = 1; // draw center column when idle\r\n            // Ents are a hack in Java client too\r\n            if (this[\"class\"] == \"ent\") {\r\n                nFrames = 1;\r\n                nDirections = 2;\r\n                yRow = Math.floor((this[\"dir\"] - 1) / 2);\r\n                frame = 0;\r\n            }\r\n            this[\"drawHeight\"] = image.height / nDirections;\r\n            this[\"drawWidth\"] = image.width / nFrames;\r\n            var drawX = ((this[\"width\"] * 32) - this[\"drawWidth\"]) / 2;\r\n            if ((this[\"speed\"] > 0 || this.hasOwnProperty(\"active_idle\")) && nFrames != 1) {\r\n                var animLength = nFrames * 2 - 2;\r\n                // % Works normally with *floats* (just whose bright idea was\r\n                // that?), so use floor() as a workaround\r\n                frame = Math.floor(Date.now() / 100) % animLength;\r\n                if (frame >= nFrames) {\r\n                    frame = animLength - frame;\r\n                }\r\n            }\r\n            var drawY = (this[\"height\"] * 32) - this[\"drawHeight\"];\r\n            let opacity = parseInt(this[\"visibility\"], 10);\r\n            opacity = isNaN(opacity) ? 100 : opacity;\r\n            if (this.hasOwnProperty(\"ghostmode\") && this === marauroa.me && opacity > 50) {\r\n                opacity = 50;\r\n            }\r\n            const opacity_orig = ctx.globalAlpha;\r\n            if (opacity < 100) {\r\n                ctx.globalAlpha = opacity * 0.01;\r\n            }\r\n            ctx.drawImage(image, frame * this[\"drawWidth\"], yRow * this[\"drawHeight\"], this[\"drawWidth\"], this[\"drawHeight\"], localX + drawX, localY + drawY, this[\"drawWidth\"], this[\"drawHeight\"]);\r\n            // restore opacity\r\n            ctx.globalAlpha = opacity_orig;\r\n        }\r\n    }\r\n    drawTop(ctx) {\r\n        var localX = this[\"_x\"] * 32;\r\n        var localY = this[\"_y\"] * 32;\r\n        this.drawFloaters(ctx);\r\n        this.drawHealthBar(ctx, localX, localY + this.statusBarYOffset);\r\n        this.drawTitle(ctx, localX, localY + this.statusBarYOffset);\r\n    }\r\n    drawHealthBar(ctx, x, y) {\r\n        var drawX = x + ((this[\"width\"] * 32) - this[\"drawWidth\"]) / 2;\r\n        var drawY = y + (this[\"height\"] * 32) - this[\"drawHeight\"]\r\n            - HEALTH_BAR_HEIGHT + this.titleDrawYOffset;\r\n        ctx.strokeStyle = \"#000000\";\r\n        ctx.lineWidth = 2;\r\n        ctx.beginPath();\r\n        ctx.rect(drawX, drawY, this[\"drawWidth\"], HEALTH_BAR_HEIGHT - 2);\r\n        ctx.stroke();\r\n        ctx.fillStyle = \"#808080\"; // same as java.awt.Color.GRAY (rgb(128,128,128))\r\n        ctx.fillRect(drawX, drawY, this[\"drawWidth\"], HEALTH_BAR_HEIGHT - 2);\r\n        // Bar color\r\n        var hpRatio = this[\"hp\"] / this[\"base_hp\"];\r\n        ctx.fillStyle = Color_1.Color.getStatBarColor(hpRatio);\r\n        ctx.fillRect(drawX, drawY, this[\"drawWidth\"] * hpRatio, HEALTH_BAR_HEIGHT - 2);\r\n    }\r\n    createTitleTextSprite() {\r\n        let title = this.getTitle();\r\n        if (!title) {\r\n            title = this[\"_name\"];\r\n            if (!title) {\r\n                title = this[\"class\"];\r\n                if (!title) {\r\n                    title = this[\"type\"];\r\n                }\r\n            }\r\n        }\r\n        if (title) {\r\n            this.titleTextSprite = new TextSprite_1.TextSprite(title, this.titleStyle, \"14px sans-serif\");\r\n        }\r\n    }\r\n    drawTitle(ctx, x, y) {\r\n        if (this.titleTextSprite) {\r\n            let textMetrics = this.titleTextSprite.getTextMetrics(ctx);\r\n            var drawY = y + (this[\"height\"] * 32) - this[\"drawHeight\"]\r\n                - HEALTH_BAR_HEIGHT + this.titleDrawYOffset;\r\n            this.titleTextSprite.draw(ctx, x + (this[\"width\"] * 32 - textMetrics.width) / 2, drawY - 5 - HEALTH_BAR_HEIGHT);\r\n        }\r\n    }\r\n    drawAttack(ctx) {\r\n        if (this.attackSprite == null) {\r\n            return;\r\n        }\r\n        if (this.attackSprite.expired()) {\r\n            this.attackSprite = null;\r\n            return;\r\n        }\r\n        var localX = this[\"_x\"] * 32;\r\n        var localY = this[\"_y\"] * 32;\r\n        var localW = this[\"width\"] * stendhal.ui.gamewindow.targetTileWidth;\r\n        var localH = this[\"height\"] * stendhal.ui.gamewindow.targetTileHeight;\r\n        this.attackSprite.draw(ctx, localX, localY, localW, localH);\r\n    }\r\n    // attack handling\r\n    getAttackTarget() {\r\n        // If the attack target id was read before the target was available,\r\n        // _target does not point to the correct entity. Look up the target\r\n        // again, if _target does not exist, but it should.\r\n        if (!this._target && this[\"target\"]) {\r\n            this._target = marauroa.currentZone[this[\"target\"]];\r\n            if (this._target) {\r\n                this._target.onTargeted(this);\r\n            }\r\n        }\r\n        return this._target;\r\n    }\r\n    onDamaged(_source, damage) {\r\n        this.attackResult = this.createResultIcon(stendhal.paths.sprites + \"/combat/hitted.png\");\r\n        var sounds = [\"attack-melee-01\", \"attack-melee-02\", \"attack-melee-03\", \"attack-melee-04\", \"attack-melee-05\", \"attack-melee-06\", \"attack-melee-07\"];\r\n        var index = Math.floor(Math.random() * Math.floor(sounds.length));\r\n        RPEntity.soundManager.playLocalizedEffect(this[\"_x\"], this[\"_y\"], 20, 3, sounds[index], 1);\r\n    }\r\n    onBlocked(_source) {\r\n        this.attackResult = this.createResultIcon(stendhal.paths.sprites + \"/combat/blocked.png\");\r\n        var sounds = [\"clang-metallic-1\", \"clang-dull-1\"];\r\n        var index = Math.floor(Math.random() * Math.floor(sounds.length));\r\n        RPEntity.soundManager.playLocalizedEffect(this[\"_x\"], this[\"_y\"], 20, 3, sounds[index], 1);\r\n    }\r\n    onMissed(_source) {\r\n        this.attackResult = this.createResultIcon(stendhal.paths.sprites + \"/combat/missed.png\");\r\n    }\r\n    onHPChanged(change) {\r\n        if (change > 0) {\r\n            this.addFloater(\"+\" + change, \"#00ff00\");\r\n        }\r\n        else if (change < 0) {\r\n            this.addFloater(change.toString(), \"#ff0000\");\r\n        }\r\n    }\r\n    onXPChanged(change) {\r\n        if (change > 0) {\r\n            this.addFloater(\"+\" + change, \"#4169e1\");\r\n            Chat_1.Chat.log(\"significant_positive\", this.getTitle() + \" earns \" + change + \" experience points.\");\r\n        }\r\n        else if (change < 0) {\r\n            this.addFloater(change.toString(), \"#ff8f8f\");\r\n            Chat_1.Chat.log(\"significant_negative\", this.getTitle() + \" loses \" + Math.abs(change) + \" experience points.\");\r\n        }\r\n    }\r\n    onLevelChanged(stat, newlevel, oldlevel) {\r\n        if (!marauroa.me || newlevel === oldlevel) {\r\n            return;\r\n        }\r\n        if (marauroa.me.isInHearingRange(this)) {\r\n            let msg = this.getTitle();\r\n            let msgtype = \"significant_positive\";\r\n            if (newlevel > oldlevel) {\r\n                msg += \" reaches \";\r\n            }\r\n            else if (newlevel < oldlevel) {\r\n                msg += \" drops to \";\r\n                msgtype = \"significant_negative\";\r\n            }\r\n            msg += stat + \" \" + newlevel;\r\n            Chat_1.Chat.logH(msgtype, msg);\r\n        }\r\n    }\r\n    addFloater(message, color) {\r\n        this.floaters.push(new Floater_1.Floater(message, color));\r\n    }\r\n    /**\r\n     * Create a closure for drawing attack result icons. The resulting object\r\n     * has a method draw(context, x, y) which returns true when the attack\r\n     * result has expired and draw() should no longer be called.\r\n     *\r\n     * @param imagePath path to the result icon\r\n     * @return object for drawing the icon\r\n     */\r\n    createResultIcon(imagePath) {\r\n        return {\r\n            initTime: Date.now(),\r\n            image: stendhal.data.sprites.get(imagePath),\r\n            draw: function (ctx, x, y) {\r\n                ctx.drawImage(this.image, x, y);\r\n                return (Date.now() - this.initTime > 1200);\r\n            }\r\n        };\r\n    }\r\n    onAttackPerformed(nature, ranged, weapon) {\r\n        if (!ranged && weapon === \"ranged\") {\r\n            // draw default melee sprite when next to target\r\n            weapon = undefined;\r\n        }\r\n        if (ranged) {\r\n            this.attackSprite = new RangedAttackSprite_1.RangedAttackSprite(this, this.getAttackTarget(), Nature_1.Nature.VALUES[nature].color, weapon);\r\n        }\r\n        else {\r\n            if (typeof (weapon) === \"undefined\") {\r\n                weapon = \"blade_strike\";\r\n            }\r\n            if (weapon === \"blade_strike\" && nature == 0) {\r\n                weapon += \"_cut\";\r\n            }\r\n            const imagePath = Nature_1.Nature.VALUES[nature].getWeaponPath(weapon);\r\n            if (weapon.startsWith(\"blade_strike\")) {\r\n                this.attackSprite = new BarehandAttackSprite_1.BarehandAttackSprite(this, stendhal.data.sprites.get(imagePath));\r\n            }\r\n            else {\r\n                const entity_rot = 90 * (this[\"dir\"] - 1);\r\n                // TODO: rotate left & right 45 degrees & offset to center on entity\r\n                this.attackSprite = new MeleeAttackSprite_1.MeleeAttackSprite(this, stendhal.data.sprites.getRotated(imagePath, entity_rot));\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Called when this entity is selected as the attack target.\r\n     *\r\n     * @param attacked The entity that selected this as the target\r\n     */\r\n    onTargeted(attacker) {\r\n        if (!(attacker[\"id\"] in this.attackers)) {\r\n            this.attackers[attacker[\"id\"]] = true;\r\n            this.attackers.size += 1;\r\n        }\r\n    }\r\n    /**\r\n     * Called when an entity deselects this as its attack target.\r\n     *\r\n     * @param attacker The entity that had this as the attack target, but\r\n     * \tstopped attacking\r\n     */\r\n    onAttackStopped(attacker) {\r\n        if (attacker[\"id\"] in this.attackers) {\r\n            delete this.attackers[attacker[\"id\"]];\r\n            this.attackers.size -= 1;\r\n        }\r\n    }\r\n    destroy(_obj) {\r\n        if (this._target) {\r\n            this._target.onAttackStopped(this);\r\n        }\r\n    }\r\n}\r\nexports.RPEntity = RPEntity;\r\nRPEntity.soundManager = SoundManager_1.SoundManager.get();\r\n//# sourceMappingURL=RPEntity.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Player = void 0;\r\nconst RPEntity_1 = require(\"./RPEntity\");\r\nconst Color_1 = require(\"../util/Color\");\r\nclass Player extends RPEntity_1.RPEntity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.minimapShow = true;\r\n        this.minimapStyle = Color_1.Color.PLAYER;\r\n        this.dir = 3;\r\n        // shift hp bar & title to avoid overlap with other entities\r\n        this.titleDrawYOffset = 6;\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"ghostmode\") {\r\n            this.minimapShow = false;\r\n        }\r\n    }\r\n    createTitleTextSprite() {\r\n        if (this.isAdmin()) {\r\n            this.titleStyle = \"#FFFF00\";\r\n        }\r\n        super.createTitleTextSprite();\r\n    }\r\n    /**\r\n     * Is this player an admin?\r\n     */\r\n    isAdmin() {\r\n        return (typeof (this[\"adminlevel\"]) !== \"undefined\" && this[\"adminlevel\"] > 600);\r\n    }\r\n    buildActions(list) {\r\n        super.buildActions(list);\r\n        var playerName = this[\"_name\"];\r\n        var isUnknown = (marauroa.me !== this) && ((marauroa.me[\"buddies\"] == null) || !(playerName in marauroa.me[\"buddies\"]));\r\n        if (isUnknown) {\r\n            list.push({\r\n                title: \"Add to buddies\",\r\n                action: function (_entity) {\r\n                    var action = {\r\n                        \"type\": \"addbuddy\",\r\n                        \"zone\": marauroa.currentZoneName,\r\n                        \"target\": playerName\r\n                    };\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n        }\r\n        if (this.isIgnored()) {\r\n            list.push({\r\n                title: \"Remove ignore\",\r\n                action: function (_entity) {\r\n                    var action = {\r\n                        \"type\": \"unignore\",\r\n                        \"zone\": marauroa.currentZoneName,\r\n                        \"target\": playerName\r\n                    };\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n        }\r\n        else if (isUnknown) {\r\n            list.push({\r\n                title: \"Ignore\",\r\n                action: function (_entity) {\r\n                    var action = {\r\n                        \"type\": \"ignore\",\r\n                        \"zone\": marauroa.currentZoneName,\r\n                        \"target\": playerName\r\n                    };\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n        }\r\n        if (marauroa.me !== this) {\r\n            list.push({\r\n                title: \"Trade\",\r\n                action: function (_entity) {\r\n                    var action = {\r\n                        \"type\": \"trade\",\r\n                        \"action\": \"offer_trade\",\r\n                        \"zone\": marauroa.currentZoneName,\r\n                        \"target\": playerName\r\n                    };\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n            if (marauroa.me.canInviteToGroup()) {\r\n                list.push({\r\n                    title: \"Invite\",\r\n                    action: (_entity) => {\r\n                        marauroa.clientFramework.sendAction({\r\n                            \"type\": \"group_management\",\r\n                            \"action\": \"invite\",\r\n                            \"params\": this[\"name\"]\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n    isIgnored() {\r\n        if (!marauroa.me || !marauroa.me[\"!ignore\"]) {\r\n            return false;\r\n        }\r\n        var temp = marauroa.me[\"!ignore\"]._objects;\r\n        return temp.length > 0 && (\"_\" + this[\"_name\"]) in temp[0];\r\n    }\r\n    onMiniMapDraw() {\r\n        if (this === marauroa.me) {\r\n            // handled in User class\r\n            return;\r\n        }\r\n        if (stendhal.data.group.members[this[\"name\"]]) {\r\n            this.minimapStyle = Color_1.Color.GROUP;\r\n        }\r\n        else {\r\n            this.minimapStyle = Color_1.Color.PLAYER;\r\n        }\r\n    }\r\n    draw(ctx) {\r\n        if (this.isIgnored()) {\r\n            return;\r\n        }\r\n        // TODO: grey out instead of hiding completely because they still cause a collision\r\n        super.draw(ctx);\r\n    }\r\n    getResistance() {\r\n        if (typeof (this[\"ghostmode\"]) !== \"undefined\") {\r\n            return 0;\r\n        }\r\n        return this[\"resistance\"];\r\n    }\r\n    /**\r\n     * says a text\r\n     *\r\n     * @param text\r\n     *     Message contents.\r\n     * @param rangeSquared\r\n     *     Distance squared within which the entity can be heard (-1\r\n     *     represents entire map).\r\n     */\r\n    say(text, rangeSquared) {\r\n        if (this.isIgnored()) {\r\n            return;\r\n        }\r\n        super.say(text, rangeSquared);\r\n    }\r\n    getCursor(_x, _y) {\r\n        if (this.isVisibleToAction(false)) {\r\n            return \"url(\" + stendhal.paths.sprites + \"/cursor/look.png) 1 3, auto\";\r\n        }\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/walk.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.Player = Player;\r\n//# sourceMappingURL=Player.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MiniMapComponent = void 0;\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst Player_1 = require(\"../../entity/Player\");\r\n/**\r\n * mini map\r\n */\r\nclass MiniMapComponent extends Component_1.Component {\r\n    constructor() {\r\n        super(\"minimap\");\r\n        this.width = 128;\r\n        this.height = 128;\r\n        this.minimumScale = 2;\r\n        this.xOffset = 1;\r\n        this.yOffset = 1;\r\n        this.mapWidth = 1;\r\n        this.mapHeight = 1;\r\n        this.scale = 1;\r\n        this.componentElement.addEventListener(\"click\", (event) => {\r\n            this.onClick(event);\r\n        });\r\n        this.componentElement.addEventListener(\"dblclick\", (event) => {\r\n            this.onClick(event);\r\n        });\r\n    }\r\n    zoneChange() {\r\n        this.mapWidth = stendhal.data.map.zoneSizeX;\r\n        this.mapHeight = stendhal.data.map.zoneSizeY;\r\n        this.scale = Math.max(this.minimumScale, Math.min(this.height / this.mapHeight, this.width / this.mapWidth));\r\n        this.createBackgroundImage();\r\n    }\r\n    ;\r\n    updateBasePosition() {\r\n        if (!marauroa.me) {\r\n            return;\r\n        }\r\n        this.xOffset = 0;\r\n        this.yOffset = 0;\r\n        let imageWidth = this.mapWidth * this.scale;\r\n        let imageHeight = this.mapHeight * this.scale;\r\n        let xpos = Math.round((marauroa.me[\"x\"] * this.scale) + 0.5) - this.width / 2;\r\n        let ypos = Math.round((marauroa.me[\"y\"] * this.scale) + 0.5) - this.width / 2;\r\n        if (imageWidth > this.width) {\r\n            // need to pan width\r\n            if ((xpos + this.width) > imageWidth) {\r\n                // x is at the screen border\r\n                this.xOffset = imageWidth - this.width;\r\n            }\r\n            else if (xpos > 0) {\r\n                this.xOffset = xpos;\r\n            }\r\n        }\r\n        if (imageHeight > this.height) {\r\n            // need to pan height\r\n            if ((ypos + this.height) > imageHeight) {\r\n                // y is at the screen border\r\n                this.yOffset = imageHeight - this.height;\r\n            }\r\n            else if (ypos > 0) {\r\n                this.yOffset = ypos;\r\n            }\r\n        }\r\n    }\r\n    draw() {\r\n        if (marauroa.currentZoneName === stendhal.data.map.currentZoneName\r\n            || stendhal.data.map.currentZoneName === \"int_vault\"\r\n            || stendhal.data.map.currentZoneName === \"int_adventure_island\"\r\n            || stendhal.data.map.currentZoneName === \"tutorial_island\") {\r\n            this.scale = 10;\r\n            this.zoneChange();\r\n            this.updateBasePosition();\r\n            let ctx = this.componentElement.getContext(\"2d\");\r\n            // IE does not support ctx.resetTransform(), so use the following workaround:\r\n            ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n            // The area outside of the map\r\n            ctx.fillStyle = \"#606060\";\r\n            ctx.fillRect(0, 0, this.width, this.height);\r\n            ctx.translate(Math.round(-this.xOffset), Math.round(-this.yOffset));\r\n            this.drawBackground(ctx);\r\n            this.drawEntities(ctx);\r\n        }\r\n    }\r\n    drawBackground(ctx) {\r\n        ctx.save();\r\n        ctx.imageSmoothingEnabled = false;\r\n        ctx.scale(this.scale, this.scale);\r\n        if (this.bgImage) {\r\n            ctx.drawImage(this.bgImage, 0, 0);\r\n        }\r\n        ctx.restore();\r\n    }\r\n    createBackgroundImage() {\r\n        let width = this.mapWidth;\r\n        let height = this.mapHeight;\r\n        if (width <= 0 || height <= 0) {\r\n            return;\r\n        }\r\n        if (stendhal.data.map.collisionData !== this.lastZone) {\r\n            this.lastZone = stendhal.data.map.collisionData;\r\n            this.bgImage = document.createElement(\"canvas\");\r\n            let ctx = this.bgImage.getContext(\"2d\");\r\n            let imgData = ctx.createImageData(width, height);\r\n            for (let y = 0; y < height; y++) {\r\n                for (let x = 0; x < width; x++) {\r\n                    // RGBA array. Find the actual position\r\n                    let pos = 4 * (y * width + x);\r\n                    if (stendhal.data.map.collision(x, y)) {\r\n                        // red collision\r\n                        imgData.data[pos] = 255;\r\n                    }\r\n                    else if (stendhal.data.map.isProtected(x, y)) {\r\n                        // light green for protection\r\n                        imgData.data[pos] = 202;\r\n                        imgData.data[pos + 1] = 230;\r\n                        imgData.data[pos + 2] = 202;\r\n                    }\r\n                    else {\r\n                        // light gray elsewhere\r\n                        imgData.data[pos] = 224;\r\n                        imgData.data[pos + 1] = 224;\r\n                        imgData.data[pos + 2] = 224;\r\n                    }\r\n                    imgData.data[pos + 3] = 255;\r\n                }\r\n            }\r\n            this.bgImage.width = width;\r\n            this.bgImage.height = height;\r\n            ctx.putImageData(imgData, 0, 0);\r\n        }\r\n    }\r\n    drawEntities(ctx) {\r\n        ctx.fillStyle = \"rgb(255,0,0)\";\r\n        ctx.strokeStyle = \"rgb(0,0,0)\";\r\n        let isAdmin = marauroa.me[\"adminlevel\"] && marauroa.me[\"adminlevel\"] >= 600;\r\n        for (let i in marauroa.currentZone) {\r\n            let o = marauroa.currentZone[i];\r\n            if (typeof (o[\"x\"]) != \"undefined\" && typeof (o[\"y\"]) != \"undefined\" && (o.minimapShow || isAdmin)) {\r\n                o.onMiniMapDraw();\r\n                // this.ctx.fillText(o.id, o.x * this.scale, o.y * this.scale);\r\n                if (o.minimapStyle) {\r\n                    ctx.strokeStyle = o.minimapStyle;\r\n                }\r\n                else {\r\n                    ctx.strokeStyle = \"rgb(128, 128, 128)\";\r\n                }\r\n                if (o instanceof Player_1.Player) {\r\n                    let adj_scale = this.scale;\r\n                    if (adj_scale < 6) {\r\n                        // + is hard to see in wider views\r\n                        adj_scale = 6;\r\n                    }\r\n                    let ho = (o[\"width\"] * adj_scale) / 2;\r\n                    let vo = (o[\"height\"] * adj_scale) / 2;\r\n                    const hc = o[\"x\"] * this.scale + ho;\r\n                    const vc = o[\"y\"] * this.scale + vo;\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(hc - ho, vc);\r\n                    ctx.lineTo(hc + ho, vc);\r\n                    ctx.moveTo(hc, vc - vo);\r\n                    ctx.lineTo(hc, vc + vo);\r\n                    ctx.stroke();\r\n                    ctx.closePath();\r\n                }\r\n                else {\r\n                    ctx.strokeRect(o[\"x\"] * this.scale, o[\"y\"] * this.scale, o[\"width\"] * this.scale, o[\"height\"] * this.scale);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    onClick(event) {\r\n        if (!stendhal.config.getBoolean(\"client.pathfinding\")) {\r\n            return;\r\n        }\r\n        let pos = stendhal.ui.html.extractPosition(event);\r\n        let x = Math.floor((pos.canvasRelativeX + this.xOffset) / this.scale);\r\n        let y = Math.floor((pos.canvasRelativeY + this.yOffset) / this.scale);\r\n        if (!stendhal.data.map.collision(x, y)) {\r\n            let action = {\r\n                type: \"moveto\",\r\n                x: x.toString(),\r\n                y: y.toString()\r\n            };\r\n            if (\"type\" in event && event[\"type\"] === \"dblclick\") {\r\n                action[\"double_click\"] = \"\";\r\n            }\r\n            marauroa.clientFramework.sendAction(action);\r\n        }\r\n    }\r\n}\r\nexports.MiniMapComponent = MiniMapComponent;\r\n//# sourceMappingURL=MiniMapComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ZoneInfoComponent = void 0;\r\nconst Component_1 = require(\"../toolkit/Component\");\r\n/**\r\n * zone info\r\n */\r\nclass ZoneInfoComponent extends Component_1.Component {\r\n    constructor() {\r\n        super(\"zoneinfo\");\r\n        this.DANGER_LEVEL_DESCRIPTIONS = [\r\n            \"The area feels safe.\",\r\n            \"The area feels relatively safe.\",\r\n            \"The area feels somewhat dangerous.\",\r\n            \"The area feels dangerous.\",\r\n            \"The area feels very dangerous!\",\r\n            \"The area feels extremely dangerous. Run away!\"\r\n        ];\r\n    }\r\n    zoneChange(zoneinfo) {\r\n        document.getElementById(\"zonename\").textContent = zoneinfo[\"readable_name\"];\r\n        if (marauroa.me) {\r\n            let dangerLevel = Number.parseFloat(zoneinfo[\"danger_level\"]);\r\n            let skulls = Math.min(5, Math.round(2 * dangerLevel / (Number.parseInt(marauroa.me.level, 10) + 3)));\r\n            let div = document.getElementById(\"skulls\");\r\n            if (skulls === 0) {\r\n                div.style.height = \"0\";\r\n            }\r\n            else {\r\n                div.style.height = \"16px\";\r\n            }\r\n            div.style.width = (skulls * 20) + \"px\";\r\n            this.componentElement.title = this.DANGER_LEVEL_DESCRIPTIONS[skulls];\r\n        }\r\n    }\r\n    ;\r\n}\r\nexports.ZoneInfoComponent = ZoneInfoComponent;\r\n//# sourceMappingURL=ZoneInfoComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PlayerEquipmentComponent = void 0;\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst ItemContainerImplementation_1 = require(\"./ItemContainerImplementation\");\r\n/**\r\n * manage the equipment which is used by the player\r\n */\r\nclass PlayerEquipmentComponent extends Component_1.Component {\r\n    constructor() {\r\n        super(\"equipment\");\r\n        this.slotNames = [\"head\", \"lhand\", \"rhand\", \"finger\", \"armor\", \"cloak\", \"legs\", \"feet\", \"pouch\"];\r\n        this.slotSizes = [1, 1, 1, 1, 1, 1, 1, 1, 1];\r\n        this.slotImages = [\"slot-helmet.png\", \"slot-shield.png\", \"slot-weapon.png\", \"slot-ring.png\", \"slot-armor.png\", \"slot-cloak.png\",\r\n            \"slot-legs.png\", \"slot-boots.png\", \"slot-pouch.png\"];\r\n        this.inventory = [];\r\n        this.pouchVisible = false;\r\n        this.inventory = [];\r\n        for (var i in this.slotNames) {\r\n            this.inventory.push(new ItemContainerImplementation_1.ItemContainerImplementation(document, this.slotNames[i], this.slotSizes[i], null, \"\", false, this.slotImages[i]));\r\n        }\r\n        // hide pouch by default\r\n        this.showPouch(false);\r\n    }\r\n    update() {\r\n        for (var i in this.inventory) {\r\n            this.inventory[i].update();\r\n        }\r\n        if (!this.pouchVisible) {\r\n            var features = null;\r\n            if (marauroa.me != null) {\r\n                features = marauroa.me[\"features\"];\r\n            }\r\n            if (features != null) {\r\n                if (features[\"pouch\"] != null) {\r\n                    this.showPouch(true);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    markDirty() {\r\n        for (const inv of this.inventory) {\r\n            inv.markDirty();\r\n        }\r\n    }\r\n    showSlot(id, show) {\r\n        var slot = document.getElementById(id);\r\n        var prevState = slot.style.display;\r\n        if (show === true) {\r\n            slot.style.display = \"block\";\r\n        }\r\n        else {\r\n            slot.style.display = \"none\";\r\n        }\r\n        return prevState != slot.style.display;\r\n    }\r\n    showPouch(show) {\r\n        if (this.showSlot(\"pouch0\", show)) {\r\n            // resize the inventory window\r\n            var equip = document.getElementById(\"equipment\");\r\n            if (show) {\r\n                equip.style.height = \"200px\";\r\n            }\r\n            else {\r\n                equip.style.height = \"160px\";\r\n            }\r\n            this.pouchVisible = show;\r\n        }\r\n    }\r\n}\r\nexports.PlayerEquipmentComponent = PlayerEquipmentComponent;\r\n//# sourceMappingURL=PlayerEquipmentComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Arianne                        *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StatusesListComponent = void 0;\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nclass StatusesListComponent extends Component_1.Component {\r\n    constructor() {\r\n        super(\"statuses-list\");\r\n        this.active = [];\r\n    }\r\n    update(user) {\r\n        const changes = [];\r\n        for (const key of Object.keys(user)) {\r\n            if (Object.keys(StatusesListComponent.iconPaths).indexOf(key) !== -1) {\r\n                changes.push(key);\r\n            }\r\n            else if (key === \"poisoned\") {\r\n                changes.push(\"poison\");\r\n            }\r\n            else if (key.startsWith(\"status_\")) {\r\n                const id = key.substring(key.indexOf(\"_\") + 1);\r\n                if (id !== \"\") {\r\n                    changes.push(id);\r\n                }\r\n            }\r\n        }\r\n        if (this.changed(changes)) {\r\n            this.active = changes;\r\n            this.updateInternal();\r\n        }\r\n    }\r\n    updateInternal() {\r\n        for (const icon of Array.from(this.componentElement.children)) {\r\n            // remove old icons\r\n            this.componentElement.removeChild(icon);\r\n        }\r\n        const choking = this.active.indexOf(\"choking\") !== -1;\r\n        for (const id of this.active) {\r\n            if (id === \"eating\" && choking) {\r\n                // don't show \"eating\" & \"choking\" at the same time\r\n                continue;\r\n            }\r\n            let iconPath;\r\n            if (Object.keys(StatusesListComponent.iconPaths).indexOf(id) !== -1) {\r\n                iconPath = stendhal.paths.sprites + StatusesListComponent.iconPaths[id];\r\n            }\r\n            else {\r\n                iconPath = stendhal.paths.sprites + \"/status/panel/\" + id + \".png\";\r\n            }\r\n            const icon = stendhal.data.sprites.get(iconPath);\r\n            icon.className = \"status-icon\";\r\n            this.componentElement.appendChild(icon);\r\n        }\r\n    }\r\n    changed(changes) {\r\n        if (changes.length != this.active.length) {\r\n            return true;\r\n        }\r\n        for (let idx = 0; idx < changes.length; idx++) {\r\n            if (changes[idx] !== this.active[idx]) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.StatusesListComponent = StatusesListComponent;\r\nStatusesListComponent.iconPaths = {\r\n    \"choking\": \"/ideas/choking.png\",\r\n    \"eating\": \"/ideas/eat.png\"\r\n};\r\n//# sourceMappingURL=StatusesListComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StatBarComponent = void 0;\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst Color_1 = require(\"../../util/Color\");\r\nclass StatBarComponent extends Component_1.Component {\r\n    constructor(id) {\r\n        if (!id) {\r\n            id = \"statbar-template\";\r\n        }\r\n        super(id);\r\n        this.canvas = this.componentElement;\r\n        this.ctx = this.canvas.getContext(\"2d\");\r\n    }\r\n    draw(ratio) {\r\n        this.ctx.beginPath();\r\n        this.ctx.fillStyle = \"#808080\"; // same as java.awt.Color.GRAY (rgb(128,128,128))\r\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n        this.ctx.fillStyle = Color_1.Color.getStatBarColor(ratio);\r\n        this.ctx.fillRect(0, 0, this.canvas.width * ratio, this.canvas.height);\r\n    }\r\n}\r\nexports.StatBarComponent = StatBarComponent;\r\n//# sourceMappingURL=StatBarComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.KarmaBarComponent = void 0;\r\nconst StatBarComponent_1 = require(\"./StatBarComponent\");\r\nclass KarmaBarComponent extends StatBarComponent_1.StatBarComponent {\r\n    constructor() {\r\n        super(\"karmabar\");\r\n        this.karma = 0;\r\n        this.lastChange = 0;\r\n        // value represented in bar\r\n        this.repValue = 0.5;\r\n        // prevents bar from lighting up when first created\r\n        this.initialized = false;\r\n    }\r\n    draw(newKarma) {\r\n        const cycleTime = Date.now();\r\n        if (this.initialized) {\r\n            if (newKarma != this.karma) {\r\n                this.canvas.style.setProperty(\"outline\", \"1px solid #ffffff\");\r\n                this.karma = newKarma;\r\n                this.canvas.title = this.describeKarma(newKarma);\r\n                this.calculateRepresentation(newKarma);\r\n                this.lastChange = cycleTime;\r\n            }\r\n            else if (cycleTime - this.lastChange >= 1000) {\r\n                this.canvas.style.setProperty(\"outline\", \"1px solid #000000\");\r\n            }\r\n        }\r\n        else {\r\n            this.karma = newKarma;\r\n            this.canvas.title = this.describeKarma(newKarma);\r\n            this.calculateRepresentation(newKarma);\r\n            this.initialized = true;\r\n        }\r\n        // black background\r\n        this.ctx.beginPath();\r\n        this.ctx.fillStyle = \"#000000\";\r\n        this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n        // gradient foreground\r\n        const grad = this.ctx.createLinearGradient(0, 0, this.canvas.width, 0);\r\n        grad.addColorStop(0, \"#ff0000\");\r\n        grad.addColorStop(0.5, \"#ffffff\");\r\n        grad.addColorStop(1, \"#0000ff\");\r\n        this.ctx.fillStyle = grad;\r\n        this.ctx.fillRect(0, 0, this.repValue, this.canvas.height);\r\n    }\r\n    /**\r\n     * Get textual description of karma value.\r\n     *\r\n     * @param karma\r\n     *     karma value.\r\n     * @return\r\n     *     Karma description.\r\n     */\r\n    describeKarma(karma) {\r\n        if (karma > 499) {\r\n            return \"You have unusually good karma\";\r\n        }\r\n        else if (karma > 99) {\r\n            return \"You have great karma\";\r\n        }\r\n        else if (karma > 5) {\r\n            return \"You have good karma\";\r\n        }\r\n        else if (karma > -5) {\r\n            return \"You have average karma\";\r\n        }\r\n        else if (karma > -99) {\r\n            return \"You have bad karma\";\r\n        }\r\n        else if (karma > -499) {\r\n            return \"You have terrible karma\";\r\n        }\r\n        return \"You have disastrously bad karma\";\r\n    }\r\n    /**\r\n     * Calculates the value to be represented in bar.\r\n     */\r\n    calculateRepresentation(karma) {\r\n        const normalized = 0.5 + Math.atan(0.02 * karma) / Math.PI;\r\n        this.repValue = this.canvas.width * Math.max(Math.min(normalized, 1), 0);\r\n    }\r\n}\r\nexports.KarmaBarComponent = KarmaBarComponent;\r\n//# sourceMappingURL=KarmaBarComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                    Copyright \u00a9 2003-2023 - Stendhal                     *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ItemMap = void 0;\r\nconst SingletonRepo_1 = require(\"../SingletonRepo\");\r\nconst config = SingletonRepo_1.singletons.getConfigManager();\r\nconst defaultUse = {\r\n    title: \"Use\",\r\n    type: \"use\",\r\n    index: 0\r\n};\r\nexports.ItemMap = {\r\n    [\"class\"]: {\r\n        [\"box\"]: {\r\n            cursor: \"bag\",\r\n            actions: [\r\n                {\r\n                    title: \"Open\",\r\n                    type: \"use\",\r\n                    index: 0\r\n                }\r\n            ]\r\n        },\r\n        [\"drink\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"food\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"scroll\"]: {\r\n            cursor: \"itemuse\"\r\n        }\r\n    },\r\n    [\"name\"]: {\r\n        [\"ashen holy water\"]: {\r\n            actions: [defaultUse]\r\n        },\r\n        [\"bestiary\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"bulb\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"empty scroll\"]: {\r\n            actions: function (e) {\r\n                const count = parseInt(e[\"quantity\"], 10);\r\n                if (count > 1 && e._parent) {\r\n                    return [{\r\n                            title: \"Mark all\",\r\n                            index: 1,\r\n                            action: function (entity) {\r\n                                // FIXME: doesn't work if scrolls are on ground\r\n                                //        tries to pull scrolls from inventory\r\n                                marauroa.clientFramework.sendAction({\r\n                                    \"type\": \"markscroll\",\r\n                                    \"quantity\": \"\" + count\r\n                                });\r\n                            }\r\n                        }];\r\n                }\r\n            }\r\n        },\r\n        [\"food mill\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"metal detector\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"picture in wooden frame\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"rotary cutter\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"scroll eraser\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"seed\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"snowglobe\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"sugar mill\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"teddy\"]: {\r\n            cursor: \"itemuse\"\r\n        },\r\n        [\"wedding ring\"]: {\r\n            cursor: \"itemuse\",\r\n            actions: [defaultUse]\r\n        }\r\n    },\r\n    /**\r\n     * Retrieves cursor registered for item.\r\n     *\r\n     * @param clazz\r\n     *     Item class.\r\n     * @param name\r\n     *     Item name.\r\n     * @return\r\n     *     Cursor name.\r\n     */\r\n    getCursor: function (clazz, name) {\r\n        let cursor = \"normal\";\r\n        for (const imap of [exports.ItemMap[\"class\"][clazz], exports.ItemMap[\"name\"][name]]) {\r\n            if (imap && imap.cursor) {\r\n                cursor = imap.cursor;\r\n            }\r\n        }\r\n        if (cursor === \"itemuse\" && !config.getBoolean(\"action.item.doubleclick\")) {\r\n            cursor = \"activity\";\r\n        }\r\n        return cursor;\r\n    },\r\n    /**\r\n     * Retrieves list of menu actions defined for item.\r\n     *\r\n     * @param item\r\n     *     Object containing item defintion.\r\n     * @return\r\n     *     Actions.\r\n     */\r\n    getActions: function (item) {\r\n        let actions = [];\r\n        if (!item) {\r\n            return actions;\r\n        }\r\n        for (const imap of [exports.ItemMap[\"class\"][item[\"class\"]], exports.ItemMap[\"name\"][item[\"name\"]]]) {\r\n            if (imap && imap.actions) {\r\n                let a;\r\n                if (typeof (imap.actions) === \"function\") {\r\n                    a = imap.actions(item) || [];\r\n                }\r\n                else {\r\n                    a = imap.actions;\r\n                }\r\n                actions = actions.concat(a);\r\n            }\r\n        }\r\n        return actions;\r\n    }\r\n};\r\n//# sourceMappingURL=ItemMap.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Item = void 0;\r\nconst ItemMap_1 = require(\"./ItemMap\");\r\nconst Entity_1 = require(\"./Entity\");\r\nconst TextSprite_1 = require(\"../sprite/TextSprite\");\r\nclass Item extends Entity_1.Entity {\r\n    constructor() {\r\n        super();\r\n        this.minimapShow = false;\r\n        this.minimapStyle = \"rgb(0,255,0)\";\r\n        this.zIndex = 7000;\r\n        // animation\r\n        this.frameTimeStamp = 0;\r\n        this.animated = null;\r\n        this.xFrames = null;\r\n        this.yFrames = null;\r\n        this.sprite = {\r\n            height: 32,\r\n            width: 32\r\n        };\r\n        this.quantityTextSprite = new TextSprite_1.TextSprite(\"\", \"white\", \"10px sans-serif\");\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    buildActions(list) {\r\n        super.buildActions(list);\r\n        for (const mi of ItemMap_1.ItemMap.getActions(this)) {\r\n            if (typeof (mi.index) === \"number\") {\r\n                list.splice(mi.index, 0, mi);\r\n            }\r\n            else {\r\n                list.push(mi);\r\n            }\r\n        }\r\n    }\r\n    // default action for items on the ground is to pick them up\r\n    // do not require players to use drag & drop (as the classic client did)\r\n    // because drag & drop is difficult on mobile (especially if the page is zoomed)\r\n    getDefaultAction() {\r\n        return {\r\n            type: \"equip\",\r\n            \"source_path\": this.getIdPath(),\r\n            \"target_path\": \"[\" + marauroa.me[\"id\"] + \"\\tbag]\",\r\n            \"clicked\": \"\",\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"class\" || key === \"subclass\") {\r\n            this.sprite.filename = stendhal.paths.sprites + \"/items/\"\r\n                + this[\"class\"] + \"/\" + this[\"subclass\"] + \".png\";\r\n        }\r\n        if (key === \"quantity\") {\r\n            this.quantityTextSprite = new TextSprite_1.TextSprite(this.formatQuantity(), \"white\", \"10px sans-serif\");\r\n        }\r\n    }\r\n    draw(ctx) {\r\n        this.sprite.offsetY = (this[\"state\"] || 0) * 32;\r\n        this.stepAnimation();\r\n        this.drawAt(ctx, this[\"x\"] * 32, this[\"y\"] * 32);\r\n    }\r\n    drawAt(ctx, x, y) {\r\n        if (this.sprite) {\r\n            this.drawSpriteAt(ctx, x, y);\r\n            let textMetrics = this.quantityTextSprite.getTextMetrics(ctx);\r\n            this.quantityTextSprite.draw(ctx, x + (32 - textMetrics.width), y + 6);\r\n        }\r\n    }\r\n    stepAnimation() {\r\n        const currentTimeStamp = +new Date();\r\n        if (this.frameTimeStamp == 0) {\r\n            this.frameTimeStamp = currentTimeStamp;\r\n            this.sprite.offsetX = 0;\r\n            this.sprite.offsetY = 0;\r\n        }\r\n        else if (currentTimeStamp - this.frameTimeStamp >= 100) {\r\n            // FIXME: need proper FPS limit\r\n            this.setXFrameIndex(this.getXFrameIndex() + 1);\r\n            this.frameTimeStamp = currentTimeStamp;\r\n        }\r\n    }\r\n    formatQuantity() {\r\n        if (!this[\"quantity\"] || this[\"quantity\"] === \"1\") {\r\n            return \"\";\r\n        }\r\n        if (this[\"quantity\"] > 10000000) {\r\n            return Math.floor(this[\"quantity\"] / 1000000) + \"m\";\r\n        }\r\n        if (this[\"quantity\"] > 10000) {\r\n            return Math.floor(this[\"quantity\"] / 1000) + \"k\";\r\n        }\r\n        return this[\"quantity\"];\r\n    }\r\n    getCursor(_x, _y) {\r\n        let cursor;\r\n        if (!this._parent) {\r\n            cursor = \"itempickupfromslot\";\r\n        }\r\n        else {\r\n            cursor = ItemMap_1.ItemMap.getCursor(this[\"class\"], this[\"name\"]);\r\n        }\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/\" + cursor + \".png) 1 3, auto\";\r\n    }\r\n    getToolTip() {\r\n        if (this[\"class\"] === \"scroll\" && this[\"dest\"]) {\r\n            const dest = this[\"dest\"].split(\",\");\r\n            if (dest.length > 2) {\r\n                return dest[0] + \" \" + dest[1] + \",\" + dest[2];\r\n            }\r\n        }\r\n        return \"\";\r\n    }\r\n    isAnimated() {\r\n        if (!stendhal.data.sprites.get(this.sprite.filename).height) {\r\n            return false;\r\n        }\r\n        if (this.animated == null) {\r\n            // store animation state\r\n            this.animated = (stendhal.data.sprites.get(this.sprite.filename).width / 32) > 1;\r\n        }\r\n        return this.animated;\r\n    }\r\n    setXFrameIndex(idx) {\r\n        if (this.xFrames == null) {\r\n            const img = stendhal.data.sprites.get(this.sprite.filename);\r\n            this.xFrames = img.width / 32;\r\n        }\r\n        if (idx >= this.xFrames) {\r\n            // restart\r\n            idx = 0;\r\n        }\r\n        this.sprite.offsetX = idx * 32;\r\n    }\r\n    setYFrameIndex(idx) {\r\n        if (this.yFrames == null) {\r\n            const img = stendhal.data.sprites.get(this.sprite.filename);\r\n            this.yFrames = img.height / 32;\r\n        }\r\n        if (idx >= this.yFrames) {\r\n            // restart\r\n            idx = 0;\r\n        }\r\n        this.sprite.offsetY = idx * 32;\r\n    }\r\n    getXFrameIndex() {\r\n        return (this.sprite.offsetX || 0) / 32;\r\n    }\r\n    getYFrameIndex() {\r\n        return (this.sprite.offsetY || 0) / 32;\r\n    }\r\n    isDraggable() {\r\n        return true;\r\n    }\r\n}\r\nexports.Item = Item;\r\n//# sourceMappingURL=Item.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2003-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PlayerStatsComponent = void 0;\r\nconst StatusesListComponent_1 = require(\"./StatusesListComponent\");\r\nconst StatBarComponent_1 = require(\"./StatBarComponent\");\r\nconst KarmaBarComponent_1 = require(\"./KarmaBarComponent\");\r\nconst UI_1 = require(\"../UI\");\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\nconst Component_1 = require(\"../toolkit/Component\");\r\nconst SingletonRepo_1 = require(\"../../SingletonRepo\");\r\nconst Item_1 = require(\"../../entity/Item\");\r\n/**\r\n * displays the player stats\r\n */\r\nclass PlayerStatsComponent extends Component_1.Component {\r\n    constructor() {\r\n        super(\"stats\");\r\n        this.keys = [\"hp\", \"base_hp\", \"atk\", \"atk_item\", \"atk_xp\", \"def\", \"def_item\", \"def_xp\", \"xp\", \"level\"];\r\n        this.LEVELS = 598;\r\n        this.MONEY_SLOTS = [\"pouch\", \"bag\", \"lhand\", \"rhand\"];\r\n        this.bars = {};\r\n        this.xp = [this.LEVELS + 1];\r\n        this.xp[0] = 0;\r\n        this.xp[1] = 50;\r\n        this.xp[2] = 100;\r\n        this.xp[3] = 200;\r\n        this.xp[4] = 400;\r\n        this.xp[5] = 800;\r\n        for (let i = 5; i < this.LEVELS; i++) {\r\n            const exp = Math.floor((i * 16 + i * i * 5 + i * i * i * 10 + 300) / 100) * 100;\r\n            this.xp[i + 1] = exp;\r\n        }\r\n        const statuses = new StatusesListComponent_1.StatusesListComponent();\r\n        UI_1.ui.registerComponent(UIComponentEnum_1.UIComponentEnum.StatusesList, statuses);\r\n        this.enableCharName(stendhal.config.getBoolean(\"ui.stats.charname\"));\r\n        this.hpText = this.child(\"#hptext\");\r\n        this.otherText = this.child(\"#otherstats\");\r\n        this.bars[\"karma\"] = new KarmaBarComponent_1.KarmaBarComponent();\r\n        // hide karma bar by default\r\n        this.enableBar(\"karma\", false);\r\n        this.bars[\"hp\"] = new StatBarComponent_1.StatBarComponent(\"hpbar\");\r\n        // use config to determine if HP bar should be visible\r\n        this.enableBar(\"hp\", SingletonRepo_1.singletons.getConfigManager()\r\n            .getBoolean(\"ui.stats.hpbar\"));\r\n    }\r\n    update(key) {\r\n        if (this.keys.indexOf(key) < -1) {\r\n            return;\r\n        }\r\n        const object = marauroa.me;\r\n        this.updateKarma(object[\"karma\"]);\r\n        this.updateHp(object[\"hp\"], object[\"base_hp\"]);\r\n        this.updateOther(object);\r\n        if (!this.isBarEnabled(\"karma\") && object) {\r\n            const features = object[\"features\"];\r\n            if (features && features[\"karma_indicator\"] != null) {\r\n                this.enableBar(\"karma\");\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Updates karma bar.\r\n     *\r\n     * @param karma\r\n     *     New karma value.\r\n     */\r\n    updateKarma(karma) {\r\n        if (this.isBarEnabled(\"karma\")) {\r\n            this.bars[\"karma\"].draw(karma);\r\n        }\r\n    }\r\n    /**\r\n     * Updates HP value & draws bar.\r\n     *\r\n     * @param hp\r\n     *     Player's actual HP.\r\n     * @param base_hp\r\n     *     Player's potential max HP.\r\n     */\r\n    updateHp(hp, base_hp) {\r\n        this.hpText.innerText = \"HP: \" + hp + \" / \" + base_hp;\r\n        if (this.isBarEnabled(\"hp\")) {\r\n            this.bars[\"hp\"].draw(hp / base_hp);\r\n        }\r\n    }\r\n    /**\r\n     * Updates all other stat values.\r\n     *\r\n     * @param object\r\n     *     Owner of stats.\r\n     */\r\n    updateOther(object) {\r\n        const atk = object[\"atk\"];\r\n        const atkXP = object[\"atk_xp\"];\r\n        const def = object[\"def\"];\r\n        const defXP = object[\"def_xp\"];\r\n        const atkTNL = this.getAtkDefTNL(atk, atkXP);\r\n        const defTNL = this.getAtkDefTNL(def, defXP);\r\n        const lvl = parseInt(object[\"level\"], 10);\r\n        const xp = object[\"xp\"];\r\n        // show dash for max level\r\n        let xpTNL = (lvl < this.getMaxLevel()) ? this.getTNL(lvl, xp) : \"-\";\r\n        this.otherText.innerText =\r\n            \"ATK: \" + atk + \" x \" + object[\"atk_item\"] + \"\\r\\n  (\" + atkTNL + \")\\r\\n\"\r\n                + \"DEF: \" + def + \" x \" + object[\"def_item\"] + \"\\r\\n  (\" + defTNL + \")\\r\\n\"\r\n                + \"XP: \" + xp + \"\\r\\n\"\r\n                + \"Level: \" + lvl + \"\\r\\n  (\" + xpTNL + \")\\r\\n\"\r\n                + \"Money: \" + this.calculateMoney();\r\n    }\r\n    /**\r\n     * Retrieves amount of experience required to reach a level.\r\n     *\r\n     * @param lvl\r\n     *     Desired level.\r\n     * @param xp\r\n     *     Current XP.\r\n     * @return\r\n     *     Remaining XP.\r\n     */\r\n    getTNL(lvl, xp) {\r\n        return this.getReqXP(lvl + 1) - xp;\r\n    }\r\n    /**\r\n     * Retrieves amount of experience required to reach an ATK/DEF level.\r\n     *\r\n     * @param lvl\r\n     *     Desired level.\r\n     * @param xp\r\n     *     Current XP.\r\n     * @return\r\n     *     Remaining XP.\r\n     */\r\n    getAtkDefTNL(lvl, xp) {\r\n        return this.getReqXP(lvl - 9) - xp;\r\n    }\r\n    /**\r\n     * Retrieves the amount of XP required to reach a level.\r\n     *\r\n     * @param lvl\r\n     *     The respective level.\r\n     * @return\r\n     *     Amount of expericence.\r\n     */\r\n    getReqXP(lvl) {\r\n        if ((lvl >= 0) && (lvl < this.xp.length)) {\r\n            return this.xp[lvl];\r\n        }\r\n        return -1;\r\n    }\r\n    /**\r\n     * Retrieves highest possible player level.\r\n     */\r\n    getMaxLevel() {\r\n        return this.LEVELS - 1;\r\n    }\r\n    /**\r\n     * Retrieves amount of money being carried by player.\r\n     *\r\n     * @return\r\n     *     Total money from relevant slots.\r\n     */\r\n    calculateMoney() {\r\n        let mo = 0;\r\n        if (marauroa.me) {\r\n            for (const sname of this.MONEY_SLOTS) {\r\n                const slot = marauroa.me[sname];\r\n                if (slot) {\r\n                    for (let idx = 0; idx < slot.count(); idx++) {\r\n                        const o = slot.getByIndex(idx);\r\n                        if (o instanceof Item_1.Item) {\r\n                            const i = o;\r\n                            if (i[\"name\"] === \"money\") {\r\n                                mo += parseInt(i[\"quantity\"]);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return mo;\r\n    }\r\n    /**\r\n     * Sets visibility of character name in status panel.\r\n     */\r\n    enableCharName(visible = true) {\r\n        const charname = document.getElementById(\"charname\");\r\n        if (visible) {\r\n            charname.style[\"display\"] = \"block\";\r\n        }\r\n        else {\r\n            charname.style[\"display\"] = \"none\";\r\n        }\r\n    }\r\n    /**\r\n     * Enables or disables drawing of stat bars.\r\n     *\r\n     * @param\r\n     *     Bar identifier string.\r\n     * @param visible\r\n     *     If true, bar will be drawn.\r\n     */\r\n    enableBar(id, visible = true) {\r\n        const bar = this.bars[id];\r\n        if (bar) {\r\n            bar.setVisible(visible);\r\n        }\r\n    }\r\n    isBarEnabled(id) {\r\n        const bar = this.bars[id];\r\n        if (bar) {\r\n            return bar.isVisible();\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.PlayerStatsComponent = PlayerStatsComponent;\r\n//# sourceMappingURL=PlayerStatsComponent.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2022-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DesktopUserInterfaceFactory = void 0;\r\nconst UIComponentEnum_1 = require(\"../UIComponentEnum\");\r\nconst UI_1 = require(\"../UI\");\r\nconst Panel_1 = require(\"../toolkit/Panel\");\r\nconst TabPanelComponent_1 = require(\"../toolkit/TabPanelComponent\");\r\nconst BagComponent_1 = require(\"../component/BagComponent\");\r\nconst BuddyListComponent_1 = require(\"../component/BuddyListComponent\");\r\nconst ChatInputComponent_1 = require(\"../component/ChatInputComponent\");\r\nconst ChatLogComponent_1 = require(\"../component/ChatLogComponent\");\r\nconst GroupPanelComponent_1 = require(\"../component/GroupPanelComponent\");\r\nconst KeyringComponent_1 = require(\"../component/KeyringComponent\");\r\nconst MiniMapComponent_1 = require(\"../component/MiniMapComponent\");\r\nconst ZoneInfoComponent_1 = require(\"../component/ZoneInfoComponent\");\r\nconst PlayerEquipmentComponent_1 = require(\"../component/PlayerEquipmentComponent\");\r\nconst PlayerStatsComponent_1 = require(\"../component/PlayerStatsComponent\");\r\nclass DesktopUserInterfaceFactory {\r\n    create() {\r\n        let topPanel = new Panel_1.Panel(\"topPanel\");\r\n        UI_1.ui.registerComponent(UIComponentEnum_1.UIComponentEnum.LeftPanel, topPanel);\r\n        let leftPanel = new Panel_1.Panel(\"leftColumn\");\r\n        UI_1.ui.registerComponent(UIComponentEnum_1.UIComponentEnum.LeftPanel, leftPanel);\r\n        let socialPanel = new TabPanelComponent_1.TabPanelComponent();\r\n        UI_1.ui.registerComponent(UIComponentEnum_1.UIComponentEnum.SocialPanel, socialPanel);\r\n        this.add(leftPanel, UIComponentEnum_1.UIComponentEnum.MiniMap, new MiniMapComponent_1.MiniMapComponent());\r\n        this.add(leftPanel, UIComponentEnum_1.UIComponentEnum.ZoneInfo, new ZoneInfoComponent_1.ZoneInfoComponent());\r\n        this.add(leftPanel, UIComponentEnum_1.UIComponentEnum.PlayerStats, new PlayerStatsComponent_1.PlayerStatsComponent());\r\n        leftPanel.add(socialPanel);\r\n        this.add(socialPanel, UIComponentEnum_1.UIComponentEnum.BuddyList, new BuddyListComponent_1.BuddyListComponent());\r\n        this.add(socialPanel, UIComponentEnum_1.UIComponentEnum.GroupPanel, new GroupPanelComponent_1.GroupPanelComponent());\r\n        socialPanel.addTab(\"Friends\");\r\n        socialPanel.addTab(\"Group\");\r\n        let rightPanel = new Panel_1.Panel(\"rightColumn\");\r\n        UI_1.ui.registerComponent(UIComponentEnum_1.UIComponentEnum.RightPanel, rightPanel);\r\n        this.add(rightPanel, UIComponentEnum_1.UIComponentEnum.PlayerEquipment, new PlayerEquipmentComponent_1.PlayerEquipmentComponent());\r\n        this.add(rightPanel, UIComponentEnum_1.UIComponentEnum.Bag, new BagComponent_1.BagComponent(undefined, \"bag\", 3, 4, false, undefined));\r\n        const keyring = new KeyringComponent_1.KeyringComponent(undefined, \"keyring\", 2, 4, false, \"slot-key.png\");\r\n        // hide keyring by default\r\n        keyring.setVisible(false);\r\n        this.add(rightPanel, UIComponentEnum_1.UIComponentEnum.Keyring, keyring);\r\n        // hide pouch by default\r\n        // emoji button causes spacing between elements so apply theme to container panel\r\n        let bottomPanel = new Panel_1.Panel(\"bottomPanel\", true);\r\n        UI_1.ui.registerComponent(UIComponentEnum_1.UIComponentEnum.BottomPanel, bottomPanel);\r\n        this.add(bottomPanel, UIComponentEnum_1.UIComponentEnum.ChatInput, new ChatInputComponent_1.ChatInputComponent());\r\n        this.add(bottomPanel, UIComponentEnum_1.UIComponentEnum.ChatLog, new ChatLogComponent_1.ChatLogComponent());\r\n    }\r\n    add(panel, uiComponentEnum, component) {\r\n        panel.add(component);\r\n        UI_1.ui.registerComponent(uiComponentEnum, component);\r\n    }\r\n}\r\nexports.DesktopUserInterfaceFactory = DesktopUserInterfaceFactory;\r\n//# sourceMappingURL=DesktopUserInterfaceFactory.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DialogHandler = void 0;\r\n/**\r\n * Representation of an internal dialog window.\r\n */\r\nclass DialogHandler {\r\n    /**\r\n     * Sets the dialog window content.\r\n     *\r\n     * @param c\r\n     *     The FloatingWindow instance to be set.\r\n     */\r\n    set(c) {\r\n        //~ if (!c) {\r\n        //~ console.error(\"cannot set dialogHandler content to \\\"\"\r\n        //~ + typeof(c) + \"\\\", must be FloatingWindow instance\");\r\n        //~ return;\r\n        //~ }\r\n        // make sure this is closed before opening again\r\n        if (this.isOpen()) {\r\n            this.close();\r\n        }\r\n        this.content = c;\r\n        this.content.componentElement.addEventListener(\"mousedown\", function (e) {\r\n            // prevent global handler from closing when clicked on\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        });\r\n    }\r\n    /**\r\n     * Sets the content to <code>null</code>.\r\n     */\r\n    unset() {\r\n        this.content = undefined;\r\n    }\r\n    /**\r\n     * Retrieves the window.\r\n     *\r\n     * @return\r\n     *     FloatingWindow instance or <code>null</code> if not set.\r\n     */\r\n    get() {\r\n        return this.content;\r\n    }\r\n    /**\r\n     * Checks if the action context menu is open.\r\n     *\r\n     * @return\r\n     *     The FloatingWindow open state.\r\n     */\r\n    isOpen() {\r\n        return typeof (this.content) !== \"undefined\" && this.content.isOpen();\r\n    }\r\n    /**\r\n     * Closes the dialog window.\r\n     *\r\n     * @param unset\r\n     *     If <code>true</code>, resets content to <code>null</code>.\r\n     */\r\n    close(unset = false) {\r\n        if (!this.content) {\r\n            return;\r\n        }\r\n        this.content.close();\r\n        if (unset) {\r\n            this.unset();\r\n        }\r\n    }\r\n}\r\nexports.DialogHandler = DialogHandler;\r\n//# sourceMappingURL=DialogHandler.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Client = void 0;\r\nconst PerceptionListener_1 = require(\"./PerceptionListener\");\r\nconst SingletonRepo_1 = require(\"./SingletonRepo\");\r\nconst Paths_1 = require(\"./data/Paths\");\r\nconst Ground_1 = require(\"./entity/Ground\");\r\nconst Zone_1 = require(\"./entity/Zone\");\r\nconst UI_1 = require(\"./ui/UI\");\r\nconst UIComponentEnum_1 = require(\"./ui/UIComponentEnum\");\r\nconst ApplicationMenuDialog_1 = require(\"./ui/dialog/ApplicationMenuDialog\");\r\nconst ChooseCharacterDialog_1 = require(\"./ui/dialog/ChooseCharacterDialog\");\r\nconst LoginDialog_1 = require(\"./ui/dialog/LoginDialog\");\r\nconst DesktopUserInterfaceFactory_1 = require(\"./ui/factory/DesktopUserInterfaceFactory\");\r\nconst SingletonFloatingWindow_1 = require(\"./ui/toolkit/SingletonFloatingWindow\");\r\nconst Chat_1 = require(\"./util/Chat\");\r\nconst DialogHandler_1 = require(\"./util/DialogHandler\");\r\nclass Client {\r\n    /**\r\n     * Hidden singleton constructor.\r\n     */\r\n    constructor() {\r\n        this.initialized = false;\r\n        this.errorCounter = 0;\r\n        this.unloading = false;\r\n        // do nothing\r\n    }\r\n    /**\r\n     * Retrieves singleton instance.\r\n     */\r\n    static get() {\r\n        if (!Client.instance) {\r\n            Client.instance = new Client();\r\n        }\r\n        return Client.instance;\r\n    }\r\n    /**\r\n     * Initializations to be called before startup.\r\n     */\r\n    init() {\r\n        if (this.initialized) {\r\n            console.warn(\"tried to re-initialize client\");\r\n            return;\r\n        }\r\n        this.initialized = true;\r\n        stendhal.paths = SingletonRepo_1.singletons.getPaths();\r\n        stendhal.config = SingletonRepo_1.singletons.getConfigManager();\r\n        stendhal.session = SingletonRepo_1.singletons.getSessionManager();\r\n        this.initData();\r\n        this.initUI();\r\n        this.initZone();\r\n    }\r\n    initData() {\r\n        // build info is stored in build/js/build.js\r\n        stendhal.data = stendhal.data || {};\r\n        stendhal.data.cache = SingletonRepo_1.singletons.getCacheManager();\r\n        stendhal.data.cache.init();\r\n        stendhal.data.cstatus = SingletonRepo_1.singletons.getCStatus();\r\n        stendhal.data.cstatus.init();\r\n        stendhal.data.group = SingletonRepo_1.singletons.getGroupManager();\r\n        stendhal.data.outfit = SingletonRepo_1.singletons.getOutfitStore();\r\n        stendhal.data.sprites = SingletonRepo_1.singletons.getSpriteStore();\r\n        stendhal.data.map = SingletonRepo_1.singletons.getMap();\r\n    }\r\n    initUI() {\r\n        stendhal.ui = stendhal.ui || {};\r\n        stendhal.ui.equip = SingletonRepo_1.singletons.getInventory();\r\n        stendhal.ui.html = SingletonRepo_1.singletons.getHTMLManager();\r\n        stendhal.ui.touch = SingletonRepo_1.singletons.getTouchHandler();\r\n        stendhal.ui.soundMan = SingletonRepo_1.singletons.getSoundManager();\r\n        stendhal.ui.gamewindow = SingletonRepo_1.singletons.getViewPort();\r\n    }\r\n    initZone() {\r\n        stendhal.zone = new Zone_1.Zone();\r\n        stendhal.zone.ground = new Ground_1.Ground();\r\n    }\r\n    startup() {\r\n        this.devWarning();\r\n        // initialize configuration & session managers\r\n        const sparams = new URL(document.URL).searchParams;\r\n        stendhal.config.init(sparams);\r\n        stendhal.session.init(sparams);\r\n        // update user interface after config is loaded\r\n        stendhal.config.refreshTheme();\r\n        document.getElementById(\"body\").style.setProperty(\"font-family\", stendhal.config.get(\"ui.font.body\"));\r\n        // initialize events\r\n        SingletonRepo_1.singletons.getEventRegistry().init();\r\n        // initialize tileset animation data\r\n        SingletonRepo_1.singletons.getTileStore().init();\r\n        // initialize emoji data\r\n        SingletonRepo_1.singletons.getEmojiStore().init();\r\n        // initialize outfit data\r\n        stendhal.data.outfit.init();\r\n        new DesktopUserInterfaceFactory_1.DesktopUserInterfaceFactory().create();\r\n        Chat_1.Chat.log(\"client\", \"Client loaded. Connecting...\");\r\n        this.registerMarauroaEventHandlers();\r\n        this.registerBrowserEventHandlers();\r\n        let ws = Paths_1.Paths.ws.substring(1);\r\n        if (stendhal.session.isTestClient() && !stendhal.session.isServerDefault()) {\r\n            ws = ws.replace(/t/, \"s\");\r\n            // disclaimer for using the test client on the main server\r\n            Chat_1.Chat.log(\"warning\", \"WARNING: You are connecting to the production server with a development\"\r\n                + \" build of the test client which may contain bugs or not function as intented. Proceeed\"\r\n                + \" with caution.\");\r\n        }\r\n        marauroa.clientFramework.connect(null, null, ws);\r\n        stendhal.ui.actionContextMenu = new DialogHandler_1.DialogHandler();\r\n        stendhal.ui.globalInternalWindow = new DialogHandler_1.DialogHandler();\r\n        // pre-cache images & sounds\r\n        stendhal.data.sprites.startupCache();\r\n        SingletonRepo_1.singletons.getSoundManager().startupCache();\r\n        if (document.getElementById(\"gamewindow\")) {\r\n            stendhal.ui.gamewindow.draw.apply(stendhal.ui.gamewindow, arguments);\r\n            // initialize on-screen joystick\r\n            stendhal.ui.gamewindow.updateJoystick();\r\n        }\r\n        // attributes to set after connection made\r\n        if (stendhal.config.getBoolean(\"input.movecont\")) {\r\n            const socket = marauroa.clientFramework.socket;\r\n            let tries = 0;\r\n            function checkConnection() {\r\n                setTimeout(function () {\r\n                    tries++;\r\n                    if (socket.readyState === WebSocket.OPEN) {\r\n                        marauroa.clientFramework.sendAction({\r\n                            \"type\": \"move.continuous\",\r\n                            \"move.continuous\": \"\"\r\n                        });\r\n                        return;\r\n                    }\r\n                    if (tries > 5) {\r\n                        console.warn(\"could not set \\\"move.continuous\\\" attribute,\"\r\n                            + \" gave up after \" + tries + \" tries\");\r\n                        return;\r\n                    }\r\n                    checkConnection();\r\n                }, 3000);\r\n            }\r\n            checkConnection();\r\n        }\r\n    }\r\n    devWarning() {\r\n        console.log(\"%c \", \"padding: 30px; background: url(\" + window.location.protocol + \"://\" + window.location.host + \"/images/buttons/devtools-warning.png) no-repeat; color: #AF0\");\r\n        console.log(\"%cIf someone told you, to copy and paste something here, it's a scam and will give them access to your account.\", \"color:#A00; background-color:#FFF; font-size:150%\");\r\n        console.log(\"If you are a developer and curious about Stendhal, have a look at https://stendhalgame.org/development/introduction.html to get the source code. And perhaps, contribute a feature or a bugfix. \");\r\n        console.log(\" \");\r\n        console.log(\" \");\r\n        window[\"eval\"] = function () { };\r\n    }\r\n    onError(error) {\r\n        this.errorCounter++;\r\n        if (this.errorCounter > 5) {\r\n            console.log(\"Too many errors, stopped reporting\");\r\n            return;\r\n        }\r\n        var text = error.message + \"\\r\\n\";\r\n        text += error.filename + \":\" + error.lineno;\r\n        if (error.colno) {\r\n            text += \":\" + error.colno;\r\n        }\r\n        if (error.error) {\r\n            text += \"\\r\\n\" + error.error.stack;\r\n        }\r\n        text += \"\\r\\n\" + window.navigator.userAgent;\r\n        try {\r\n            console.log(text);\r\n            var action = {\r\n                \"type\": \"report_error\",\r\n                \"text\": text,\r\n            };\r\n            marauroa.clientFramework.sendAction(action);\r\n        }\r\n        catch (e) {\r\n            // ignore\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * register marauroa event handlers.\r\n     */\r\n    registerMarauroaEventHandlers() {\r\n        marauroa.clientFramework.onDisconnect = function (_reason, _error) {\r\n            if (!Client.instance.unloading) {\r\n                Chat_1.Chat.logH(\"error\", \"Disconnected from server.\");\r\n            }\r\n        };\r\n        marauroa.clientFramework.onLoginRequired = function (config) {\r\n            if (config[\"client_login_url\"]) {\r\n                Client.instance.unloading = true;\r\n                let currentUrl = encodeURI(window.location.pathname + window.location.hash);\r\n                let url = config[\"client_login_url\"].replace(\"[url]\", currentUrl);\r\n                window.location.href = url;\r\n                return;\r\n            }\r\n            let body = document.getElementById(\"body\");\r\n            body.style.cursor = \"auto\";\r\n            document.getElementById(\"loginpopup\").style.display = \"none\";\r\n            UI_1.ui.createSingletonFloatingWindow(\"Login\", new LoginDialog_1.LoginDialog(), 100, 50);\r\n        };\r\n        marauroa.clientFramework.onCreateAccountAck = function (username) {\r\n            // TODO: We should login automatically\r\n            alert(\"Account succesfully created, please login.\");\r\n            window.location.reload();\r\n        };\r\n        marauroa.clientFramework.onCreateCharacterAck = function (charname, _template) {\r\n            // Client.get().chooseCharacter(charname);\r\n        };\r\n        marauroa.clientFramework.onLoginFailed = function (_reason, _text) {\r\n            alert(\"Login failed. \" + _text);\r\n            // TODO: Server closes the connection, so we need to open a new one\r\n            window.location.reload();\r\n        };\r\n        marauroa.clientFramework.onAvailableCharacterDetails = function (characters) {\r\n            SingletonFloatingWindow_1.SingletonFloatingWindow.closeAll();\r\n            if (!Object.keys(characters).length && this.username) {\r\n                marauroa.clientFramework.createCharacter(this.username, {});\r\n                return;\r\n            }\r\n            if (window.location.hash) {\r\n                let name = window.location.hash.substring(1);\r\n                stendhal.session.setCharName(name);\r\n            }\r\n            let name = stendhal.session.getCharName();\r\n            if (name) {\r\n                Client.get().chooseCharacter(name);\r\n                return;\r\n            }\r\n            let body = document.getElementById(\"body\");\r\n            body.style.cursor = \"auto\";\r\n            document.getElementById(\"loginpopup\").style.display = \"none\";\r\n            UI_1.ui.createSingletonFloatingWindow(\"Choose Character\", new ChooseCharacterDialog_1.ChooseCharacterDialog(characters), 100, 50);\r\n        };\r\n        marauroa.clientFramework.onTransferREQ = function (items) {\r\n            for (var i in items) {\r\n                if (typeof (items[i][\"name\"]) == \"undefined\") {\r\n                    continue;\r\n                }\r\n                items[i][\"ack\"] = true;\r\n            }\r\n        };\r\n        marauroa.clientFramework.onTransfer = function (items) {\r\n            var data = {};\r\n            var zoneName = \"\";\r\n            for (var i in items) {\r\n                var name = items[i][\"name\"];\r\n                zoneName = name.substring(0, name.indexOf(\".\"));\r\n                name = name.substring(name.indexOf(\".\") + 1);\r\n                data[name] = items[i][\"data\"];\r\n                if (name === \"data_map\") {\r\n                    this.onDataMap(items[i][\"data\"]);\r\n                }\r\n            }\r\n            stendhal.data.map.onTransfer(zoneName, data);\r\n        };\r\n        // update user interface on perceptions\r\n        if (document.getElementById(\"gamewindow\")) {\r\n            // override perception listener\r\n            marauroa.perceptionListener = new PerceptionListener_1.PerceptionListener(marauroa.perceptionListener);\r\n            marauroa.perceptionListener.onPerceptionEnd = function (_type, _timestamp) {\r\n                stendhal.zone.sortEntities();\r\n                UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.MiniMap).draw();\r\n                UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.BuddyList).update();\r\n                stendhal.ui.equip.update();\r\n                UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.PlayerEquipment).update();\r\n                if (!this.loaded) {\r\n                    this.loaded = true;\r\n                    // delay visibile change of client a little to allow for initialisation in the background for a smoother experience\r\n                    setTimeout(function () {\r\n                        let body = document.getElementById(\"body\");\r\n                        body.style.cursor = \"auto\";\r\n                        document.getElementById(\"client\").style.display = \"block\";\r\n                        document.getElementById(\"loginpopup\").style.display = \"none\";\r\n                    }, 300);\r\n                }\r\n            };\r\n        }\r\n    }\r\n    chooseCharacter(name) {\r\n        stendhal.session.setCharName(name);\r\n        marauroa.clientFramework.chooseCharacter(name);\r\n        Chat_1.Chat.log(\"client\", \"Loading world...\");\r\n        // play login sound for this user\r\n        SingletonRepo_1.singletons.getSoundManager().playGlobalizedEffect(\"ui/login\");\r\n    }\r\n    onBeforeUnload() {\r\n        Client.instance.unloading = true;\r\n    }\r\n    /**\r\n     * registers global browser event handlers.\r\n     */\r\n    registerBrowserEventHandlers() {\r\n        const keyHandler = SingletonRepo_1.singletons.getKeyHandler();\r\n        document.addEventListener(\"keydown\", keyHandler.onKeyDown);\r\n        document.addEventListener(\"keyup\", keyHandler.onKeyUp);\r\n        document.addEventListener(\"contextmenu\", stendhal.main.preventContextMenu);\r\n        // handles closing the context menu\r\n        // FIXME: does not work for \"touchstart\" as it prevents actions on the context menu\r\n        document.addEventListener(\"mousedown\", function (e) {\r\n            if (stendhal.ui.actionContextMenu.isOpen()) {\r\n                stendhal.ui.actionContextMenu.close(true);\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            }\r\n        });\r\n        window.addEventListener(\"beforeunload\", () => {\r\n            this.onBeforeUnload();\r\n        });\r\n        document.getElementById(\"body\").addEventListener(\"mouseenter\", stendhal.main.onMouseEnter);\r\n        var gamewindow = document.getElementById(\"gamewindow\");\r\n        gamewindow.setAttribute(\"draggable\", \"true\");\r\n        gamewindow.addEventListener(\"mousedown\", stendhal.ui.gamewindow.onMouseDown);\r\n        gamewindow.addEventListener(\"dblclick\", stendhal.ui.gamewindow.onMouseDown);\r\n        gamewindow.addEventListener(\"dragstart\", stendhal.ui.gamewindow.onDragStart);\r\n        gamewindow.addEventListener(\"mousemove\", stendhal.ui.gamewindow.onMouseMove);\r\n        gamewindow.addEventListener(\"touchstart\", stendhal.ui.gamewindow.onMouseDown);\r\n        gamewindow.addEventListener(\"touchend\", stendhal.ui.gamewindow.onTouchEnd);\r\n        gamewindow.addEventListener(\"dragover\", stendhal.ui.gamewindow.onDragOver);\r\n        gamewindow.addEventListener(\"drop\", stendhal.ui.gamewindow.onDrop);\r\n        gamewindow.addEventListener(\"contextmenu\", stendhal.ui.gamewindow.onContentMenu);\r\n        gamewindow.addEventListener(\"wheel\", stendhal.ui.gamewindow.onMouseWheel);\r\n        // handle disengaging joystick when mouse button released outside joystick area\r\n        document.body.addEventListener(\"mouseup\", (e) => {\r\n            if (e.button == 0) {\r\n                stendhal.ui.gamewindow.joystick.reset();\r\n            }\r\n        });\r\n        var menubutton = document.getElementById(\"menubutton\");\r\n        menubutton.addEventListener(\"click\", () => {\r\n            const dialogState = stendhal.config.getWindowState(\"menu\");\r\n            const menuContent = new ApplicationMenuDialog_1.ApplicationMenuDialog();\r\n            const menuFrame = UI_1.ui.createSingletonFloatingWindow(\"Menu\", menuContent, dialogState.x, dialogState.y);\r\n            menuFrame.setId(\"menu\");\r\n            menuContent.setFrame(menuFrame);\r\n        });\r\n        var soundbutton = document.getElementById(\"soundbutton\");\r\n        soundbutton.addEventListener(\"click\", stendhal.main.toggleSound);\r\n        // update button state\r\n        this.onSoundToggled();\r\n        // click/touch indicator\r\n        // TODO:\r\n        //   - animate\r\n        //   - would work better if displayed upon mousedown/touchstart then position updated & timer\r\n        //     started upon release\r\n        const click_indicator = document.getElementById(\"click-indicator\");\r\n        click_indicator.onload = () => {\r\n            click_indicator.onload = null;\r\n            // FIXME: some event handlers cancel propagation\r\n            document.addEventListener(\"click\", Client.handleClickIndicator);\r\n            document.addEventListener(\"touchend\", Client.handleClickIndicator);\r\n        };\r\n        click_indicator.src = stendhal.paths.gui + \"/click_indicator.png\";\r\n    }\r\n    toggleSound() {\r\n        stendhal.config.set(\"ui.sound\", !stendhal.config.getBoolean(\"ui.sound\"));\r\n        this.onSoundToggled();\r\n    }\r\n    onSoundToggled() {\r\n        const soundMan = SingletonRepo_1.singletons.getSoundManager();\r\n        var soundbutton = document.getElementById(\"soundbutton\");\r\n        if (stendhal.config.getBoolean(\"ui.sound\")) {\r\n            soundbutton.textContent = \"\ud83d\udd0a\";\r\n            if (!soundMan.unmuteAll()) {\r\n                let errmsg = \"Failed to unmute sounds:\";\r\n                for (const snd of soundMan.getActive()) {\r\n                    if (snd && snd.src && snd.muted) {\r\n                        errmsg += \"\\n- \" + snd.src;\r\n                    }\r\n                }\r\n                console.warn(errmsg);\r\n            }\r\n        }\r\n        else {\r\n            soundbutton.textContent = \"\ud83d\udd07\";\r\n            if (!soundMan.muteAll()) {\r\n                let errmsg = \"Failed to mute sounds:\";\r\n                for (const snd of soundMan.getActive()) {\r\n                    if (snd && snd.src && !snd.muted) {\r\n                        errmsg += \"\\n- \" + snd.src;\r\n                    }\r\n                }\r\n                console.warn(errmsg);\r\n            }\r\n        }\r\n    }\r\n    onDataMap(data) {\r\n        var zoneinfo = {};\r\n        var deserializer = marauroa.Deserializer.fromBase64(data);\r\n        deserializer.readAttributes(zoneinfo);\r\n        UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.ZoneInfo).zoneChange(zoneinfo);\r\n        // Object { file: \"Level 0/semos/city_easter.tmx\", danger_level: \"0.036429932929822995\", zoneid: \"\", readable_name: \"Semos city\", id: \"-1\", color_method: \"multiply\" }\r\n        SingletonRepo_1.singletons.getWeatherRenderer().update(zoneinfo[\"weather\"]);\r\n    }\r\n    preventContextMenu(e) {\r\n        e.preventDefault();\r\n    }\r\n    onMouseEnter(e) {\r\n        // use Stendhal's built-in cursor for entire page\r\n        e.target.style.cursor = \"url(\" + stendhal.paths.sprites + \"/cursor/normal.png) 1 3, auto\";\r\n    }\r\n    static handleClickIndicator(e) {\r\n        if (!stendhal.config.getBoolean(\"input.click.indicator\")) {\r\n            return;\r\n        }\r\n        if (Client.click_indicator_id !== undefined) {\r\n            clearTimeout(Client.click_indicator_id);\r\n            Client.click_indicator_id = undefined;\r\n        }\r\n        const pos = stendhal.data.html.extractPosition(e);\r\n        const click_indicator = document.getElementById(\"click-indicator\");\r\n        click_indicator.style[\"left\"] = (pos.pageX - (click_indicator.width / 2)) + \"px\";\r\n        click_indicator.style[\"top\"] = (pos.pageY - (click_indicator.height / 2)) + \"px\";\r\n        click_indicator.style[\"display\"] = \"inline\";\r\n        Client.click_indicator_id = setTimeout(function () {\r\n            click_indicator.style[\"display\"] = \"none\";\r\n        }, 300);\r\n    }\r\n}\r\nexports.Client = Client;\r\nClient.click_indicator_id = undefined;\r\n//# sourceMappingURL=Client.js.map","/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\n\r\n\"use strict\";\r\n\r\nvar marauroa = window.marauroa = window.marauroa || {};\r\nvar stendhal = window.stendhal = window.stendhal || {};\r\n\r\n\r\nstendhal.main = require(\"../../build/ts/Client\").Client.get();\r\nstendhal.main.init();\r\n\r\ndocument.addEventListener('DOMContentLoaded', stendhal.main.startup);\r\nwindow.addEventListener('error', stendhal.main.onerror);\r\n","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MenuItem = void 0;\r\nclass MenuItem {\r\n}\r\nexports.MenuItem = MenuItem;\r\n//# sourceMappingURL=MenuItem.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2023-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=ImageWithDimensions.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Blood = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass Blood extends Entity_1.Entity {\r\n    constructor() {\r\n        super();\r\n        this.minimapShow = false;\r\n        this.zIndex = 2000;\r\n        this.sprite = {\r\n            height: 32,\r\n            width: 32,\r\n            filename: stendhal.paths.sprites + \"/combat/blood_red.png\"\r\n        };\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"amount\") {\r\n            this.sprite.offsetY = parseInt(value, 10) * 32;\r\n        }\r\n        else if (key === \"class\") {\r\n            this.sprite.filename = stendhal.paths.sprites + \"/combat/blood_\" + value + \".png\";\r\n        }\r\n    }\r\n    getCursor(x, y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/walk.png) 1 3, auto\";\r\n    }\r\n    drawSpriteAt(ctx, x, y) {\r\n        if (!stendhal.config.getBoolean(\"gamescreen.blood\")) {\r\n            return;\r\n        }\r\n        super.drawSpriteAt(ctx, x, y);\r\n    }\r\n}\r\nexports.Blood = Blood;\r\n//# sourceMappingURL=Blood.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PopupInventory = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass PopupInventory extends Entity_1.Entity {\r\n    draw(ctx) {\r\n        super.draw(ctx);\r\n        if (this.inventory && this.inventory.isOpen()) {\r\n            this.checkPlayerDistance(5);\r\n        }\r\n    }\r\n    /**\r\n     * Closes floating window if player is not within range.\r\n     *\r\n     * @param distToClose\r\n     *     If player is standing at least this distance away\r\n     *     the window will be closed.\r\n     */\r\n    checkPlayerDistance(distToClose) {\r\n        if (marauroa.me) {\r\n            const dist = this.getDistanceTo(marauroa.me);\r\n            if (dist >= distToClose || dist < 0) {\r\n                this.closeInventoryWindow();\r\n            }\r\n        }\r\n    }\r\n    closeInventoryWindow() {\r\n        // inheriting classes can override\r\n    }\r\n    destroy(_parent) {\r\n        this.closeInventoryWindow();\r\n        super.destroy(_parent);\r\n    }\r\n}\r\nexports.PopupInventory = PopupInventory;\r\n//# sourceMappingURL=PopupInventory.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Chest = void 0;\r\nconst FloatingWindow_1 = require(\"../ui/toolkit/FloatingWindow\");\r\nconst ItemInventoryComponent_1 = require(\"../ui/component/ItemInventoryComponent\");\r\nconst PopupInventory_1 = require(\"./PopupInventory\");\r\nconst Color_1 = require(\"../util/Color\");\r\nlet OPEN_SPRITE = {\r\n    filename: stendhal.paths.sprites + \"/chest.png\",\r\n    height: 32,\r\n    width: 32,\r\n    offsetY: 32\r\n};\r\nlet CLOSED_SPRITE = {\r\n    filename: stendhal.paths.sprites + \"/chest.png\",\r\n    height: 32,\r\n    width: 32\r\n};\r\nclass Chest extends PopupInventory_1.PopupInventory {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.minimapShow = true;\r\n        this.minimapStyle = Color_1.Color.CHEST;\r\n        this.zIndex = 5000;\r\n        this.sprite = CLOSED_SPRITE;\r\n        this.open = false;\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"open\") {\r\n            this.sprite = OPEN_SPRITE;\r\n            this.open = true;\r\n        }\r\n        if (this.isNextTo(marauroa.me)) {\r\n            this.openInventoryWindow();\r\n        }\r\n    }\r\n    unset(key) {\r\n        super.unset(key);\r\n        if (key === \"open\") {\r\n            this.sprite = CLOSED_SPRITE;\r\n            this.open = false;\r\n            if (this.inventory && this.inventory.isOpen()) {\r\n                this.inventory.close();\r\n                this.inventory = undefined;\r\n            }\r\n        }\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    onclick(_x, _y) {\r\n        if (marauroa.me.isNextTo(this)) {\r\n            // If we are next to the chest, open or close it.\r\n            var action = {\r\n                \"type\": \"use\",\r\n                \"target\": \"#\" + this[\"id\"],\r\n                \"zone\": marauroa.currentZoneName\r\n            };\r\n            marauroa.clientFramework.sendAction(action);\r\n        }\r\n        else {\r\n            // We are far away, but if the chest is open, we can take a look\r\n            if (this.open) {\r\n                this.openInventoryWindow();\r\n            }\r\n        }\r\n    }\r\n    openInventoryWindow() {\r\n        if (!this.inventory || !this.inventory.isOpen()) {\r\n            const invComponent = new ItemInventoryComponent_1.ItemInventoryComponent(this, \"content\", 5, 6, stendhal.config.getBoolean(\"action.inventory.quickpickup\"), undefined);\r\n            // TODO: remove, deprecated\r\n            invComponent.setConfigId(\"chest\");\r\n            const dstate = stendhal.config.getWindowState(\"chest\");\r\n            this.inventory = new FloatingWindow_1.FloatingWindow(\"Chest\", invComponent, dstate.x, dstate.y);\r\n            this.inventory.setId(\"chest\");\r\n        }\r\n    }\r\n    closeInventoryWindow() {\r\n        if (this.inventory && this.inventory.isOpen()) {\r\n            this.inventory.close();\r\n            this.inventory = undefined;\r\n        }\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/bag.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.Chest = Chest;\r\n//# sourceMappingURL=Chest.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Corpse = void 0;\r\nconst ItemInventoryComponent_1 = require(\"../ui/component/ItemInventoryComponent\");\r\nconst FloatingWindow_1 = require(\"../ui/toolkit/FloatingWindow\");\r\nconst PopupInventory_1 = require(\"./PopupInventory\");\r\nclass Corpse extends PopupInventory_1.PopupInventory {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.minimapShow = false;\r\n        this.zIndex = 5500;\r\n        this.autoOpenedAlready = false;\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        this.sprite = this.sprite || {};\r\n        const bloodEnabled = stendhal.config.getBoolean(\"gamescreen.blood\");\r\n        if (bloodEnabled && (key === \"image\")) {\r\n            this.sprite.filename = stendhal.paths.sprites + \"/corpse/\" + value + \".png\";\r\n        }\r\n        else if (!bloodEnabled && (key === \"harmless_image\")) {\r\n            this.sprite.filename = stendhal.paths.sprites + \"/corpse/\" + value + \".png\";\r\n        }\r\n    }\r\n    createSlot(name) {\r\n        var slot = marauroa.util.fromProto(marauroa.rpslotFactory[\"_default\"], {\r\n            add: function (object) {\r\n                marauroa.rpslotFactory[\"_default\"].add.apply(this, arguments);\r\n                if (this._objects.length > 0) {\r\n                    this._parent.autoOpenIfDesired();\r\n                }\r\n            },\r\n            del: function (key) {\r\n                marauroa.rpslotFactory[\"_default\"].del.apply(this, arguments);\r\n                if (this._objects.length == 0) {\r\n                    this._parent.closeCorpseInventory();\r\n                }\r\n            }\r\n        });\r\n        slot._name = name;\r\n        slot._objects = [];\r\n        slot._parent = this;\r\n        return slot;\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    closeCorpseInventory() {\r\n        if (this.inventory && this.inventory.isOpen()) {\r\n            this.inventory.close();\r\n            this.inventory = undefined;\r\n        }\r\n    }\r\n    openCorpseInventory() {\r\n        if (!this.inventory || !this.inventory.isOpen()) {\r\n            let content_row = 2;\r\n            const content_col = 2;\r\n            if (this[\"content\"]) {\r\n                if (this[\"content\"]._objects.length > 4) {\r\n                    content_row = 3;\r\n                }\r\n            }\r\n            const invComponent = new ItemInventoryComponent_1.ItemInventoryComponent(this, \"content\", content_row, content_col, stendhal.config.getBoolean(\"action.inventory.quickpickup\"), undefined);\r\n            // TODO: remove, deprecated\r\n            invComponent.setConfigId(\"corpse\");\r\n            const dstate = stendhal.config.getWindowState(\"corpse\");\r\n            this.inventory = new FloatingWindow_1.FloatingWindow(\"Corpse\", invComponent, dstate.x, dstate.y);\r\n            this.inventory.setId(\"corpse\");\r\n        }\r\n    }\r\n    autoOpenIfDesired() {\r\n        if (!this.autoOpenedAlready) {\r\n            this.autoOpenedAlready = true;\r\n            if (marauroa.me && (this[\"corpse_owner\"] == marauroa.me[\"_name\"])) {\r\n                // TODO: for unknown reason, /data/sprites/items/undefined/undefined.png is requested without this delay\r\n                var that = this;\r\n                window.setTimeout(function () {\r\n                    that.openCorpseInventory();\r\n                }, 1);\r\n            }\r\n        }\r\n    }\r\n    closeInventoryWindow() {\r\n        this.closeCorpseInventory();\r\n    }\r\n    onclick(_x, _y) {\r\n        this.openCorpseInventory();\r\n    }\r\n    getCursor(_x, _y) {\r\n        if (!this[\"content\"] || this[\"content\"]._objects.length === 0) {\r\n            return \"url(\" + stendhal.paths.sprites + \"/cursor/emptybag.png) 1 3, auto\";\r\n        }\r\n        // owner\r\n        if (!this[\"corpse_owner\"] || (this[\"corpse_owner\"] == marauroa.me[\"_name\"])) {\r\n            return \"url(\" + stendhal.paths.sprites + \"/cursor/bag.png) 1 3, auto\";\r\n        }\r\n        if ((stendhal.data.group.lootmode === \"shared\") && (stendhal.data.group.members[this[\"corpse_owner\"]])) {\r\n            return \"url(\" + stendhal.paths.sprites + \"/cursor/bag.png) 1 3, auto\";\r\n        }\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/lockedbag.png) 1 3, auto\";\r\n    }\r\n    isDraggable() {\r\n        return true;\r\n    }\r\n}\r\nexports.Corpse = Corpse;\r\n//# sourceMappingURL=Corpse.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Creature = void 0;\r\nconst RPEntity_1 = require(\"./RPEntity\");\r\nconst Color_1 = require(\"../util/Color\");\r\nclass Creature extends RPEntity_1.RPEntity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.minimapStyle = Color_1.Color.CREATURE;\r\n        this.spritePath = \"monsters\";\r\n        this.titleStyle = \"#ffc8c8\";\r\n    }\r\n    onclick(_x, _y) {\r\n        var action = {\r\n            \"type\": \"attack\",\r\n            \"target\": \"#\" + this[\"id\"]\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    // Overrides the one in creature\r\n    say(text) {\r\n        if (stendhal.config.getBoolean(\"gamescreen.speech.creature\")) {\r\n            this.addSpeechBubble(text);\r\n        }\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/attack.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.Creature = Creature;\r\n//# sourceMappingURL=Creature.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DomesticAnimal = void 0;\r\nconst RPEntity_1 = require(\"./RPEntity\");\r\nconst Color_1 = require(\"../util/Color\");\r\nclass DomesticAnimal extends RPEntity_1.RPEntity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.minimapStyle = Color_1.Color.DOMESTICANIMAL;\r\n    }\r\n    drawMain(ctx) {\r\n        if (!this.imagePath && this[\"_rpclass\"]) {\r\n            this[\"largeWeight\"] = this[\"largeWeight\"] | 20;\r\n            if (this[\"_rpclass\"] == \"sheep\") {\r\n                this[\"largeWeight\"] = 60;\r\n            }\r\n            this.imagePath = stendhal.paths.sprites + \"/\" + this[\"_rpclass\"] + \".png\";\r\n        }\r\n        var localX = this[\"_x\"] * 32;\r\n        var localY = this[\"_y\"] * 32;\r\n        var image = stendhal.data.sprites.get(this.imagePath);\r\n        if (image.height) {\r\n            var nFrames = 3;\r\n            var nDirections = 4;\r\n            var yRow = this[\"dir\"] - 1;\r\n            if (this[\"weight\"] >= this[\"largeWeight\"]) {\r\n                yRow += 4;\r\n            }\r\n            this[\"drawHeight\"] = image.height / nDirections / 2;\r\n            this[\"drawWidth\"] = image.width / nFrames;\r\n            var drawX = ((this[\"width\"] * 32) - this[\"drawWidth\"]) / 2;\r\n            var frame = 0;\r\n            if (this[\"speed\"] > 0) {\r\n                // % Works normally with *floats* (just whose bright idea was\r\n                // that?), so use floor() as a workaround\r\n                frame = Math.floor(Date.now() / 100) % nFrames;\r\n            }\r\n            var drawY = (this[\"height\"] * 32) - this[\"drawHeight\"];\r\n            ctx.drawImage(image, frame * this[\"drawWidth\"], yRow * this[\"drawHeight\"], this[\"drawWidth\"], this[\"drawHeight\"], localX + drawX, localY + drawY, this[\"drawWidth\"], this[\"drawHeight\"]);\r\n        }\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/look.png) 1 3, auto\";\r\n    }\r\n    buildActions(list) {\r\n        let species = \"pet\";\r\n        if (this[\"_rpclass\"] === \"sheep\") {\r\n            species = \"sheep\";\r\n        }\r\n        let playerOwned = marauroa.me[species];\r\n        if (!playerOwned) {\r\n            list.push({\r\n                title: \"Own\",\r\n                action: function (_entity) {\r\n                    let action = {\r\n                        \"type\": \"own\",\r\n                        \"zone\": marauroa.currentZoneName,\r\n                        \"target\": \"#\" + _entity[\"id\"]\r\n                    };\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n        }\r\n        if (playerOwned === this[\"id\"]) {\r\n            list.push({\r\n                title: \"Leave\",\r\n                action: function (_entity) {\r\n                    let action = {\r\n                        \"type\": \"forsake\",\r\n                        \"zone\": marauroa.currentZoneName,\r\n                        \"species\": species,\r\n                        \"target\": \"#\" + _entity[\"id\"]\r\n                    };\r\n                    marauroa.clientFramework.sendAction(action);\r\n                }\r\n            });\r\n        }\r\n        super.buildActions(list);\r\n    }\r\n}\r\nexports.DomesticAnimal = DomesticAnimal;\r\n//# sourceMappingURL=DomesticAnimal.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Portal = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nconst Color_1 = require(\"../util/Color\");\r\nclass Portal extends Entity_1.Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.minimapShow = true;\r\n        this.minimapStyle = Color_1.Color.BLACK;\r\n        this.zIndex = 5000;\r\n    }\r\n    buildActions(list) {\r\n        super.buildActions(list);\r\n        if (this[\"_rpclass\"] == \"house_portal\") {\r\n            list.push({\r\n                title: \"Use\",\r\n                type: \"use\"\r\n            });\r\n            list.push({\r\n                title: \"Knock\",\r\n                type: \"knock\"\r\n            });\r\n        }\r\n        else {\r\n            // remove default action \"look\" unless it is a house portal\r\n            list.splice(list.indexOf({ title: \"Look\", type: \"look\" }), 1);\r\n            list.push({\r\n                title: \"Use\",\r\n                type: \"use\"\r\n            });\r\n        }\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    /**\r\n     * Create the default action for this entity. If the entity specifies a\r\n     * default action description, interpret it as an action command.\r\n     */\r\n    getDefaultAction() {\r\n        return {\r\n            \"type\": \"moveto\",\r\n            \"x\": \"\" + this[\"x\"],\r\n            \"y\": \"\" + this[\"y\"],\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/portal.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.Portal = Portal;\r\n//# sourceMappingURL=Portal.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Door = void 0;\r\nconst Portal_1 = require(\"./Portal\");\r\nclass Door extends Portal_1.Portal {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.zIndex = 5000;\r\n    }\r\n    draw(ctx) {\r\n        let imagePath = stendhal.paths.sprites + \"/doors/\" + this[\"class\"] + \".png\";\r\n        let image = stendhal.data.sprites.get(imagePath);\r\n        if (image.height) {\r\n            let x = (this[\"x\"] - 1) * 32;\r\n            let y = (this[\"y\"] - 1) * 32;\r\n            let height = image.height / 2;\r\n            var offsetY = height;\r\n            if (this[\"open\"] === \"\") {\r\n                offsetY = 0;\r\n            }\r\n            ctx.drawImage(image, 0, offsetY, image.width, height, x, y, image.width, height);\r\n        }\r\n    }\r\n    buildActions(list) {\r\n        list.push({\r\n            title: \"Look\",\r\n            type: \"look\"\r\n        });\r\n        list.push({\r\n            title: \"Use\",\r\n            type: \"use\"\r\n        });\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    /**\r\n     * Create the default action for this entity. If the entity specifies a\r\n     * default action description, interpret it as an action command.\r\n     */\r\n    getDefaultAction() {\r\n        return {\r\n            \"type\": \"moveto\",\r\n            \"x\": \"\" + this[\"x\"],\r\n            \"y\": \"\" + this[\"y\"],\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/portal.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.Door = Door;\r\n//# sourceMappingURL=Door.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Food = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass Food extends Entity_1.Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.zIndex = 5000;\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"amount\") {\r\n            this._amount = parseInt(value, 10);\r\n        }\r\n        // TODO: play sound effect\r\n    }\r\n    draw(ctx) {\r\n        var image = stendhal.data.sprites.get(stendhal.paths.sprites + \"/food.png\");\r\n        if (image.height) {\r\n            var localX = this[\"x\"] * 32;\r\n            var localY = this[\"y\"] * 32;\r\n            var offset = this._amount * 32;\r\n            ctx.drawImage(image, 0, offset, 32, 32, localX, localY, 32, 32);\r\n        }\r\n    }\r\n    onclick(_x, _y) {\r\n        var action = {\r\n            \"type\": \"look\",\r\n            \"target\": \"#\" + this[\"id\"]\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/look.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.Food = Food;\r\n//# sourceMappingURL=Food.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GameBoard = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass GameBoard extends Entity_1.Entity {\r\n    constructor() {\r\n        super();\r\n        this.minimapShow = false;\r\n        this.zIndex = 100;\r\n        this.sprite = {\r\n            height: 32 * 3,\r\n            width: 32 * 3\r\n        };\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"class\") {\r\n            this.sprite.filename = stendhal.paths.sprites + \"/gameboard/\"\r\n                + this[\"class\"] + \".png\";\r\n        }\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return false;\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/walk.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.GameBoard = GameBoard;\r\n//# sourceMappingURL=GameBoard.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Gate = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass Gate extends Entity_1.Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.zIndex = 5000;\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"resistance\") {\r\n            this[\"locked\"] = parseInt(value, 10) !== 0;\r\n        }\r\n        else if (key === \"image\" || key === \"orientation\") {\r\n            // Force re-evaluation of the sprite\r\n            delete this[\"_image\"];\r\n        }\r\n    }\r\n    buildActions(list) {\r\n        var id = this[\"id\"];\r\n        list.push({\r\n            title: (this[\"locked\"]) ? \"Open\" : \"Close\",\r\n            action: function (_entity) {\r\n                var action = {\r\n                    \"type\": \"use\",\r\n                    \"target\": \"#\" + id,\r\n                    \"zone\": marauroa.currentZoneName,\r\n                };\r\n                marauroa.clientFramework.sendAction(action);\r\n            }\r\n        });\r\n    }\r\n    draw(ctx) {\r\n        if (this._image == undefined) {\r\n            var filename = stendhal.paths.sprites + \"/doors/\" + this[\"image\"] + \"_\" + this[\"orientation\"] + \".png\";\r\n            this._image = stendhal.data.sprites.get(filename);\r\n        }\r\n        if (this._image.height) {\r\n            var xOffset = -32 * Math.floor(this._image.width / 32 / 2);\r\n            var height = this._image.height / 2;\r\n            var yOffset = -32 * Math.floor(height / 32 / 2);\r\n            var localX = this[\"_x\"] * 32 + xOffset;\r\n            var localY = this[\"_y\"] * 32 + yOffset;\r\n            var yStart = (this[\"locked\"]) ? height : 0;\r\n            ctx.drawImage(this._image, 0, yStart, this._image.width, height, localX, localY, this._image.width, height);\r\n        }\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    onclick(_x, _y) {\r\n        var action = {\r\n            \"type\": \"use\",\r\n            \"target\": \"#\" + this[\"id\"],\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/activity.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.Gate = Gate;\r\n//# sourceMappingURL=Gate.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.GrowingEntitySpawner = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass GrowingEntitySpawner extends Entity_1.Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.zIndex = 3000;\r\n    }\r\n    /**\r\n     * is this entity visible to a specific action\r\n     *\r\n     * @param filter 0: short left click\r\n     * @return true, if the entity is visible, false otherwise\r\n     */\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    buildActions(list) {\r\n        if (!this[\"menu\"]) {\r\n            list.push({\r\n                title: \"Harvest\",\r\n                type: \"use\",\r\n            });\r\n        }\r\n        super.buildActions(list);\r\n    }\r\n    onclick(_x, _y) {\r\n        var action = {\r\n            \"type\": \"use\",\r\n            \"target\": \"#\" + this[\"id\"],\r\n            \"zone\": marauroa.currentZoneName\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    /**\r\n     * draw RPEntities\r\n     */\r\n    draw(ctx) {\r\n        var localX = this[\"x\"] * 32;\r\n        var localY = this[\"y\"] * 32;\r\n        // FIXME:\r\n        //   temporary fix, problem lies higher up\r\n        //   appears to only affect button_mushroom_grower\r\n        //   could be issue in marauroa\r\n        let class_name = this[\"class\"];\r\n        if (class_name.includes(\" \")) {\r\n            class_name = class_name.replace(\" \", \"_\");\r\n        }\r\n        var image = stendhal.data.sprites.get(stendhal.paths.sprites + \"/\" + class_name + \".png\");\r\n        if (image.height) { // image.complete is true on missing image files\r\n            var count = parseInt(this[\"max_ripeness\"], 10) + 1;\r\n            var drawHeight = image.height / count;\r\n            var yRow = this[\"ripeness\"];\r\n            ctx.drawImage(image, 0, yRow * drawHeight, image.width, drawHeight, localX, localY - drawHeight + 32, image.width, drawHeight);\r\n        }\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/harvest.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.GrowingEntitySpawner = GrowingEntitySpawner;\r\n//# sourceMappingURL=GrowingEntitySpawner.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.NPC = void 0;\r\nconst RPEntity_1 = require(\"./RPEntity\");\r\nconst Color_1 = require(\"../util/Color\");\r\nclass NPC extends RPEntity_1.RPEntity {\r\n    constructor() {\r\n        super();\r\n        this.minimapStyle = Color_1.Color.NPC;\r\n        this.spritePath = \"npc\";\r\n        this.titleStyle = \"#c8c8ff\";\r\n        this[\"hp\"] = 100;\r\n        this[\"base_hp\"] = 100;\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"name\" && value.startsWith(\"Zekiel\")) {\r\n            // Zekiel uses transparentnpc sprite but he is taller\r\n            this.titleDrawYOffset = -32;\r\n        }\r\n    }\r\n    drawTop(ctx) {\r\n        var localX = this[\"_x\"] * 32;\r\n        var localY = this[\"_y\"] * 32;\r\n        if (typeof (this[\"no_hpbar\"]) == \"undefined\") {\r\n            this.drawHealthBar(ctx, localX, localY + this.statusBarYOffset);\r\n        }\r\n        if (typeof (this[\"unnamed\"]) == \"undefined\") {\r\n            this.drawTitle(ctx, localX, localY + this.statusBarYOffset);\r\n        }\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/look.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.NPC = NPC;\r\n//# sourceMappingURL=NPC.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Sign = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass Sign extends Entity_1.Entity {\r\n    constructor() {\r\n        super();\r\n        this.zIndex = 5000;\r\n        this[\"class\"] = \"default\";\r\n    }\r\n    draw(ctx) {\r\n        if (!this.imagePath) {\r\n            this.imagePath = stendhal.paths.sprites + \"/signs/\" + this[\"class\"] + \".png\";\r\n        }\r\n        var image = stendhal.data.sprites.get(this.imagePath);\r\n        if (image.height) {\r\n            var localX = this[\"x\"] * 32;\r\n            var localY = this[\"y\"] * 32;\r\n            ctx.drawImage(image, localX, localY);\r\n        }\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/look.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.Sign = Sign;\r\n//# sourceMappingURL=Sign.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TrainingDummy = void 0;\r\nconst NPC_1 = require(\"./NPC\");\r\nclass TrainingDummy extends NPC_1.NPC {\r\n    /**\r\n     * Default action when clicked.\r\n     */\r\n    onclick(_x, _y) {\r\n        var action = {\r\n            \"type\": \"attack\",\r\n            \"target\": \"#\" + this[\"id\"]\r\n        };\r\n        marauroa.clientFramework.sendAction(action);\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/attack.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.TrainingDummy = TrainingDummy;\r\n//# sourceMappingURL=TrainingDummy.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UnknownEntity = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass UnknownEntity extends Entity_1.Entity {\r\n    constructor() {\r\n        super();\r\n        this.zIndex = 1;\r\n        setTimeout(() => {\r\n            if (this[\"_rpclass\"]) {\r\n                console.log(\"Unknown entity\", this[\"_rpclass\"], \"at\", marauroa.currentZoneName, this[\"x\"], this[\"y\"], \"is\", this);\r\n            }\r\n        }, 1);\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return (marauroa.me[\"adminlevel\"] && marauroa.me[\"adminlevel\"] >= 600);\r\n    }\r\n}\r\nexports.UnknownEntity = UnknownEntity;\r\n//# sourceMappingURL=UnknownEntity.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UseableEntity = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass UseableEntity extends Entity_1.Entity {\r\n    constructor() {\r\n        super();\r\n        this.zIndex = 3000;\r\n        this.action = \"use\";\r\n        this.sprite = {\r\n            height: 32,\r\n            width: 32\r\n        };\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"class\" || key === \"name\") {\r\n            this.sprite.filename = stendhal.paths.sprites + \"/\"\r\n                + this[\"class\"] + \"/\" + this[\"_name\"] + \".png\";\r\n        }\r\n        if (key === \"state\") {\r\n            this.sprite.offsetY = this[\"state\"] * 32;\r\n        }\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n}\r\nexports.UseableEntity = UseableEntity;\r\n//# sourceMappingURL=UseableEntity.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutfitPartSelector = void 0;\r\nclass OutfitPartSelector {\r\n    constructor(part, initialIndex, maxindex, onPartChanged) {\r\n        this._part = part;\r\n        this._onPartChanged = onPartChanged;\r\n        this._index = parseInt(initialIndex, 10);\r\n        this._maxindex = maxindex;\r\n        const canvas = document.getElementById('setoutfit' + part + 'canvas');\r\n        canvas.style.margin = \"5px\";\r\n        this._ctx = canvas.getContext(\"2d\");\r\n        this._width = canvas.width;\r\n        this._height = canvas.height;\r\n        this._color = undefined;\r\n        this._image = undefined;\r\n    }\r\n    indexString(index) {\r\n        if (index > -1 && index < 100) {\r\n            if (index < 10) {\r\n                return \"00\" + index;\r\n            }\r\n            else {\r\n                return \"0\" + index;\r\n            }\r\n        }\r\n        return \"\" + index;\r\n    }\r\n    draw() {\r\n        const image = this._getPartSprite(this._part, this._index, this._color);\r\n        this._image = image;\r\n        this._ctx.fillStyle = \"white\";\r\n        this._ctx.fillRect(0, 0, this._width, this._height);\r\n        image.then((img) => {\r\n            this._ctx.drawImage(img, -48, -128);\r\n            this._onPartChanged();\r\n        });\r\n    }\r\n    get image() {\r\n        return this._image;\r\n    }\r\n    get index() {\r\n        return this.indexString(this._index);\r\n    }\r\n    set index(newIndex) {\r\n        this._index = parseInt(newIndex, 10);\r\n        this.draw();\r\n    }\r\n    set color(newColor) {\r\n        this._color = newColor;\r\n        this.draw();\r\n    }\r\n    previous() {\r\n        const numOutfits = this._maxindex + 1;\r\n        this._index += this._maxindex;\r\n        this._index %= numOutfits;\r\n        this.draw();\r\n        this._onPartChanged();\r\n    }\r\n    next() {\r\n        const numOutfits = this._maxindex + 1;\r\n        this._index++;\r\n        this._index %= numOutfits;\r\n        this.draw();\r\n        this._onPartChanged();\r\n    }\r\n    _getPartSprite(part, index, color = null) {\r\n        let suffix = \".png\";\r\n        if (this._part === \"body\" && stendhal.config.getBoolean(\"gamescreen.nonude\")) {\r\n            suffix = \"-nonude.png\";\r\n        }\r\n        // FIXME: need to draw \"busty\" dress variants for body index 1\r\n        const fname = stendhal.paths.sprites + \"/outfit/\" + part + \"/\" + this.indexString(index) + suffix;\r\n        if (color != null) {\r\n            return stendhal.data.sprites.getFilteredWithPromise(fname, \"trueColor\", color);\r\n        }\r\n        return stendhal.data.sprites.getWithPromise(fname);\r\n    }\r\n}\r\nexports.OutfitPartSelector = OutfitPartSelector;\r\n//# sourceMappingURL=OutfitPartSelector.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutfitColorSelector = void 0;\r\nclass OutfitColorSelector {\r\n    constructor(canvas, gradientCanvas, onColorChanged) {\r\n        this.ctx = canvas.getContext(\"2d\");\r\n        this.gradCtx = gradientCanvas.getContext(\"2d\");\r\n        this.baseImage = this._createBaseImage(canvas.width, canvas.height);\r\n        this.onColorChanged = onColorChanged;\r\n        this._enabled = false;\r\n        this._x = this.baseImage.width / 2;\r\n        this._y = this.baseImage.height / 2;\r\n        this.hX = this._x;\r\n        canvas.addEventListener(\"mousedown\", (e) => this._onMouseDown(e));\r\n        canvas.addEventListener(\"mousemove\", (e) => this._onMouseMove(e));\r\n        gradientCanvas.addEventListener(\"mousedown\", (e) => this._onMouseDownGrad(e));\r\n        gradientCanvas.addEventListener(\"mousemove\", (e) => this._onMouseMoveGrad(e));\r\n        gradientCanvas.style.margin = \"5px 0px 0px 0px\";\r\n    }\r\n    set enabled(value) {\r\n        this._enabled = value ? true : false;\r\n        this.draw();\r\n        this.onColorChanged(this.color);\r\n    }\r\n    get enabled() {\r\n        return this._enabled;\r\n    }\r\n    get color() {\r\n        if (this.enabled) {\r\n            const hsl = [this._x / this.baseImage.width, 1 - this._y / this.baseImage.height,\r\n                this.hX / this.baseImage.width];\r\n            const rgbArray = stendhal.data.sprites.filter.hsl2rgb(hsl);\r\n            return stendhal.data.sprites.filter.mergergb(rgbArray);\r\n        }\r\n        return null;\r\n    }\r\n    set color(rgb) {\r\n        if (rgb != null) {\r\n            const hsl = stendhal.data.sprites.filter.rgb2hsl(stendhal.data.sprites.filter.splitrgb(rgb));\r\n            this._x = hsl[0] * this.baseImage.width;\r\n            this._y = (1 - hsl[1]) * this.baseImage.height;\r\n            this.hX = hsl[2] * this.baseImage.width;\r\n            this.enabled = true;\r\n        }\r\n        else {\r\n            this.enabled = false;\r\n        }\r\n    }\r\n    _createBaseImage(width, height) {\r\n        const img = document.createElement(\"canvas\");\r\n        img.width = width;\r\n        img.height = height;\r\n        const ctx = img.getContext(\"2d\");\r\n        for (let x = 0; x < width; x++) {\r\n            for (let y = 0; y < height; y++) {\r\n                const hsl = [x / width, 1 - y / height, 0.5];\r\n                const rgb = stendhal.data.sprites.filter.hsl2rgb(hsl);\r\n                ctx.fillStyle = this._rgbToCssString(rgb);\r\n                ctx.fillRect(x, y, 1, 1);\r\n            }\r\n        }\r\n        return img;\r\n    }\r\n    _rgbToCssString(rgb) {\r\n        return \"rgb(\".concat(rgb[0], \",\", rgb[1], \",\", rgb[2], \")\");\r\n    }\r\n    draw() {\r\n        if (this.enabled) {\r\n            this.ctx.drawImage(this.baseImage, 0, 0);\r\n            this._drawSelection();\r\n        }\r\n        else {\r\n            this.ctx.fillStyle = \"gray\";\r\n            this.ctx.fillRect(0, 0, this.baseImage.width, this.baseImage.height);\r\n        }\r\n        this._drawGradientPart();\r\n    }\r\n    _drawSelection() {\r\n        this.ctx.strokeStyle = \"black\";\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(this._x, 0);\r\n        this.ctx.lineTo(this._x, this.baseImage.height);\r\n        this.ctx.moveTo(0, this._y);\r\n        this.ctx.lineTo(this.baseImage.width, this._y);\r\n        this.ctx.stroke();\r\n    }\r\n    _drawGradientPart() {\r\n        if (this.enabled) {\r\n            const gradient = this.gradCtx.createLinearGradient(0, 0, this.baseImage.width, 0);\r\n            const stops = this._calculateGradientStops();\r\n            gradient.addColorStop(0, this._rgbToCssString(stops[0]));\r\n            gradient.addColorStop(0.5, this._rgbToCssString(stops[1]));\r\n            gradient.addColorStop(1, this._rgbToCssString(stops[2]));\r\n            const ctx = this.gradCtx;\r\n            ctx.fillStyle = gradient;\r\n            ctx.fillRect(0, 0, this.baseImage.width, 10);\r\n            ctx.fillStyle = \"black\";\r\n            ctx.beginPath();\r\n            ctx.moveTo(this.hX, 0);\r\n            ctx.lineTo(this.hX, 10);\r\n            ctx.stroke();\r\n        }\r\n        else {\r\n            this.gradCtx.fillStyle = \"gray\";\r\n            this.gradCtx.fillRect(0, 0, this.baseImage.width, 10);\r\n        }\r\n    }\r\n    _calculateGradientStops() {\r\n        const width = this.baseImage.width;\r\n        const height = this.baseImage.height;\r\n        const hslLeft = [this._x / width, 1 - this._y / height, 0.08];\r\n        const hslMiddle = [this._x / width, 1 - this._y / height, 0.5];\r\n        const hslRight = [this._x / width, 1 - this._y / height, 0.92];\r\n        const rgbLeft = stendhal.data.sprites.filter.hsl2rgb(hslLeft);\r\n        const rgbMiddle = stendhal.data.sprites.filter.hsl2rgb(hslMiddle);\r\n        const rgbRight = stendhal.data.sprites.filter.hsl2rgb(hslRight);\r\n        return [rgbLeft, rgbMiddle, rgbRight];\r\n    }\r\n    _onMouseDown(event) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        this._x = event.offsetX;\r\n        this._y = event.offsetY;\r\n        this.draw();\r\n        this.onColorChanged(this.color);\r\n    }\r\n    _onMouseMove(event) {\r\n        if (event.buttons) {\r\n            this._onMouseDown(event);\r\n        }\r\n    }\r\n    _onMouseDownGrad(event) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        this.hX = event.offsetX;\r\n        this.draw();\r\n        this.onColorChanged(this.color);\r\n    }\r\n    _onMouseMoveGrad(event) {\r\n        if (event.buttons) {\r\n            this._onMouseDownGrad(event);\r\n        }\r\n    }\r\n}\r\nexports.OutfitColorSelector = OutfitColorSelector;\r\n//# sourceMappingURL=OutfitColorSelector.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2015-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutfitPaletteColorSelector = void 0;\r\nconst OutfitColorSelector_1 = require(\"./OutfitColorSelector\");\r\nclass OutfitPaletteColorSelector extends OutfitColorSelector_1.OutfitColorSelector {\r\n    constructor(canvas, gradientCanvas, onColorChanged) {\r\n        super(canvas, gradientCanvas, onColorChanged);\r\n        this._blockWidth = this.baseImage.width / 4;\r\n        this._blockHeight = this.baseImage.height / 4;\r\n        this._x = 0;\r\n        this._y = 0;\r\n        this.hX = this.baseImage.width / 2;\r\n    }\r\n    get color() {\r\n        if (this.enabled) {\r\n            const hs = this._hsMap[Math.floor(this._x / this._blockWidth)][Math.floor(this._y / this._blockHeight)];\r\n            const hsl = [hs[0], hs[1], this.hX / this.baseImage.width];\r\n            const rgbArray = stendhal.data.sprites.filter.hsl2rgb(hsl);\r\n            return stendhal.data.sprites.filter.mergergb(rgbArray);\r\n        }\r\n        return null;\r\n    }\r\n    set color(rgb) {\r\n        if (rgb != null) {\r\n            this.enabled = true;\r\n            const hsl = stendhal.data.sprites.filter.rgb2hsl(stendhal.data.sprites.filter.splitrgb(rgb));\r\n            this.hX = hsl[2] * this.baseImage.width;\r\n            let bestDelta = Number.MAX_VALUE;\r\n            for (let i = 0; i < 4; i++) {\r\n                for (let j = 0; j < 4; j++) {\r\n                    const hs = this._hsMap[i][j];\r\n                    const hueDelta = hs[0] - hsl[0];\r\n                    const satDelta = hs[1] - hsl[1];\r\n                    const delta = (hueDelta * hueDelta) + (satDelta * satDelta);\r\n                    if (delta < bestDelta) {\r\n                        bestDelta = delta;\r\n                        this._x = i * this._blockWidth;\r\n                        this._y = j * this._blockHeight;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.enabled = false;\r\n        }\r\n    }\r\n    _createColorMap() {\r\n        const hues = [0.05, 0.07, 0.09, 0.11];\r\n        const saturations = [0.70, 0.55, 0.40, 0.25];\r\n        const hsMap = [[], [], [], []];\r\n        const colors = [[], [], [], []];\r\n        for (let i = 0; i < 4; i++) {\r\n            for (let j = 0; j < 4; j++) {\r\n                const hue = hues[j];\r\n                const sat = saturations[i];\r\n                hsMap[i].push([hue, sat]);\r\n                const color = stendhal.data.sprites.filter.hsl2rgb([hue, sat, 0.5]);\r\n                colors[i].push(color);\r\n            }\r\n        }\r\n        this._hsMap = hsMap;\r\n        this._colorMap = colors;\r\n    }\r\n    _createBaseImage(width, height) {\r\n        this._createColorMap();\r\n        const img = document.createElement(\"canvas\");\r\n        img.width = width;\r\n        img.height = height;\r\n        const ctx = img.getContext(\"2d\");\r\n        const blockWidth = width / 4;\r\n        const blockHeight = height / 4;\r\n        for (let x = 0; x < 4; x++) {\r\n            for (let y = 0; y < 4; y++) {\r\n                const rgb = this._colorMap[x][y];\r\n                ctx.fillStyle = this._rgbToCssString(rgb);\r\n                ctx.fillRect(x * blockWidth, y * blockHeight, blockWidth, blockHeight);\r\n            }\r\n        }\r\n        return img;\r\n    }\r\n    _calculateGradientStops() {\r\n        let hs = this._hsMap[Math.floor(this._x / this._blockWidth)][Math.floor(this._y / this._blockHeight)];\r\n        const hslLeft = [hs[0], hs[1], 0.08];\r\n        const hslMiddle = [hs[0], hs[1], 0.5];\r\n        const hslRight = [hs[0], hs[1], 0.92];\r\n        const rgbLeft = stendhal.data.sprites.filter.hsl2rgb(hslLeft);\r\n        const rgbMiddle = stendhal.data.sprites.filter.hsl2rgb(hslMiddle);\r\n        const rgbRight = stendhal.data.sprites.filter.hsl2rgb(hslRight);\r\n        return [rgbLeft, rgbMiddle, rgbRight];\r\n    }\r\n    _drawSelection() {\r\n        let x = Math.floor(this._x / this._blockWidth);\r\n        let y = Math.floor(this._y / this._blockHeight);\r\n        this.ctx.strokeStyle = \"white\";\r\n        this.ctx.strokeRect(x * this._blockWidth, y * this._blockHeight, this._blockWidth, this._blockHeight);\r\n    }\r\n}\r\nexports.OutfitPaletteColorSelector = OutfitPaletteColorSelector;\r\n//# sourceMappingURL=OutfitPaletteColorSelector.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                (C) Copyright 2007-2023 - Faiumoni e. V.                 *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutfitDialog = void 0;\r\nconst DialogContentComponent_1 = require(\"../../toolkit/DialogContentComponent\");\r\nconst UI_1 = require(\"../../UI\");\r\nconst UIComponentEnum_1 = require(\"../../UIComponentEnum\");\r\nconst OutfitPartSelector_1 = require(\"./OutfitPartSelector\");\r\nconst OutfitColorSelector_1 = require(\"./OutfitColorSelector\");\r\nconst OutfitPaletteColorSelector_1 = require(\"./OutfitPaletteColorSelector\");\r\n/**\r\n * a dialog to choose an outfit from\r\n */\r\nclass OutfitDialog extends DialogContentComponent_1.DialogContentComponent {\r\n    constructor() {\r\n        super(\"outfitdialog-template\");\r\n        UI_1.ui.registerComponent(UIComponentEnum_1.UIComponentEnum.OutfitDialog, this);\r\n        queueMicrotask(() => {\r\n            this.createDialog();\r\n        });\r\n    }\r\n    getConfigId() {\r\n        return \"outfit\";\r\n    }\r\n    createDialog() {\r\n        let outfit = marauroa.me[\"outfit_ext_orig\"];\r\n        if (outfit === undefined) {\r\n            outfit = marauroa.me[\"outfit_ext\"];\r\n        }\r\n        let entries = outfit.split(\",\");\r\n        let currentOutfit = {};\r\n        for (let i = 0; i < entries.length; i++) {\r\n            let entry = entries[i].split(\"=\");\r\n            currentOutfit[entry[0]] = entry[1];\r\n        }\r\n        this.hatSelector = this.makeSelector(\"hat\", currentOutfit[\"hat\"]);\r\n        this.hairSelector = this.makeSelector(\"hair\", currentOutfit[\"hair\"]);\r\n        this.maskSelector = this.makeSelector(\"mask\", currentOutfit[\"mask\"]);\r\n        this.eyesSelector = this.makeSelector(\"eyes\", currentOutfit[\"eyes\"]);\r\n        this.mouthSelector = this.makeSelector(\"mouth\", currentOutfit[\"mouth\"]);\r\n        this.headSelector = this.makeSelector(\"head\", currentOutfit[\"head\"]);\r\n        this.bodySelector = this.makeSelector(\"body\", currentOutfit[\"body\"]);\r\n        this.dressSelector = this.makeSelector(\"dress\", currentOutfit[\"dress\"]);\r\n        this.hairColorSelector = this.createColorSelector(OutfitColorSelector_1.OutfitColorSelector, \"hair\", this.hairSelector);\r\n        this.eyesColorSelector = this.createColorSelector(OutfitColorSelector_1.OutfitColorSelector, \"eyes\", this.eyesSelector);\r\n        this.dressColorSelector = this.createColorSelector(OutfitColorSelector_1.OutfitColorSelector, \"dress\", this.dressSelector);\r\n        this.skinColorSelector = this.createColorSelector(OutfitPaletteColorSelector_1.OutfitPaletteColorSelector, \"skin\", this.headSelector, this.bodySelector);\r\n        this.drawComposite();\r\n        this.child(\"#setoutfitcancel\").addEventListener(\"click\", (event) => {\r\n            this.onCancel(event);\r\n        });\r\n        this.child(\"#setoutfitapply\").addEventListener(\"click\", (event) => {\r\n            this.onApply(event);\r\n        });\r\n    }\r\n    onCancel(event) {\r\n        this.componentElement.dispatchEvent(new Event(\"close\"));\r\n        event.preventDefault();\r\n    }\r\n    onApply(event) {\r\n        const outfitString = \"body=\" + this.bodySelector.index.toString() + \",\" +\r\n            \"dress=\" + this.dressSelector.index.toString() + \",\" +\r\n            \"head=\" + this.headSelector.index.toString() + \",\" +\r\n            \"mouth=\" + this.mouthSelector.index.toString() + \",\" +\r\n            \"eyes=\" + this.eyesSelector.index.toString() + \",\" +\r\n            \"mask=\" + this.maskSelector.index.toString() + \",\" +\r\n            \"hair=\" + this.hairSelector.index.toString() + \",\" +\r\n            \"hat=\" + this.hatSelector.index.toString();\r\n        const action = {\r\n            \"type\": \"outfit_ext\",\r\n            \"zone\": marauroa.currentZoneName,\r\n            \"value\": outfitString\r\n        };\r\n        let color = this.hairColorSelector.color;\r\n        if (color != null) {\r\n            action[\"hair\"] = color.toString();\r\n        }\r\n        color = this.eyesColorSelector.color;\r\n        if (color != null) {\r\n            action[\"eyes\"] = color.toString();\r\n        }\r\n        color = this.dressColorSelector.color;\r\n        if (color != null) {\r\n            action[\"dress\"] = color.toString();\r\n        }\r\n        color = this.skinColorSelector.color;\r\n        if (color != null) {\r\n            action[\"skin\"] = color.toString();\r\n        }\r\n        marauroa.clientFramework.sendAction(action);\r\n        event.preventDefault();\r\n        this.componentElement.dispatchEvent(new Event(\"close\"));\r\n    }\r\n    makeSelector(part, index) {\r\n        // FIXME: selector should be showing a default if index is less than 0\r\n        if (index < 0 || index === undefined) {\r\n            index = 0;\r\n        }\r\n        const selector = new OutfitPartSelector_1.OutfitPartSelector(part, index, stendhal.data.outfit.count[part] - 1, () => {\r\n            this.drawComposite();\r\n        });\r\n        document.getElementById(\"setoutfitprev\" + part).addEventListener(\"click\", function (e) {\r\n            selector.previous();\r\n        });\r\n        document.getElementById(\"setoutfitnext\" + part).addEventListener(\"click\", function (e) {\r\n            selector.next();\r\n        });\r\n        selector.draw();\r\n        return selector;\r\n    }\r\n    drawComposite() {\r\n        function draw(ctx, selector) {\r\n            const image = selector.image;\r\n            image === null || image === void 0 ? void 0 : image.then((img) => ctx.drawImage(img, -48, -128));\r\n        }\r\n        const canvas = document.getElementById('setoutfitcompositecanvas');\r\n        const ctx = canvas.getContext(\"2d\");\r\n        ctx.fillStyle = \"white\";\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        draw(ctx, this.bodySelector);\r\n        draw(ctx, this.dressSelector);\r\n        draw(ctx, this.headSelector);\r\n        draw(ctx, this.mouthSelector);\r\n        draw(ctx, this.eyesSelector);\r\n        draw(ctx, this.maskSelector);\r\n        // hair is not drawn under certain hats/helmets\r\n        if (stendhal.data.outfit.drawHair(parseInt(this.hatSelector.index, 10))) {\r\n            draw(ctx, this.hairSelector);\r\n        }\r\n        draw(ctx, this.hatSelector);\r\n    }\r\n    initialColorValue(part) {\r\n        const colors = marauroa.me[\"outfit_colors\"];\r\n        if (colors != null) {\r\n            let colorName = part;\r\n            if (part === \"body\" || part === \"head\") {\r\n                colorName = \"skin\";\r\n            }\r\n            let layer_color = colors[colorName + \"_orig\"];\r\n            if (layer_color === undefined) {\r\n                layer_color = colors[colorName];\r\n            }\r\n            return layer_color;\r\n        }\r\n        return null;\r\n    }\r\n    createColorSelector(classObject, part, ...partSelectors) {\r\n        const toggle = document.getElementById(\"setoutfit\" + part + \"colortoggle\");\r\n        const canvas = document.getElementById(\"setoutfit\" + part + \"colorcanvas\");\r\n        const gradientCanvas = document.getElementById(\"setoutfit\" + part + \"colorgradient\");\r\n        const selector = new classObject(canvas, gradientCanvas, (color) => {\r\n            for (const partSelector of partSelectors) {\r\n                partSelector.color = color;\r\n            }\r\n        });\r\n        const initialColor = this.initialColorValue(part);\r\n        if (initialColor != null) {\r\n            toggle.checked = true;\r\n            selector.color = initialColor;\r\n        }\r\n        toggle.addEventListener(\"change\", function (e) {\r\n            selector.enabled = toggle.checked;\r\n        });\r\n        selector.draw();\r\n        return selector;\r\n    }\r\n    onParentClose() {\r\n        UI_1.ui.unregisterComponent(this);\r\n    }\r\n}\r\nexports.OutfitDialog = OutfitDialog;\r\n//# sourceMappingURL=OutfitDialog.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                       Copyright \u00a9 2023 - Stendhal                       *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.User = void 0;\r\nconst Player_1 = require(\"./Player\");\r\nconst SingletonRepo_1 = require(\"../SingletonRepo\");\r\nconst UI_1 = require(\"../ui/UI\");\r\nconst UIComponentEnum_1 = require(\"../ui/UIComponentEnum\");\r\nconst OutfitDialog_1 = require(\"../ui/dialog/outfit/OutfitDialog\");\r\nconst FloatingWindow_1 = require(\"../ui/toolkit/FloatingWindow\");\r\nconst Color_1 = require(\"../util/Color\");\r\n/**\r\n * Class representing the player controlled by this client.\r\n */\r\nclass User extends Player_1.Player {\r\n    constructor() {\r\n        super();\r\n        this.soundMan = SingletonRepo_1.singletons.getSoundManager();\r\n        this.lssMan = SingletonRepo_1.singletons.getLoopedSoundSourceManager();\r\n        this.minimapStyle = Color_1.Color.USER;\r\n        queueMicrotask(() => {\r\n            this.onEnterZone();\r\n        });\r\n    }\r\n    destroy(parent) {\r\n        this.onExitZone();\r\n        super.destroy(parent);\r\n    }\r\n    set(key, value) {\r\n        const oldX = this[\"x\"];\r\n        const oldY = this[\"y\"];\r\n        super.set(key, value);\r\n        if ((key === \"x\" || key === \"y\") && this[\"x\"] && this[\"y\"]\r\n            && (this[\"x\"] !== oldX || this[\"y\"] !== oldY)) {\r\n            this.lssMan.onDistanceChanged(this[\"x\"], this[\"y\"]);\r\n        }\r\n        queueMicrotask(() => {\r\n            UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.PlayerStats).update(key);\r\n            UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.Bag).update();\r\n            UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.Keyring).update();\r\n            UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.StatusesList).update(this);\r\n        });\r\n    }\r\n    unset(key) {\r\n        super.unset(key);\r\n        queueMicrotask(() => {\r\n            UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.StatusesList).update(this);\r\n        });\r\n    }\r\n    buildActions(list) {\r\n        super.buildActions(list);\r\n        const charname = this[\"_name\"];\r\n        list.push({\r\n            title: this.stopped() ? \"Walk\" : \"Stop\",\r\n            action: function (_entity) {\r\n                marauroa.clientFramework.sendAction({ \"type\": \"walk\" });\r\n            }\r\n        });\r\n        list.push({\r\n            title: \"Set outfit\",\r\n            action: function (_entity) {\r\n                let outfitDialog = UI_1.ui.get(UIComponentEnum_1.UIComponentEnum.OutfitDialog);\r\n                if (!outfitDialog) {\r\n                    const dstate = stendhal.config.getWindowState(\"outfit\");\r\n                    outfitDialog = new OutfitDialog_1.OutfitDialog();\r\n                    new FloatingWindow_1.FloatingWindow(\"Choose outfit\", outfitDialog, dstate.x, dstate.y).setId(\"outfit\");\r\n                }\r\n            }\r\n        });\r\n        list.push({\r\n            title: \"Where\",\r\n            action: function (_entity) {\r\n                var action = {\r\n                    \"type\": \"where\",\r\n                    \"target\": charname,\r\n                };\r\n                marauroa.clientFramework.sendAction(action);\r\n            }\r\n        });\r\n    }\r\n    //~ override onMiniMapDraw() {\r\n    //~ }\r\n    /**\r\n     * Can the player hear this chat message?\r\n     *\r\n     * @param entity\r\n     *     The speaking entity.\r\n     * @param rangeSquared\r\n     *     Distance squared within which the entity can be heard (-1\r\n     *     represents entire map).\r\n     */\r\n    isInHearingRange(entity, rangeSquared) {\r\n        if (entity === marauroa.me || this.isAdmin()) {\r\n            return true;\r\n        }\r\n        let hearingRange = 15; // default\r\n        if (typeof rangeSquared !== \"undefined\") {\r\n            if (rangeSquared < 0) {\r\n                hearingRange = -1;\r\n            }\r\n            else {\r\n                hearingRange = Math.sqrt(rangeSquared);\r\n            }\r\n        }\r\n        return (hearingRange < 0)\r\n            || ((Math.abs(this[\"x\"] - entity[\"x\"]) < hearingRange)\r\n                && (Math.abs(this[\"y\"] - entity[\"y\"]) < hearingRange));\r\n    }\r\n    /**\r\n     * Actions when player leaves a zone.\r\n     */\r\n    onExitZone() {\r\n        // speech bubbles & emojis from viewport\r\n        stendhal.ui.gamewindow.onExitZone();\r\n        // stop sounds & clear map sounds cache on zone change\r\n        const msgs = [];\r\n        if (!this.lssMan.removeAll()) {\r\n            let tmp = \"LoopedSoundSourceManager reported not all sources stopped on zone change:\";\r\n            const loopSources = this.lssMan.getSources();\r\n            for (const id in loopSources) {\r\n                const snd = loopSources[id].sound;\r\n                tmp += \"\\n- ID: \" + id + \" (\" + snd.src + \")\";\r\n            }\r\n            msgs.push(tmp);\r\n        }\r\n        if (!this.soundMan.stopAll()) {\r\n            let tmp = \"SoundManager reported not all sounds stopped on zone change:\";\r\n            for (const snd of this.soundMan.getActive()) {\r\n                tmp += \"\\n- \" + snd.src;\r\n                if (snd.loop) {\r\n                    tmp += \" (loop)\";\r\n                }\r\n            }\r\n            msgs.push(tmp);\r\n        }\r\n        for (const msg of msgs) {\r\n            console.warn(msg);\r\n        }\r\n    }\r\n    /**\r\n     * Actions when player enters a zone.\r\n     */\r\n    onEnterZone() {\r\n        // play looped sound sources\r\n        this.lssMan.onZoneReady();\r\n    }\r\n    /**\r\n     * Checks if player has autowalk set.\r\n     */\r\n    autoWalkEnabled() {\r\n        return typeof (this[\"autowalk\"]) !== \"undefined\";\r\n    }\r\n    /**\r\n     * Checks if player meets requirements to invite others into a group.\r\n     *\r\n     * @return\r\n     *     <code>true</code> if player is not in a group or is leader of a group.\r\n     */\r\n    canInviteToGroup() {\r\n        const gman = SingletonRepo_1.singletons.getGroupManager();\r\n        return gman.getMemberCount() == 0 || gman.getLeader() === this[\"name\"];\r\n    }\r\n}\r\nexports.User = User;\r\n//# sourceMappingURL=User.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.VisibleEntity = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass VisibleEntity extends Entity_1.Entity {\r\n    constructor() {\r\n        super();\r\n        this.zIndex = 1;\r\n        this.sprite = {\r\n            height: 32,\r\n            width: 32\r\n        };\r\n    }\r\n    set(key, value) {\r\n        super.set(key, value);\r\n        if (key === \"class\" || key === \"subclass\" || key === \"_name\") {\r\n            this.sprite.filename = stendhal.paths.sprites + \"/\"\r\n                + (this[\"class\"] || \"\") + \"/\"\r\n                + (this[\"subclass\"] || \"\") + \"/\"\r\n                + (this[\"_name\"] || \"\") + \".png\";\r\n        }\r\n        else if (key === \"state\") {\r\n            this.sprite.offsetY = value * 32;\r\n        }\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/look.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.VisibleEntity = VisibleEntity;\r\n//# sourceMappingURL=VisibleEntity.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.WalkBlocker = void 0;\r\nconst Entity_1 = require(\"./Entity\");\r\nclass WalkBlocker extends Entity_1.Entity {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.zIndex = 3000;\r\n    }\r\n    isVisibleToAction(_filter) {\r\n        return true;\r\n    }\r\n    getCursor(_x, _y) {\r\n        return \"url(\" + stendhal.paths.sprites + \"/cursor/stop.png) 1 3, auto\";\r\n    }\r\n}\r\nexports.WalkBlocker = WalkBlocker;\r\n//# sourceMappingURL=WalkBlocker.js.map","","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Blood_1 = require(\"./Blood\");\r\nconst Chest_1 = require(\"./Chest\");\r\nconst Corpse_1 = require(\"./Corpse\");\r\nconst Creature_1 = require(\"./Creature\");\r\nconst DomesticAnimal_1 = require(\"./DomesticAnimal\");\r\nconst Door_1 = require(\"./Door\");\r\nconst Food_1 = require(\"./Food\");\r\nconst GameBoard_1 = require(\"./GameBoard\");\r\nconst Gate_1 = require(\"./Gate\");\r\nconst GrowingEntitySpawner_1 = require(\"./GrowingEntitySpawner\");\r\nconst InvisibleEntity_1 = require(\"./InvisibleEntity\");\r\nconst Item_1 = require(\"./Item\");\r\nconst LoopedSoundSource_1 = require(\"./LoopedSoundSource\");\r\nconst NPC_1 = require(\"./NPC\");\r\nconst Player_1 = require(\"./Player\");\r\nconst Portal_1 = require(\"./Portal\");\r\nconst Sign_1 = require(\"./Sign\");\r\nconst TrainingDummy_1 = require(\"./TrainingDummy\");\r\nconst UnknownEntity_1 = require(\"./UnknownEntity\");\r\nconst UseableEntity_1 = require(\"./UseableEntity\");\r\nconst User_1 = require(\"./User\");\r\nconst VisibleEntity_1 = require(\"./VisibleEntity\");\r\nconst WalkBlocker_1 = require(\"./WalkBlocker\");\r\nmarauroa.rpobjectFactory[\"area\"] = InvisibleEntity_1.InvisibleEntity;\r\nmarauroa.rpobjectFactory[\"baby_dragon\"] = DomesticAnimal_1.DomesticAnimal;\r\nmarauroa.rpobjectFactory[\"blackboard\"] = Sign_1.Sign;\r\nmarauroa.rpobjectFactory[\"blocktarget\"] = InvisibleEntity_1.InvisibleEntity;\r\nmarauroa.rpobjectFactory[\"block\"] = VisibleEntity_1.VisibleEntity;\r\nmarauroa.rpobjectFactory[\"blood\"] = Blood_1.Blood;\r\nmarauroa.rpobjectFactory[\"cat\"] = DomesticAnimal_1.DomesticAnimal;\r\nmarauroa.rpobjectFactory[\"chest\"] = Chest_1.Chest;\r\nmarauroa.rpobjectFactory[\"corpse\"] = Corpse_1.Corpse;\r\nmarauroa.rpobjectFactory[\"creature\"] = Creature_1.Creature;\r\nmarauroa.rpobjectFactory[\"_default\"] = UnknownEntity_1.UnknownEntity;\r\nmarauroa.rpobjectFactory[\"domesticanimal\"] = DomesticAnimal_1.DomesticAnimal;\r\nmarauroa.rpobjectFactory[\"door\"] = Door_1.Door;\r\nmarauroa.rpobjectFactory[\"flyover\"] = InvisibleEntity_1.InvisibleEntity;\r\nmarauroa.rpobjectFactory[\"food\"] = Food_1.Food;\r\nmarauroa.rpobjectFactory[\"game_board\"] = GameBoard_1.GameBoard;\r\nmarauroa.rpobjectFactory[\"gate\"] = Gate_1.Gate;\r\nmarauroa.rpobjectFactory[\"growing_entity_spawner\"] = GrowingEntitySpawner_1.GrowingEntitySpawner;\r\nmarauroa.rpobjectFactory[\"house_portal\"] = Portal_1.Portal;\r\nmarauroa.rpobjectFactory[\"invisible_entity\"] = InvisibleEntity_1.InvisibleEntity;\r\nmarauroa.rpobjectFactory[\"item\"] = Item_1.Item;\r\nmarauroa.rpobjectFactory[\"looped_sound_source\"] = LoopedSoundSource_1.LoopedSoundSource;\r\nmarauroa.rpobjectFactory[\"npc\"] = NPC_1.NPC;\r\nmarauroa.rpobjectFactory[\"plant_grower\"] = VisibleEntity_1.VisibleEntity;\r\nmarauroa.rpobjectFactory[\"player\"] = Player_1.Player;\r\nmarauroa.rpobjectFactory[\"portal\"] = Portal_1.Portal;\r\nmarauroa.rpobjectFactory[\"rented_sign\"] = Sign_1.Sign;\r\nmarauroa.rpobjectFactory[\"sheep\"] = DomesticAnimal_1.DomesticAnimal;\r\nmarauroa.rpobjectFactory[\"sign\"] = Sign_1.Sign;\r\nmarauroa.rpobjectFactory[\"tiled_entity\"] = InvisibleEntity_1.InvisibleEntity;\r\nmarauroa.rpobjectFactory[\"training_dummy\"] = TrainingDummy_1.TrainingDummy;\r\nmarauroa.rpobjectFactory[\"unknown\"] = UnknownEntity_1.UnknownEntity;\r\nmarauroa.rpobjectFactory[\"useable_entity\"] = UseableEntity_1.UseableEntity;\r\nmarauroa.rpobjectFactory[\"user\"] = User_1.User;\r\nmarauroa.rpobjectFactory[\"visible_entity\"] = VisibleEntity_1.VisibleEntity;\r\nmarauroa.rpobjectFactory[\"walkblocker\"] = WalkBlocker_1.WalkBlocker;\r\nmarauroa.rpobjectFactory[\"wall\"] = InvisibleEntity_1.InvisibleEntity;\r\nmarauroa.rpobjectFactory[\"weather_entity\"] = InvisibleEntity_1.InvisibleEntity;\r\n//# sourceMappingURL=EntityRegistry.js.map","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EmptySprite = void 0;\r\n/**\r\n * An empty (non-drawing) sprite.\r\n */\r\nclass EmptySprite {\r\n    constructor(width, height, reference) {\r\n        this.width = width;\r\n        this.height = height;\r\n        this.reference = reference;\r\n    }\r\n    /**\r\n     * Create a sub-region of this sprite. <strong>NOTE: This does not use\r\n     * caching.</strong>\r\n     *\r\n     * @param x\r\n     *            The starting X coordinate.\r\n     * @param y\r\n     *            The starting Y coordinate.\r\n     * @param width\r\n     *            The region width.\r\n     * @param height\r\n     *            The region height.\r\n     * @param ref\r\n     *            The sprite reference.\r\n     *\r\n     * @return A new sprite.\r\n     */\r\n    createRegion(x, y, width, height, ref) {\r\n        return new EmptySprite(width, height, ref);\r\n    }\r\n    draw(g, destx, desty, x, y, w, h) {\r\n    }\r\n    /**\r\n     * Get the height of the drawn sprite.\r\n     *\r\n     * @return The height in pixels of this sprite\r\n     */\r\n    getHeight() {\r\n        return this.height;\r\n    }\r\n    /**\r\n     * Get the sprite reference. This identifier is an externally opaque object\r\n     * that implements equals() and hashCode() to uniquely/repeatably reference\r\n     * a keyed sprite.\r\n     *\r\n     * @return The reference identifier, or <code>null</code> if not\r\n     *         referencable.\r\n     */\r\n    getReference() {\r\n        return this.reference;\r\n    }\r\n    /**\r\n     * Get the width of the drawn sprite.\r\n     *\r\n     * @return The width in pixels of this sprite\r\n     */\r\n    getWidth() {\r\n        return this.width;\r\n        ;\r\n    }\r\n    isConstant() {\r\n        return true;\r\n    }\r\n}\r\nexports.EmptySprite = EmptySprite;\r\n//# sourceMappingURL=EmptySprite.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Sprite = void 0;\r\n/**\r\n * A sprite to be displayed on the screen. Note that a sprite contains no state\r\n * information, i.e. its just the image and not the location. This allows us to\r\n * use a single sprite in lots of different places without having to store\r\n * multiple copies of the image.\r\n */\r\nclass Sprite {\r\n}\r\nexports.Sprite = Sprite;\r\n//# sourceMappingURL=Sprite.js.map","","\"use strict\";\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ImageSprite = void 0;\r\nconst EmptySprite_1 = require(\"./EmptySprite\");\r\nconst Sprite_1 = require(\"./Sprite\");\r\n/**\r\n * A sprite to be displayed on the screen. Note that a sprite contains no state\r\n * information, i.e. its just the image and not the location. This allows us to\r\n * use a single sprite in lots of different places without having to store\r\n * multiple copies of the image.\r\n *\r\n * @author Kevin Glass\r\n */\r\nclass ImageSprite {\r\n    /**\r\n     * Create a new sprite based on an image.\r\n     *\r\n     * @param image\r\n     *            The image that is this sprite.\r\n     * @param reference\r\n     *            The sprite reference, or null.\r\n     */\r\n    constructor(image, reference) {\r\n        if (image instanceof Sprite_1.Sprite) {\r\n            this.image = ImageSprite.createCompatibleImage(image);\r\n        }\r\n        else {\r\n            this.image = image;\r\n        }\r\n        this.reference = reference;\r\n    }\r\n    static createCompatibleImage(sprite) {\r\n        const canvas = document.createElement('canvas');\r\n        const g = canvas.getContext('2d');\r\n        canvas.width = sprite.getWidth();\r\n        canvas.height = sprite.getHeight();\r\n        sprite.draw(g, 0, 0);\r\n        return canvas;\r\n    }\r\n    /**\r\n     * Create a sub-region of this sprite. <strong>NOTE: This does not use\r\n     * caching.</strong>\r\n     *\r\n     * @param x\r\n     *            The starting X coordinate.\r\n     * @param y\r\n     *            The starting Y coordinate.\r\n     * @param width\r\n     *            The region width.\r\n     * @param height\r\n     *            The region height.\r\n     * @param ref\r\n     *            The sprite reference.\r\n     *\r\n     * @return A new sprite.\r\n     */\r\n    createRegion(x, y, width, height, ref) {\r\n        const iwidth = this.getWidth();\r\n        const iheight = this.getHeight();\r\n        if ((x >= iwidth) || (y >= iheight)) {\r\n            // Outside of image (nothing to draw)\r\n            return new EmptySprite_1.EmptySprite(width, height, ref);\r\n        }\r\n        // Exclude regions outside the original image\r\n        width = Math.min(width, iwidth);\r\n        height = Math.min(height, iheight);\r\n        // Full copy method (the memory hog)\r\n        const canvas = document.createElement('canvas');\r\n        const g = canvas.getContext('2d');\r\n        canvas.width = width;\r\n        canvas.height = height;\r\n        this.draw(g, 0, 0, x, y, width, height);\r\n        return new ImageSprite(canvas, ref);\r\n    }\r\n    draw(g, destx, desty, x, y, w, h) {\r\n        if (arguments.length === 7) {\r\n            g.drawImage(this.image, destx, desty, destx + w, desty + h, x, y, x + w, y + h);\r\n        }\r\n        else {\r\n            g.drawImage(this.image, destx, desty);\r\n        }\r\n    }\r\n    /**\r\n     * Get the height of the drawn sprite.\r\n     *\r\n     * @return The height in pixels of this sprite\r\n     */\r\n    getHeight() {\r\n        return this.image.height;\r\n    }\r\n    /**\r\n     * Get the sprite reference. This identifier is an externally opaque object\r\n     * that implements equals() and hashCode() to uniquely/repeatably reference\r\n     * a keyed sprite.\r\n     *\r\n     * @return The reference identifier, or <code>null</code> if not\r\n     *         referencable.\r\n     */\r\n    getReference() {\r\n        return this.reference;\r\n    }\r\n    /**\r\n     * Get the width of the drawn sprite.\r\n     *\r\n     * @return The width in pixels of this sprite\r\n     */\r\n    getWidth() {\r\n        return this.image.width;\r\n    }\r\n    isConstant() {\r\n        return true;\r\n    }\r\n    /**\r\n     * Retrieves a single frame from the image.\r\n     *\r\n     * @param xIndex\r\n     * \t\tHorizontal index.\r\n     * @param yIndex\r\n     * \t\tVertical index.\r\n     * @return\r\n     * \t\tCropped Sprite.\r\n     */\r\n    getFrame(xIndex, yIndex) {\r\n        const w = this.getWidth() / 3;\r\n        const h = this.getHeight() / 4;\r\n        const x = w * xIndex;\r\n        const y = h * yIndex;\r\n        return this.createRegion(x, y, w, h, undefined);\r\n    }\r\n}\r\nexports.ImageSprite = ImageSprite;\r\n//# sourceMappingURL=ImageSprite.js.map","","\"use strict\";\r\n/* $Id$ */\r\n/***************************************************************************\r\n *                   (C) Copyright 2003-2023 - Stendhal                    *\r\n ***************************************************************************\r\n ***************************************************************************\r\n *                                                                         *\r\n *   This program is free software; you can redistribute it and/or modify  *\r\n *   it under the terms of the GNU Affero General Public License as        *\r\n *   published by the Free Software Foundation; either version 3 of the    *\r\n *   License, or (at your option) any later version.                       *\r\n *                                                                         *\r\n ***************************************************************************/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n//# sourceMappingURL=Tileset.js.map"],
"names":["$jscomp.arrayIteratorImpl","$jscomp.objectCreate","$jscomp.defineProperty","$jscomp.global","$jscomp.getGlobal","$jscomp.construct","$jscomp.getConstructImplementation","$jscomp.setPrototypeOf","$jscomp.polyfill","$jscomp.iteratorPrototype","$jscomp.makeIterator","$jscomp.owns","$jscomp.iteratorFromArray","$jscomp.checkStringArgs","$jscomp.typedArrayFill","marauroa","window","debug","messages","unknownEvents","console","log","window.console.log","info","window.console.info","warn","window.console.warn","error","window.console.error","text","alert","util","isEmpty","obj","i","hasOwnProperty","isEmptyExceptId","first","fromProto","proto","def","undefined","F","prototype","merge","a","b","key","clientFramework","clientid","connect","host","port","path","protocol","location","hostname","socket","WebSocket","onmessage","onMessage","onopen","socket.onopen","setInterval","sendMessage","msg","onConnect","onclose","onDisconnect","reason","onLoginRequired","login","username","password","onServerInfo","contents","onPreviousLogins","previousLogins","onLoginFailed","e","JSON","parse","data","messageFactory","addDispatchMethod","dispatch","myMessage","send","stringify","resync","chooseCharacter","character","onChooseCharacterNack","sendAction","action","logout","onLogoutOutAck","onLogoutOutNack","close","onPerception","perceptionMessage","perceptionHandler","apply","onTransferREQ","items","onTransfer","onAvailableCharacterDetails","characters","createCharacter","createAccount","email","onCreateAccountAck","onCreateAccountNack","charname","template","onCreateCharacterAck","onCreateCharacterNack","eval","unknownMessage","this.unknownMessage","this.addDispatchMethod","t","perceptionListener","onAdded","onModifiedAdded","onModifiedDeleted","onDeleted","onMyRPObject","onClear","onPerceptionBegin","onPerceptionEnd","onException","exception","perception","currentZone","clear","destroy","currentZoneName","applyPerceptionAddedRPObjects","applyPerceptionModifiedRPObjects","applyPerceptionDeletedRPObjects","applyPerceptionMyRPObject","o","rpobjectFactory","create","addChanges","tmp","deleteChanges","id","addMyRPObjectToWorldIfPrivate","me","added","object","diff","unset","del","j","unsetMapEntry","set","setMapEntry","createSlot","get","newObject","_parent","add","onEvent","event","rpeventFactory","slot","execute","value","map","name","rpslotFactory","init","this.create","rpclass","ctor","temp","rpobject","_objects","push","idx","getIndex","getByIndex","count","length","c","splice","_name","r","d","split","aa","execScript","shift","k","u","Number","POSITIVE_INFINITY","l","p","s","f","Uint32Array","Array","g","h","n","m","x","w","input","Uint8Array","y","index","bufferSize","bufferType","resize","A","Error","B","D","Uint16Array","DataView","w.prototype.t","subarray","ba","ca","C","M","T","q","Q","v","z","R","slice","S","E","G","H","I","J","K","L","N","O","P","da","U","V","W","ea","w.prototype.j","w.prototype.s","w.prototype.e","w.prototype.u","w.prototype.m","buffer","w.prototype.r","X","ADAPTIVE","BLOCK","fa","Object","keys","Y","Z","$","call","Deserializer","marauroa.Deserializer","offset","view","readShort","this.readShort","getInt16","readInt","this.readInt","getInt32","readByteArray","this.readByteArray","size","getUint32","readString","this.readString","decode","TextDecoder","readAttributes","this.readAttributes","code","binaryStringToUint","marauroa.Deserializer.binaryStringToUint","binary","len","bytes","charCodeAt","fromDeflatedBase64","marauroa.Deserializer.fromDeflatedBase64","base64","atob","substring","inflate","fromBase64","marauroa.Deserializer.fromBase64","fromBinaryString","marauroa.Deserializer.fromBinaryString","stendhal","build","version","dist","JXG","Util","Unzip","JXG.Util.Unzip","fpos","Base64","_keyStr","encode","output","_utf8_encode","chr1","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","join","utf8","replace","indexOf","String","fromCharCode","_utf8_decode","string","utftext","c2","c3","_destrip","stripped","wrap","lines","destripped","lineno","substr","decodeAsArray","dec","ar","decodeGEONExT","destrip","asciiCharCodeAt","JXG.Util.asciiCharCodeAt","str","utf8Decode","JXG.Util.utf8Decode","parseInt","binLen","search","ArrayBuffer","byteLength","lastIndexOf","jsSHA","encoding","numRounds","update","this.update","defineProperty","module$build$ts$PerceptionListener.default","module$build$ts$PerceptionListener.default.PerceptionListener","PerceptionListener","constructor","_super","getOwnPropertyNames","prop","session","module$build$ts$ui$toolkit$Component.default","module$build$ts$ui$toolkit$Component.default.Component","Component","themable","element","document","getElementById","HTMLTemplateElement","content","cloneNode","fragment","children","componentElement","classList","defaultDisplay","style","display","onParentClose","onMoved","refresh","isVisible","setVisible","visible","child","selector","querySelector","module$build$ts$ui$SoundManager.default","module$build$ts$ui$SoundManager.default.SoundManager","SoundManager","layers","cacheGlobal","cache","active","module$build$ts$ui$SoundManager.default.SoundManager.get","module$build$ts$ui$SoundManager.default.SoundManager.instance","instance","getActive","includeGui","layerName","snd","load","filename","global","Audio","autoplay","getLayerName","layer","layername","onSoundAdded","sound","onended","sound.onended","playEffect","soundname","volume","loop","muted","getBoolean","config","normVolume","actualvolume","getAdjustedVolume","paths","sounds","scopy","basevolume","Math","min","playLocalizedEffect","radius","adjustForDistance","playGlobalizedEffect","stop","group","pause","currentTime","Event","sx","sy","ex","ey","xdist","ydist","dist2","rad2","maxvol","vol","basevol","actualvol","getFloat","lvol","getVolume","isFinite","startupCache","module$build$ts$ui$toolkit$FloatingWindow.default","module$build$ts$ui$toolkit$FloatingWindow.default.FloatingWindow","FloatingWindow","title","contentComponent","module$build$ts$ui$toolkit$Component.default.Component.call","closeSound","opened","offsetX","offsetY","position","left","top","titleBar","applyTheme","textContent","append","addEventListener","onMouseDown","onTouchStart","closeButton","onClose","preventDefault","module$build$ts$ui$toolkit$FloatingWindow.default.FloatingWindow.soundManager.playGlobalizedEffect","soundManager","onMouseMovedDuringDragListener","this.onMouseMovedDuringDragListener","type","onMouseMovedDuringDrag","clientX","clientY","firstT","changedTouches","simulated","MouseEvent","screenX","screenY","target","dispatchEvent","onMouseUpDuringDragListener","this.onMouseUpDuringDragListener","removeEventListener","onMouseUpDuringDrag","parentComponent","popupcontainer","appendChild","$jscomp.inherits","?.prototype","remove","isOpen","box","getBoundingClientRect","pageXOffset","pageYOffset","_a","checkPos","dialogArea","clientArea","documentElement","clientAreaHeight","height","visualViewport","getPageOffset","newX","newY","width","right","windowId","setWindowState","windowstates","module$build$ts$ui$toolkit$FloatingWindow.default.FloatingWindow.soundManager","module$build$ts$ui$toolkit$SingletonFloatingWindow.default","module$build$ts$ui$toolkit$SingletonFloatingWindow.default.SingletonFloatingWindow","SingletonFloatingWindow","module$build$ts$ui$toolkit$FloatingWindow.default.FloatingWindow.call","module$build$ts$ui$toolkit$SingletonFloatingWindow.default.SingletonFloatingWindow.visiblePopup","visiblePopup","module$build$ts$ui$toolkit$SingletonFloatingWindow.default.SingletonFloatingWindow.visiblePopup.close","module$build$ts$ui$toolkit$SingletonFloatingWindow.default.SingletonFloatingWindow.soundManager","super","module$build$ts$ui$toolkit$SingletonFloatingWindow.default.SingletonFloatingWindow.closeAll","closeAll","module$build$ts$ui$UI.default","module$build$ts$ui$UI.default.ui","ui","UI","wellKnownComponents","Map","createSingletonFloatingWindow","registerComponent","component","module$build$ts$ui$UI.default.ui.registerComponent","unregisterComponent","module$build$ts$ui$UI.default.ui.unregisterComponent","entries","entry","delete","body","delem","scrollLeft","scrollTop","module$build$ts$ui$UIComponentEnum.default","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum","UIComponentEnum","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.TopPanel","TopPanel","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.LeftPanel","LeftPanel","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.RightPanel","RightPanel","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.BottomPanel","BottomPanel","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.Bag","Bag","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.BuddyList","BuddyList","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.ChatInput","ChatInput","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.ChatLog","ChatLog","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.GroupPanel","GroupPanel","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.PlayerEquipment","PlayerEquipment","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.Keyring","Keyring","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.MiniMap","MiniMap","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.ZoneInfo","ZoneInfo","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.PlayerStats","PlayerStats","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.SocialPanel","SocialPanel","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.StatusesList","StatusesList","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.TradeDialog","TradeDialog","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.TravelLogDialog","TravelLogDialog","module$build$ts$ui$UIComponentEnum.default.UIComponentEnum.OutfitDialog","OutfitDialog","module$build$ts$util$Chat.default","module$build$ts$util$Chat.default.Chat","Chat","module$build$ts$util$Chat.default.Chat.log","message","orator","profile","headed","module$build$ts$util$Chat.default.Chat.clog","clog","module$build$ts$ui$UI.default.ui.get","HTMLImageElement","addEmojiLine","module$build$ts$util$Chat.default.Chat.clog.addEmojiLine","lcol","createElement","className","createTimestamp","rcol","innerHTML","row","addLine","module$build$ts$util$Chat.default.Chat.clog.addLine","toString","addLines","module$build$ts$util$Chat.default.Chat.clog.addLines","stamped","line","addNotifSprite","gamewindow","bubble","module$build$ts$sprite$NotificationBubble.default.NotificationBubble","NotificationBubble","notifSprites","ctx","module$build$ts$util$Chat.default.Chat.logH","logH","module$build$ts$util$Chat.default.Chat.debug","module$build$ts$util$Chat.default.Chat.debugLogEnabled","debugLogEnabled","module$build$ts$util$Chat.default.Chat.options","options","module$build$ts$event$RPEvent.default","module$build$ts$event$RPEvent.default.RPEvent","RPEvent","module$build$ts$event$ChatOptionsEvent.default","module$build$ts$event$ChatOptionsEvent.default.ChatOptionsEvent","ChatOptionsEvent","module$build$ts$event$RPEvent.default.RPEvent.apply","entity","optionsList","optionListEntry","option","module$build$ts$util$Chat.default.Chat.attending","attending","module$build$ts$ui$dialog$ImageViewerDialog.default","module$build$ts$ui$dialog$ImageViewerDialog.default.ImageViewerDialog","ImageViewerDialog","caption","imageFilename","src","module$build$ts$event$ExamineEvent.default","module$build$ts$event$ExamineEvent.default.ExamineEvent","ExamineEvent","module$build$ts$event$GroupChangeEvent.default","module$build$ts$event$GroupChangeEvent.default.GroupChangeEvent","GroupChangeEvent","updateGroupStatus","module$build$ts$event$GroupInviteEvent.default","module$build$ts$event$GroupInviteEvent.default.GroupInviteEvent","GroupInviteEvent","expiredInvite","button","invites","leader","receivedInvite","module$build$ts$ui$toolkit$DialogContentComponent.default","module$build$ts$ui$toolkit$DialogContentComponent.default.DialogContentComponent","DialogContentComponent","frame","module$build$ts$ui$dialog$TravelLogDialog.default","module$build$ts$ui$dialog$TravelLogDialog.default.TravelLogDialog","dataItems","module$build$ts$ui$toolkit$DialogContentComponent.default.DialogContentComponent.call","currentProgressType","repeatable","createHtml","setProperty","buttons","esc","querySelectorAll","forEach","refreshDetails","onProgressTypeButtonClick","onTravelLogItemsChange","html","newDetails","details","module$build$ts$event$ProgressStatusEvent.default","module$build$ts$event$ProgressStatusEvent.default.ProgressStatusEvent","ProgressStatusEvent","progressType","travelLogDialog","detailsSpan","selectedItem","gui","description","ul","includes","pre","post","trim","tallyString","tally","li","item","sort","currentItem","dstate","getWindowState","setId","module$build$ts$ui$dialog$ActionContextMenu.default","module$build$ts$ui$dialog$ActionContextMenu.default.ActionContextMenu","ActionContextMenu","appendActions","gatherActions","actions","iStr","getAttribute","onClick","getIdPath","buildActions","setText","module$build$ts$ui$dialog$DropQuantitySelectorDialog.default","module$build$ts$ui$dialog$DropQuantitySelectorDialog.default.DropQuantitySelectorDialog","DropQuantitySelectorDialog","is_touch","onDrop","allButton","innerText","onDropAll","valueInput","queueMicrotask","select","focus","quantityStr","quantity","module$build$ts$ui$component$ItemContainerImplementation.default","module$build$ts$ui$component$ItemContainerImplementation.default.ItemContainerImplementation","ItemContainerImplementation","parentElement","suffix","quickPickup","defaultImage","timestampMouseDownPrev","timestampMouseDown","selectedIdx","dirty","setAttribute","onDragStart","onDragOver","onMouseUp","onTouchEnd","onMouseEnter","markDirty","render","myobject","cnt","dataItem","xOffset","yOffset","sprites","sprite","animated","stepAnimation","backgroundImage","backgroundPosition","formatQuantity","updateCursor","dest","touch","touchEngaged","DragEvent","touches","targetTouches","slotNumber","heldItem","zone","img","getAreaOf","dataTransfer","setDragImage","isTouchEvent","held","image","offsetWidth","dropEffect","touch_held","holdingItem","ctrlKey","pos","extractPosition","pageX","pageY","stopPropagation","isRightClick","which","Date","evt","long_touch","isLongTouch","context_action","TouchEvent","actionContextMenu","rightClickDuration","isDoubleClick","unsetHeldItem","unsetOrigin","cursor","getCursor","module$build$ts$ui$component$ItemInventoryComponent.default","module$build$ts$ui$component$ItemInventoryComponent.default.ItemInventoryComponent","ItemInventoryComponent","sizeX","sizeY","oldSizeX","module$build$ts$ui$component$ItemInventoryComponent.default.ItemInventoryComponent.counter","counter","setSize","itemContainerImplementation","equip","getInventory","removeIndex","inventory","module$build$ts$ui$dialog$TradeDialog.default","module$build$ts$ui$dialog$TradeDialog.default.TradeDialog","otherItemsComponent","module$build$ts$ui$dialog$TradeDialog.default.TradeDialog.empty","empty","myItemsComponent","showState","state","onCancelClicked","module$build$ts$event$TradeEvent.default","module$build$ts$event$TradeEvent.default.TradeEvent","TradeEvent","dialog","partner","partnerState","myState","disabled","module$build$ts$util$SoundId.default","module$build$ts$util$SoundId.default.SoundId","SoundId","module$build$ts$EventRegistry.default","module$build$ts$EventRegistry.default.EventRegistry","EventRegistry","initialized","module$build$ts$EventRegistry.default.EventRegistry.get","module$build$ts$EventRegistry.default.EventRegistry.instance","register","getAttackTarget","damage","attackResult","createResultIcon","module$build$ts$entity$RPEntity.default.RPEntity.soundManager.playLocalizedEffect","RPEntity","floor","random","ranged","weapon","attackSprite","module$build$ts$sprite$action$RangedAttackSprite.default.RangedAttackSprite","RangedAttackSprite","module$build$ts$util$Nature.default.Nature.VALUES","Nature","VALUES","nature","color","getWeaponPath","elem","startsWith","module$build$ts$sprite$action$BarehandAttackSprite.default.BarehandAttackSprite","BarehandAttackSprite","imagePath","module$build$ts$sprite$action$MeleeAttackSprite.default.MeleeAttackSprite","MeleeAttackSprite","getRotated","header","hasRare","hasAbnormal","subheader","module$build$ts$ui$toolkit$DialogContentComponent.default.DialogContentComponent.apply","cid","layout","col1","col2","col3","t1","t2","t3","shared","solo","l1","l2","l3","globalInternalWindow","soundTextEvents","ttype","toLowerCase","notif","soundMan","addAchievementNotif","banner","module$build$ts$sprite$AchievementBanner.default.AchievementBanner","AchievementBanner","cat","desc","clazz","subclass","price","captionElement","itemList","outfits","sound_id","say","_type","_event","module$build$ts$action$SlashAction.default","module$build$ts$action$SlashAction.default.SlashAction","SlashAction","module$build$ts$ui$component$ShowFloatingWindowComponent.default","module$build$ts$ui$component$ShowFloatingWindowComponent.default.ShowFloatingWindowComponent","ShowFloatingWindowComponent","uiComponentEnum","_b","module$build$ts$action$DebugAction.default","module$build$ts$action$DebugAction.default.DebugAction","DebugAction","module$build$ts$action$SlashAction.default.SlashAction.apply","arguments","minParams","maxParams","uiPopped","params","showUsage","uiFloatComponent","uiAction","usage","weather","wfilename","images","module$build$ts$SingletonRepo.default.singletons.getWeatherRenderer","singletons","getWeatherRenderer","bottomPannel","module$build$ts$action$OpenWebsiteAction.default","module$build$ts$action$OpenWebsiteAction.default.OpenWebsiteAction","OpenWebsiteAction","url","module$build$ts$action$SlashAction.default.SlashAction.call","href","module$build$ts$ui$dialog$SettingsDialog.default","module$build$ts$ui$dialog$SettingsDialog.default.SettingsDialog","SettingsDialog","storedStates","initialStates","chk_light","createCheckBox","chk_weather","player_stats","chk_charname","enableCharName","checked","chk_hpbar","enableBar","chk_movecont","chk_pvtsnd","themes","sel_theme","createSelect","getTheme","selectedIndex","refreshTheme","fonts","sel_fontbody","createFontSelect","new_font","sel_fontchat","sel_fonttlog","tlog","txt_chatopts","createTextInput","js_orienters","js_styles","js_idx","sel_joystick","updateJoystick","orienter","orient","input_temp","createNumberInput","toUpperCase","btn_reload","createButton","reload","btn_close","reloadRequired","setid","ttpos","ttneg","von","voff","chk","checkbox","createCheckBoxSkel","tt","CheckTooltip","valueEnabled","valueDisabled","tooltip","sel","opt","new_char","new_digit","module$build$ts$action$SettingsAction.default","module$build$ts$action$SettingsAction.default.SettingsAction","SettingsAction","wstate","module$build$ts$SlashActionRepo.default","module$build$ts$SlashActionRepo.default.SlashActionRepo","SlashActionRepo","remainder","killtype","creature","endQuote","paramEnd","arr","from","emojilist","$jscomp.arrayFromIterable","module$build$ts$SingletonRepo.default.singletons.getEmojiStore","getEmojiStore","getEmojiList","duration","enable","lastPlayerTell","main","toggleSound","createScreenshot","uri","canvas","toDataURL","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","ms","anchor","download","yyyy","mm","dd","HH","MM","SS","click","test","setVolume","oldvol","layerset","layersounds","nameBuilder","match","amount","module$build$ts$SlashActionRepo.default.SlashActionRepo.get","module$build$ts$SlashActionRepo.default.SlashActionRepo.instance","array","el","filter","Boolean","module$build$ts$util$ConfigManager.default","module$build$ts$util$ConfigManager.default.ConfigManager","ConfigManager","defaults","dark","storage","localStorage","module$build$ts$util$ConfigManager.default.ConfigManager.get","module$build$ts$util$ConfigManager.default.ConfigManager.instance","setItem","ret","getItem","getInt","dval","trunc","getObject","removeItem","recurse","updateBG","current","colorbg","rootStyle","usingDarkTheme","buddyList","module$build$ts$util$SessionManager.default","module$build$ts$util$SessionManager.default.SessionManager","SessionManager","sessionStorage","server_default","module$build$ts$util$SessionManager.default.SessionManager.get","module$build$ts$util$SessionManager.default.SessionManager.instance","args","setCharName","server","module$build$ts$data$Paths.default","module$build$ts$data$Paths.default.Paths","Paths","module$build$ts$data$Paths.default.Paths.extractPath","extractPath","ref","getElementsByTagName","module$build$ts$data$Paths.default.Paths.data","module$build$ts$data$Paths.default.Paths.font","font","module$build$ts$data$Paths.default.Paths.gui","module$build$ts$data$Paths.default.Paths.music","music","module$build$ts$data$Paths.default.Paths.sounds","module$build$ts$data$Paths.default.Paths.sprites","module$build$ts$data$Paths.default.Paths.weather","module$build$ts$data$Paths.default.Paths.achievements","achievements","module$build$ts$data$Paths.default.Paths.tileset","tileset","module$build$ts$data$Paths.default.Paths.ws","ws","module$build$ts$util$JSONLoader.default","module$build$ts$util$JSONLoader.default.JSONLoader","JSONLoader","onDataReady","fetch","headers","then","resp","json","module$build$ts$data$TileStore.default","module$build$ts$data$TileStore.default.TileStore","TileStore","module$build$ts$data$TileStore.default.TileStore.get","landscapeMap","weatherMap","loader","loader.onDataReady","loadAnimations","prefix","ani","tsname","delay","DEFAULT_DELAY","idtemp","frames","delays","ftemp","first_frame","module$build$ts$util$WeatherRenderer.default","module$build$ts$util$WeatherRenderer.default.WeatherRenderer","WeatherRenderer","weatherLoops","enabled","warned","tilesY","tilesX","lastUpdate","frameIdx","soundLayer","module$build$ts$SingletonRepo.default.singletons.getSoundManager","getSoundManager","module$build$ts$util$WeatherRenderer.default.WeatherRenderer.get","module$build$ts$util$WeatherRenderer.default.WeatherRenderer.instance","now","audio","animationMap","getWeatherMap","spriteH","ceil","draw","dim","ix","iy","drawImage","cycleTime","elapsed","delayComb","getNextFrame","imgReady","tiling","module$build$ts$data$CStatus.default","module$build$ts$data$CStatus.default.CStatus","CStatus","module$build$ts$data$CStatus.default.CStatus.get","module$build$ts$data$CStatus.default.CStatus.instance","setTimeout","cstatus","module$build$ts$data$CacheManager.default","module$build$ts$data$CacheManager.default.CacheManager","CacheManager","module$build$ts$data$CacheManager.default.CacheManager.get","module$build$ts$data$CacheManager.default.CacheManager.instance","requestAllItems","storeName","callback","tx","db","transaction","store","objectStore","oncomplete","tx.oncomplete","cursorRequest","openCursor","onerror","cursorRequest.onerror","onsuccess","cursorRequest.onsuccess","result","continue","cacheId","sync","indexedDB","open","onupgradeneeded","open.onupgradeneeded","createObjectStore","keyPath","open.onsuccess","put","open.onerror","module$build$ts$data$EmojiStore.default","module$build$ts$data$EmojiStore.default.EmojiStore","EmojiStore","emojimap","module$build$ts$data$EmojiStore.default.EmojiStore.get","module$build$ts$data$EmojiStore.default.EmojiStore.instance","absPath","endsWith","module$build$ts$data$GroupManager.default","module$build$ts$data$GroupManager.default.GroupManager","GroupManager","members","lootmode","module$build$ts$data$GroupManager.default.GroupManager.get","module$build$ts$data$GroupManager.default.GroupManager.instance","memberArray","module$build$ts$landscape$CombinedTileset.default","module$build$ts$landscape$CombinedTileset.default.CombinedTileset","CombinedTileset","numberOfTiles","combinedLayers","tilesPerRow","sqrt","tileWidth","tileHeight","getContext","module$build$ts$util$MapOfSets.default","module$build$ts$util$MapOfSets.default.MapOfSets","MapOfSets","Set","module$build$ts$landscape$CombinedTilesetImageLoader.default","module$build$ts$landscape$CombinedTilesetImageLoader.default.CombinedTilesetImageLoader","CombinedTilesetImageLoader","indexToCombinedTiles","combinedTileset","tilesetImages","animations","landscapeAnimationMap","getLandscapeMap","loadTileset","onload","img.onload","firstGid","drawTileset","firstgids","lastGid","gid","indexes","tileUsedAtIndex","tiles","pixelX","pixelY","clearRect","tile","getTilesetForGid","drawTile","base","tilesetFilenames","animation","tilesetImage","tileIndexInTileset","flip","translate","restore","transform","reverse","calculateTileUsedAtIndex","combinedTile","usedTilesets","gids","calculateUsedTilesets","module$build$ts$landscape$CombinedTilesetFactory.default","module$build$ts$landscape$CombinedTilesetFactory.default.CombinedTilesetFactory","CombinedTilesetFactory","module$build$ts$landscape$LandscapeRenderer.default","module$build$ts$landscape$LandscapeRenderer.default.LandscapeRenderer","LandscapeRenderer","drawLayer","layerNo","tileOffsetX","tileOffsetY","targetTileWidth","targetTileHeight","yMax","zoneSizeY","xMax","zoneSizeX","module$build$ts$landscape$LandscapeRenderingStrategy.default","module$build$ts$landscape$LandscapeRenderingStrategy.default.CombinedTilesetRenderingStrategy","CombinedTilesetRenderingStrategy","module$build$ts$landscape$LandscapeRenderingStrategy.default.LandscapeRenderingStrategy","LandscapeRenderingStrategy","module$build$ts$landscape$LandscapeRenderingStrategy.default.LandscapeRenderingStrategy.apply","onMapLoaded","combinedTilesetFactory","combinedTilesToIndex","layerGroupIndexes","ctImageLoader","onTilesetLoaded","drawEntities","module$build$ts$data$ImagePreloader.default","module$build$ts$data$ImagePreloader.default.ImagePreloader","ImagePreloader","Function","oImagePreloader","bLoaded","bError","bAbort","nLoaded","nProcessed","aImages","nImages","preload","oImage","Image","onabort","onComplete","module$build$ts$landscape$IndividualTilesetRenderingStrategy.default","module$build$ts$landscape$IndividualTilesetRenderingStrategy.default.IndividualTilesetRenderingStrategy","IndividualTilesetRenderingStrategy","module$build$ts$landscape$LandscapeRenderingStrategy.default.LandscapeRenderingStrategy.call","drawingLayer","layerNames","paintLayer","module$build$ts$data$Map.default","module$build$ts$data$Map.default.Map","gidsindex","layerGroups","knownSafeTilesets","strategy","module$build$ts$data$Map.default.Map.get","module$build$ts$data$Map.default.Map.instance","zoneName","deserializer","layerData","decodeTileset","source","firstgid","baseFilename","lastStart","decodeMapLayer","protection","collisionData","res","mapLayerGroup","layerRaw","tileId","collision","module$build$ts$data$OutfitStore.default","module$build$ts$data$OutfitStore.default.OutfitStore","OutfitStore","detailRearLayers","busty_dress","hats_no_hair","module$build$ts$data$OutfitStore.default.OutfitStore.get","module$build$ts$data$OutfitStore.default.OutfitStore.instance","module$build$ts$data$SpriteStore.default","module$build$ts$data$SpriteStore.default.store","module$build$ts$data$SpriteStore.default.SpriteStore","SpriteStore","knownBrokenUrls","knownShadows","knownSafeSprites","idea","splitrgb","rgb","mergergb","rgbArray","rgb2hsl","max","maxVar","hsl2rgb","hsl","tmp1","tmp2","gf","hue2rgb","limitHue","bf","rf","hue","val1","val2","failsafe","getFailsafe","getWithPromise","Promise","resolve","image.onload","rotate","angle","PI","complete","newImage","err","DOMException","getFilteredWithPromise","fileName","param","imgPromise","filterFn","filteredName","filtered","imgData","getImageData","putImageData","getShadow","shadowStyle","SpriteStoreInternal$$module$build$ts$data$SpriteStore.instance","module$build$ts$data$SpriteStore.default.store.filter","hslColor","end","resultRgb","resultHsl","module$build$ts$ui$HTMLManager.default","module$build$ts$ui$HTMLManager.default.HTMLManager","HTMLManager","module$build$ts$ui$HTMLManager.default.HTMLManager.get","module$build$ts$ui$HTMLManager.default.HTMLManager.instance","tag","round","offsetLeft","offsetTop","canvasRelativeX","clientWidth","canvasRelativeY","clientHeight","module$build$ts$ui$Inventory.default","module$build$ts$ui$Inventory.default.Inventory","Inventory","module$build$ts$ui$Inventory.default.Inventory.get","module$build$ts$ui$Inventory.default.Inventory.instance","comp","module$build$ts$ui$KeyHandler.default","module$build$ts$ui$KeyHandler.default.KeyHandler","KeyHandler","module$build$ts$ui$KeyHandler.default.KeyHandler.isDirPressed","isDirPressed","module$build$ts$ui$KeyHandler.default.KeyHandler.keycode","keycode","module$build$ts$ui$KeyHandler.default.KeyHandler.pressedKeys.indexOf","pressedKeys","dir","module$build$ts$ui$KeyHandler.default.KeyHandler.extractMoveOrFaceActionFromEvent","extractMoveOrFaceActionFromEvent","shiftKey","module$build$ts$ui$KeyHandler.default.KeyHandler.extractDirectionFromKeyCode","extractDirectionFromKeyCode","module$build$ts$ui$KeyHandler.default.KeyHandler.keycode.left","module$build$ts$ui$KeyHandler.default.KeyHandler.onKeyDown","onKeyDown","keyCode","module$build$ts$ui$KeyHandler.default.KeyHandler.keycode.down","down","tagName","module$build$ts$ui$KeyHandler.default.KeyHandler.pressedKeys.push","altKey","metaKey","activeElement","localName","module$build$ts$ui$KeyHandler.default.KeyHandler.onKeyUp","onKeyUp","module$build$ts$ui$KeyHandler.default.KeyHandler.pressedKeys.splice","module$build$ts$ui$KeyHandler.default.KeyHandler.pressedKeys.length","module$build$ts$ui$KeyHandler.default.KeyHandler.pressedKeys","up","module$build$ts$entity$RPObject.default","module$build$ts$entity$RPObject.default.RPObject","RPObject","getWidth","getHeight","module$build$ts$entity$Entity.default","module$build$ts$entity$Entity.default.Entity","Entity","module$build$ts$entity$RPObject.default.RPObject.apply","minimapShow","minimapStyle","zIndex","isNextTo","other","isVisibleToAction","actionAliasToAction","actionAlias","actionAliases","actionCommand","list","onMiniMapDraw","updatePosition","drawSprite","drawSpriteAt","rangeSquared","isInHearingRange","getDefaultAction","getResistance","onclick","isDraggable","inView","bottom","module$build$ts$entity$InvisibleEntity.default","module$build$ts$entity$InvisibleEntity.default.InvisibleEntity","InvisibleEntity","module$build$ts$entity$Entity.default.Entity.apply","module$build$ts$entity$LoopedSoundSource.default","module$build$ts$entity$LoopedSoundSource.default.LoopedSoundSource","LoopedSoundSource","module$build$ts$entity$InvisibleEntity.default.InvisibleEntity.apply","lssMan","module$build$ts$ui$LoopedSoundSourceManager.default.LoopedSoundSourceManager.get","LoopedSoundSourceManager","isLoaded","sources","module$build$ts$ui$LoopedSoundSourceManager.default","module$build$ts$ui$LoopedSoundSourceManager.default.LoopedSoundSourceManager","sfxLoops","sndMan","module$build$ts$ui$LoopedSoundSourceManager.default.LoopedSoundSourceManager.instance","getZoneEntities","ents","entities","ent","onDistanceChanged","module$build$ts$ui$TouchHandler.default","module$build$ts$ui$TouchHandler.default.TouchHandler","TouchHandler","timestampTouchEnd","timestampTouchStart","origin","module$build$ts$ui$TouchHandler.default.TouchHandler.get","module$build$ts$ui$TouchHandler.default.TouchHandler.instance","durationMatch","longTouchDuration","positionMatch","moveThreshold","abs","drawHeld","globalAlpha","module$build$ts$ui$joystick$JoystickBase.default","module$build$ts$ui$joystick$JoystickBase.default.JoystickBase","JoystickBase","direction","reset","onRemoved","getResource","getCenterX","getCenterY","checkActionEvent","onDirectionChange","module$build$ts$ui$joystick$DirectionPad.default","module$build$ts$ui$joystick$DirectionPad.default.DirectionPad","DirectionPad","module$build$ts$ui$joystick$JoystickBase.default.JoystickBase.call","tmp.onload","onInit","center_x","center_y","container","this.up.onload","this.down.onload","this.left.onload","this.right.onload","dimg","draggable","new_direction","contains","removeChild","module$build$ts$ui$joystick$Joystick.default","module$build$ts$ui$joystick$Joystick.default.Joystick","Joystick","engaged","outer","inner","jimg","etype","this.outer.onload","updateInner","rect","getPressedDirection","oCenterX","oCenterY","iCenterX","iCenterY","play_threshold","bounds","ydiff","xdiff","this.inner.onload","module$build$ts$ui$joystick$Joystick.default.Joystick.play_threshold","module$build$ts$sprite$TextBubble.default","module$build$ts$sprite$TextBubble.default.TextBubble","TextBubble","module$build$ts$sprite$TextBubble.default.TextBubble.STANDARD_DUR","STANDARD_DUR","timeStamp","getX","getY","clips","x1","x2","y1","y2","onRemovedAction","listener","screenRect","pointX","pointY","module$build$ts$sprite$TextBubble.default.TextBubble.adjustY","adjustY","removeTextBubble","topSprite","textSprites","this.onRemovedAction","expired","module$build$ts$util$BackgroundPainter.default","module$build$ts$util$BackgroundPainter.default.BackgroundPainter","BackgroundPainter","slices","bg","tileW","tileH","module$build$ts$sprite$AchievementBanner.default","module$build$ts$sprite$TextBubble.default.TextBubble.call","fontT","innerWidth","innerHeight","padding","icon","getTextDimensions","measureText","module$build$ts$sprite$AchievementBanner.default.AchievementBanner.adjustY","module$build$ts$sprite$AchievementBanner.default.AchievementBanner.STANDARD_DUR","targetX","targetY","iconX","iconY","textX","textY","drawY","ir","drawX","ic","fillStyle","fillText","module$build$ts$util$Color.default","module$build$ts$util$Color.default.Color","Color","module$build$ts$util$Color.default.Color.getStatBarColor","getStatBarColor","ratio","red","green","module$build$ts$util$Color.default.Color.AQUA","AQUA","module$build$ts$util$Color.default.Color.BLACK","BLACK","module$build$ts$util$Color.default.Color.BLUE","BLUE","module$build$ts$util$Color.default.Color.CYAN","CYAN","module$build$ts$util$Color.default.Color.DARKGRAY","DARKGRAY","module$build$ts$util$Color.default.Color.GRAY","GRAY","module$build$ts$util$Color.default.Color.GREEN","GREEN","module$build$ts$util$Color.default.Color.LIGHTGRAY","LIGHTGRAY","module$build$ts$util$Color.default.Color.MAGENTA","MAGENTA","module$build$ts$util$Color.default.Color.ORANGE","ORANGE","module$build$ts$util$Color.default.Color.PINK","PINK","module$build$ts$util$Color.default.Color.RED","RED","module$build$ts$util$Color.default.Color.VIOLET","VIOLET","module$build$ts$util$Color.default.Color.WHITE","WHITE","module$build$ts$util$Color.default.Color.YELLOW","YELLOW","module$build$ts$util$Color.default.Color.CREATURE","CREATURE","module$build$ts$util$Color.default.Color.DOMESTICANIMAL","DOMESTICANIMAL","module$build$ts$util$Color.default.Color.GHOST","GHOST","module$build$ts$util$Color.default.Color.GROUP","GROUP","module$build$ts$util$Color.default.Color.NPC","NPC","module$build$ts$util$Color.default.Color.PLAYER","PLAYER","module$build$ts$util$Color.default.Color.USER","USER","module$build$ts$util$Color.default.Color.BACKGROUND","BACKGROUND","module$build$ts$util$Color.default.Color.BLOCKED","BLOCKED","module$build$ts$util$Color.default.Color.COLLISION","COLLISION","module$build$ts$util$Color.default.Color.FLYOVER","FLYOVER","module$build$ts$util$Color.default.Color.PROTECTION","PROTECTION","module$build$ts$util$Color.default.Color.WALKBLOCK","WALKBLOCK","module$build$ts$util$Color.default.Color.MOVING","MOVING","module$build$ts$util$Color.default.Color.PORTAL","PORTAL","module$build$ts$util$Color.default.Color.PORTALOUTLINE","PORTALOUTLINE","module$build$ts$util$Color.default.Color.CHEST","CHEST","module$build$ts$util$NotificationType.default","module$build$ts$util$NotificationType.default.NotificationType","NotificationType","module$build$ts$util$Speech.default","module$build$ts$util$Speech.default.Speech","Speech","module$build$ts$util$Speech.default.Speech.drawBubble","drawBubble","tail","strokeRect","fillRect","beginPath","moveTo","lineTo","stroke","closePath","fill","module$build$ts$util$Speech.default.Speech.drawBubbleRounded","drawBubbleRounded","arc","quadraticCurveTo","module$build$ts$sprite$NotificationBubble.default","mtype","lmargin","profileName","nextline","words","wordbreak","linewrap","loadProfileSprite","module$build$ts$sprite$NotificationBubble.default.NotificationBubble.adjustY","module$build$ts$sprite$NotificationBubble.default.NotificationBubble.STANDARD_DUR","screenBottom","screenCenterX","lcount","longest","meas","lheight","lineWidth","strokeStyle","module$build$ts$sprite$SpeechBubble.default","module$build$ts$sprite$SpeechBubble.default.SpeechBubble","SpeechBubble","module$build$ts$sprite$SpeechBubble.default.SpeechBubble.adjustY","module$build$ts$sprite$SpeechBubble.default.SpeechBubble.STANDARD_DUR","overdraw","module$build$ts$ui$ViewPort.default","module$build$ts$ui$ViewPort.default.ViewPort","ViewPort","emojiSprites","weatherRenderer","joystick","startX","startY","mHandle","mHandle._onMouseDown","globalpopup","textBubbleAt","entityAt","onDrag","ground","mHandle.isRightClick","mHandle.onMouseUp","cleanUp","mHandle.onDrag","xDiff","yDiff","mHandle.cleanUp","_onMouseDown","module$build$ts$ui$ViewPort.default.ViewPort.get","module$build$ts$ui$ViewPort.default.ViewPort.instance","startTime","getTime","visibilityState","adjustView","drawEntitiesTop","drawEmojiSprites","drawTextSprites","time","setStatusBarOffset","drawTop","sgroup","setTransform","centerX","centerY","onExitZone","onMouseMove","onMouseWheel","currentDir","newDir","deltaY","draggedEntity","getEntitiesAt","drop","module$build$ts$Client.default.Client.handleClickIndicator","Client","handleClickIndicator","onContentMenu","module$build$ts$SingletonRepo.default","module$build$ts$SingletonRepo.default.singletons","module$build$ts$SingletonRepo.default.SingletonRepo","SingletonRepo","module$build$ts$SingletonRepo.default.SingletonRepo.getCStatus","getCStatus","module$build$ts$SingletonRepo.default.SingletonRepo.getCacheManager","getCacheManager","module$build$ts$SingletonRepo.default.SingletonRepo.getClient","getClient","module$build$ts$Client.default.Client.get","module$build$ts$SingletonRepo.default.SingletonRepo.getConfigManager","getConfigManager","module$build$ts$SingletonRepo.default.SingletonRepo.getEmojiStore","module$build$ts$SingletonRepo.default.SingletonRepo.getEventRegistry","getEventRegistry","module$build$ts$SingletonRepo.default.SingletonRepo.getGroupManager","getGroupManager","module$build$ts$SingletonRepo.default.SingletonRepo.getHTMLManager","getHTMLManager","module$build$ts$SingletonRepo.default.SingletonRepo.getInventory","module$build$ts$SingletonRepo.default.SingletonRepo.getKeyHandler","getKeyHandler","module$build$ts$SingletonRepo.default.SingletonRepo.getLoopedSoundSourceManager","getLoopedSoundSourceManager","module$build$ts$SingletonRepo.default.SingletonRepo.getMap","getMap","module$build$ts$SingletonRepo.default.SingletonRepo.getOutfitStore","getOutfitStore","module$build$ts$SingletonRepo.default.SingletonRepo.getPaths","getPaths","module$build$ts$SingletonRepo.default.SingletonRepo.getSessionManager","getSessionManager","module$build$ts$SingletonRepo.default.SingletonRepo.getSlashActionRepo","getSlashActionRepo","module$build$ts$SingletonRepo.default.SingletonRepo.getSoundManager","module$build$ts$SingletonRepo.default.SingletonRepo.getSpriteStore","getSpriteStore","module$build$ts$SingletonRepo.default.SingletonRepo.getTileStore","getTileStore","module$build$ts$SingletonRepo.default.SingletonRepo.getTouchHandler","getTouchHandler","module$build$ts$SingletonRepo.default.SingletonRepo.getViewPort","getViewPort","module$build$ts$SingletonRepo.default.SingletonRepo.getWeatherRenderer","module$build$ts$entity$Ground.default","module$build$ts$entity$Ground.default.Ground","Ground","worldX","worldY","dblclick","gameX","gameY","extend","module$build$ts$entity$Zone.default","module$build$ts$entity$Zone.default.Zone","Zone","xGrid","yGrid","localX","localY","drawHeight","drawWidth","sortEntities","entity1","entity2","rv","module$build$ts$ui$dialog$ApplicationMenuDialog.default","module$build$ts$ui$dialog$ApplicationMenuDialog.default.ApplicationMenuDialog","ApplicationMenuDialog","slashActions","module$build$ts$SingletonRepo.default.singletons.getSlashActionRepo","cmd","module$build$ts$ui$dialog$ChooseCharacterDialog.default","module$build$ts$ui$dialog$ChooseCharacterDialog.default.ChooseCharacterDialog","ChooseCharacterDialog","module$build$ts$ui$dialog$CreateAccountDialog.default","module$build$ts$ui$dialog$CreateAccountDialog.default.CreateAccountDialog","CreateAccountDialog","passwordRepeat","module$build$ts$ui$dialog$LoginDialog.default.LoginDialog","LoginDialog","module$build$ts$ui$dialog$LoginDialog.default","module$build$ts$ui$toolkit$Panel.default","module$build$ts$ui$toolkit$Panel.default.Panel","Panel","containerElement","module$build$ts$ui$toolkit$TabPanelComponent.default","module$build$ts$ui$toolkit$TabPanelComponent.default.TabPanelComponent","TabPanelComponent","module$build$ts$ui$toolkit$Panel.default.Panel.call","currentIndex","addTab","label","dataset","setCurrentTab","onTabClick","module$build$ts$ui$component$BagComponent.default","module$build$ts$ui$component$BagComponent.default.BagComponent","BagComponent","module$build$ts$ui$component$ItemInventoryComponent.default.ItemInventoryComponent.call","slotSize","module$build$ts$ui$component$BagComponent.default.BagComponent.counter","features","sizeArray","module$build$ts$ui$component$BuddyListComponent.default","module$build$ts$ui$component$BuddyListComponent.default.BuddyListComponent","BuddyListComponent","buddies","buddy","isOnline","status","lastHtml","buddyListUL","compare","buddyListComponent","arrayLength","module$build$ts$ui$dialog$ChatOptionsDialog.default","module$build$ts$ui$dialog$ChatOptionsDialog.default.ChatOptionsDialog","ChatOptionsDialog","custom_options","npc_options","not_attending","module$build$ts$util$Chat.default.Chat.options.length","original","module$build$ts$ui$dialog$ChatOptionsDialog.default.ChatOptionsDialog.aliases","aliases","addGroup","titleElement","keyword","onButtonPressed","module$build$ts$ui$dialog$EmojiMapDialog.default","module$build$ts$ui$dialog$EmojiMapDialog.default.EmojiMapDialog","EmojiMapDialog","emojiStore","emoji","module$build$ts$ui$component$ChatInputComponent.default","module$build$ts$ui$component$ChatInputComponent.default.ChatInputComponent","ChatInputComponent","module$build$ts$SingletonRepo.default.singletons.getConfigManager","inputElement","onKeyPress","history","historyIndex","btn_send","btn_keyword","btn_emoji","fromHistory","module$build$ts$ui$KeyHandler.default.KeyHandler.keycode.up","val","remember","module$build$ts$ui$component$ChatLogComponent.default","module$build$ts$ui$component$ChatLogComponent.default.ChatLogComponent","ChatLogComponent","onContextMenu","date","timestamp","chatElement","isAtBottom","scrollHeight","delims","inHighlight","inUnderline","inHighlightQuote","inUnderlineQuote","navigator","clipboard","unshift","getSelection","rangeCount","tags","RegExp","writeText","LogContextMenu","module$build$ts$ui$component$GroupMemberComponent.default","module$build$ts$ui$component$GroupMemberComponent.default.GroupMemberComponent","GroupMemberComponent","memberName","isUserLeader","playerName","module$build$ts$ui$component$GroupPanelComponent.default","module$build$ts$ui$component$GroupPanelComponent.default.GroupPanelComponent","GroupPanelComponent","newMode","isInGroup","renderGroupMembers","member","module$build$ts$ui$component$KeyringComponent.default","module$build$ts$ui$component$KeyringComponent.default.KeyringComponent","KeyringComponent","module$build$ts$ui$component$KeyringComponent.default.KeyringComponent.counter","module$build$ts$util$Direction.default","module$build$ts$util$Direction.default.Direction","Direction","dx","dy","module$build$ts$util$Direction.default.Direction.STOP","STOP","module$build$ts$util$Direction.default.Direction.UP","UP","module$build$ts$util$Direction.default.Direction.RIGHT","RIGHT","module$build$ts$util$Direction.default.Direction.DOWN","DOWN","module$build$ts$util$Direction.default.Direction.LEFT","LEFT","module$build$ts$util$Direction.default.Direction.VALUES","module$build$ts$util$MathUtil.default","module$build$ts$util$MathUtil.default.MathUtil","MathUtil","module$build$ts$util$MathUtil.default.MathUtil.compareDouble","compareDouble","d1","d2","module$build$ts$util$MathUtil.default.MathUtil.EPSILON","EPSILON","module$build$ts$entity$ActiveEntity.default","module$build$ts$entity$ActiveEntity.default.ActiveEntity","ActiveEntity","module$build$ts$entity$Entity.default.Entity.call","flying","numberValue","parseFloat","processPositioning","delta","stopped","step","oldX","oldY","collidesMap","endX","endY","thisStartX","thisStartY","thisEndX","thisEndY","isObstacle","otherStartX","otherStartY","otherEndY","otherEndX","oldx","oldy","speed","onMove","module$build$ts$util$Nature.default","module$build$ts$util$Nature.default.Nature","module$build$ts$util$Nature.default.Nature.CUT","CUT","module$build$ts$util$Nature.default.Nature.FIRE","FIRE","module$build$ts$util$Nature.default.Nature.ICE","ICE","module$build$ts$util$Nature.default.Nature.LIGHT","LIGHT","module$build$ts$util$Nature.default.Nature.DARK","DARK","module$build$ts$sprite$TextSprite.default","module$build$ts$sprite$TextSprite.default.TextSprite","TextSprite","lineJoin","strokeText","getTextMetrics","textMetrics","module$build$ts$sprite$Floater.default","module$build$ts$sprite$Floater.default.Floater","Floater","initTime","textSprite","textOffset","timeDiff","module$build$ts$sprite$EmojiSprite.default","module$build$ts$sprite$EmojiSprite.default.EmojiSprite","EmojiSprite","owner","module$build$ts$sprite$action$ActionSprite.default","module$build$ts$sprite$action$ActionSprite.default.ActionSprite","ActionSprite","module$build$ts$sprite$action$BarehandAttackSprite.default","module$build$ts$sprite$action$ActionSprite.default.ActionSprite.call","entityWidth","entityHeight","frameIndex","module$build$ts$sprite$action$MeleeAttackSprite.default","module$build$ts$sprite$action$RangedAttackSprite.default","dtime","yLength","xLength","yRow","module$build$ts$entity$RPEntity.default","module$build$ts$entity$RPEntity.default.RPEntity","module$build$ts$entity$ActiveEntity.default.ActiveEntity.apply","spritePath","titleStyle","floaters","statusBarYOffset","titleDrawYOffset","attackers","oldValue","change","addFloater","onHPChanged","_target","onTargeted","onAttackStopped","onXPChanged","onLevelChanged","msgtype","createTitleTextSprite","isAdmin","addEmoji","getTitle","addSpeechBubble","screenOffsetY","entityBottom","entityTop","HEALTH_BAR_HEIGHT","drawCombat","ellipse","xRad","yRad","SQRT2","drawMain","drawAttack","drawStatusIcons","outfit","drawMultipartOutfit","part","shadow","drawSpriteImage","octx","detail","hat","drawBustyDress","dress","colors","colorname","getFiltered","lsprite","ocanvas","castsShadow","shadow_style","drawAnimatedIcon","iconPath","fWidth","dimH","dimW","drawAnimatedIconWithFrames","nFrames","xdim","ydim","nextX","nDirections","animLength","opacity","opacity_orig","drawFloaters","topY","currentFloaters","floater","drawHealthBar","drawTitle","hpRatio","titleTextSprite","attacker","module$build$ts$entity$RPEntity.default.RPEntity.soundManager","module$build$ts$entity$Player.default","module$build$ts$entity$Player.default.Player","Player","module$build$ts$entity$RPEntity.default.RPEntity.apply","module$build$ts$entity$Player.default.Player.soundManager","isUnknown","isIgnored","canInviteToGroup","module$build$ts$ui$component$MiniMapComponent.default","module$build$ts$ui$component$MiniMapComponent.default.MiniMapComponent","MiniMapComponent","minimumScale","mapWidth","mapHeight","scale","zoneChange","createBackgroundImage","lastZone","bgImage","createImageData","isProtected","updateBasePosition","imageWidth","imageHeight","xpos","ypos","save","imageSmoothingEnabled","drawBackground","adj_scale","ho","vo","hc","vc","module$build$ts$ui$component$ZoneInfoComponent.default","module$build$ts$ui$component$ZoneInfoComponent.default.ZoneInfoComponent","ZoneInfoComponent","DANGER_LEVEL_DESCRIPTIONS","zoneinfo","dangerLevel","skulls","level","div","module$build$ts$ui$component$PlayerEquipmentComponent.default","module$build$ts$ui$component$PlayerEquipmentComponent.default.PlayerEquipmentComponent","PlayerEquipmentComponent","slotNames","slotSizes","slotImages","pouchVisible","showPouch","inv","show","prevState","module$build$ts$ui$component$StatusesListComponent.default","module$build$ts$ui$component$StatusesListComponent.default.StatusesListComponent","StatusesListComponent","user","changes","module$build$ts$ui$component$StatusesListComponent.default.StatusesListComponent.iconPaths","iconPaths","changed","updateInternal","choking","module$build$ts$ui$component$StatBarComponent.default","module$build$ts$ui$component$StatBarComponent.default.StatBarComponent","StatBarComponent","module$build$ts$ui$component$KarmaBarComponent.default","module$build$ts$ui$component$KarmaBarComponent.default.KarmaBarComponent","KarmaBarComponent","module$build$ts$ui$component$StatBarComponent.default.StatBarComponent.call","karma","lastChange","repValue","newKarma","describeKarma","calculateRepresentation","grad","createLinearGradient","addColorStop","atan","module$build$ts$entity$ItemMap.default","module$build$ts$entity$ItemMap.default.ItemMap","ItemMap","defaultUse","imap","getActions","concat","module$build$ts$entity$Item.default","module$build$ts$entity$Item.default.Item","Item","frameTimeStamp","xFrames","yFrames","quantityTextSprite","module$build$ts$entity$ItemMap.default.ItemMap.getActions","mi","drawAt","currentTimeStamp","getXFrameIndex","setXFrameIndex","module$build$ts$entity$ItemMap.default.ItemMap.getCursor","module$build$ts$ui$component$PlayerStatsComponent.default","module$build$ts$ui$component$PlayerStatsComponent.default.PlayerStatsComponent","PlayerStatsComponent","LEVELS","MONEY_SLOTS","bars","xp","statuses","hpText","otherText","isBarEnabled","updateKarma","updateHp","hp","base_hp","atk","lvl","updateOther","getReqXP","atkXP","defXP","xpTNL","mo","sname","bar","module$build$ts$ui$factory$DesktopUserInterfaceFactory.default","module$build$ts$ui$factory$DesktopUserInterfaceFactory.default.DesktopUserInterfaceFactory","DesktopUserInterfaceFactory","topPanel","leftPanel","socialPanel","rightPanel","keyring","bottomPanel","panel","module$build$ts$util$DialogHandler.default","module$build$ts$util$DialogHandler.default.DialogHandler","DialogHandler","module$build$ts$Client.default","module$build$ts$Client.default.Client","unloading","module$build$ts$Client.default.Client.instance","module$build$ts$SingletonRepo.default.singletons.getPaths","module$build$ts$SingletonRepo.default.singletons.getSessionManager","initData","module$build$ts$SingletonRepo.default.singletons.getInventory","module$build$ts$SingletonRepo.default.singletons.getHTMLManager","module$build$ts$SingletonRepo.default.singletons.getTouchHandler","module$build$ts$SingletonRepo.default.singletons.getViewPort","module$build$ts$SingletonRepo.default.singletons.getCacheManager","module$build$ts$SingletonRepo.default.singletons.getCStatus","module$build$ts$SingletonRepo.default.singletons.getGroupManager","module$build$ts$SingletonRepo.default.singletons.getOutfitStore","module$build$ts$SingletonRepo.default.singletons.getSpriteStore","module$build$ts$SingletonRepo.default.singletons.getMap","startup","devWarning","sparams","searchParams","URL","module$build$ts$SingletonRepo.default.singletons.getEventRegistry","module$build$ts$SingletonRepo.default.singletons.getTileStore","registerMarauroaEventHandlers","registerBrowserEventHandlers","module$build$ts$data$Paths.default.Paths.ws.substring","checkConnection","tries","readyState","OPEN","marauroa.clientFramework.onDisconnect","module$build$ts$Client.default.Client.instance.unloading","marauroa.clientFramework.onLoginRequired","currentUrl","encodeURI","pathname","hash","marauroa.clientFramework.onCreateAccountAck","marauroa.clientFramework.onCreateCharacterAck","marauroa.clientFramework.onLoginFailed","_reason","_text","marauroa.clientFramework.onAvailableCharacterDetails","marauroa.clientFramework.onTransferREQ","marauroa.clientFramework.onTransfer","marauroa.perceptionListener.onPerceptionEnd","loaded","keyHandler","module$build$ts$SingletonRepo.default.singletons.getKeyHandler","preventContextMenu","menubutton","dialogState","menuContent","menuFrame","soundbutton","onSoundToggled","click_indicator","click_indicator.onload","unmuted","paused","errmsg","module$build$ts$Client.default.Client.click_indicator_id","click_indicator_id","clearTimeout","module$build$ts$action$MenuItem.default","module$build$ts$action$MenuItem.default.MenuItem","MenuItem","module$build$ts$data$ImageWithDimensions.default","module$build$ts$entity$Blood.default","module$build$ts$entity$Blood.default.Blood","Blood","module$build$ts$entity$PopupInventory.default","module$build$ts$entity$PopupInventory.default.PopupInventory","PopupInventory","checkPlayerDistance","tx_right","ox_right","ty_bottom","oy_bottom","x_dist","y_dist","distToClose","closeInventoryWindow","module$build$ts$entity$Chest.default","module$build$ts$entity$Chest.default.Chest","Chest","OPEN_SPRITE","CLOSED_SPRITE","module$build$ts$entity$PopupInventory.default.PopupInventory.apply","openInventoryWindow","invComponent","module$build$ts$entity$Corpse.default","module$build$ts$entity$Corpse.default.Corpse","Corpse","autoOpenedAlready","bloodEnabled","autoOpenIfDesired","closeCorpseInventory","openCorpseInventory","content_row","content_col","that","module$build$ts$entity$Creature.default","module$build$ts$entity$Creature.default.Creature","Creature","module$build$ts$entity$Creature.default.Creature.soundManager","module$build$ts$entity$DomesticAnimal.default","module$build$ts$entity$DomesticAnimal.default.DomesticAnimal","DomesticAnimal","module$build$ts$entity$DomesticAnimal.default.DomesticAnimal.soundManager","species","playerOwned","_entity","module$build$ts$entity$Portal.default","module$build$ts$entity$Portal.default.Portal","Portal","module$build$ts$entity$Door.default","module$build$ts$entity$Door.default.Door","Door","module$build$ts$entity$Portal.default.Portal.apply","module$build$ts$entity$Food.default","module$build$ts$entity$Food.default.Food","Food","_amount","module$build$ts$entity$GameBoard.default","module$build$ts$entity$GameBoard.default.GameBoard","GameBoard","module$build$ts$entity$Gate.default","module$build$ts$entity$Gate.default.Gate","Gate","_image","yStart","module$build$ts$entity$GrowingEntitySpawner.default","module$build$ts$entity$GrowingEntitySpawner.default.GrowingEntitySpawner","GrowingEntitySpawner","class_name","module$build$ts$entity$NPC.default","module$build$ts$entity$NPC.default.NPC","module$build$ts$entity$RPEntity.default.RPEntity.call","module$build$ts$entity$NPC.default.NPC.soundManager","module$build$ts$entity$Sign.default","module$build$ts$entity$Sign.default.Sign","Sign","module$build$ts$entity$TrainingDummy.default","module$build$ts$entity$TrainingDummy.default.TrainingDummy","TrainingDummy","module$build$ts$entity$NPC.default.NPC.apply","module$build$ts$entity$TrainingDummy.default.TrainingDummy.soundManager","module$build$ts$entity$UnknownEntity.default","module$build$ts$entity$UnknownEntity.default.UnknownEntity","UnknownEntity","module$build$ts$entity$UseableEntity.default","module$build$ts$entity$UseableEntity.default.UseableEntity","UseableEntity","module$build$ts$ui$dialog$outfit$OutfitPartSelector.default","module$build$ts$ui$dialog$outfit$OutfitPartSelector.default.OutfitPartSelector","OutfitPartSelector","initialIndex","maxindex","onPartChanged","_part","_onPartChanged","_index","_maxindex","margin","_ctx","_width","_height","_color","indexString","_getPartSprite","previous","numOutfits","next","fname","$jscomp.global.Object.defineProperties","newIndex","newColor","module$build$ts$ui$dialog$outfit$OutfitColorSelector.default","module$build$ts$ui$dialog$outfit$OutfitColorSelector.default.OutfitColorSelector","OutfitColorSelector","gradientCanvas","onColorChanged","gradCtx","baseImage","_createBaseImage","_enabled","_x","_y","hX","_onMouseMove","_onMouseDownGrad","_onMouseMoveGrad","_rgbToCssString","_drawSelection","_drawGradientPart","gradient","stops","_calculateGradientStops","rgbLeft","hslLeft","rgbMiddle","hslMiddle","rgbRight","hslRight","module$build$ts$ui$dialog$outfit$OutfitPaletteColorSelector.default","module$build$ts$ui$dialog$outfit$OutfitPaletteColorSelector.default.OutfitPaletteColorSelector","OutfitPaletteColorSelector","module$build$ts$ui$dialog$outfit$OutfitColorSelector.default.OutfitColorSelector.call","_blockWidth","_blockHeight","hues","saturations","hsMap","sat","_createColorMap","_hsMap","_colorMap","blockWidth","blockHeight","hs","bestDelta","MAX_VALUE","hueDelta","satDelta","module$build$ts$ui$dialog$outfit$OutfitDialog.default","module$build$ts$ui$dialog$outfit$OutfitDialog.default.OutfitDialog","createDialog","currentOutfit","hatSelector","makeSelector","hairSelector","maskSelector","eyesSelector","mouthSelector","headSelector","bodySelector","dressSelector","hairColorSelector","createColorSelector","eyesColorSelector","dressColorSelector","skinColorSelector","drawComposite","onCancel","onApply","initialColorValue","colorName","layer_color","classObject","$jscomp.getRestArguments.apply","toggle","partSelectors","partSelector","initialColor","module$build$ts$entity$User.default","module$build$ts$entity$User.default.User","User","module$build$ts$entity$Player.default.Player.call","module$build$ts$SingletonRepo.default.singletons.getLoopedSoundSourceManager","onEnterZone","addSource","musicname","playLocalizedLoop","module$build$ts$entity$User.default.User.soundManager","parent","outfitDialog","hearingRange","msgs","removed","loopSources","curLayer","gman","module$build$ts$entity$VisibleEntity.default","module$build$ts$entity$VisibleEntity.default.VisibleEntity","VisibleEntity","module$build$ts$entity$WalkBlocker.default","module$build$ts$entity$WalkBlocker.default.WalkBlocker","WalkBlocker","module$build$ts$entity$EntityRegistry.default","module$build$ts$sprite$EmptySprite.default","module$build$ts$sprite$EmptySprite.default.EmptySprite","EmptySprite","module$build$ts$sprite$Sprite.default","module$build$ts$sprite$Sprite.default.Sprite","Sprite","module$build$ts$sprite$ImageSprite.default","module$build$ts$sprite$ImageSprite.default.ImageSprite","ImageSprite","module$build$ts$sprite$ImageSprite.default.ImageSprite.createCompatibleImage","createCompatibleImage","destx","desty","module$build$ts$sprite$Tileset.default"]
}
